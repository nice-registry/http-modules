{"name":"seneca-context","version":"0.4.2","description":"Generate a context object based on an HTTP request and easily access it any seneca services involved in processing that request.","main":"index.js","scripts":{"test":"mocha -r ./test/init.js './test/**/*.test.js'","postversion":"git push && git push origin v${npm_package_version}"},"repository":"https://github.com/LSEducation/seneca-context","keywords":["seneca"],"license":"MIT","homepage":"https://github.com/LSEducation/seneca-context","dependencies":{"debug":"^2.2.0","urlsafe-base64":"^1.0.0"},"peerDependencies":{"seneca":">=0.7.1 < 1.1.0"},"devDependencies":{"body-parser":"^1.14.1","chai":"^3.3.0","express":"^4.13.3","mocha":"^2.3.3","seneca":"^1.0.0","vasync":"^1.6.3"},"gitHead":"1e0c8d36c5be4b661b062754c01f064de47873c4","versions":[{"number":"0.2.0","date":"2015-10-13T15:54:41.656Z"},{"number":"0.3.0","date":"2015-10-14T09:25:28.361Z"},{"number":"0.4.0","date":"2015-10-29T11:01:49.249Z"},{"number":"0.4.1","date":"2016-01-08T14:25:43.783Z"},{"number":"0.4.2","date":"2016-01-12T12:14:20.820Z"}],"readme":"# seneca-context\n\nGenerate a context object based on an HTTP request and easily access it any seneca services involved in processing of that request.\n\n## Installation\n\n```\nnpm install --save seneca-context\n```\n\n## Basic Usage\n\nSee also the `example` and `test` directories.\n\n```\nvar seneca = require('seneca')();\n\nseneca.add('role:api,path:work', function (message, done) {\n  // context is implicitly propagated to the next seneca action\n  this.act('role:worker,cmd:work', done);\n});\nseneca.add('role:worker,cmd:work', function (message, done) {\n  // context is accessible at the `context$` property of the message\n  done(null, message.context$);\n});\n\n// Creates the context from HTTP requests and propagates it to all actions within the transaction.\nseneca.use('seneca-context/plugins/setContext');\n\n// Adds the `context$` property to the incoming messages matching the `pin`.\nseneca.use('seneca-context/plugins/getContext', {pin: 'role:worker'});\n\nseneca.act('role:web', {\n  use: {\n    prefix: '/api',\n    pin: 'role:api,path:*',\n    map: {\n      work: {GET: true}\n    }\n  }\n});\n\n// start express\nvar app = require('express')();\napp.use(require('body-parser').json());\napp.use(seneca.export('web'));\napp.listen(3000);\n```\n\nTest that it works.\n\n```\ncurl -m 1  -H 'X-Request-Id: hello-world' http://localhost:3000/api/work\n```\n\n## API\n\nTODO\n\nFor now, see comments in index.js\n","created":"2015-10-13T15:54:41.656Z","modified":"2016-01-12T12:14:20.820Z","lastPublisher":{"name":"eoinsha","email":"eoin.shanaghy@gmail.com"},"owners":[{"name":"eoinsha","email":"eoin.shanaghy@gmail.com"},{"name":"gkubisa","email":"gkubisa@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"seneca-context","_nodeVersion":"4.2.3","_npmUser":{"name":"eoinsha","email":"eoin.shanaghy@gmail.com"},"_npmVersion":"2.14.7","_rev":"1-7c1c3e55dfc5696e526157ef562a7540","_shasum":"869c7758ca2776e8af66ab68a7b49b942a600c66","author":{"name":"Greg Kubisa","email":"gkubisa@gmail.com"},"bugs":{"url":"https://github.com/LSEducation/seneca-context/issues"},"directories":{},"dist-tags":{"latest":"0.4.2"},"dist":{"shasum":"869c7758ca2776e8af66ab68a7b49b942a600c66","tarball":"http://registry.npmjs.org/seneca-context/-/seneca-context-0.4.2.tgz"},"maintainers":[{"name":"eoinsha","email":"eoin.shanaghy@gmail.com"},{"name":"gkubisa","email":"gkubisa@gmail.com"}],"readmeFilename":"README.md","time":{"modified":"2016-01-12T12:14:20.820Z","created":"2015-10-13T15:54:41.656Z","0.2.0":"2015-10-13T15:54:41.656Z","0.3.0":"2015-10-14T09:25:28.361Z","0.4.0":"2015-10-29T11:01:49.249Z","0.4.1":"2016-01-08T14:25:43.783Z","0.4.2":"2016-01-12T12:14:20.820Z"}}}