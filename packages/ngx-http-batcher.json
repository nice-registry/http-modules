{"name":"ngx-http-batcher","version":"1.0.4","description":"Angular (2+) HTTP batching module to reduce the number of HTTP requests and increase performance","scripts":{"build":"ngc -p ./src","test":"karma start ./tests/karma.conf.js","bundle":"npm run build && webpack && gulp compress","postbundle":"copy \"package.json\" \"dist/package.json\" && copy \"CHANGELOG.md\" \"dist/CHANGELOG.md\" && copy \"README.md\" \"dist/README.md\"","lint":"tslint -c tslint.json \"src/**/*.ts\""},"keywords":["ng","ngx","angular","angular-2","http-batching","http","batching","performance","http performance"],"license":"MIT","main":"./bundles/ngx-http-batcher.umd.js","module":"./index.js","types":"./index.d.ts","devDependencies":{"@angular/common":"^4.1.1","@angular/compiler-cli":"^4.1.1","@angular/platform-browser":"^4.1.1","@angular/platform-browser-dynamic":"^4.1.1","@types/jasmine":"^2.5.47","@types/node":"^7.0.18","clean-webpack-plugin":"^0.1.16","gulp":"^3.9.1","gulp-minify":"0.0.15","jasmine":"^2.6.0","karma":"^1.6.0","karma-chrome-launcher":"^2.0.0","karma-coverage":"^1.1.1","karma-coverage-istanbul-reporter":"^1.2.0","karma-jasmine":"^1.1.0","karma-jasmine-html-reporter":"^0.2.2","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^2.0.3","systemjs":"^0.20.12","ts-helpers":"^1.1.2","ts-loader":"^2.0.3","tslint":"^5.2.0","tslint-loader":"^3.5.3","typescript":"^2.3.2","uglify-js":"^2.8.23","webpack":"^2.5.1"},"dependencies":{"@angular/compiler":"^4.1.1","@angular/core":"^4.1.1","@angular/http":"^4.1.1","rxjs":"^5.3.0","zone.js":"^0.8.9"},"_resolved":"file:dist","versions":[{"number":"1.0.0","date":"2017-05-07T02:46:42.893Z"},{"number":"1.0.1","date":"2017-05-07T03:05:03.060Z"},{"number":"1.0.2","date":"2017-05-07T23:07:33.198Z"},{"number":"1.0.3","date":"2017-05-16T07:56:14.132Z"},{"number":"1.0.4","date":"2017-05-19T23:37:39.738Z"}],"readme":"# ngx-http-batcher\r\n\r\nAngular (2+) HTTP batching module to reduce the number of HTTP requests and increase performance\r\n\r\n[![Build Status](https://travis-ci.org/jonsamwell/ngx-http-batcher.svg?branch=master)](https://travis-ci.org/jonsamwell/ngx-http-batcher)\r\n\r\n\r\nOne of the biggest, yet relatively unknown performance boosts you will get with modern web applications is to reduce the number of HTTP request an application makes.  All you need to do is configure the batch endpoint with the library and the rest is taken care of!\r\n\r\nWorking demo https://plnkr.co/edit/OgvZ09iYO64VoXHLRGQa?p=preview\r\n\r\n## Table of contents:\r\n- [Get Started](#get-started)\r\n  - [Installation](#installation)\r\n  - [Examples](#examples)\r\n  - [Usage](#usage)\r\n- [Configuration Object Options](#configuration)\r\n  - [Endpoint Url](#config-endpointurl)\r\n  - [Batch Endpoint Url](#config-batchurl)\r\n  - [Enabled](#config-enabled)\r\n  - [Min Requests Per Batch](#config-minRequestsPerBatch)\r\n  - [Max Requests Per Batch](#config-maxRequestsPerBatch)\r\n  - [Batch Request Collection Delay Milliseconds](#config-batchRequestCollectionDelayMilliseconds)\r\n  - [Ignored Http Verbs](#config-ignoredHttpVerbs)\r\n  - [Send Cookies](#config-sendCookies)\r\n  - [Unique Request Name (content-dispositon header)](#config-uniqueRequestName)\r\n  - [Http Batching Adapter](#config-httpBatchingAdapter)\r\n  - [On Before Send Batch Request Handler](#config-onBeforeSendBatchRequest)\r\n- [.Net WebApi Configuation](#config-net)\r\n- [Configuring for Java Servlet <= 3.1](#config-javaservlet)\r\n\r\n\r\n## <a name=\"get-started\"></a> Get Started\r\n\r\n### <a name=\"installation\"></a> Installation\r\n\r\nYou can install this package locally with npm.\r\n\r\n```bash\r\nnpm install ngx-http-batcher --save\r\n```\r\n\r\n### <a name=\"examples\"></a> Examples\r\nYou can see a working Plunker here https://plnkr.co/edit/OgvZ09iYO64VoXHLRGQa?p=preview\r\nThere isn't much too visually see but you will want to open up the network tab on the dev tools and look for a request will '$batch'.  This the the actual batch request for 3 seperate normal http requests.\r\n\r\n### <a name=\"usage\"></a> Usage\r\n`NgxHttpBatcherModule` should be registered in the `AppModule` imports.  This module relies on the Angular HttpModule so ensure that is also imported.\r\n\r\nThe below bit of code is everything you need to get going.  However, I'll explain it below.\r\n\r\n```javascript\r\nimport { BrowserModule } from \"@angular/platform-browser\";\r\nimport { NgModule } from \"@angular/core\";\r\nimport { HttpModule, Http } from \"@angular/http\";\r\nimport { NgxHttpBatcherModule,\r\n         HttpBatchConfiguration,\r\n         HttpBatchConfigurationCollection,\r\n         HttpBatcher } from \"ngx-http-batcher\";\r\n\r\nimport { AppComponent } from \"./app.component\";\r\n\r\n// Exported function so that HttpBatchConfigurationCollection can be used as in DI.\r\n// Having this as an exported function enabled AOT complication as well :-)\r\nexport function httpBatchConfigurationFactory() {\r\n  return new HttpBatchConfigurationCollection([\r\n    // this is a basic configuration object see [Configuration Object Options]\r\n    // for more information on all the options\r\n    new HttpBatchConfiguration({\r\n      rootEndpointUrl: \"https://api.myservice.com\",\r\n      batchEndpointUrl: \"https://api.myservice.com/$batch\"\r\n    })]);\r\n};\r\n\r\n// Note the providers block where the Http class is being replaced by the HttpBatcher class.\r\n// This ensures that if you inject the Http service into something you actually get the\r\n// HttpBatcher class and batching becomes transparent to you.\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    HttpModule,\r\n    NgxHttpBatcherModule\r\n  ],\r\n  providers: [\r\n    { provide: HttpBatchConfigurationCollection, useFactory: httpBatchConfigurationFactory },\r\n    { provide: Http, useClass: HttpBatcher }\r\n  ],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n```\r\n\r\nThen you can just use the Http service as you normally would safe in the knowlegde that requests to you batchable service (configured above) will be batched.\r\n\r\n```javascript\r\nimport { Component } from \"@angular/core\";\r\nimport { Http } from \"@angular/http\";\r\n\r\n@Component({\r\n  selector: \"app-root\",\r\n  templateUrl: \"./app.component.html\",\r\n  styleUrls: [\"./app.component.css\"]\r\n})\r\nexport class AppComponent {\r\n  public somedata: string[];\r\n  public otherdata: string[];\r\n\r\n  public constructor(private http: Http) {\r\n    http.get(\"https://api.myservice.com/somedata\")\r\n        .subscribe(response => this.somedata = response.json());\r\n    http.get(\"https://api.myservice.com/otherdata/123-456\")\r\n        .subscribe(response => this.otherdata = response.json());\r\n    http.put(\"https://api.myservice.com/jobs\", { id: 1, name: \"Angular Wizard\" })\r\n        .subscribe();\r\n  }\r\n}\r\n```\r\n\r\n\r\n### <a name=\"configuration\"></a> Configuration\r\n\r\nBelow are all the configuration options for a single batch endpoint.  Note that you can have as many batch endpoints as you want but you would need a seperate configuraiton object for each one.\r\n\r\n### <a name=\"config-endpointurl\"></a> Endpoint Url\r\nThe root endpoint url which is used to determine if the http call is destinted to an endpoint that can be batched.\r\nFor example you endpoint might be:\r\n\r\n```https://api.myservice.com```\r\n\r\nCalls to ```https//api.myservice.com/users``` or ```https//api.myservice.com/users/fdfkhdf-3432e23wd/friends?limit=10&from=0``` would be batched.\r\nCalls to ```https://qa.myservice.com/bugs``` would not be batched as the subdomain are different.\r\n\r\n### <a name=\"config-batchurl\"></a> Batch Endpoint Url\r\nThe url of the exposed batch endpoint that is associated with the service defined in rootEndpointUrl.\r\n\r\nFor example\r\n\r\n```https://api.myservice.com/$batch```\r\n\r\n### <a name=\"config-enabled\"></a> Enabled\r\nThis optional parameter defaults to true.  If false calls that would normally be batched to this endpoint will just be passed through as normal HTTP calls.\r\n\r\n### <a name=\"config-minRequestsPerBatch\"></a> Min Requests Per Batch\r\nThe minimum number of http requests that trigger a batch request to be sent.\r\n\r\nHttp calls are batched into groups.  There is no point batching a single http call therefore the default smallest batch size is 2.\r\n\r\n### <a name=\"config-maxRequestsPerBatch\"></a> Max Requests Per Batch\r\nThe maximum number of http requests that can be batched in a single batch request.\r\n\r\nHttp calls are batched into groups.  Batching hundreds of http calls into a single batch request might be unwise due to string processing times and the fact that you would not be taking advantage of being able to send to more than one http request to the same host of once.  Therefore, the default max batch size is 20.\r\n\r\n### <a name=\"config-batchRequestCollectionDelayMilliseconds\"></a> Batch Request Collection Delay Milliseconds\r\nThe period of time to wait in milliseconds between recieving the first http request and sending the batch.\r\n\r\nThis is undoubtedly the most important option. As this module tries to be as transparent as possible to the user.\r\n\r\nThe default time in milliseconds the http batcher should wait to collection all request to this domain after the first http call that can be batched has been collect. This defaults to 75ms. Therefore if you send a HTTP GET call that can be batched the HTTP batcher will receive this call and wait a further 75ms before sending the call in order to wait for other calls to the same domain in order to add them to the current batch request. If no other calls are collected the initial HTTP call will be allowed to continue as normal and will not be batched unless the config property - minRequestBatchSize is set to 2.\r\n\r\n### <a name=\"config-ignoredHttpVerbs\"></a> Ignored Http Verbs\r\nRequests with these http verbs will be ignored and not form part of the batch.\r\n\r\nBy default http requests with the verbs 'HEAD' & 'OPTIONS' are ignored.\r\n\r\n### <a name=\"config-sendCookies\"></a> Send Cookies\r\nTrue to send cookies, defaults to false to reduce request size.\r\n\r\nIf this is set to true cookies available on the document.cookie property will be set in each segment of a batch request. Note that only non HTTPOnly cookies will be sent as HTTPOnly cookies cannot be access by JavaScript because of security limitations.\r\n\r\n### <a name=\"config-uniqueRequestName\"></a> Unique Request Name\r\nAn optional parameter to set a unique parameter name on the Content-Disposition header. This requires the a 'Content-Disposition' header is first set on the initial request sending in a Content-Disposition header. Sample configuration:\r\n\r\nSome backend servers may require that each part be named in this manner. If the configuration above is used, then each part will have a header like this: Content-Disposition: form-data; name=batchRequest0\r\n\r\nIf a Content-Disposition header is not added in the request then this parameter is silently ignored.\r\n\r\n## <a name=\"config-net\"></a> Configuring .Net WebApi to accept batch requests\r\n\r\nThis is really simple the web api team have done a really good job here. To enable batch request handling you just add a new route to your application and the rest is done for you! It's so easy I don't see any reason for you not to do it! See this link for a more detailed setup guide. Just add the below code to your web api configuration class and you are good to go!\r\n\r\n```\r\nconfiguration.Routes.MapHttpBatchRoute(\r\n        routeName:\"batch\",\r\n        routeTemplate:\"$batch\",\r\n        batchHandler:new DefaultHttpBatchHandler(server));\r\n```\r\n\r\n## <a name=\"config-javaservlet\"></a> Configuring for Java Servlet <= 3.1\r\n\r\nJava Servlet <= 3.1 parses multipart requests looking for the Content-Disposition header, expecting all multipart requests to include form data. It also expects a content disposition header per request part in the batch.\r\n\r\nTherefore you will need to setup the library to do this. Add a 'Content-Disposition' header of 'form-data' and set the 'Unique Request Name' configuration option.\r\n\r\n\r\n\r\n","created":"2017-05-07T02:46:42.893Z","modified":"2017-05-19T23:37:39.738Z","lastPublisher":{"name":"jonsamwell","email":"jonsamwell@gmail.com"},"owners":[{"name":"jonsamwell","email":"jonsamwell@gmail.com"}],"other":{"_attachments":{},"_from":"dist","_id":"ngx-http-batcher","_nodeVersion":"7.0.0","_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/ngx-http-batcher-1.0.4.tgz_1495237059597_0.822814182844013"},"_npmUser":{"name":"jonsamwell","email":"jonsamwell@gmail.com"},"_npmVersion":"3.10.8","_rev":"5-f08c138ef1984e7cce498b83b6d680a5","_shasum":"271bde092c6b8bfd8569a6f683b5360ca3c354b7","author":{"name":"Jon Samwell","email":"jonsamwell@gmail.com"},"directories":{},"dist-tags":{"latest":"1.0.4"},"dist":{"shasum":"271bde092c6b8bfd8569a6f683b5360ca3c354b7","tarball":"https://registry.npmjs.org/ngx-http-batcher/-/ngx-http-batcher-1.0.4.tgz"},"maintainers":[{"name":"jonsamwell","email":"jonsamwell@gmail.com"}],"readmeFilename":"README.md","time":{"modified":"2017-05-19T23:37:39.738Z","created":"2017-05-07T02:46:42.893Z","1.0.0":"2017-05-07T02:46:42.893Z","1.0.1":"2017-05-07T03:05:03.060Z","1.0.2":"2017-05-07T23:07:33.198Z","1.0.3":"2017-05-16T07:56:14.132Z","1.0.4":"2017-05-19T23:37:39.738Z"}}}