{"name":"light-router","version":"0.1.3","description":"A node.js perfomance efficient http router.","main":"index.js","scripts":{"test":"node ./node_modules/.bin/nodeunit test"},"repository":"https://github.com/herenow/light-router","keywords":["light-router","router","http-router"],"license":"MIT","homepage":"https://github.com/herenow/light-router","devDependencies":{"benchmark":"*","nodeunit":"*"},"dependencies":{},"gitHead":"221581bb6ca0458a930bba124ec8af94e091bdbb","versions":[{"number":"0.0.1","date":"2014-05-30T03:52:08.247Z"},{"number":"0.0.11","date":"2014-05-30T04:13:01.211Z"},{"number":"0.0.2","date":"2014-05-31T21:15:57.086Z"},{"number":"0.0.21","date":"2014-06-01T10:46:25.409Z"},{"number":"0.0.211","date":"2014-06-01T10:50:21.494Z"},{"number":"0.0.22","date":"2014-06-02T08:23:58.929Z"},{"number":"0.0.3","date":"2014-06-15T20:48:31.600Z"},{"number":"0.0.31","date":"2014-06-15T21:00:38.466Z"},{"number":"0.1.0","date":"2014-06-16T08:02:06.549Z"},{"number":"0.1.1","date":"2014-06-16T10:48:37.094Z"},{"number":"0.1.11","date":"2014-06-16T11:01:28.297Z"},{"number":"0.1.2","date":"2014-07-13T18:24:25.633Z"},{"number":"0.1.3","date":"2016-10-09T16:02:07.651Z"}],"readme":"light-router\n============\n[![Build Status](https://travis-ci.org/herenow/light-router.svg?branch=master)](https://travis-ci.org/herenow/light-router)\n\nA router for node.js performance junkies :)\n\nNote that this router is not as flexible as other routers, it is mostly useful for building simple APIs that don't depend on complex middleware schemes.\n\n\nWhy?\n---------\nMost node.js http routers I tested had a really high overhead for a router, and in some cases it became the bottleneck of really simple API's I wrote. [See benchmarks below](#benchmarks)\n\n\nInstall\n---------\n```\nnpm install light-router\n```\n\nSample usage\n---------\n```javascript\nvar http   = require('http')\nvar router = require('light-router')\n\n//Start an http server and pass all requests to light-router\nhttp.createServer(router).listen(80)\n\n//Set a route and its handler fnc\nrouter.get('/v1/hello/:user', function(req, res) {\n  res.end('Hello, ' + req.params.user)\n})\n```\n\n* Note that this module has a singleton design pattern.\n* The only thing that this router does to the `req` object is attach params.\n\n\nFeatures\n----------\n* **Hashtable based** routing\n* **RegExp** for parameter testing\n* **404**, set custom not found handler\n\n\nMethods overview\n------------\nI recommend reading everything if you want to get a general overview of the architecture of this router.\n\n####router[method]\\(route, handler)\nThe following http methods are avaialble: **get, post, put, head, delete, options, trace, connect**\nWriting routes follows the express/rails model. You can write **:param** to extract params from the request url and **:param(regexp)** to create rules for the parameter. **Be careful with the order you declare your routes!**\n\n```javascript\n//Will only match integer userIDs\nrouter.get('/v1/user/:id([0-9])', function(req, res) {\n  res.end('Your numeric userID is: ' + req.params.id)\n})\n\n//Will only match all other ids that werent numerical only\nrouter.get('/v1/user/:id)', function(req, res) {\n  res.end('Your userID is: ' + req.params.id)\n})\n```\n\n\n<a name=\"benchmarks\"></a>Benchmarks\n---------\n\n**Controll benchmark**\n```javascript\nrequire('http').createServer(function(req, res) {\n  res.end('benchmark')\n}).listen(2048)\n```\n```\n$ wrk http://127.0.0.1:2048/\nRunning 10s test @ http://127.0.0.1:2048/\n  2 threads and 10 connections\n  Thread Stats   Avg      Stdev     Max   +/- Stdev\n    Latency   819.22us  229.24us   5.89ms   75.51%\n    Req/Sec     6.41k     1.00k   10.11k    73.97%\n  121048 requests in 10.00s, 14.66MB read\nRequests/sec:  12108.13\nTransfer/sec:      1.47MB\n```\n\n**Light-router server**\n```javascript\nvar router = require('light-router')\n\nrequire('http').createServer(router).listen(2048)\n\nfunction respond(req, res) {\n  res.end('benchmark')\n}\n\nrouter.get('/v1', respond)\nrouter.get('/v1/hello', respond)\nrouter.get('/v1/user/:id', respond)\nrouter.get('/v1/user/status/:id', respond)\nrouter.get('/v1/register/status/:id([0-9])', respond)\nrouter.get('/v1/emails/:provider', respond)\nrouter.get('/v1/time/:gmt(^\\\\+[0-9]{1,2}$)', respond)\n```\n```\n$ wrk http://127.0.0.1:2048/v1\nRunning 10s test @ http://127.0.0.1:2048/v1\n  2 threads and 10 connections\n  Thread Stats   Avg      Stdev     Max   +/- Stdev\n    Latency   832.37us  217.49us   4.91ms   70.42%\n    Req/Sec     6.38k     1.05k    9.78k    75.36%\n  120081 requests in 10.00s, 14.54MB read\nRequests/sec:  12008.41\nTransfer/sec:      1.45MB\n\n$ wrk http://127.0.0.1:2048/v1/hello\nRunning 10s test @ http://127.0.0.1:2048/v1/hello\n  2 threads and 10 connections\n  Thread Stats   Avg      Stdev     Max   +/- Stdev\n    Latency     0.91ms  301.47us   4.45ms   72.08%\n    Req/Sec     5.95k     1.22k    9.78k    72.87%\n  113005 requests in 10.00s, 13.69MB read\nRequests/sec:  11301.01\nTransfer/sec:      1.37MB\n\n$ wrk http://127.0.0.1:2048/v1/user/123\nRunning 10s test @ http://127.0.0.1:2048/v1/user/123\n  2 threads and 10 connections\n  Thread Stats   Avg      Stdev     Max   +/- Stdev\n    Latency     1.02ms  280.66us   6.61ms   73.87%\n    Req/Sec     5.20k   843.66     8.22k    74.29%\n  98300 requests in 10.00s, 11.91MB read\nRequests/sec:   9830.29\nTransfer/sec:      1.19MB\n\n$ wrk http://127.0.0.1:2048/v1/user/status/123\nRunning 10s test @ http://127.0.0.1:2048/v1/user/status/123\n  2 threads and 10 connections\n  Thread Stats   Avg      Stdev     Max   +/- Stdev\n    Latency     1.03ms  398.93us   8.79ms   93.82%\n    Req/Sec     5.21k     0.99k    8.44k    72.60%\n  98501 requests in 10.00s, 11.93MB read\nRequests/sec:   9850.42\nTransfer/sec:      1.19MB\n\n$ wrk http://127.0.0.1:2048/v1/register/status/123\nRunning 10s test @ http://127.0.0.1:2048/v1/register/status/123\n  2 threads and 10 connections\n  Thread Stats   Avg      Stdev     Max   +/- Stdev\n    Latency     1.04ms  398.05us  12.47ms   92.14%\n    Req/Sec     5.20k     0.99k    8.33k    77.50%\n  98513 requests in 10.00s, 11.93MB read\nRequests/sec:   9851.47\nTransfer/sec:      1.19MB\n\n$ wrk http://127.0.0.1:2048/v1/emails/gmail\nRunning 10s test @ http://127.0.0.1:2048/v1/emails/gmail\n  2 threads and 10 connections\n  Thread Stats   Avg      Stdev     Max   +/- Stdev\n    Latency     1.00ms  261.27us   8.11ms   68.65%\n    Req/Sec     5.33k     0.95k    8.78k    75.76%\n  100780 requests in 10.00s, 12.21MB read\nRequests/sec:  10078.20\nTransfer/sec:      1.22MB\n\n$ wrk http://127.0.0.1:2048/v1/time/+12\nRunning 10s test @ http://127.0.0.1:2048/v1/time/+12\n  2 threads and 10 connections\n  Thread Stats   Avg      Stdev     Max   +/- Stdev\n    Latency     0.93ms  230.99us   5.22ms   70.00%\n    Req/Sec     5.67k     0.93k    8.78k    76.29%\n  107204 requests in 10.00s, 12.98MB read\nRequests/sec:  10720.82\nTransfer/sec:      1.30MB\n```\n\n* Checkout https://github.com/herenow/node-router-benchmarks for all benchmarks on the node.js routers I used as references.\n\n\nConclusion\n-----------\nLight-router is in an alpha version and it seems to be working fine, it seems to be fast even with no caching layer, and maybe I'll remove the caching layer in a later version.\n\nNotes:\n* Read the file `lib/router.js` to get a better understanding of how requests are routed to their handlers\n* Complex RegExp are slow, if you can dont use them to much :)\n","created":"2014-05-30T03:52:08.247Z","modified":"2016-11-28T17:28:39.858Z","lastPublisher":{"name":"herenow","email":"leonardoshiro@gmail.com"},"owners":[{"name":"herenow","email":"leonardoshiro@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"light-router","_nodeVersion":"6.3.0","_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/light-router-0.1.3.tgz_1476028925784_0.8542083885986358"},"_npmUser":{"name":"herenow","email":"leonardoshiro@gmail.com"},"_npmVersion":"3.10.5","_rev":"3-3644a21456404deb27bbf002890c76cd","_shasum":"c0e5d82b68c3a3748da3ddf873077c735fbe765d","author":{"name":"herenow"},"bugs":{"url":"https://github.com/herenow/light-router/issues"},"directories":{"test":"test"},"dist-tags":{"latest":"0.1.3"},"dist":{"shasum":"c0e5d82b68c3a3748da3ddf873077c735fbe765d","tarball":"http://registry.npmjs.org/light-router/-/light-router-0.1.3.tgz"},"maintainers":[{"name":"herenow","email":"leonardoshiro@gmail.com"}],"readmeFilename":"README.md","time":{"modified":"2016-11-28T17:28:39.858Z","created":"2014-05-30T03:52:08.247Z","0.0.1":"2014-05-30T03:52:08.247Z","0.0.11":"2014-05-30T04:13:01.211Z","0.0.2":"2014-05-31T21:15:57.086Z","0.0.21":"2014-06-01T10:46:25.409Z","0.0.211":"2014-06-01T10:50:21.494Z","0.0.22":"2014-06-02T08:23:58.929Z","0.0.3":"2014-06-15T20:48:31.600Z","0.0.31":"2014-06-15T21:00:38.466Z","0.1.0":"2014-06-16T08:02:06.549Z","0.1.1":"2014-06-16T10:48:37.094Z","0.1.11":"2014-06-16T11:01:28.297Z","0.1.2":"2014-07-13T18:24:25.633Z","0.1.3":"2016-10-09T16:02:07.651Z"}}}