{"name":"scenario-test","version":"0.1.2","description":"A simple javascript test tool for testing node.js HTTP servers.","main":"index.js","scripts":{"test":"mocha"},"repository":"https://github.com/chihsuan/scenario-test","keywords":["test","scenario","mocha"],"license":"MIT","homepage":"https://github.com/chihsuan/scenario-test","dependencies":{"bluebird":"^2.9.34","js-yaml":"^3.4.3","lodash":"^2.4.1","mocha":"^2.3.3","mongoose":"^4.0.0","should":"^7.1.0","supertest":"^1.1.0","supertest-as-promised":"^2.0.2"},"devDependencies":{},"gitHead":"46602f46ebc4a1801f603b8190a5ef556ce9fb10","versions":[{"number":"0.0.1","date":"2015-10-17T10:32:13.169Z"},{"number":"0.0.2","date":"2015-10-17T10:35:07.269Z"},{"number":"0.0.3","date":"2015-10-17T11:38:01.951Z"},{"number":"0.0.4","date":"2015-10-17T15:35:00.933Z"},{"number":"0.0.5","date":"2015-10-17T18:58:22.681Z"},{"number":"0.1.0","date":"2015-10-17T19:52:10.113Z"},{"number":"0.1.1","date":"2015-10-18T07:00:57.273Z"},{"number":"0.1.2","date":"2015-10-18T08:59:37.754Z"}],"readme":"# scenario-test\nA simple javascript test tool for testing node.js HTTP servers.\n\nJust write the YAML files!\n\n## Install\n\n```\n$ npm install -g scenario-test\n```\n\n## Example\n\nFirst, create a config file,\n\n`config.yaml` \n\n```yaml\nserver: http://localhost:3000\nmongodb: mongodb://localhost/test\nuser: ./user/user.yaml\napi:\n  - class: user\n    path: ./api/user.yaml\n\nscenario: \n  - ./scenario/user.yaml \n```\n\nthen, create your users \n\n`./user/user.yaml`\n\n```yaml\n- user_id: user1\n  with:\n    username: user1\n    email: user1@mail.com\n    password: user1234\n```\n\nand just describe your APIs,\n\n`./api/user.yaml`\n\n\n```yaml\n- API: create\n  method: POST\n  path: /users\n  parameters: \n    username: self.username\n    email: self.email\n    password: self.password\n  response:\n    when user sign up ok:\n      expect status: 200\n\n- API: login\n  method: POST\n  path: /login\n  parameters:\n    username: self.username\n    password: self.password\n  response:\n    when user login ok:\n      expect status: 200\n      expect header:\n        # header to test\n      expect body:\n        # res.body to test\n```\n\nthen, give some scenarios `./scenario/user.yaml`\n\n```yaml\n- who: user1 \n  what: user.create\n  with: \n    path_params:\n      # \":id\": 42398503298092380\n    query_params:\n      # \"limit\": 20\n    data_params:\n      # \"body\": {}\n  expect: user sign up ok\n  obtain:\n    # _id: res.body_id\n\n- who: user1\n  what: user.login\n  expect: user login ok\n```\n\nfinally, write a simple js file, \n\n```js\nvar Scenario = require('./index');\nvar scenario = new Scenario('./config.yaml');\n\ndescribe('start test', function() {\n  it('should pass all tests', function (done) {\n    var options = {\n      timeout: 3000\n    };\n\n    scenario.start(options, done)\n      .then(function(res) {\n        // test finish\n      })\n      .catch(function(error) {\n        done(error);\n      });\n  });\n});\n```\n\nand, run your test by typing\n\n```\n$ npm test\n```\n\n\nthe result will look like\n\n<img src=\"http://i.imgur.com/1aBXs47.png\" alt=\"alt text\" width=\"500px\">\n\n\n## API\n\n**Test**\n\ntest a scenario\n\nreturn a promise\n\n```\nscenario-test.test(scenario)\n  .then(function(res){\n      // do your stuff\n  })\n  .catch(function(err){\n      // deal with error\n  });\n```\n","created":"2015-10-17T10:32:13.169Z","modified":"2015-10-18T08:59:37.754Z","lastPublisher":{"name":"chihsuan","email":"chihsuan.tw@gmail.com"},"owners":[{"name":"chihsuan","email":"chihsuan.huang.7@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"scenario-test","_npmUser":{"name":"chihsuan","email":"chihsuan.tw@gmail.com"},"_npmVersion":"1.4.28","_rev":"1-140a5d423409383868e8a377063e6640","_shasum":"bf7355b7dedef15b2a7b6e6d569ce7a302911baa","author":{"name":"chihsuan","email":"chihsuan.tw@gmail.com"},"bugs":{"url":"https://github.com/chihsuan/scenario-test/issues"},"directories":{},"dist-tags":{"latest":"0.1.2"},"dist":{"shasum":"bf7355b7dedef15b2a7b6e6d569ce7a302911baa","tarball":"http://registry.npmjs.org/scenario-test/-/scenario-test-0.1.2.tgz"},"maintainers":[{"name":"chihsuan","email":"chihsuan.huang.7@gmail.com"}],"readmeFilename":"README.md","time":{"modified":"2015-10-18T08:59:37.754Z","created":"2015-10-17T10:32:13.169Z","0.0.1":"2015-10-17T10:32:13.169Z","0.0.2":"2015-10-17T10:35:07.269Z","0.0.3":"2015-10-17T11:38:01.951Z","0.0.4":"2015-10-17T15:35:00.933Z","0.0.5":"2015-10-17T18:58:22.681Z","0.1.0":"2015-10-17T19:52:10.113Z","0.1.1":"2015-10-18T07:00:57.273Z","0.1.2":"2015-10-18T08:59:37.754Z"}}}