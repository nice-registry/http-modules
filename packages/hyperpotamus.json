{"name":"hyperpotamus","version":"0.35.0","description":"YAML based HTTP script processing engine","homepage":"https://github.com/pmarkert/hyperpotamus/wiki","main":"lib/index.js","bin":{"hyperpotamus":"./hyperpotamus.js","hdb":"./hdb.js"},"scripts":{"test":"mocha $NODE_DEBUG_OPTION"},"repository":"https://github.com/pmarkert/hyperpotamus","keywords":["yaml","json","api","http","script","load test","automation","website monitoring"],"dependencies":{"async":"^2.1.2","aws-sdk":"^2.7.21","bluebird":"^3.4.6","calfinated":"^1.2.2","cheerio":"^0.22.0","colors":"^1.0.3","fast-csv":"^2.3.0","js-yaml":"^3.7.0","jsonpath":"^0.2.8","lodash":"^4.17.2","marked":"^0.3.6","marked-terminal":"^2.0.0","mkdirp":"^0.5.0","moment":"^2.17.1","moment-timezone":"^0.5.11","named-regexp":"^0.1.1","prompt":"^1.0.0","request":"^2.78.0","request-as-curl":"^0.1.0","semver":"^5.3.0","socks5-http-client":"^1.0.1","tough-cookie":"^2.3.2","verror":"^1.9.0","xmldom":"^0.1.19","xpath":"0.0.23","yaml-include":"^1.2.0","yargs":"^6.6.0"},"devDependencies":{"body-parser":"^1.15.2","chai":"^3.5.0","cookie-parser":"^1.4.3","express":"^4.14.0","mocha":"^3.1.2"},"license":"MIT","eslintConfig":{"env":{"es6":true,"node":true},"extends":"eslint:recommended","globals":{"Mark":true},"rules":{"indent":["error","tab",{"SwitchCase":1}],"linebreak-style":["error","unix"],"quotes":["error","double"],"semi":["error","always"]}},"gitHead":"f1af3e7a1454aa645ad8b7c833a6773169e0b133","versions":[{"number":"0.1.0","date":"2014-12-30T19:35:33.091Z"},{"number":"0.2.0","date":"2014-12-30T22:32:41.388Z"},{"number":"0.3.0","date":"2014-12-31T23:10:31.911Z"},{"number":"0.4.0","date":"2015-01-06T05:59:23.350Z"},{"number":"0.4.1","date":"2015-01-06T06:06:25.863Z"},{"number":"0.5.0","date":"2015-01-07T07:06:11.283Z"},{"number":"0.6.0","date":"2015-01-09T02:31:10.245Z"},{"number":"0.7.0","date":"2015-01-09T20:35:00.483Z"},{"number":"0.8.0","date":"2015-01-10T00:13:33.563Z"},{"number":"0.9.0","date":"2015-01-10T20:00:04.364Z"},{"number":"0.10.0","date":"2015-01-12T01:08:08.602Z"},{"number":"0.11.0","date":"2015-01-12T22:29:29.602Z"},{"number":"0.12.0","date":"2015-01-13T20:28:56.359Z"},{"number":"0.12.1","date":"2015-01-13T20:36:50.330Z"},{"number":"0.12.2","date":"2015-01-13T20:39:04.744Z"},{"number":"0.13.0","date":"2015-01-13T22:35:12.708Z"},{"number":"0.14.0","date":"2015-01-16T19:47:36.889Z"},{"number":"0.14.1","date":"2015-01-16T19:51:51.157Z"},{"number":"0.15.0","date":"2015-01-16T23:11:06.436Z"},{"number":"0.15.1","date":"2015-01-16T23:15:49.109Z"},{"number":"0.15.2","date":"2015-01-16T23:18:38.197Z"},{"number":"0.15.3","date":"2015-01-20T05:15:33.108Z"},{"number":"0.15.5","date":"2015-01-21T23:11:45.346Z"},{"number":"0.15.6","date":"2015-01-22T22:51:53.775Z"},{"number":"0.15.7","date":"2015-01-23T14:02:44.708Z"},{"number":"0.15.8","date":"2015-01-26T16:43:15.074Z"},{"number":"0.15.9","date":"2015-01-28T01:35:28.537Z"},{"number":"0.15.10","date":"2015-01-28T03:02:28.473Z"},{"number":"0.15.11","date":"2015-01-28T16:37:15.281Z"},{"number":"0.15.12","date":"2015-01-29T23:50:59.073Z"},{"number":"0.16.0","date":"2015-01-29T23:52:14.386Z"},{"number":"0.16.1","date":"2015-01-30T23:00:20.937Z"},{"number":"0.16.2","date":"2015-01-30T23:18:45.308Z"},{"number":"0.16.3","date":"2015-02-02T17:00:43.190Z"},{"number":"0.16.4","date":"2015-02-05T15:02:16.830Z"},{"number":"0.16.5","date":"2015-02-09T17:35:56.963Z"},{"number":"0.17.0","date":"2015-02-20T22:49:07.234Z"},{"number":"0.18.0","date":"2015-02-23T22:53:25.513Z"},{"number":"0.18.1","date":"2015-02-27T19:52:22.781Z"},{"number":"0.18.2","date":"2015-02-27T20:41:22.486Z"},{"number":"0.19.0","date":"2015-03-20T19:06:59.837Z"},{"number":"0.20.0","date":"2015-04-09T03:41:28.761Z"},{"number":"0.20.1","date":"2015-04-09T13:07:41.618Z"},{"number":"0.20.2","date":"2015-04-09T13:28:01.537Z"},{"number":"0.20.3","date":"2015-04-09T15:46:27.754Z"},{"number":"0.20.4","date":"2015-04-14T21:43:03.195Z"},{"number":"0.20.5","date":"2015-04-15T21:42:06.786Z"},{"number":"0.20.6","date":"2015-05-06T18:52:01.576Z"},{"number":"0.20.7","date":"2015-05-06T19:42:23.012Z"},{"number":"0.21.0","date":"2015-05-14T20:03:49.356Z"},{"number":"0.22.0","date":"2015-05-21T15:01:51.468Z"},{"number":"0.22.1","date":"2015-05-26T13:03:35.274Z"},{"number":"0.22.2","date":"2015-05-26T13:37:46.094Z"},{"number":"0.22.3","date":"2015-05-26T14:55:15.674Z"},{"number":"0.22.4","date":"2015-06-09T00:26:35.830Z"},{"number":"0.23.0","date":"2015-06-29T14:24:32.996Z"},{"number":"0.24.0","date":"2015-06-29T15:57:58.775Z"},{"number":"0.24.1","date":"2015-07-16T19:39:43.773Z"},{"number":"0.24.2","date":"2015-08-05T15:27:46.124Z"},{"number":"0.24.3","date":"2015-08-18T22:27:48.574Z"},{"number":"0.24.4","date":"2015-09-02T21:25:04.633Z"},{"number":"0.24.5","date":"2015-09-08T14:34:44.139Z"},{"number":"0.24.6","date":"2015-09-11T01:45:33.124Z"},{"number":"0.24.7","date":"2015-09-29T15:13:56.094Z"},{"number":"0.24.8","date":"2015-09-29T17:25:27.202Z"},{"number":"0.24.9","date":"2015-09-29T19:27:27.421Z"},{"number":"0.24.10","date":"2015-10-04T02:32:09.406Z"},{"number":"0.24.11","date":"2015-10-05T14:46:47.513Z"},{"number":"0.24.12","date":"2015-10-05T14:54:47.008Z"},{"number":"0.24.13","date":"2015-10-13T22:43:56.392Z"},{"number":"0.24.14","date":"2015-10-24T13:25:17.961Z"},{"number":"0.24.15","date":"2015-10-24T13:53:14.727Z"},{"number":"0.24.16","date":"2015-10-24T14:24:10.452Z"},{"number":"0.24.17","date":"2015-11-13T19:16:47.040Z"},{"number":"0.24.18","date":"2016-01-25T18:24:52.507Z"},{"number":"0.24.19","date":"2016-02-04T01:37:50.109Z"},{"number":"0.25.0","date":"2016-02-05T02:55:30.181Z"},{"number":"0.25.1","date":"2016-03-04T15:44:19.031Z"},{"number":"0.25.2","date":"2016-04-20T15:05:55.892Z"},{"number":"0.25.3","date":"2016-08-03T14:58:12.898Z"},{"number":"0.25.4","date":"2016-08-03T21:08:55.920Z"},{"number":"0.25.5","date":"2016-10-06T01:22:59.732Z"},{"number":"1.1.0-markup","date":"2016-11-11T21:49:20.332Z"},{"number":"0.26.0","date":"2016-11-11T21:52:22.559Z"},{"number":"0.26.1","date":"2016-11-11T22:34:41.367Z"},{"number":"0.26.2","date":"2016-11-11T22:45:17.685Z"},{"number":"0.26.3","date":"2016-11-11T22:51:42.446Z"},{"number":"0.26.4","date":"2016-11-16T03:43:20.681Z"},{"number":"0.26.5","date":"2016-11-17T19:11:29.697Z"},{"number":"0.26.6","date":"2016-12-13T02:16:54.766Z"},{"number":"0.28.0","date":"2016-12-27T13:46:20.499Z"},{"number":"0.28.1","date":"2016-12-28T03:55:06.874Z"},{"number":"0.28.2","date":"2016-12-28T14:14:12.117Z"},{"number":"0.28.3","date":"2016-12-30T04:37:56.238Z"},{"number":"0.28.4","date":"2016-12-31T15:51:39.291Z"},{"number":"0.28.5","date":"2016-12-31T16:01:15.740Z"},{"number":"0.28.6","date":"2017-01-01T22:17:53.502Z"},{"number":"0.28.7","date":"2017-01-07T02:02:05.382Z"},{"number":"0.29.0","date":"2017-01-26T23:05:33.731Z"},{"number":"0.30.0","date":"2017-02-07T15:42:15.742Z"},{"number":"0.30.1","date":"2017-02-10T05:01:27.144Z"},{"number":"0.30.2","date":"2017-02-21T04:58:53.050Z"},{"number":"0.30.3","date":"2017-02-21T16:37:46.627Z"},{"number":"0.31.0","date":"2017-03-06T22:10:00.200Z"},{"number":"0.31.1","date":"2017-03-07T01:16:50.180Z"},{"number":"0.31.2","date":"2017-03-09T16:46:00.344Z"},{"number":"0.31.3","date":"2017-03-10T18:35:04.631Z"},{"number":"0.32.0","date":"2017-03-28T02:55:50.207Z"},{"number":"0.32.1","date":"2017-03-29T23:16:55.480Z"},{"number":"0.32.2","date":"2017-04-01T17:17:58.373Z"},{"number":"0.33.0","date":"2017-04-10T20:25:54.023Z"},{"number":"0.34.0","date":"2017-04-21T20:40:42.530Z"},{"number":"0.34.1","date":"2017-04-22T14:09:54.536Z"},{"number":"0.34.2","date":"2017-04-22T17:00:25.829Z"},{"number":"0.35.0","date":"2017-06-05T17:10:46.871Z"}],"readme":"[![downloads](https://img.shields.io/npm/dt/hyperpotamus.svg)](https://www.npmjs.com/package/hyperpotamus)\n[![latest version](https://img.shields.io/npm/v/hyperpotamus.svg)](https://www.npmjs.com/package/hyperpotamus)\n[![build status](https://img.shields.io/travis/pmarkert/hyperpotamus/master.svg)](https://travis-ci.org/pmarkert/hyperpotamus)\n[![license](https://img.shields.io/npm/l/hyperpotamus.svg)](https://github.com/pmarkert/hyperpotamus/blob/master/LICENSE)\n[![chat](https://badges.gitter.im/hyperpotamus_js/general.svg)](https://gitter.im/hyperpotamus_js/general)\n\n![Hyperpotamus](docs/images/hyperpotamus_logo.png)\n\n# hyperpotamus\n\"...its like duct tape for programming the web.\"\n\nHyperpotamus n. [hyper·pot·a·mus] - A YAML based scripting language for processing data, automating the web, and doing ... stuff.\n\n\n### Example script\n```YAML\n# Ask the user for a size\n- prompt:\n    pizza_size: \"What size pizza do you want? [small, medium, or large]\"\n\n- request: # Send a request to httpbin.org with our pizza order\n    url: http://httpbin.org/post\n    method: POST\n    json:\n      size: <% pizza_size %>\n      crust: deep-dish\n      toppings: [ pepperoni, extra-cheese ]\n  response:\n    - json: # Capture the IP address from the response\n       ip_address: \"$.origin\" \n    - print: \"Your order was placed from IP Address- <% ip_address %>\"\n```\n\nThis README just scratches the surface to give you enough information to know what hyperpotamus tastes like and either\nget excited or scratch your head and wonder why anyone would be interested. For those who get excited, it is worth \nreading the [Hyperpotamus documentation wiki](http://github.com/pmarkert/hyperpotamus/wiki)\n\n### What does hyperpotamus do?\nHyperpotamus allows you to write simple, human-readable scripts using any text-editor to describe a sequence of web requests (HTTP/HTTPS) and actions that you want to take to verify or capture data from the responses. Hyperpotamus scripts support multi-step processes where information can be retrieved from the results of one request to print out or use in subsequent requests. For example, you may need to retrieve a listing of photos from one page before you select one or all of them to download on a second page. Hyperpotamus uses powerful dynamic macros to customize parameters in the web-requests. The values for these macros can be passed in on the command-line, read from a spreadsheet, loaded from a JSON/YAML data-file, captured from a previous request, or read in from the user running the script at a prompt.\n\n### Why might someone want to do this?\nThere are many reasons that I have needed to use such a tool in my own career, including:\n* Invoking a JSON-based API to send requests, retrieve data and submit updates\n* Creating a monitoring system that checks urls or APIs a regular basis to make sure a website or service is working\n* Screen-scraping HTML to retrieve documents and/or data\n* Setting up an automated suite of integration/regression tests for a new web-application or API\n* Stress-testing a web application for performance optimization and tuning\n* **Boss (7:30pm):** Hey! We need to get all the products on this spreadsheet entered on the customer's website before 6:00am tomorrow morning, but it's taking our team of 5 people *forever* to fill out the 3-page form on their website to copy/paste the fields for each row to submit each of these 8,000 items! We really need you to jump in and help us with the click/copy/paste/submit party, the team is desperate! You didn't have any plans for tonight did you? I'll buy pizza!!\n\n  **You:** Sure -- I'm happy to help! Send me the spreadsheet and a link to the website. Then give me about 20 minutes to finish entering all of the products... oh, and deep-dish, please. Can I order it \"to-go\"?\n\n### OK, sounds amazing, do I have to be a ninja to use it?\nNo, anyone can write simple scripts in just a few seconds. Once you get started, it's a process of learning how to combine the proper actions, pipes, and macros to build more powerful and robust scripts. Hyperpotamus scripting was designed to be easy and accessible, however, in spite of that simplicity, there is plenty of power when you are ready to dig deeper. And if that's not enough, you can even extend and bend hyperpotamus to do your will by writing custom plugins.\n\nWhen you are ready to become a ninja, checkout the [hyperpotamus dojo](https://github.com/pmarkert/hyperpotamus/wiki/dojo).\n\n## Quickstart\nAssuming you already know how awesome it would be if you had the power to automate the www's right at your fingertips. Let's get started.\n\n1. Make sure you have [node.js](http://www.nodejs.org/) and npm installed. The current version can be found here: [https://nodejs.org/en/download/current/](https://nodejs.org/en/download/current/)\n\n2. Now to install hyperpotamus: Open a command-prompt/terminal on your computer and type:\n ```\n npm install -g hyperpotamus\n ```\n NOTE: If you get an access deined error, this may mean that you have node.js installed improperly. You can always use adminsitrator/sudo access to install it, but consider Here are instructions to fix this:you may get an error are on a Mac (or linux), you will want to use `sudo` for administrator permissions.\n ```\n sudo npm install -g hyperpotamus\n ```\n\n3. Create a text-file called \"first.yml\" with the following contents:\n\n ```yaml\n - print: \"Hello World\"\n ```\n\n4. Execute your script by running it with hyperpotamus:\n ```\n hyperpotamus first.yml\n ```\n\nIf everything worked, then you should see \"Hello World\" printed to the console. Pretty anti-climatic. I know, right? Now let's use some variables and dynamic macros.\n\n## Going deeper\n### Parameterizing the script\nEdit your script as follows:\n```yaml\n- defaults:\n    first_name: Mr.\n    last_name: Roboto\n\n- print: \"Hello <% first_name %> <% last_name %>!\"\n```\n\nIn this version, we set some default values for session variables and then we use `<% macros %>` to dynamically insert the values where needed.\n\nNow when you run the script, is replaces the macros with the appropriate session variables.\n\n```\nHello Mr. Roboto!\n```\n\n### Batch operations using .csv input\nWhat if we wanted to send a greeting to all of our customers? We could create a .csv data file with our customer data like so:\n```\nfirst_name,last_name,hair_color\nPhillip,Markert,none\nsomeone,else,unknown\n```\n\nand then we can run it with the `--csv` parameter to tell it to use our data file:\n```\nhyperpotamus script.yml --csv customers.csv\n```\n\nThis time hyperpotamus gives us the following output:\n```\nHello Phillip Markert!\nHello someone else!\n```\n\nNotice that hyperpotamus ran the script once for each line in the spreadsheet and made the column values available as session variables that can be used with macros.\n\nIf you run the script again adding a few verbose flags (-v or -vv or -vvv) you will see more information about what hyperpotamus is doing. The more v's you add, the more output you get.\n\n### Other sources of data\nSession variables can come from a variety of sources:\n* Using the `defaults` or `set` actions to store a specific value.\n* Using the `--csv` option to read rows from a spreadsheet\n* Using the `prompt` to ask the user users for a value\n* Using the `--data` option to read JSON or YAML files.\n* By capturing data from the response of a web request using\n    * JsonPath (for JSON)\n    * XPath (for XML)\n    * JQuery (for HTML)\n    * Regex (for text)\n* By capturing the output from another process\n\n### Submitting data to an API\nWhat if we wanted to submit each of those greetings to a hypothetical web API?\n```yaml\n- request:\n    url: http://httpbin.org/post\n    form:\n       customer_first_name: <% first_name %>\n       customer_last_name: <% last_name %>\n       customer_hair_color: <% hair_color %>\n```\n\n### Customizing requests\nIf you want to get fancier with your requests, you can customize them. Hyperpotamus makes use of the excellent [request module](https://github.com/request/request), so any option supported by [request](https://github.com/request/request) should work with hyperpotamus as well.\n\nSome common customizations you may want to use include:\n\n* modifying the HTTP method \n* modifying standard headers like user-agent, accept-language, cache-control, cookies, etc.\n* setting authentication data (basic auth, bearer tokens, digest, or others.)\n* setting custom headers\n* submitting JSON, Form URL Encoded data, or multi-part file uploads\n* requesting through proxy servers\n* disabling automatic redirect following\n\nThe example at the top of this README in the intro section demonstrates a few of these options.\n\n### Checking the content of the response\nSending requests with hyperpotamus is really only part of the story. Hyperpotamus also allows you to check or capture parts of the response as well.\n\n```YAML\nrequest: \"http://www.nodejs.org\"\nresponse:\n  text: This simple web server written in Node responds with \"Hello World\" for every request.\n```\n\nThe response configuration allows you to handle the HTTP response to validate, capture data, or take other actions.\n\nA text action which will look for the exact (case-sensitive) text in the response body. If the text is not found, an error is raised. If the text is found, then the script continues processing.\n\n#### Validating HTTP Status codes\n```yaml\nrequest: http://httpbin.org/status/404\nresponse: \n - status: 404\n```\n\nStatus actions verify that the HTTP status code from the response matches what you expected. As a shortcut for a status \naction, you can just supply the status code as an integer. \n\nLikewise, you can also modify the default response actions for all steps. Unlike the request defaults where values are merged\ntogether for each step, response values will only be applied if no response/actions element is specified for a step.\n\nAs mentioned above, the default options for response validation include a check for `status: 200`. You change this behavior \nby overriding the response defaults.\n\n`examples/request-defaults.yml`\n```yaml\ndefaults:\n response:\n  - not: \"An Error Occurred\"\n\nsteps:\n - http://httpbin.org\n - http://httpbin.org/404\n```\n\nNormally the second step would have failed (because httpbin.org will return a 404 error code), however in this case, we setup\na default validation rule to be that the page may not include the text \"An Error Occurred\". Setting up this default rule\nremoved the existing default status-code check.\n\nNOTE: If you wish to remove the default status code check but do not want to add any other rules, just set defaults.response\nto an empty array.\n```\ndefaults: \n  response: []\n```\n\n#### Regex validation\n```yaml\nrequest: http://www.nodejs.org\nresponse: /simple web server/i\n```\n\n[Regex](http://www.regular-expressions.info/) actions (delimited by the '/' characters around the text) are a shortcut for \n`{ regex : { pattern : \"...\", options : \"..\" } }`. \n\nRegex actions also match against the response content, but may contain wild-cards, patterns, captures, and other options. \n\nNOTE: If your regex pattern contains certain character combinations, it may invalidate the YAML syntax of the script (for\nexample \": \" in the middle of the pattern or other special YAML characters). In that case, you can always enclose your\npattern in double or single quotes and it will still be treated as a regex as long as it still looks like \"/regex/options\". \n\nIn this example the case insensitive option is specified with the /i option.  Valid regex options are \"g\" (global), \"i\" \n(case-insensitive), and \"m\" (multi-line). \n\n#### Writing your scripts in JSON\nOf course, JSON is also valid YAML, so if you roll that way, this script is equivalent to the previous one. \n\n```yaml\n[\n  {\n    \"request\": \"http://httpbin.org/get\",\n    \"response\": { \"status\": 200, \"on_success\": \"json_post\" }\n  },\n  {\n    \"request\": \"http://httpbin.org/get\",\n    \"response\": \"This request should not get executed\"\n  },\n  {\n    \"name\": \"Form Post\",\n    \"request\": {\n      \"url\": \"http://httpbin.org/post\",\n      \"method\": \"POST\",\n      \"form\": {\n        \"message\": \"But this one does\"\n      }\n    }\n  }\n]\n```\n\nI like JSON-- a lot... but after typing all of those symbols the YAML starts looking nicer and nicer. You can even mix and \nmatch JSON and YAML within a single script, so you can achieve that perfect blend of short and sweet vs. explicit syntax in \nyour recipes...\n\n### Session data\n```yaml\nrequest:\n  url: http://httpbin.org/post\n  method: POST\n  form: \n    username: <% username %>\n    password: <% password %>\n```\n\nHyperpotamus supports the idea of a session. Sessions are name->value stores that are used to collect and re-use information \nas your script is processed. Notice those `<% .. %>` macros? `<% username %>` means: Take whatever value is stored in the \nsession under the key \"username\" and insert it.\n\nSession data can be passed into hyperpotamus as query-string encoded name/value pairs.\n\n```\nhyperpotamus sample.yml --qs \"username=pmarkert&password=secret\"\n```\n\nSession data can also be read in from a .csv file and your script will be executed once for each record in the file.\n\n```\nhyperpotamus sample.yml --csv users.csv\n```\n\n### Capturing data from the response\nIn many cases, you want to capture parts of the response either for reporting at the end of your script, or for use in \nsubsequent steps. Captured values are stored in the session so that they can be replayed with `<% .. %>` macros.\n\n#### Capturing using regex\n```yaml\nrequest: https://github.com/pmarkert/hyperpotamus\nresponse:\n  - /latest commit <span.+?>(:<latest_commit>.+?)</span>/\n  - emit: Latest commit is <% latest_commit %>\n```\n\n[Named captures](https://github.com/cho45/named-regexp.js) allow you to extract data from the web-page by matching content\nand extracting data into the session using the capture name as the session key. `(:<group>...)` would save the matched\nportion of the response into session so that it can be used as `<% group %>`.  In this example, `<% latest_commit %>` is \ncaptured from the response.\n\nNOTE: By default, only the first match is captured. Adding the /g option at the end of the regex will cause all instances to \nbe captured into an array. (See below for more about arrays and iteration).\n\n#### Capturing with jquery\n```yaml\n- request: https://www.npmjs.com/package/hyperpotamus\n  response:\n    - jquery: \"ul>li:contains('downloads in the last month') strong\"\n      capture:\n        last_month: text\n    - emit: Hyperpotamus has been downloaded <% last_month %> times in the past month.\n```\n\nJQuery actions use [selectors](http://api.jquery.com/category/selectors/) to find elements in the HTML.  \n\nData (attribute values, text content, innerHTML, outerHTML) from the matching elements can be captured into session variables\nusing the `capture` element. The keys of the capture element are the session keys to which the values will be captured. The \nvalue of each element can be one of the following:\n* text - The textual content of this element and all child elements concatenated together\n* @attribute - The value of an HTML attribute, i.e. @href to capture the url for a hyperlink.\n* outerHTML - The HTML including the element itself.\n* innerHTML - The HTML of all child-nodes for the element.\n\nNOTE: By default only the first item matching the query is captured. If you want to capture all of the elements from the \npage, surround your value target in `[ ]`, like so: `last_month: [ text ]`. This will capture each instance into your session\nas an array.\n\nNotice that the response element has an array of actions (`jquery` and `emit` in this case). You can stack together as many\nactions as you like; they will be processed in the order they appear. The results of one action are available to all\nsubsequent actions. \n\nThat `emit` action is used to echo content that can be captured for reporting or display.\n\n### Arrays and iteration\n\n```yaml\n- name: setup\n  actions:\n    set:\n      gospels: [ 'Matthew', 'Mark', 'Luke', 'John' ]\n- name: print\n  actions:\n    - emit: The Gospel according to <%@ gospels %>\n    - iterate: gospels\n      next: print\n```\n\nArrays are useful for many reasons, but they are particularly helpful when you want to repeat a process multiple times. When\nyou want to use a value from an array, you add the `@` format specifier to your macro, in this example: `<%@ gospels %>`.\nThis is saying: 'Insert the current value from the array called gospels'. What does it mean when I say 'the current value\nfrom the array'? \n\nWhen the `@` format specifier is used, hyperpotamus looks for a second session variable, 'gospels.index' in this case. If\nthat value does not exist (which is typically the case at first), then a default value of 0 will be assumed and assigned.\nRequesting `<%@ gospels %>` will return \nthe respective value in the array based upon the current value of `gospels.index`. In this case, it will print out \"Matthew\",\nbecause that's the first element, at index=0.\n\nIf the story ended there, then arrays really wouldn't be very helpful, but fortunately, there's hope! Notice that `iterate`\naction? The `iterate` action takes either the name of an array or an array of names of arrays. `iterate` will then increments\nthe current index for each of them. After incrementing the array index, it will cause the script execution to jump to the\nrequest named in the `next` parameter.  When any of the arrays have been exhausted, meaning that the index reached the end,\nthen the index is reset and script processing falls through to the rest of the script in normal sequence.\n\nNOTE: If the `next` parameter on an `iterate` action is omitted, then the current step will be repeated. (In this example, we\ncould have left off the `next: print` and the `name: print` and the effect would have been the same). \n\n### Conditional branching on success or failure\n```yaml\n- request: http://httpbin.org/get\n  response: \n    status: 200\n    on_success: Form Post\n- request: http://httpbin.org/get\n  response: \"This request should not get executed\"\n- name: Form Post\n  request:\n    url: http://httpbin.org/post\n    method: POST\n    form:\n      message: \"But this one does\"\n```\n\nIf you give your scripting step a name, then other actions can jump to that step. By default, each action supports an\n`on_success` or `on_failure` property. Normally if an action succeeds, processing continues to the next step. If the action\nfails, then an error is raised and processing stops. By setting the on_success and on_failure value for an action to the name\nof another request, the execution flow will jump to that step appropriately.\n    \nAlso, notice the extra parameters for the last request (the method and form elements). \n","starsCount":1,"created":"2014-12-30T19:35:33.091Z","modified":"2017-06-05T17:10:46.871Z","lastPublisher":{"name":"pmarkert","email":"phillip@ephisys.com"},"owners":[{"name":"pmarkert","email":"phillip@ephisys.com"}],"other":{"_attachments":{},"_from":".","_id":"hyperpotamus","_nodeVersion":"4.8.3","_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/hyperpotamus-0.35.0.tgz_1496682645080_0.4279034095816314"},"_npmUser":{"name":"pmarkert","email":"phillip@ephisys.com"},"_npmVersion":"2.15.11","_rev":"35-bffb55ad43e4c30e62050ced56abc7d1","_shasum":"8e7bd6a5bc113cd800beadf7e9e72c2b4a14a4d6","author":{"name":"Phillip Markert","email":"phillip@ephisys.com"},"bugs":{"url":"https://github.com/pmarkert/hyperpotamus/issues"},"directories":{},"dist-tags":{"latest":"0.35.0"},"dist":{"shasum":"8e7bd6a5bc113cd800beadf7e9e72c2b4a14a4d6","tarball":"https://registry.npmjs.org/hyperpotamus/-/hyperpotamus-0.35.0.tgz"},"maintainers":[{"name":"pmarkert","email":"phillip@ephisys.com"}],"readmeFilename":"README.md","time":{"modified":"2017-06-05T17:10:46.871Z","created":"2014-12-30T19:35:33.091Z","0.1.0":"2014-12-30T19:35:33.091Z","0.2.0":"2014-12-30T22:32:41.388Z","0.3.0":"2014-12-31T23:10:31.911Z","0.4.0":"2015-01-06T05:59:23.350Z","0.4.1":"2015-01-06T06:06:25.863Z","0.5.0":"2015-01-07T07:06:11.283Z","0.6.0":"2015-01-09T02:31:10.245Z","0.7.0":"2015-01-09T20:35:00.483Z","0.8.0":"2015-01-10T00:13:33.563Z","0.9.0":"2015-01-10T20:00:04.364Z","0.10.0":"2015-01-12T01:08:08.602Z","0.11.0":"2015-01-12T22:29:29.602Z","0.12.0":"2015-01-13T20:28:56.359Z","0.12.1":"2015-01-13T20:36:50.330Z","0.12.2":"2015-01-13T20:39:04.744Z","0.13.0":"2015-01-13T22:35:12.708Z","0.14.0":"2015-01-16T19:47:36.889Z","0.14.1":"2015-01-16T19:51:51.157Z","0.15.0":"2015-01-16T23:11:06.436Z","0.15.1":"2015-01-16T23:15:49.109Z","0.15.2":"2015-01-16T23:18:38.197Z","0.15.3":"2015-01-20T05:15:33.108Z","0.15.5":"2015-01-21T23:11:45.346Z","0.15.6":"2015-01-22T22:51:53.775Z","0.15.7":"2015-01-23T14:02:44.708Z","0.15.8":"2015-01-26T16:43:15.074Z","0.15.9":"2015-01-28T01:35:28.537Z","0.15.10":"2015-01-28T03:02:28.473Z","0.15.11":"2015-01-28T16:37:15.281Z","0.15.12":"2015-01-29T23:50:59.073Z","0.16.0":"2015-01-29T23:52:14.386Z","0.16.1":"2015-01-30T23:00:20.937Z","0.16.2":"2015-01-30T23:18:45.308Z","0.16.3":"2015-02-02T17:00:43.190Z","0.16.4":"2015-02-05T15:02:16.830Z","0.16.5":"2015-02-09T17:35:56.963Z","0.17.0":"2015-02-20T22:49:07.234Z","0.18.0":"2015-02-23T22:53:25.513Z","0.18.1":"2015-02-27T19:52:22.781Z","0.18.2":"2015-02-27T20:41:22.486Z","0.19.0":"2015-03-20T19:06:59.837Z","0.20.0":"2015-04-09T03:41:28.761Z","0.20.1":"2015-04-09T13:07:41.618Z","0.20.2":"2015-04-09T13:28:01.537Z","0.20.3":"2015-04-09T15:46:27.754Z","0.20.4":"2015-04-14T21:43:03.195Z","0.20.5":"2015-04-15T21:42:06.786Z","0.20.6":"2015-05-06T18:52:01.576Z","0.20.7":"2015-05-06T19:42:23.012Z","0.21.0":"2015-05-14T20:03:49.356Z","0.22.0":"2015-05-21T15:01:51.468Z","0.22.1":"2015-05-26T13:03:35.274Z","0.22.2":"2015-05-26T13:37:46.094Z","0.22.3":"2015-05-26T14:55:15.674Z","0.22.4":"2015-06-09T00:26:35.830Z","0.23.0":"2015-06-29T14:24:32.996Z","0.24.0":"2015-06-29T15:57:58.775Z","0.24.1":"2015-07-16T19:39:43.773Z","0.24.2":"2015-08-05T15:27:46.124Z","0.24.3":"2015-08-18T22:27:48.574Z","0.24.4":"2015-09-02T21:25:04.633Z","0.24.5":"2015-09-08T14:34:44.139Z","0.24.6":"2015-09-11T01:45:33.124Z","0.24.7":"2015-09-29T15:13:56.094Z","0.24.8":"2015-09-29T17:25:27.202Z","0.24.9":"2015-09-29T19:27:27.421Z","0.24.10":"2015-10-04T02:32:09.406Z","0.24.11":"2015-10-05T14:46:47.513Z","0.24.12":"2015-10-05T14:54:47.008Z","0.24.13":"2015-10-13T22:43:56.392Z","0.24.14":"2015-10-24T13:25:17.961Z","0.24.15":"2015-10-24T13:53:14.727Z","0.24.16":"2015-10-24T14:24:10.452Z","0.24.17":"2015-11-13T19:16:47.040Z","0.24.18":"2016-01-25T18:24:52.507Z","0.24.19":"2016-02-04T01:37:50.109Z","0.25.0":"2016-02-05T02:55:30.181Z","0.25.1":"2016-03-04T15:44:19.031Z","0.25.2":"2016-04-20T15:05:55.892Z","0.25.3":"2016-08-03T14:58:12.898Z","0.25.4":"2016-08-03T21:08:55.920Z","0.25.5":"2016-10-06T01:22:59.732Z","1.1.0-markup":"2016-11-11T21:49:20.332Z","0.26.0":"2016-11-11T21:52:22.559Z","0.26.1":"2016-11-11T22:34:41.367Z","0.26.2":"2016-11-11T22:45:17.685Z","0.26.3":"2016-11-11T22:51:42.446Z","0.26.4":"2016-11-16T03:43:20.681Z","0.26.5":"2016-11-17T19:11:29.697Z","0.26.6":"2016-12-13T02:16:54.766Z","0.28.0":"2016-12-27T13:46:20.499Z","0.28.1":"2016-12-28T03:55:06.874Z","0.28.2":"2016-12-28T14:14:12.117Z","0.28.3":"2016-12-30T04:37:56.238Z","0.28.4":"2016-12-31T15:51:39.291Z","0.28.5":"2016-12-31T16:01:15.740Z","0.28.6":"2017-01-01T22:17:53.502Z","0.28.7":"2017-01-07T02:02:05.382Z","0.29.0":"2017-01-26T23:05:33.731Z","0.30.0":"2017-02-07T15:42:15.742Z","0.30.1":"2017-02-10T05:01:27.144Z","0.30.2":"2017-02-21T04:58:53.050Z","0.30.3":"2017-02-21T16:37:46.627Z","0.31.0":"2017-03-06T22:10:00.200Z","0.31.1":"2017-03-07T01:16:50.180Z","0.31.2":"2017-03-09T16:46:00.344Z","0.31.3":"2017-03-10T18:35:04.631Z","0.32.0":"2017-03-28T02:55:50.207Z","0.32.1":"2017-03-29T23:16:55.480Z","0.32.2":"2017-04-01T17:17:58.373Z","0.33.0":"2017-04-10T20:25:54.023Z","0.34.0":"2017-04-21T20:40:42.530Z","0.34.1":"2017-04-22T14:09:54.536Z","0.34.2":"2017-04-22T17:00:25.829Z","0.35.0":"2017-06-05T17:10:46.871Z"},"users":{"omyvinegar":true}}}