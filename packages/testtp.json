{"name":"testtp","version":"0.3.0","description":"simple library to test node http servers","main":"index.js","scripts":{"test":"jest","test:all":"npm test -- --coverage && npm run lint","test:watch":"npm test -- --watch","lint":"eslint index.js","version:patch":"npm run test:all && npm version patch","version:minor":"npm run test:all && npm version minor","version:major":"npm run test:all && npm version major"},"repository":"https://github.com/janstuemmel/testtp","keywords":["express","koa","node","js","test","testing","http"],"license":"MIT","homepage":"https://github.com/janstuemmel/testtp#readme","devDependencies":{"codeclimate-test-reporter":"^0.5.0","eslint":"^3.19.0","express":"^4.15.3","jest":"^20.0.4","tcp-port-used":"^0.1.2"},"dependencies":{"lodash":"^4.17.4","node-fetch":"^1.7.0"},"gitHead":"02252ed5c8718cc53b6a953966ee0b534823eabe","versions":[{"number":"0.2.0","date":"2017-06-03T01:36:56.543Z"},{"number":"0.2.1","date":"2017-06-03T01:44:15.985Z"},{"number":"0.3.0","date":"2017-06-03T22:39:43.045Z"}],"readme":"# Testtp\n\n[![Build Status](https://travis-ci.org/janstuemmel/testtp.svg?branch=master)](https://travis-ci.org/janstuemmel/testtp)\n[![Test Coverage](https://codeclimate.com/github/janstuemmel/testtp/badges/coverage.svg)](https://codeclimate.com/github/janstuemmel/testtp/coverage)\n[![npm version](https://badge.fury.io/js/testtp.svg)](https://badge.fury.io/js/testtp)\n\nA library that simplifies testing with node http.Server's or listeners like express.\nIt exposes `node-fetch` ([bitinn/node-fetch](https://github.com/bitinn/node-fetch)) to get data from the test server.\n\n## Install\n\n```sh\nnpm install --save-dev testtp\n```\n\n## Usage\n\nA sample `jest` test.\n\n```js\nvar http = require('http')\nvar express = require('express')\nvar fetch = require('node-fetch')\nvar createTestServer = require('testtp');\n\ndescribe('tests', () => {\n\n  it('test', async () => {\n\n    // given\n    var app = express().get('/', (req, res) => res.send('OK'));\n\n    // returns a Testtp instance\n    var test = await createTestServer(app);\n\n    expect(test._server).toEqual(expect.any(http.Server));\n    expect(test.port).toEqual(expect.any(Number));\n    expect(test.address).toBe('127.0.0.1');\n    expect(test.url).toBe(['http://127.0.0.1', test.port].join(':'));\n\n    // when\n    var res = await test.get('/');\n    var text = await res.text();\n\n    // then\n    expect(res.status).toBe(200);\n    expect(text).toBe('OK');\n\n    // after\n    await test.close();\n  });\n});\n\n```\n\n## API\n\n`testtp(server [, cb])` returns a Promise instance to create `Testtp` instance\n  * arg `server` a http.Server (or express etc.) instance\n  * arg `cb` optional callback with `Testtp` instance\n\n`Class: Testtp`\n  * `_server` Stores the node http.Server instance\n  * `port` Stores the port\n  * `address` Stores the address, `127.0.0.1`\n  * `url` Stores the full url, `http://127.0.0.1:1337`\n  * `close([cb])` Closes the connection (Callback or Promise)\n  * `[HTTP_METHOD](path)` Requests the test server (`node-fetch`)\n\n## License\n\nMIT\n","created":"2017-06-03T01:36:56.543Z","modified":"2017-06-03T22:39:43.045Z","lastPublisher":{"name":"janstuemmel","email":"info@janstuemmel.de"},"owners":[{"name":"janstuemmel","email":"info@janstuemmel.de"}],"other":{"_attachments":{},"_from":".","_id":"testtp","_nodeVersion":"7.10.0","_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/testtp-0.3.0.tgz_1496529582103_0.9022197246085852"},"_npmUser":{"name":"janstuemmel","email":"info@janstuemmel.de"},"_npmVersion":"4.2.0","_rev":"3-f8d540422c27234c3e73f31773277fb3","_shasum":"a87e3818acde85a2e5933d504664e39a3a18faaa","author":{"name":"Jan St√ºmmel"},"bugs":{"url":"https://github.com/janstuemmel/testtp/issues"},"directories":{},"dist-tags":{"latest":"0.3.0"},"dist":{"shasum":"a87e3818acde85a2e5933d504664e39a3a18faaa","tarball":"https://registry.npmjs.org/testtp/-/testtp-0.3.0.tgz"},"maintainers":[{"name":"janstuemmel","email":"info@janstuemmel.de"}],"readmeFilename":"README.md","time":{"modified":"2017-06-03T22:39:43.045Z","created":"2017-06-03T01:36:56.543Z","0.2.0":"2017-06-03T01:36:56.543Z","0.2.1":"2017-06-03T01:44:15.985Z","0.3.0":"2017-06-03T22:39:43.045Z"}}}