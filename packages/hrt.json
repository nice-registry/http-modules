{"name":"hrt","version":"1.1.6","description":"HTTP Rewrite Tool","license":"GPL","bin":{"hrt":"./hrt"},"scripts":{"test":"node ./test/"},"repository":"https://github.com/tudouui/hrt","keywords":["frontend","proxy","debug","http","rewrite","server"],"dependencies":{"autoprefixer":"^6.3.0","http-proxy":"~1.11.1","iconv-lite":"~0.2.5","less":"~1.4.0-b2","mime":"~1.2.7","optimist":"~0.3.5","pkginfo":"~0.3.0","postcss":"^5.0.14","react-tools":"~0.13.3","request":"~2.12.0","watchr":"~2.4.3"},"devDependencies":{"tap":"~0.3.2"},"gitHead":"d74ee7ff2abf0ba3b1d26c506273c00bd8e05715","homepage":"https://github.com/tudouui/hrt#readme","versions":[{"number":"0.0.2","date":"2012-11-11T17:17:41.434Z"},{"number":"1.0.0","date":"2013-01-07T09:15:14.375Z"},{"number":"1.0.1","date":"2013-01-28T08:02:10.736Z"},{"number":"1.0.2","date":"2013-04-08T08:08:41.418Z"},{"number":"1.0.3","date":"2013-04-08T08:45:36.707Z"},{"number":"1.0.4","date":"2013-04-10T07:31:35.640Z"},{"number":"1.0.5","date":"2013-04-10T07:59:19.391Z"},{"number":"1.0.6","date":"2013-04-16T07:52:08.295Z"},{"number":"1.0.7","date":"2013-04-17T02:06:24.439Z"},{"number":"1.0.8","date":"2013-05-07T09:41:38.685Z"},{"number":"1.0.9","date":"2013-05-13T02:56:45.362Z"},{"number":"1.0.10","date":"2013-05-24T07:02:35.849Z"},{"number":"1.0.11","date":"2013-05-29T02:46:28.698Z"},{"number":"1.0.12","date":"2013-09-25T09:18:54.911Z"},{"number":"1.0.13","date":"2013-09-25T10:14:54.683Z"},{"number":"1.0.14","date":"2013-11-14T09:08:37.616Z"},{"number":"1.0.15","date":"2013-11-15T05:20:18.202Z"},{"number":"1.0.16","date":"2013-11-19T03:49:14.532Z"},{"number":"1.0.17","date":"2013-11-26T02:48:25.991Z"},{"number":"1.0.18","date":"2014-01-02T02:11:00.982Z"},{"number":"1.0.19","date":"2014-01-07T09:18:48.242Z"},{"number":"1.0.20","date":"2014-04-02T12:02:50.844Z"},{"number":"1.0.21","date":"2014-09-09T11:17:29.612Z"},{"number":"1.0.22","date":"2015-05-04T11:07:14.919Z"},{"number":"1.0.23","date":"2015-05-04T11:20:59.499Z"},{"number":"1.0.24","date":"2015-05-04T11:45:02.980Z"},{"number":"1.0.25","date":"2015-05-06T14:02:23.240Z"},{"number":"1.0.26","date":"2015-05-11T04:53:51.284Z"},{"number":"1.1.0","date":"2015-05-12T11:49:12.335Z"},{"number":"1.1.1","date":"2015-05-20T09:27:54.840Z"},{"number":"1.1.2","date":"2015-06-29T03:40:54.523Z"},{"number":"1.1.3","date":"2015-07-01T03:57:26.286Z"},{"number":"1.1.5","date":"2016-06-23T09:57:52.605Z"},{"number":"1.1.6","date":"2016-06-23T10:14:01.047Z"}],"readme":"HTTP Rewrite Tool\n=================================================\n\nHRT是前端代理工具，根据配置把指定的URL指向到本地文件或远程URL。\n\n### 安装\n\n```\nnpm install hrt -g\n```\n\n### 使用方法\n\n1. 修改浏览器代理设置，IP：`127.0.0.1`，端口：`2222`，推荐用SwitchySharp（Chrome插件）、FoxyProxy（Firefox插件）切换代理。\n\n2. 创建配置文件 `my-hrt-config.js` ，添加跳转规则。\n\n\t代理文件：\n\t```js\n\texports.map = [\n\t\t['http://js.tudouui.com/v3/dist/js/g.js', 'D:\\\\project\\\\static\\\\trunk\\\\v3\\\\src\\\\js\\\\g.js']\n\t];\n\t```\n\n\t代理目录：\n\t```js\n\texports.map = [\n\t\t['http://js.tudouui.com/v3/dist/js', 'D:\\\\project\\\\static\\\\trunk\\\\v3\\\\src\\\\js']\n\t];\n\t```\n\n3. 在命令行输入 `hrt my-hrt-config.js` ，启动HTTP服务。\n\n\t```bash\n\t# 修改端口\n\thrt my-hrt-config.js --port=8080\n\t# 输出调试信息\n\thrt my-hrt-config.js --debug=true\n\t```\n\n### 高级用法\n\n1. 移除版本号。\n\t```js\n\texports.before = function(url) {\n\t\treturn url.replace(/([^?]+)_\\d+(\\.(?:js|css))/, '$1$2');\n\t};\n\t```\n\n2. 修改文件内容。\n\t```js\n\texports.merge = function(path, callback) {\n\t\t// 所有JS头部添加注释\n\t\tif (/\\.js$/.test(path)) {\n\t\t\tvar content = Util.readFileSync(path, 'utf-8');\n\t\t\treturn callback('application/javascript', '/* test /*\\n' + content);\n\t\t}\n\t\t// 其它请求\n\t\tvar contentType = require('mime').lookup(path);\n\t\tvar buffer = this.util.readFileSync(path);\n\t\treturn callback(contentType, buffer);\n\t};\n\t```\n\t注：当配置文件里有 `exports.merge` 时会接管所有请求，所以在程序逻辑里需要加入文件类型判断。\n\n3. 修改URL内容。\n\t```js\n\texports.merge = function(path, callback) {\n\t\tif (/^http:\\/\\/(www|wwwtest|beta)\\.tudou\\.com\\/programs\\/view\\//.test(this.req.url)) {\n\t\t\tthis.util.get(this.req.url, 'gbk', function(body) {\n\t\t\t\tcallback('text/html', body + '<!-- test -->', 'gbk');\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\t// 其它请求\n\t\tvar contentType = require('mime').lookup(path);\n\t\tvar buffer = this.util.readFileSync(path);\n\t\treturn callback(contentType, buffer);\n\t};\n\t```","created":"2012-11-11T17:17:36.553Z","modified":"2016-06-23T10:14:01.047Z","lastPublisher":{"name":"asins","email":"asinsimple@gmail.com"},"owners":[{"name":"luolonghao","email":"luolonghao@gmail.com"},{"name":"ydream","email":"ydream17@gmail.com"},{"name":"asins","email":"asinsimple@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"hrt","_nodeVersion":"6.2.1","_npmOperationalInternal":{"host":"packages-16-east.internal.npmjs.com","tmp":"tmp/hrt-1.1.6.tgz_1466676839095_0.7164463130757213"},"_npmUser":{"name":"asins","email":"asinsimple@gmail.com"},"_npmVersion":"3.9.3","_rev":"1-5280d011868ffffc07dfd9cb9ca7ffd6","_shasum":"bb186c7bcfd1df605d32ffeb6bea406c9997a4a7","author":{"name":"Longhao Luo","email":"lhluo@tudou.com"},"bugs":{"url":"https://github.com/tudouui/hrt/issues"},"directories":{},"dist-tags":{"latest":"1.1.6"},"dist":{"shasum":"bb186c7bcfd1df605d32ffeb6bea406c9997a4a7","tarball":"http://registry.npmjs.org/hrt/-/hrt-1.1.6.tgz"},"maintainers":[{"name":"luolonghao","email":"luolonghao@gmail.com"},{"name":"ydream","email":"ydream17@gmail.com"},{"name":"asins","email":"asinsimple@gmail.com"}],"readmeFilename":"README.md","time":{"modified":"2016-06-23T10:14:01.047Z","created":"2012-11-11T17:17:36.553Z","0.0.2":"2012-11-11T17:17:41.434Z","1.0.0":"2013-01-07T09:15:14.375Z","1.0.1":"2013-01-28T08:02:10.736Z","1.0.2":"2013-04-08T08:08:41.418Z","1.0.3":"2013-04-08T08:45:36.707Z","1.0.4":"2013-04-10T07:31:35.640Z","1.0.5":"2013-04-10T07:59:19.391Z","1.0.6":"2013-04-16T07:52:08.295Z","1.0.7":"2013-04-17T02:06:24.439Z","1.0.8":"2013-05-07T09:41:38.685Z","1.0.9":"2013-05-13T02:56:45.362Z","1.0.10":"2013-05-24T07:02:35.849Z","1.0.11":"2013-05-29T02:46:28.698Z","1.0.12":"2013-09-25T09:18:54.911Z","1.0.13":"2013-09-25T10:14:54.683Z","1.0.14":"2013-11-14T09:08:37.616Z","1.0.15":"2013-11-15T05:20:18.202Z","1.0.16":"2013-11-19T03:49:14.532Z","1.0.17":"2013-11-26T02:48:25.991Z","1.0.18":"2014-01-02T02:11:00.982Z","1.0.19":"2014-01-07T09:18:48.242Z","1.0.20":"2014-04-02T12:02:50.844Z","1.0.21":"2014-09-09T11:17:29.612Z","1.0.22":"2015-05-04T11:07:14.919Z","1.0.23":"2015-05-04T11:20:59.499Z","1.0.24":"2015-05-04T11:45:02.980Z","1.0.25":"2015-05-06T14:02:23.240Z","1.0.26":"2015-05-11T04:53:51.284Z","1.1.0":"2015-05-12T11:49:12.335Z","1.1.1":"2015-05-20T09:27:54.840Z","1.1.2":"2015-06-29T03:40:54.523Z","1.1.3":"2015-07-01T03:57:26.286Z","1.1.5":"2016-06-23T09:57:52.605Z","1.1.6":"2016-06-23T10:14:01.047Z"}}}