{"name":"sumo-logger","version":"1.0.0","description":"Sumo Logic Javascript SDK for sending logs to a HTTP Source endpoint.","main":"src/sumoLogger.js","scripts":{"release":"np","http-server":"grunt http-server:dev &","test":"npm run http-server && open https://127.0.0.1:8282/jasminetest/TrackerSpecRunner.html"},"dependencies":{"express":"^4.13.4","express-generator":"^4.13.1","request":"^2.79.0","underscore":"^1.8.3"},"devDependencies":{"grunt":"^0.4.5","grunt-contrib-jasmine":"^1.1.0","grunt-contrib-uglify":"^0.11.1","grunt-http-server":"^2.0.0","jasmine-ajax":"^3.3.1","np":"^2.13.1"},"repository":"https://github.com/SumoLogic/js-logging-sdk","keywords":["sumologic-js-sdk","jslogger","sumologic","logs","javascript"],"license":"Apache 2.0","homepage":"https://github.com/sumologic/sumologic-js-sdk#readme","gitHead":"a79b823d5da757c042dc15ad3fbea19b41fac08d","versions":[{"number":"1.0.0","date":"2017-04-24T22:30:15.631Z"}],"readme":"# Sumo Logic JavaScript Logging SDK\n\nThe [Sumo Logic](http://www.sumologic.com) JavaScript Logging SDK library enables you to send custom log messages to an [HTTP Source](https://help.sumologic.com/Send_Data/Sources/02Sources_for_Hosted_Collectors/HTTP_Source) without installing a Collector on your server.\n\nIncluded are a plain vanilla JavaScript version (`sumologic.logger.js`) for browser web apps and a Node.js module (`sumoLogger.js`). The configuration options are the same for both versions, but usage is slightly different.\n\nYou must have an HTTP source created in your Sumo Logic account to use this SDK. To create one, log into Sumo Logic, go to the Collectors page and either create a new Hosted Collector or add a new HTTP source to an existing Hosted Collector.\n\n*Basics:*\n\nAll logs are sent as JSON objects. If you call `log()` with just a string, the string is included as a field called `msg`. If you call the function with a JSON object, each field in the object is included as a separate field. Fields called `sessionId`, `url`, and `timestamp` are sent in both cases.\n\nMessages are batched and sent at the configured interval; default is zero, meaning messages are sent to the server on each call. You can force any queued messages to be sent, typically during a shutdown or logout flow.\n\n### Table of Contents\n* [Installation](#installation)\n* [Demos](#demos)\n* [Usage](#usage)\n    * [Configuration](#configuration)\n    * [Per Message Options](#per-message-options)\n* [Usage Examples](#usage-examples)\n* [Security Note](#security-note)\n* [Tests](#tests)\n* [Issues](#issues)\n* [License](#license)\n\n## Installation\n\n**Prerequisites**\n\nYou must have an HTTP source in your Sumo Logic account to use this SDK. To create one:\n* log into Sumo Logic,\n* go to the Manage Collection page, and,\n* **either** add a new HTTP source to a new or existing Hosted Collector **or** select an existing HTTP source.\n\nYouâ€™ll need the endpoint URL to configure the logger object. You can get it by clicking the `Show URL` link for the source on the Manage Collection page.\n\nIf you don't have a Sumo Logic account yes, you can easily create one by going to https://www.sumologic.com and clicking the Free Trial button--no cost, just enter your email.\n\nYou must also have Node.js/npm installed to use the SDK. [Node installation](https://docs.npmjs.com/getting-started/installing-node)\n\nPlease review the Security Note at the end of this article before planning your implementation.\n\n**Using NPM:**\n```\n$ npm install --save sumologic-logger\n```\n\n**From GitHub:**\n* Download or clone this repo.\n* Copy the files in the `src` folder into your app/website source.\n* Add `<script src=\"path/to/sumologic.logger.min.js\"></source>` or \n   `<script src=\"path/to/sumologic.logger.js\"></source>` to your pages.\n* Add a `<script>` block with the desired log call, as explained in [Usage](#user-content-usage), to your pages.\n\n## Demos\n\nBefore running either demo, `cd` to the repo directory and run `npm install`. (You must have node/npm installed already.)\n\n**Node Demo**\n\nOpen `node-example/index.js` in an editor and update the `opts` configuration object at the top of the file with your own values, at least for the endpoint.\n\nIn a terminal, switch to the `node-example` directory and run `npm install` again. Then run `node index.js` to launch the server and open a browser tab to [http://localhost:3000/example.html] to see the demo page.\n\n**Browser Demo**\n\nUse a local server to serve up the `example/example.html` file included in this repo. An npm script has been included to simplify loading the page, in your terminal:\n\n* `cd` into the repo root folder,\n* run `npm run http-server`, and,\n* open your browser to (https://127.0.0.1:8282/example).\n\n## Usage\n\n### Core functions\n\n* `config`: (Vanilla JS lib only) Set the configuration for sending logs. Options are listed in the next section. In the Node.js module, configuration options are sent when instantiating the object.\n* `log`: Set a log to be sent.\n* `flushLogs`: Force any pending logs to be sent immediately. This is mainly for use in a `logOut`/`window.onBeforeUnload` flow to ensure that any remaining queued messages are sent to Sumo Logic.\n\n### Configuration\n\nBefore sending any messages your page should set up the SumoLogger object. Of all the configurable attributes, only `endpoint` is required and all others are optional.\n\n*endpoint (Required):*\n\nTo send your logs, the script must know which HTTP Source to use. Pass this value (which you can get from the Collectors page) in the `endpoint` parameter.\n\n*interval (optional):*\n\nA number of milliseconds. Messages will be batched and sent at the interval specified. Default value is zero, meaning messages are sent each time `log()` is called.\n\n*onSuccess (optional)*\n\nYou can provide a function that is executed only when logs are successfully sent. The only information you can be sure of in the callback is that the call succeeded. There is no other response information.\n\n*onError (optional)*\n\nYou can provide a function that is executed if an error occurs when the logs are sent.\n\n*clientUrl (optional, Node version only)*\n\nYou can provide a URL, in the Node version of this SDK only, which will be sent as the `url` field of the log line. In the vanilla JS version, the URL is detected from the browser's `window.location` value.\n\n*sendErrors (optional):*\n\nSetting `sendErrors` to `true` will send all the unhandled errors to Sumo Logic with the error message, URL, line number, and column number. This attribute plays well with any other window.onerror functions that have been defined.\n\n*sessionKey (optional)*\n\nTo identify specific user sessions, set a value for this field.\n\n*hostName (optional)*\n\nThis value identifies the host from which the log is being sent.\n\n*sourceCategory (optional)*\n\nThis value sets the Source Category for the logged message.\n\n*sourceName (optional)*\n\nThis value sets the Source Name for the logged message.\n\n### Per Message Options\n\nAll variants of the log call take an optional object parameter, which can include any of the following fields:\n\n*timestamp:*\n\nDefaults to `new Date()` called when processing the `log` call. Use this when the event being logged occurred at a different time than when the log was sent.\n\n*sessionKey:*\n\nOverride a session key set in the `config` call.\n\n*url*\n\nOverride client URL set in the `config` call. (Node version only)\n\n### Usage Examples\n\n**Full configuration:**\n\n```javascript\n  var opts = {\n    endpoint: \"https://us2-events.sumologic.com/receiver/v1/http/222loremipsumetc32FG\",\n    interval: 20000, // Send messages in batches every 20 seconds\n    sendErrors: true,\n    sessionKey: 'Abc32df34rfg54gui8j098dv13sq5re', // generate a GUID\n    sourceName: 'My Custom App',\n    sourceCategory: 'My Source Category',\n    hostName: 'My Host Name',\n    onSuccess: function() { \n      // ... handle success .... \n    },\n    onError: function() {\n      // ... handle error .... \n    }\n  };\n```\n\n**Node.js:**\n\n```javascript\n    var sumoLogic = require('sumologic-logger-node');\n    var opts = {\n        endpoint: 'your HTTP Source endpoint',\n        clientUrl: 'http://yourDomain.com/path/to/page' // NODE version only,\n        // ... any other options ...\n    };\n    \n    // Instantiate the SumoLogger\n    var sumoLogger = new SumoLogger(opts);\n    \n    // Push a message to be logged\n    sumoLogger.log('event message to log', {\n      sessionKey: 'your session key value',\n      url: 'https://youDomain.com/actual/page/served'\n    });\n    \n    // Flush any logs, typically this line would be in your shutdown code\n    sumoLogger.flushLogs();\n```\n\n**Browser Apps:**\n\n```html\n<script>\n  // Configure the logger\n  SLLogger.config({\n    endpoint: \"https://us2-events.sumologic.com/receiver/v1/http/222loremipsumetc32FG\",\n  });\n\n  // Push messages to be logged\n  // Simple text\n  SLLogger.log('A simple log message');\n\n  // With per message options\n  SLLogger.log(\n    'A simple log message',\n    {\n      sessionKey: 'Abc32df34rfg54gui8j098dv13sq5re',\n      timestamp: new Date()\n     });\n\n  // JSON, which can use field names specified in Field Extraction Rules\n  SLLogger.log({\n    \"userType\": \"silver\",\n    \"referralSource\": referralSource,\n    \"campaignId\": campaignId\n  });\n  \n  // Flush any logs, typically this line would be in your shutdown code\n  window.addEventListener('beforeunload', function() {\n    SLLogger.flushLogs();\n  });\n</script> \n```\n\n*Field Extraction Rules:* [fields in Sumo Logic](https://service.sumologic.com/help/Default.htm#About_Field_Extraction.htm)\n\n## Security Note\n\nSumo Logic is always concerned with security but in some instances we must balance risks with value of functionality. Using the vanilla JS version of this library is one such situation.\n\nHitting an HTTP source endpoint from code running in a web browser exposes the endpoint URL to anyone inspecting the code or running your app with the browser console open to the network tab. There is no means to obfuscate or hide this. The risk is some malicious individual will send additional traffic to the endpoint, potentially using up your ingest or polluting your searches.\n\nIf this is a concern for you, **we recommend using the Node.js version of the lib** so your endpoint URL is never exposed.\n \nOne method for minimizing the damage from some malicious users, should you choose to use this or other similar code in the browser, is adding an arbitrary string based on a regex to your log message and adding a processing rule to the HTTP source configuration that blocks incoming messages which lack a match for the regex.\n\n## Tests\n\nTest are in `jasminetest/sumologic-logger-spec.js` and can be run by loading `http://[your domain:port]/jasminetest/TrackerSpecRunner.html`.\n\nTo run the tests, open `jasminetest/sumologic-logger-spec.js` and update the `sumoTestEndpoint` variable on line 2 with your HTTP source endpoint. You must have already run `npm install` in the root of the repo.\n\nFor example, if you use the Grunt server explained above, the tests will run at `https://127.0.0.1:8282/jasminetest/TrackerSpecRunner.html`.\n\nFor a shortcut you may use the included npm test script, which will start the Grunt server and open the testRunner page:\n\n```\n$ npm run test\n````\n\n## Issues\n\nPlease file issues or feature requests on this Github repo.\n\n## License\n\nCopyright 2017, Sumo Logic, Inc. The Sumo Logic JavaScript Logging SDK is published under the Apache Software License, Version 2.0. Please visit http://www.apache.org/licenses/LICENSE-2.0.txt for details.\n","created":"2017-04-24T22:30:15.631Z","modified":"2017-04-24T22:30:15.631Z","lastPublisher":{"name":"sumologic","email":"opensource@sumologic.com"},"owners":[{"name":"sumologic","email":"opensource@sumologic.com"}],"other":{"_attachments":{},"_from":".","_id":"sumo-logger","_nodeVersion":"6.4.0","_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/sumo-logger-1.0.0.tgz_1493073015340_0.33012042357586324"},"_npmUser":{"name":"sumologic","email":"opensource@sumologic.com"},"_npmVersion":"3.10.3","_rev":"1-844ff8f36f30149bac59ad88b4391562","_shasum":"7d0802c129d271f50de32eb23a6109f004ef7eea","author":{"name":"Sumo Logic"},"bugs":{"url":"https://github.com/sumologic/sumologic-js-sdk/issues"},"directories":{},"dist-tags":{"latest":"1.0.0"},"dist":{"shasum":"7d0802c129d271f50de32eb23a6109f004ef7eea","tarball":"https://registry.npmjs.org/sumo-logger/-/sumo-logger-1.0.0.tgz"},"maintainers":[{"name":"sumologic","email":"opensource@sumologic.com"}],"readmeFilename":"README.md","time":{"modified":"2017-04-24T22:30:15.631Z","created":"2017-04-24T22:30:15.631Z","1.0.0":"2017-04-24T22:30:15.631Z"}}}