{"name":"protractor-fake-backend","version":"1.2.0","description":"Mock the http calls of your angular application when testing it with protractor","main":"index.js","license":"MIT","scripts":{"start":"http-server -a localhost -p 3005 -c-1","test":"protractor conf.js"},"dependencies":{"globby":"6.1.0"},"devDependencies":{"angular":"1.5.8","http-server":"0.9.0","protractor":"4.0.10"},"repository":"https://github.com/web-innovate/protractor-fake-backend","keywords":["fake","backend","protractor"],"gitHead":"71f0753a811f97ffd697df414bd67a9b9a035426","homepage":"https://github.com/web-innovate/protractor-fake-backend#readme","versions":[{"number":"1.0.0","date":"2016-04-23T09:53:15.638Z"},{"number":"1.0.1","date":"2016-04-23T18:12:51.778Z"},{"number":"1.1.0","date":"2016-04-26T18:31:42.698Z"},{"number":"1.1.1","date":"2016-05-10T16:41:40.222Z"},{"number":"1.2.0","date":"2016-11-05T14:16:47.574Z"}],"readme":"# protractor-fake-backend\r\n\r\n[![Build Status](https://travis-ci.org/web-innovate/protractor-fake-backend.svg?branch=master)](https://travis-ci.org/web-innovate/protractor-fake-backend)\r\n[![Dependency Status](https://david-dm.org/web-innovate/protractor-fake-backend.svg)](https://david-dm.org/web-innovate/protractor-fake-backend)\r\n[![devDependency Status](https://david-dm.org/web-innovate/protractor-fake-backend/dev-status.svg)](https://david-dm.org/web-innovate/protractor-fake-backend#info=devDependencies)\r\n[![Known Vulnerabilities](https://snyk.io/test/npm/protractor-fake-backend/badge.svg)](https://snyk.io/test/npm/protractor-fake-backend)\r\n[![Codacy Badge](https://api.codacy.com/project/badge/Grade/8198279383664f79be0c4eed4ce03db0)](https://www.codacy.com/app/andrei-scripcaru/protractor-fake-backend?utm_source=github.com&amp;utm_medium=referral&amp;utm_content=web-innovate/protractor-fake-backend&amp;utm_campaign=Badge_Grade)\r\n\r\nA NodeJS module to be used alongside [Protractor](https://github.com/angular/protractor)\r\n\r\n## Installation\r\n\r\n    npm install --save-dev protractor-fake-backend\r\n\r\n## Configuration\r\n\r\nIn your protractor configuration file you need to do the following:\r\n\r\n```javascript\r\n    exports.config = {\r\n      // other stuff\r\n      onPrepare: function() {\r\n        // other stuff\r\n        require('protractor-fake-backend').config = {\r\n          mocksDir: 'path/to/mocks/directory', // default 'mocks'\r\n          defaultMocks: ['some/mock', 'another/**', {request:{}, response:{}}] // default []\r\n        };\r\n      }\r\n    }\r\n```\r\n\r\n - `mocksDir` should receive the relative path of the directory that contains the mock files.\r\n - `defaultMocks` must be an array. The array can contain [mock objects](#reference-mock) and file names (strings). These are included every time (unless `excludeDefaultMocks = true`). You can use [patterns](https://github.com/sindresorhus/globby#globbing-patterns) for file names\r\n\r\n## Mock files\r\n\r\nMock files must be written in javascript and must export a mock object or an array of mock objects\r\n\r\n```javascript\r\n    module.exports = {\r\n      request: {\r\n        path: '/the/path',\r\n        method: 'GET'\r\n      },\r\n      response: {\r\n        data: 'bla'\r\n      }\r\n    }\r\n```\r\nor\r\n```javascript\r\n    module.exports = [\r\n      {\r\n        // first mock\r\n      }, {\r\n        // second mock\r\n      }\r\n    ]\r\n```\r\n\r\n### Reference mock object\r\n\r\n```javascript\r\n{\r\n  request: {\r\n    path: '/must/start/with/a/slash',\r\n    method: 'POST',\r\n    data: 'request body',\r\n    headers: {\r\n      first: 1,\r\n      second: 'bla'\r\n    },\r\n    params: {\r\n      first: 1,\r\n      second: 'woo'\r\n    }\r\n  },\r\n  response: {\r\n    status: 200,\r\n    data: 'bla',\r\n    headers: {\r\n      first: 1,\r\n      second: 'two'\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n## Usage\r\n\r\n```javascript\r\nvar fakeBackend = require('protractor-fake-backend');\r\nvar page = require('your/page/object');\r\n\r\ndescribe('your test', function() {\r\n  beforeAll(function() {\r\n    fakeBackend(['first/file', 'second/file']);\r\n    page.get();\r\n  });\r\n\r\n  it('check the last request', function() {\r\n    var expectation = {\r\n          path: '/the/path',\r\n          method: 'POST',\r\n          body: 'request body'\r\n        };\r\n\r\n    fakeBackend.clearRequests();\r\n\r\n    page.someButton.click();\r\n\r\n    fakeBackend.getLastRequest().then(function(request) {\r\n      expect(request).toEqual(expectation);\r\n    });\r\n  });\r\n});\r\n```\r\n\r\n## API\r\n\r\n#### `fakeBackend(mocks, excludeDefaultMocks)`\r\nAdds the mock module on protractor. Needs to be called in each spec.\r\n\r\n`mocks` if not passed, only default mocks will be included.\r\n\r\nCan be:\r\n\r\n- A string representing a file name or a pattern. E.g. `'some/file'` or `'file/**'`\r\n- An array that can contain a combination of file names(or patterns) and [mock objects](#reference-mock-object)\r\n\r\n`excludeDefaultMocks` by default is `false`. As the name says, if you pass `true` then the default mocks declared in [config](#configuration) won't be added\r\n\r\n#### `fakeBackend.teardown()`\r\nRemoves the mock module from protractor\r\n\r\n#### `fakeBackend.getRequests()`\r\nReturns an array containing all intercepted requests\r\n\r\n#### `fakeBackend.getLastRequest()`\r\nReturns the last intercepted request\r\n\r\n#### `fakeBackend.clearRequests()`\r\nDeletes all the intercepted requests\r\n\r\n#### `fakeBackend.addMock(mock)`\r\nAdds one or more mocks. The `mock` param can be an [Object](#reference-mock-object) or an Array of [Objects](#reference-mock-object)\r\n\r\n#### `fakeBackend.removeMocks()`\r\nRemoves all the mocks from the module\r\n","created":"2016-04-23T09:53:15.638Z","modified":"2016-11-05T14:16:47.574Z","lastPublisher":{"name":"ascripcaru","email":"ascripcaru@gmail.com"},"owners":[{"name":"ascripcaru","email":"ascripcaru@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"protractor-fake-backend","_nodeVersion":"6.3.1","_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/protractor-fake-backend-1.2.0.tgz_1478355405895_0.8256676411256194"},"_npmUser":{"name":"ascripcaru","email":"ascripcaru@gmail.com"},"_npmVersion":"3.10.3","_rev":"2-f239436f9d4c9a6b832be35a4ac048ea","_shasum":"822195d946ec8ce9e47288bec15598b7dbeeffc2","author":{"name":"Andrei Scripcaru"},"bugs":{"url":"https://github.com/web-innovate/protractor-fake-backend/issues"},"directories":{},"dist-tags":{"latest":"1.2.0"},"dist":{"shasum":"822195d946ec8ce9e47288bec15598b7dbeeffc2","tarball":"http://registry.npmjs.org/protractor-fake-backend/-/protractor-fake-backend-1.2.0.tgz"},"maintainers":[{"name":"ascripcaru","email":"ascripcaru@gmail.com"}],"readmeFilename":"README.md","time":{"modified":"2016-11-05T14:16:47.574Z","created":"2016-04-23T09:53:15.638Z","1.0.0":"2016-04-23T09:53:15.638Z","1.0.1":"2016-04-23T18:12:51.778Z","1.1.0":"2016-04-26T18:31:42.698Z","1.1.1":"2016-05-10T16:41:40.222Z","1.2.0":"2016-11-05T14:16:47.574Z"}}}