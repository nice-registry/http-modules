{"name":"koa-http-stats","description":"http request stats middleware for koa","repository":"https://github.com/vicanso/koa-http-stats","version":"2.2.1","keywords":["koa","middleware","stats","http"],"scripts":{"size":"t=\"$(npm pack .)\"; wc -c \"${t}\"; tar tvf \"${t}\"; rm \"${t}\";","test":"node ./node_modules/.bin/eslint ./index.js && node ./node_modules/.bin/istanbul cover ./node_modules/.bin/_mocha --"},"engines":{"node":">=4.0.0"},"license":"MIT","dependencies":{"debug":"^2.6.8"},"devDependencies":{"eslint":"^3.12.2","eslint-config-airbnb":"^13.0.0","eslint-plugin-import":"^2.2.0","eslint-plugin-jsx-a11y":"^2.2.3","eslint-plugin-react":"^6.8.0","istanbul":"^0.4.5","koa":"2.0.1","mocha":"^3.1.0","supertest":"^2.0.1"},"gitHead":"9ff2d9fa5a19814a66621dccdd90cb1949dad97f","homepage":"https://github.com/vicanso/koa-http-stats#readme","versions":[{"number":"2.0.0","date":"2015-12-08T13:07:08.117Z"},{"number":"2.0.1","date":"2015-12-10T12:52:42.551Z"},{"number":"2.0.2","date":"2015-12-14T13:41:03.297Z"},{"number":"2.0.3","date":"2016-01-27T13:12:13.421Z"},{"number":"2.0.4","date":"2016-02-03T12:28:49.213Z"},{"number":"2.1.0","date":"2016-02-15T13:02:51.211Z"},{"number":"2.1.1","date":"2016-03-11T15:04:44.878Z"},{"number":"2.1.2","date":"2016-03-11T15:12:44.451Z"},{"number":"2.1.3","date":"2016-03-12T08:20:35.282Z"},{"number":"2.1.4","date":"2016-03-12T09:05:14.726Z"},{"number":"2.1.5","date":"2016-05-03T15:24:00.666Z"},{"number":"2.1.6","date":"2016-05-04T14:08:13.933Z"},{"number":"2.1.7","date":"2016-05-11T14:12:02.420Z"},{"number":"2.1.8","date":"2016-10-01T14:03:23.856Z"},{"number":"2.1.9","date":"2016-12-04T13:42:36.191Z"},{"number":"2.2.0","date":"2017-03-03T13:06:27.524Z"},{"number":"2.2.1","date":"2017-05-28T02:22:53.524Z"}],"readme":"# koa-http-stats\n\n[![Build Status](https://travis-ci.org/vicanso/koa-http-stats.svg?style=flat-square)](https://travis-ci.org/vicanso/koa-http-stats)\n[![Coverage Status](https://img.shields.io/coveralls/vicanso/koa-http-stats/master.svg?style=flat)](https://coveralls.io/r/vicanso/koa-http-stats?branch=master)\n[![npm](http://img.shields.io/npm/v/koa-http-stats.svg?style=flat-square)](https://www.npmjs.org/package/koa-http-stats)\n[![Github Releases](https://img.shields.io/npm/dm/koa-http-stats.svg?style=flat-square)](https://github.com/vicanso/koa-http-stats)\n\nHTTP Stats middleware for Koa2. This is an useful simple stats, include: request total, request connecting total, request handle time and so on.\n\n## Installation\n\n```js\n$ npm install koa-http-stats\n```\n\n## Examples\n\n  View the [./examples](examples) directory for working examples.\n\n\n### API\n\n```js\nconst httpStats = require('koa-http-stats');\nconst Koa = require('koa');\nconst app = new Koa();\n\n\napp.use(httpStats(function(performance, stats, ctx) {\n\t// {\"total\":1,\"connecting\":0,\"status\":[0,0,1,0,0,0],\"time\":[1,0,0,0,0,0],\"size\":[1,0,0,0,0,0],\"busy\":[1,0,0,0,0]}\n\tconsole.info(JSON.stringify(performance));\n\t// {\"connecting\":0,\"total\":1,\"use\":4,\"bytes\":11,\"code\":200,\"status\":2,\"spdy\":0,\"size\":0,\"busy\":0}\n\tconsole.info(JSON.stringify(stats));\n}));\n\napp.use(ctx => {\n\tif (ctx.url === '/wait') {\n\t\treturn new Promise(function(resolve, reject) {\n\t\t\tctx.body = 'Wait for 1000ms';\n\t\t\tsetTimeout(resolve, 1000);\n\t\t});\n\t} else {\n\t\tctx.body = 'Hello World';\n\t}\n});\n\n```\n\n#### options\n\n- `time` time stats config, default: `[30, 100, 500, 1000, 3000]`\n\n- `size` size stats config, default: `[1024 * 2, 10 * 1024, 50 * 1024, 100 * 1024, 300 * 1024]`\n\n- `status` status stats config, default: `[99, 199, 299, 399, 499]`\n\n- `busy` connecting stats config, default: `busy: [50, 200, 500, 1000]`\n\n#### onStats\n\nWhen a request is done, the function will be trigger.\n\n- `performance` application performance\n\n- `stats` current http stats\n\n- `ctx` koa.js context\n\n\n## License\n\nMIT\n","created":"2015-12-08T13:07:08.117Z","modified":"2017-05-28T02:22:53.524Z","lastPublisher":{"name":"tree.xie","email":"vicansocanbico@gmail.com"},"owners":[{"name":"tree.xie","email":"vicansocanbico@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"koa-http-stats","_nodeVersion":"7.10.0","_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/koa-http-stats-2.2.1.tgz_1495938173304_0.8807248559314758"},"_npmUser":{"name":"tree.xie","email":"vicansocanbico@gmail.com"},"_npmVersion":"4.2.0","_rev":"4-66bbf69397350c06edaf7a69c4db26d7","_shasum":"3a2e19e5106003495fa09a340006dfacda69def4","author":{"name":"Tree Xie","email":"vicansocanbico@gmail.com"},"bugs":{"url":"https://github.com/vicanso/koa-http-stats/issues","email":"vicansocanbico@gmail.com"},"directories":{},"dist-tags":{"latest":"2.2.1"},"dist":{"shasum":"3a2e19e5106003495fa09a340006dfacda69def4","tarball":"https://registry.npmjs.org/koa-http-stats/-/koa-http-stats-2.2.1.tgz"},"maintainers":[{"name":"tree.xie","email":"vicansocanbico@gmail.com"}],"readmeFilename":"Readme.md","time":{"modified":"2017-05-28T02:22:53.524Z","created":"2015-12-08T13:07:08.117Z","2.0.0":"2015-12-08T13:07:08.117Z","2.0.1":"2015-12-10T12:52:42.551Z","2.0.2":"2015-12-14T13:41:03.297Z","2.0.3":"2016-01-27T13:12:13.421Z","2.0.4":"2016-02-03T12:28:49.213Z","2.1.0":"2016-02-15T13:02:51.211Z","2.1.1":"2016-03-11T15:04:44.878Z","2.1.2":"2016-03-11T15:12:44.451Z","2.1.3":"2016-03-12T08:20:35.282Z","2.1.4":"2016-03-12T09:05:14.726Z","2.1.5":"2016-05-03T15:24:00.666Z","2.1.6":"2016-05-04T14:08:13.933Z","2.1.7":"2016-05-11T14:12:02.420Z","2.1.8":"2016-10-01T14:03:23.856Z","2.1.9":"2016-12-04T13:42:36.191Z","2.2.0":"2017-03-03T13:06:27.524Z","2.2.1":"2017-05-28T02:22:53.524Z"}}}