{"name":"http-routes","version":"3.0.1","description":"functional http router","main":"index.js","scripts":{"test":"npm run test:node && npm run test:deps && npm run test:lint","test:node":"tape test/*.js","test:lint":"standard","test:deps":"dependency-check . && dependency-check . --extra --no-dev","start":"node-dev example"},"repository":"https://github.com/ahdinosaur/http-routes","keywords":[],"license":"Apache-2.0","homepage":"https://github.com/ahdinosaur/http-routes#readme","devDependencies":{"cookie":"^0.3.1","dependency-check":"^2.7.0","node-dev":"^3.1.0","npm-run-all":"^1.6.0","standard":"^8.6.0","tape":"^4.5.1"},"dependencies":{"@f/zip-obj":"^1.1.1","http-compose":"^1.0.1","path-to-regexp":"^1.5.3"},"gitHead":"054fc2a2da1f9ea41da99749e7c921aa4e31692b","versions":[{"number":"1.2.0","date":"2016-08-02T14:28:49.201Z"},{"number":"1.2.1","date":"2016-08-02T14:32:22.153Z"},{"number":"1.2.2","date":"2016-08-02T14:44:14.295Z"},{"number":"1.2.3","date":"2016-08-02T14:48:02.061Z"},{"number":"2.0.0","date":"2017-01-18T12:17:47.208Z"},{"number":"2.0.1","date":"2017-01-18T12:23:20.439Z"},{"number":"2.0.2","date":"2017-01-18T12:26:39.974Z"},{"number":"3.0.1","date":"2017-02-08T12:09:46.833Z"}],"readme":"# http-routes\n\nfunctional http router using [`http-compose`](https://github.com/ahdinosaur/http-compose) and [`path-to-regexp`](https://github.com/pillarjs/path-to-regexp)\n\n```shell\nnpm install --save http-routes\n```\n\n## example\n\n```js\nconst Server = require('http').createServer\nconst Cookie = require('cookie')\nconst Send = require('http-sender')()\nconst Route = require('http-routes')\n\nconst routerHandler = Route([\n  Route([\n    // login and set cookies\n    ['/login/:id', function login (req, res, context, next) {\n      res.setHeader('Set-Cookie', Cookie.serialize('id', context.params.id, { path: '/' }))\n      res.setHeader('Location', '/whoami') // redirect to the whoami page.\n      res.statusCode = 303\n      res.end()\n    }],\n    // logout and clear cookies\n    ['/login', {\n      get: function view (req, res, context, next) {\n        const newId = Math.random().toString(8).substring(2)\n        const html = `<a href='/login/${newId}'>login!</a>`\n        res.setHeader('Content-Type', 'text/html')\n        next(null, html)\n      }\n    }],\n    Route(['/logout', function logout (req, res, context, next) {\n      res.setHeader('Set-Cookie', Cookie.serialize('id', '', { path: '/' }))\n      res.setHeader('Location', '/whoami') // redirect to the whoami page\n      res.statusCode = 303\n      res.end()\n    }])\n  ]),\n  // check cookies, and authorize this connection (or not)\n  function authorize (req, res, context, next) {\n    context.id = Cookie.parse(req.headers.cookie).id || null\n    next()\n  },\n  // return list of the current access rights. (for debugging)\n  Route('/whoami', function whoami (req, res, context, next) {\n    res.setHeader('Content-Type', 'application/json')\n    next(null, context.id)\n  })\n])\n\nServer((req, res) => {\n  routerHandler(req, res, {}, Send(req, res))\n}).listen(5000)\n```\n\n## usage\n\n### `Route = require('http-routes')`\n\n### `handler = Route(path, routeHandler(s))`\n### `handler = Route([path, routeHandler(s)])`\n### `handler = Route([[path, routeHandler(s)], ...])`\n\nwhere `path` is an Express-style path for [`path-to-regexp`](https://github.com/pillarjs/path-to-regexp)\n\nand `handler` is a function of shape `(req, res, context, next) => { next(err, value) }` for [`http-compose`](https://github.com/ahdinosaur/http-compose)\n\nand `routeHandler` is a handler where `context.params` is an object of path matches and `context.url` is substring of original url after path match\n\nand `routeHandlers` is an object mapping [http method names](https://www.npmjs.com/package/methods) to route handler functions.\n\n## license\n\nThe Apache License\n\nCopyright &copy; 2016 Michael Williams\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n","created":"2016-08-02T14:28:49.201Z","modified":"2017-02-08T12:09:46.833Z","lastPublisher":{"name":"ahdinosaur","email":"michael.williams@enspiral.com"},"owners":[{"name":"ahdinosaur","email":"michael.williams@enspiral.com"}],"other":{"_attachments":{},"_from":".","_id":"http-routes","_nodeVersion":"6.2.1","_npmOperationalInternal":{"host":"packages-18-east.internal.npmjs.com","tmp":"tmp/http-routes-3.0.1.tgz_1486555785203_0.5442505904939026"},"_npmUser":{"name":"ahdinosaur","email":"michael.williams@enspiral.com"},"_npmVersion":"3.9.3","_rev":"5-e5b3a8c4c3ab1df9c211f2c1ceb88cbe","_shasum":"e97389862339ee5ba82af8ee69cbc6b88a6a1585","author":{"name":"Mikey","email":"michael.williams@enspiral.com","url":"http://dinosaur.is"},"bugs":{"url":"https://github.com/ahdinosaur/http-routes/issues"},"directories":{},"dist-tags":{"latest":"3.0.1"},"dist":{"shasum":"e97389862339ee5ba82af8ee69cbc6b88a6a1585","tarball":"https://registry.npmjs.org/http-routes/-/http-routes-3.0.1.tgz"},"maintainers":[{"name":"ahdinosaur","email":"michael.williams@enspiral.com"}],"readmeFilename":"README.md","time":{"modified":"2017-02-08T12:09:46.833Z","created":"2016-08-02T14:28:49.201Z","1.2.0":"2016-08-02T14:28:49.201Z","1.2.1":"2016-08-02T14:32:22.153Z","1.2.2":"2016-08-02T14:44:14.295Z","1.2.3":"2016-08-02T14:48:02.061Z","2.0.0":"2017-01-18T12:17:47.208Z","2.0.1":"2017-01-18T12:23:20.439Z","2.0.2":"2017-01-18T12:26:39.974Z","3.0.1":"2017-02-08T12:09:46.833Z"}}}