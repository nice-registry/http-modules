{"name":"http-graceful-shutdown","version":"2.0.3","description":"gracefully shuts downs http server","main":"./lib/index.js","scripts":{"test":"echo \"Error: no test specified\" && exit 1"},"repository":"https://github.com/sebhildebrandt/http-graceful-shutdown","keywords":["http","graceful-shutdown","koa","express"],"license":"MIT","homepage":"https://github.com/sebhildebrandt/http-graceful-shutdown","dependencies":{"debug":"^2.6.4"},"engineStrict":true,"engines":{"node":">=4.0.0"},"gitHead":"b672cb755c177beaeb878dba90628757b5b2b1aa","versions":[{"number":"1.0.0","date":"2015-09-14T11:36:10.781Z"},{"number":"1.0.1","date":"2015-09-14T12:39:05.131Z"},{"number":"1.0.2","date":"2015-09-15T06:41:54.599Z"},{"number":"1.0.3","date":"2015-09-15T06:45:09.829Z"},{"number":"1.0.4","date":"2015-10-01T07:12:44.046Z"},{"number":"1.0.5","date":"2016-02-01T11:57:48.345Z"},{"number":"1.0.6","date":"2016-02-03T09:50:38.692Z"},{"number":"2.0.0","date":"2017-04-24T06:58:16.781Z"},{"number":"2.0.1","date":"2017-04-24T07:08:03.346Z"},{"number":"2.0.2","date":"2017-05-27T16:13:02.325Z"},{"number":"2.0.3","date":"2017-06-18T07:56:09.583Z"}],"readme":"# http-graceful-shutdown\n\nGracefully shuts down node http server - can be used with [express][express-url], [koa][koa-url], native node [http][http-url], ...\n\n  [![NPM Version][npm-image]][npm-url]\n  [![NPM Downloads][downloads-image]][downloads-url]\n  [![Git Issues][issues-img]][issues-url]\n  [![deps status][daviddm-img]][daviddm-url]\n  [![MIT license][license-img]][license-url]\n\n## Quick Start\n\n### Installation\n\n```bash\n$ npm install http-graceful-shutdown\n```\n\n### Basic Usage\n\n```\nvar gracefulShutdown = require('http-graceful-shutdown');\n...\nserver = app.listen(...);\n...\n\n// this enables the graceful shutdown\ngracefulShutdown(server);\n```\n\n\n### Advanced Options\n\nYou can pass an options-object to specify your specific options for the graceful shutdown\n\nThe following example uses specifies all possible options (using more or less the default settings):\n\n```\nconst gracefulShutdown = require('http-graceful-shutdown');\n...\nserver = app.listen(...);\n...\n\n// your personal cleanup function - this one takes one second to complete\nfunction cleanup() {\n  return new Promise((resolve) => {\n  \tconsole.log('... in cleanup')\n  \tsetTimeout(function() {\n  \t\tconsole.log('... cleanup finished');\n  \t\tresolve();\n  \t}, 1000)       \n  });\n}\n\n// this enables the graceful shutdown with advanced options\ngracefulShutdown(server,\n\t{\n\t\tsignals: 'SIGINT SIGTERM',\n\t\ttimeout: 30000,\n\t\tdevelopment: false,\n\t\tonShutdown: cleanup,\n\t\tfinally: function() {\n\t\t\tconsole.log('Server gracefulls shutted down.....')\n\t\t}\n\t}\n);\n```\n\n### Major (breaking) Changes - Version 2\n\n- **renamed** option: `callback`: now to `finally`: place your (not time consuming) function, that will be handled at the end of the shutdown (not in dev-mode)\n- **new** option: `onShutdown`: place your function, that will handle your additional cleanup things. Needs to return a promise\n\n### Option Reference\n\n| option         | default | Comments |\n| -------------- | --------------------- | ---------------------- |\n| signals | 'SIGINT SIGTERM' | define the signals, that should be handled (separated by SPACE) |\n| timeout | 30000 | timeout till forced shutdown (in milli seconds) |\n| development | false | if set to true, no graceful shutdown is proceeded to speed up dev-process |\n| onShutdown | - | place your (not time consuming) callback function, that will handle your additional cleanup things. Needs to return a promise |\n| finally | - | here you can place a small (not time consuming) function, that will be handled at the end of the shutdown (not in dev-mode) |\n\n### Debug\n\nIf you want to get debug notes ([debug][debug-url] is a dependency of this module), just set the DEBUG environment variable to enable\n debugging:\n\n```\nexport DEBUG=http-graeceful-shutdown\n```\n\nOR on Windows:\n\n```\nset DEBUG=http-graeceful-shutdown\n```\n\n## Version history\n\n| Version        | Date           | Comment  |\n| -------------- | -------------- | -------- |\n| 2.0.2          | 2017-05-27     | fixed return value 0 |\n| 2.0.1          | 2017-04-24     | modified documentation |\n| 2.0.0          | 2017-04-24     | added 'onShutdown' option, renamed 'callback' option to 'finally' |\n| 1.0.6          | 2016-02-03     | adding more explicit debug information and documentation |\n| 1.0.5          | 2016-02-01     | better handling of closing connections |\n| 1.0.4          | 2015-10-01     | small fixes |\n| 1.0.3          | 2015-09-15     | updated docs |\n| 1.0.1          | 2015-09-14     | updated docs, reformated code |\n| 1.0.0          | 2015-09-14     | initial release |\n\n\n## Comments\n\nIf you have ideas or comments, please do not hesitate to contact me.\n\nSincerely,\n\nSebastian Hildebrandt, [+innovations](http://www.plus-innovations.com)\n\n## Credits\n\nWritten by Sebastian Hildebrandt [sebhildebrandt](https://github.com/sebhildebrandt)\n\n## License [![MIT license][license-img]][license-url]\n\n>The [`MIT`][license-url] License (MIT)\n>\n>Copyright &copy; 2015-2017 Sebastian Hildebrandt, [+innovations](http://www.plus-innovations.com).\n>\n>Permission is hereby granted, free of charge, to any person obtaining a copy\n>of this software and associated documentation files (the \"Software\"), to deal\n>in the Software without restriction, including without limitation the rights\n>to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n>copies of the Software, and to permit persons to whom the Software is\n>furnished to do so, subject to the following conditions:\n>\n>The above copyright notice and this permission notice shall be included in\n>all copies or substantial portions of the Software.\n>\n>THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n>IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n>FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n>AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n>LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n>OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n>THE SOFTWARE.\n\n[npm-image]: https://img.shields.io/npm/v/http-graceful-shutdown.svg?style=flat-square\n[npm-url]: https://npmjs.org/package/http-graceful-shutdown\n[downloads-image]: https://img.shields.io/npm/dm/http-graceful-shutdown.svg?style=flat-square\n[downloads-url]: https://npmjs.org/package/http-graceful-shutdown\n\n[license-url]: https://github.com/sebhildebrandt/http-graceful-shutdown/blob/master/LICENSE\n[license-img]: https://img.shields.io/badge/license-MIT-blue.svg?style=flat-square\n[npmjs-license]: https://img.shields.io/npm/l/http-graceful-shutdown.svg?style=flat-square\n\n[express-url]: https://github.com/strongloop/expressjs.com\n[koa-url]: https://github.com/koajs/koa\n[http-url]: https://nodejs.org/api/http.html\n[debug-url]: https://github.com/visionmedia/debug\n\n[daviddm-url]: https://david-dm.org/sebhildebrandt/http-graceful-shutdown\n[daviddm-img]: https://img.shields.io/david/sebhildebrandt/http-graceful-shutdown.svg?style=flat-square\n\n[issues-img]: https://img.shields.io/github/issues/sebhildebrandt/http-graceful-shutdown.svg?style=flat-square\n[issues-url]: https://github.com/sebhildebrandt/http-graceful-shutdown/issues\n","starsCount":2,"created":"2015-09-14T11:36:10.781Z","modified":"2017-06-18T07:56:09.583Z","lastPublisher":{"name":"plusinnovations","email":"hildebrandt@plus-innovations.com"},"owners":[{"name":"plusinnovations","email":"hildebrandt@plus-innovations.com"}],"other":{"_attachments":{},"_from":".","_id":"http-graceful-shutdown","_nodeVersion":"7.6.0","_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/http-graceful-shutdown-2.0.3.tgz_1497772568506_0.27854783833026886"},"_npmUser":{"name":"plusinnovations","email":"hildebrandt@plus-innovations.com"},"_npmVersion":"4.1.2","_rev":"5-35afb35eef6ab68eeefa826a453259a0","_shasum":"c05303d9eeeb5f60ffefdffebc66303f86fd0044","author":{"name":"Sebastian Hildebrandt","email":"hildebrandt@plus-innovations.com","url":"https://plus-innovations.com"},"bugs":{"url":"https://github.com/sebhildebrandt/http-graceful-shutdown/issues"},"directories":{},"dist-tags":{"latest":"2.0.3"},"dist":{"shasum":"c05303d9eeeb5f60ffefdffebc66303f86fd0044","tarball":"https://registry.npmjs.org/http-graceful-shutdown/-/http-graceful-shutdown-2.0.3.tgz"},"maintainers":[{"name":"plusinnovations","email":"hildebrandt@plus-innovations.com"}],"readmeFilename":"README.md","time":{"modified":"2017-06-18T07:56:09.583Z","created":"2015-09-14T11:36:10.781Z","1.0.0":"2015-09-14T11:36:10.781Z","1.0.1":"2015-09-14T12:39:05.131Z","1.0.2":"2015-09-15T06:41:54.599Z","1.0.3":"2015-09-15T06:45:09.829Z","1.0.4":"2015-10-01T07:12:44.046Z","1.0.5":"2016-02-01T11:57:48.345Z","1.0.6":"2016-02-03T09:50:38.692Z","2.0.0":"2017-04-24T06:58:16.781Z","2.0.1":"2017-04-24T07:08:03.346Z","2.0.2":"2017-05-27T16:13:02.325Z","2.0.3":"2017-06-18T07:56:09.583Z"},"users":{"zhanghaili":true,"plusinnovations":true}}}