{"name":"http-basic","version":"5.0.3","main":"lib/index.js","types":"lib/index.d.ts","files":["lib"],"description":"Very low level wrapper arround http.request/https.request","keywords":["http","https","request","fetch","gzip","deflate","redirect","cache","etag","cache-control"],"dependencies":{"@types/concat-stream":"^1.6.0","@types/node":"^7.0.31","caseless":"~0.11.0","concat-stream":"^1.4.6","http-response-object":"^2.0.3","parse-cache-control":"^1.0.1"},"devDependencies":{"flowgen2":"^2.0.0-alpha.9","rimraf":"^2.5.4","serve-static":"^1.11.1","typescript":"^2.3.4"},"scripts":{"prepublishOnly":"npm run build","build":"tsc && flowgen lib/**/*","pretest":"npm run build","test":"node test/index && node test/cache && node test/cache-invalidation && rimraf lib/cache"},"repository":"https://github.com/ForbesLindesay/http-basic","license":"MIT","gitHead":"dc7e82cde3cdb36471489ba7eec5b70c4525a867","homepage":"https://github.com/ForbesLindesay/http-basic#readme","versions":[{"number":"0.0.1","date":"2014-08-01T14:32:31.936Z"},{"number":"1.0.0","date":"2014-08-01T15:04:01.421Z"},{"number":"1.0.1","date":"2014-08-01T15:16:46.644Z"},{"number":"1.0.2","date":"2014-08-01T15:17:44.688Z"},{"number":"1.0.3","date":"2014-08-07T11:51:34.863Z"},{"number":"1.0.4","date":"2014-12-02T15:58:29.765Z"},{"number":"1.1.0","date":"2014-12-04T15:06:34.319Z"},{"number":"1.1.1","date":"2014-12-18T11:39:22.986Z"},{"number":"2.0.0","date":"2015-01-14T23:38:02.488Z"},{"number":"2.0.1","date":"2015-01-14T23:41:02.849Z"},{"number":"2.1.0","date":"2015-01-15T06:37:15.445Z"},{"number":"2.2.0","date":"2015-01-22T15:21:00.674Z"},{"number":"2.3.0","date":"2015-01-26T13:33:07.550Z"},{"number":"2.3.1","date":"2015-02-11T14:56:10.085Z"},{"number":"2.3.2","date":"2015-02-11T15:34:44.627Z"},{"number":"2.3.3","date":"2015-02-12T10:28:39.690Z"},{"number":"2.3.4","date":"2015-02-12T10:42:58.764Z"},{"number":"2.4.0","date":"2016-01-19T15:15:46.802Z"},{"number":"2.5.0","date":"2016-03-02T18:34:32.943Z"},{"number":"2.5.1","date":"2016-03-02T18:37:24.591Z"},{"number":"3.0.0","date":"2016-12-20T16:42:21.343Z"},{"number":"3.0.1","date":"2017-02-06T14:49:05.366Z"},{"number":"4.0.0","date":"2017-02-08T17:21:26.719Z"},{"number":"4.0.1","date":"2017-02-08T17:26:28.966Z"},{"number":"5.0.0","date":"2017-06-16T11:51:15.246Z"},{"number":"5.0.1","date":"2017-06-16T12:05:03.813Z"},{"number":"5.0.2","date":"2017-06-16T17:02:40.926Z"},{"number":"5.0.3","date":"2017-06-16T17:46:04.746Z"}],"readme":"# http-basic\n\nSimple wrapper arround http.request/https.request\n\n[![Build Status](https://img.shields.io/travis/ForbesLindesay/http-basic/master.svg)](https://travis-ci.org/ForbesLindesay/http-basic)\n[![Dependency Status](https://img.shields.io/david/ForbesLindesay/http-basic.svg)](https://david-dm.org/ForbesLindesay/http-basic)\n[![NPM version](https://img.shields.io/npm/v/http-basic.svg)](https://www.npmjs.org/package/http-basic)\n\n## Installation\n\n    npm install http-basic\n\n## Usage\n\n```js\nvar request = require('http-basic');\n\nvar options = {followRedirects: true, gzip: true, cache: 'memory'};\n\nvar req = request('GET', 'http://example.com', options, function (err, res) {\n  if (err) throw err;\n  console.dir(res.statusCode);\n  res.body.resume();\n});\nreq.end();\n```\n\n**method:**\n\nThe http method (e.g. `GET`, `POST`, `PUT`, `DELETE` etc.)\n\n**url:**\n\nThe url as a string (e.g. `http://example.com`).  It must be fully qualified and either http or https.\n\n**options:**\n\n - `headers` - (default `{}`) http headers\n - `agent` - (default: `false`) controlls keep-alive (see http://nodejs.org/api/http.html#http_http_request_options_callback)\n - `followRedirects` - (default: `false`) - if true, redirects are followed (note that this only affects the result in the callback)\n - `maxRedirects` - (default: `Infinity`) - limit the number of redirects allowed.\n - `allowRedirectHeaders` (default: `null`) - an array of headers allowed for redirects (none if `null`).\n - `gzip` (default: `false`) - automatically accept gzip and deflate encodings.  This is kept completely transparent to the user.\n - `cache` - (default: `null`) - `'memory'` or `'file'` to use the default built in caches or you can pass your own cache implementation.\n - `timeout` (default: `false`) - times out if no response is returned within the given number of milliseconds.\n - `socketTimeout` (default: `false`) - calls `req.setTimeout` internally which causes the request to timeout if no new data is seen for the given number of milliseconds.\n - `retry` (default: `false`) - retry GET requests.  Set this to `true` to retry when the request errors or returns a status code greater than or equal to 400 (can also be a function that takes `(err, req, attemptNo) => shouldRetry`)\n - `retryDelay` (default: `200`) - the delay between retries (can also be set to a function that takes `(err, res, attemptNo) => delay`)\n - `maxRetries` (default: `5`) - the number of times to retry before giving up.\n - `ignoreFailedInvalidation` (default: `false`) - whether the cache should swallow errors if there is a problem removing a cached response. Note that enabling this setting may result in incorrect, cached data being returned to the user.\n - `isMatch` - `(requestHeaders: Headers, cachedResponse: CachedResponse, defaultValue: boolean) => boolean` - override the default behaviour for testing whether a cached response matches a request.\n - `isExpired` - `(cachedResponse: CachedResponse, defaultValue: boolean) => boolean` - override the default behaviour for testing whether a cached response has expired\n - `canCache` - `(res: Response<NodeJS.ReadableStream>, defaultValue: boolean) => boolean` - override the default behaviour for testing whether a response can be cached\n\n**callback:**\n\nThe callback is called with `err` as the first argument and `res` as the second argument. `res` is an [http-response-object](https://github.com/ForbesLindesay/http-response-object).  It has the following properties:\n\n - `statusCode` - a number representing the HTTP Status Code\n - `headers` - an object representing the HTTP headers\n - `body` - a readable stream respresenting the request body.\n - `url` - the URL that was requested (in the case of redirects, this is the final url that was requested)\n\n**returns:**\n\nIf the method is `GET`, `DELETE` or `HEAD`, it returns `undefined`.\n\nOtherwise, it returns a writable stream for the body of the request.\n\n## Implementing a Cache\n\nA `Cache` is an object with three methods:\n\n - `getResponse(url, callback)` - retrieve a cached response object\n - `setResponse(url, response)` - cache a response object\n - `invalidateResponse(url, callback)` - remove a response which is no longer valid\n\nA cached response object is an object with the following properties:\n\n - `statusCode` - Number\n - `headers` - Object (key value pairs of strings)\n - `body` - Stream (a stream of binary data)\n - `requestHeaders` - Object (key value pairs of strings)\n - `requestTimestamp` - Number\n\n`getResponse` should call the callback with an optional error and either `null` or a cached response object, depending on whether the url can be found in the cache.  Only `GET`s are cached.\n\n`setResponse` should just swallow any errors it has (or resport them using `console.warn`).\n\n`invalidateResponse` should call the callback with an optional error if it is unable to invalidate a response.\n\nA cache may also define any of the methods from `lib/cache-utils.js` to override behaviour for what gets cached.  It is currently still only possible to cache \"get\" requests, although this could be changed.\n\n## License\n\n  MIT\n","created":"2014-08-01T14:32:31.936Z","modified":"2017-06-16T17:46:04.746Z","lastPublisher":{"name":"forbeslindesay","email":"forbes@lindesay.co.uk"},"owners":[{"name":"forbeslindesay","email":"forbes@lindeay.co.uk"}],"other":{"_attachments":{},"_id":"http-basic","_nodeVersion":"8.0.0","_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/http-basic-5.0.3.tgz_1497635163792_0.30114359385333955"},"_npmUser":{"name":"forbeslindesay","email":"forbes@lindesay.co.uk"},"_npmVersion":"5.0.3","_rev":"10-51b00c6ab4509f42ba71805601e2a9e6","author":{"name":"ForbesLindesay"},"bugs":{"url":"https://github.com/ForbesLindesay/http-basic/issues"},"directories":{},"dist-tags":{"latest":"5.0.3"},"dist":{"integrity":"sha512-ywL884zU+ad7ekltFTXtVNgPXMYsRiqBlF273PKOaHvvKRell4GvR4i7+1A6PwrHw4STVziazeMSZu3Mdx0ejw==","shasum":"b7a0008f6cac7ef404b807cdd599dfd939802418","tarball":"https://registry.npmjs.org/http-basic/-/http-basic-5.0.3.tgz"},"maintainers":[{"name":"forbeslindesay","email":"forbes@lindeay.co.uk"}],"readmeFilename":"README.md","time":{"modified":"2017-06-16T17:46:04.746Z","created":"2014-08-01T14:32:31.936Z","0.0.1":"2014-08-01T14:32:31.936Z","1.0.0":"2014-08-01T15:04:01.421Z","1.0.1":"2014-08-01T15:16:46.644Z","1.0.2":"2014-08-01T15:17:44.688Z","1.0.3":"2014-08-07T11:51:34.863Z","1.0.4":"2014-12-02T15:58:29.765Z","1.1.0":"2014-12-04T15:06:34.319Z","1.1.1":"2014-12-18T11:39:22.986Z","2.0.0":"2015-01-14T23:38:02.488Z","2.0.1":"2015-01-14T23:41:02.849Z","2.1.0":"2015-01-15T06:37:15.445Z","2.2.0":"2015-01-22T15:21:00.674Z","2.3.0":"2015-01-26T13:33:07.550Z","2.3.1":"2015-02-11T14:56:10.085Z","2.3.2":"2015-02-11T15:34:44.627Z","2.3.3":"2015-02-12T10:28:39.690Z","2.3.4":"2015-02-12T10:42:58.764Z","2.4.0":"2016-01-19T15:15:46.802Z","2.5.0":"2016-03-02T18:34:32.943Z","2.5.1":"2016-03-02T18:37:24.591Z","3.0.0":"2016-12-20T16:42:21.343Z","3.0.1":"2017-02-06T14:49:05.366Z","4.0.0":"2017-02-08T17:21:26.719Z","4.0.1":"2017-02-08T17:26:28.966Z","5.0.0":"2017-06-16T11:51:15.246Z","5.0.1":"2017-06-16T12:05:03.813Z","5.0.2":"2017-06-16T17:02:40.926Z","5.0.3":"2017-06-16T17:46:04.746Z"}}}