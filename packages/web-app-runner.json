{"name":"web-app-runner","version":"0.91.10","description":"A simple HTTP application server that accepts or rejects connections based on authenticated attributes including ip, user agent, etc.  The server can be used stand alone or as middleware for connect or express.","main":"./app/app.js","repository":"https://github.com/darrylwest/web-app-runner","scripts":{"test":"grunt test validate-package"},"keywords":["http","server","connect","connections","static-gzip"],"dependencies":{"background-service-runner":"^0.91.10","connect":"^3.4.1","connect-gzip-static":"^1.0.0","lodash":"^4.5","node-uuid":"^1.4.7","simple-node-logger":"^0.93.11"},"devDependencies":{"casual":"^1.4.5","chai":"~1.8.1","express-mocks-http":"0.0.11","grunt":"~0.4.2","grunt-concurrent":"~0.3.0","grunt-contrib-clean":"~0.5.0","grunt-contrib-concat":"~0.3.0","grunt-contrib-copy":"~0.4.1","grunt-contrib-jshint":"~0.8.0","grunt-contrib-watch":"~0.5.3","grunt-jsdoc":"^0.5.4","grunt-mocha-test":"~0.8.1","grunt-nsp-package":"0.0.5","jshint-stylish":"~0.1.3","load-grunt-tasks":"~0.1.0","mocha":"~1.16.2","time-grunt":"~0.1.1"},"license":"Apache 2.0","homepage":"https://github.com/darrylwest/web-app-runner","gitHead":"00934108a4a562e05ea5ad30815e109015b10718","versions":[{"number":"0.90.12","date":"2014-07-23T04:31:47.111Z"},{"number":"0.90.14","date":"2014-07-23T04:47:47.236Z"},{"number":"0.90.15","date":"2014-07-23T05:01:34.451Z"},{"number":"0.90.16","date":"2014-07-23T16:07:54.257Z"},{"number":"0.90.17","date":"2014-07-23T16:17:01.083Z"},{"number":"0.90.18","date":"2014-07-23T20:53:51.328Z"},{"number":"0.90.19","date":"2014-07-23T23:08:32.899Z"},{"number":"0.90.21","date":"2014-07-25T17:20:20.214Z"},{"number":"0.90.22","date":"2014-07-25T19:41:39.022Z"},{"number":"0.90.23","date":"2014-07-25T20:19:27.344Z"},{"number":"0.90.24","date":"2014-07-25T21:49:55.935Z"},{"number":"0.90.25","date":"2014-07-25T22:21:46.580Z"},{"number":"0.90.26","date":"2014-07-25T23:59:58.244Z"},{"number":"0.90.27","date":"2014-07-26T02:36:43.717Z"},{"number":"0.90.28","date":"2014-07-26T04:34:01.680Z"},{"number":"0.90.29","date":"2014-07-26T15:12:31.900Z"},{"number":"0.90.30","date":"2014-07-26T16:54:06.101Z"},{"number":"0.90.31","date":"2014-07-26T18:00:40.175Z"},{"number":"0.90.32","date":"2014-07-26T22:57:05.929Z"},{"number":"0.90.33","date":"2014-07-28T01:18:48.556Z"},{"number":"0.90.34","date":"2014-07-28T02:08:38.217Z"},{"number":"0.90.35","date":"2014-08-05T02:48:22.956Z"},{"number":"0.90.36","date":"2014-08-05T03:03:24.777Z"},{"number":"0.90.37","date":"2014-08-07T01:41:43.890Z"},{"number":"0.90.10","date":"2014-08-11T22:56:45.756Z"},{"number":"0.90.38","date":"2014-08-11T22:58:26.194Z"},{"number":"0.90.39","date":"2014-08-14T14:36:24.846Z"},{"number":"0.90.40","date":"2014-08-17T01:30:00.114Z"},{"number":"0.90.41","date":"2014-08-19T12:47:52.809Z"},{"number":"0.90.42","date":"2014-11-16T18:42:38.016Z"},{"number":"0.90.43","date":"2014-11-16T19:03:53.974Z"},{"number":"0.90.44","date":"2014-11-16T19:27:45.368Z"},{"number":"0.90.45","date":"2014-11-16T19:47:16.770Z"},{"number":"0.90.46","date":"2015-01-26T23:47:48.898Z"},{"number":"0.90.47","date":"2015-02-08T00:45:47.571Z"},{"number":"0.90.48","date":"2015-04-03T15:03:37.448Z"},{"number":"0.90.49","date":"2015-04-25T19:21:12.963Z"},{"number":"0.91.10","date":"2016-02-19T04:23:19.618Z"}],"readme":"# Web App Runner\n- - -\n\nA simple HTTP server targeted for single-page web applications.\n\n[![NPM version](https://badge.fury.io/js/web-app-runner.svg)](http://badge.fury.io/js/web-app-runner)\n[![Build Status](https://travis-ci.org/darrylwest/web-app-runner.svg?branch=master)](https://travis-ci.org/darrylwest/web-app-runner)\n[![Dependency Status](https://david-dm.org/darrylwest/web-app-runner.svg)](https://david-dm.org/darrylwest/web-app-runner)\n\n## Overview\n\nSimple HTTP server that implements middleware for banning or re-routing authorized connections based on ip, agent or other request attributes. The server can be used stand alone or as middleware for connect or express.  Static content is scanned for gzip files and will deliver compressed files if they exist.\n\n_NOTE: this server is designed to deliver simple HTML applications that connect to alternate services.  It has a bit more features when compared with http-server, but isn't intended to be a full REST-type back-end._\n\n## Installation\n\n\tnpm install web-app-runner --save\n\n## Use\n\nThere are various levels of authentication that can be applied ranging from completely open to finely filtered.  The very basic server can be launched in a few lines of code while more robust applications include loggers, accept/reject list files, configuration files, etc. \n\n### Minimal Web Server\n\nA minimal server running on port 3000 from a root public folder that has index.html:\n\n    // by default the server returns public/index.html\n\trequire('web-app-runner').createInstance().start();\n\t\nIt's easy to stop this server--just hit ctrl-c.\n\n### Basic Server\n\nAdding options and middleware gives you a bit more flexibility:\n\n\tvar opts = {},\n\t\trunner;\n\t\n\topts.port = 3002;\n\topts.env = 'staging';\n\topts.home = './';\n\t\n\trunner = require('web-app-runner').createInstance( opts );\n\trunner.createApp().use( someMiddleWare() );\n\t\n\trunner.start();\t\n    \n### Production Web Server\n\n#### Static Configuration Example\n\nThis example shows a more realistic environment where the environment is set to production, configuration is set int the run script and the server runs in a background daemon.\n\n\t// IP & agent accept/reject lists defined in config\n\tvar configFile = __dirname + '/config.js',\n    \tlogfile = process.env.HOME + '/logs/web-app.log',\n    \tlog = require('simple-node-logger').createRollingFileLogger( logfile ),\n    \topts = { \n        \tlog:log,\n        \tenv:'production',\n        \tport:18004,\n        \thome:'./public',\n        \tdaemon:true,\n        \tclustered:true\n    \t},\n    \tfavicon = require('serve-favicon'),\n    \tconnect = require('connect'),  \n    \trunner = require('web-app-runner').createInstance( opts ),\n    \tapp = runner.createApp();\n    \n    // use additional middleware\n    app.use( favicon( home + /favicon.png ) );\n    \n\trunner.start();\n\nThe advantage to this approach is that it exposes the connect 'app', allowing you to use additional middleware.  The disadvantage is that the script is static, so can't be re-read while the service is running.\n\nYou can stop this server from the local host by doing this:\n\n\tcurl -d token=<appkey> http://127.0.0.1:<port>/shutdown\n\t\nWhere appkey is defined in options and the port is the current listening port.  Alternatively, you can find the PID by looking in the logs and send a kill signal (-2 or -9).  There is also a convenient script in the bin folder that will stop a service, daemon or not as long as it's run from the origin server like this:\n\n\t./bin/stop.js\n\t\n#### Dynamic Configuration Example\n\nThis example separates configuration into a re-readable configuration file.\n\n\trequire('web-app-runner').createInstance( { configFile: __dirname + '/conf.js' } );\n\t\nThe advantage to this approach is that running a server is a one-liner.  So, to run two or three servers is as easy as this:\n\n\tvar conf = __dirname + '/conf.js',\n\t\tports = [ 3001, 3002, 3003 ];\n\t\n\tkeys.forEach(function(port) {\n\t\trequire('web-app-runner').createInstance( { configFile:conf, port:port } );\n\t});\n\t\nEach server has its own process id and can be started/stopped independent of the other servers.\n\nThe configuration file, conf.js should implement 'readConfig' and 'readFilters'.  It might look something like this:\n\n\n\tmodule.exports.readConfig = function() {\n    \tvar config = {\n        \tenv:'staging',\n        \tport:3005,\n        \tdaemon:true,\n        \tlogFile:process.env.HOME + '/logs/staging-3005.log',\n        \tlogLevel:'warn'\n    \t};\n\n    \treturn config;\n\t};\n\n\tmodule.exports.readFilters = function() {\n    \tvar filters = {};\n\n    \tfilters.ip = {\n        \taccept:[ ],\n        \treject:[ ]\n    \t};\n\n    \tfilters.agent = {\n        \taccept:[ ],\n        \treject:[ ]\n    \t};\n\n    \treturn filters;\n\t};\n\n### IP Filter\n\nThe following IP Filter server with accept and reject specific IP addresses.  All unknown IPs are accepted.  This is modified with the __acceptUnknownVisitor__ option parameter set to false.\n\nIP filters work on lists of regular expressions for accepting and rejecting specific addresses or address ranges.  The process first checks the accept list and allows access if there is a match.  If the accept list is not matched, then the reject list is checked.  When a reject list match is detected the user is sent to the specified reject URL.\n\nThe process first checks the accept list, then the reject list.\n\n\tvar opts = {\n\t\t\tip:{\n\t\t\t\taccept:[\n\t\t\t\t\t/^127\\.0\\.0\\.1/,\n\t\t\t\t\t/^173\\.13\\.151\\.1/\n\t\t\t\t],\n\t\t\t\treject:[\n\t\t\t\t\t/^193\\.144\\.151\\.1/,\n\t\t\t\t\t/^193\\.144\\.151\\.2/\n\t\t\t\t],\n\t\t\t\tacceptUnkownVisitor:true\n\t\t\t}\n\t\t},\n\t\trunner = require('web-app-runner').createInstance( opts );\n\t\t\n\trunner.start();\n\t\nOr better yet, define the accept and reject lists in the config file and set the refresh rate.  This way, the lists are refreshed when they change.\n\n### Agent Filter\n\nAgent filters work on lists of regular expressions.  The process first checks the accept list and allows access if there is a match.  If the accept list is not matched, then the reject list is checked.  When a reject list match is detected the user is sent to the specified reject URL.  \n\n\tvar opts = {\n\t\t\tagent:{\n\t\t\t\taccept:[\n\t\t\t\t\t/chrome/[23][0-9]/,\n\t\t\t\t\t/msie 1[0-1]/,\n\t\t\t\t\t/safari/[7-8]/,\n\t\t\t\t\t/safari/534/\n\t\t\t\t],\n\t\t\t\treject:[\n\t\t\t\t\t/msie [2-9]/,\n\t\t\t\t\t/safari/[2-5]/\n\t\t\t\t\t/chrome/2[0-6]/\n\t\t\t\t\t/chrome/1[0-9]/\n\t\t\t\t],\n\t\t\t\tacceptUnkownAgent:true,\n\t\t\t\trejectURL:'/browser-not-supported.html'\n\t\t\t}\n\t\t},\n\t\trunner = require('web-app-runner').createInstance( opts );\n\t\t\n\trunner.start();\n\n## Tests\n\nTests are in place for all implemented methods. Tests are written in mocha/chai/should and include jshint rules.  To run the tests, do this:\n\n\tmake test\n\t\n\t// or \n\t\n\tmake watch\n\t\n\t// or\n\t\n\tmake jshint\n\t\n## Examples\n\nThere are a number of simple and not so simple examples in the examples folder that demonstrate how to run in development and production mode.  The examples include:\n\n* minimal-server.js - just the bare minimum to run a development server\n* basic-server.js - a bit more control over a specific environment; demonstrates gzip capabilities\n* ipfilter-server.js - demonstrates ip filtering\n* daemon-server.js - a background server done the hard way (see bin/start.js for the easy way)\n* start-page.js - a pre-loaded start page with redirect \n\nThere is also a more realistic production runner in the bin folder called bin/ that includes conf.js, start.js, status.js and stop.js scripts.\n\n- - -\n<p><small><em>Copyright © 2014-2016, rain city software | Version 0.91.10</em></small></p>\n","created":"2014-07-23T04:31:47.111Z","modified":"2016-02-19T04:23:19.618Z","lastPublisher":{"name":"darryl.west","email":"darryl.west@raincitysoftware.com"},"owners":[{"name":"darryl.west","email":"darryl.west@raincitysoftware.com"}],"other":{"_attachments":{},"_from":".","_id":"web-app-runner","_nodeVersion":"4.0.0","_npmOperationalInternal":{"host":"packages-5-east.internal.npmjs.com","tmp":"tmp/web-app-runner-0.91.10.tgz_1455855795369_0.046331905061379075"},"_npmUser":{"name":"darryl.west","email":"darryl.west@raincitysoftware.com"},"_npmVersion":"2.14.2","_rev":"1-a5845ac0347a91db088416f6ead51fc0","_shasum":"68066675f67f42025a44cff30490b3d942083173","author":{"name":"darryl.west@raincitysoftware.com"},"bugs":{"url":"https://github.com/darrylwest/web-app-runner/issues"},"directories":{},"dist-tags":{"latest":"0.91.10"},"dist":{"shasum":"68066675f67f42025a44cff30490b3d942083173","tarball":"http://registry.npmjs.org/web-app-runner/-/web-app-runner-0.91.10.tgz"},"maintainers":[{"name":"darryl.west","email":"darryl.west@raincitysoftware.com"}],"readmeFilename":"README.md","time":{"modified":"2016-02-19T04:23:19.618Z","created":"2014-07-23T04:31:47.111Z","0.90.12":"2014-07-23T04:31:47.111Z","0.90.14":"2014-07-23T04:47:47.236Z","0.90.15":"2014-07-23T05:01:34.451Z","0.90.16":"2014-07-23T16:07:54.257Z","0.90.17":"2014-07-23T16:17:01.083Z","0.90.18":"2014-07-23T20:53:51.328Z","0.90.19":"2014-07-23T23:08:32.899Z","0.90.21":"2014-07-25T17:20:20.214Z","0.90.22":"2014-07-25T19:41:39.022Z","0.90.23":"2014-07-25T20:19:27.344Z","0.90.24":"2014-07-25T21:49:55.935Z","0.90.25":"2014-07-25T22:21:46.580Z","0.90.26":"2014-07-25T23:59:58.244Z","0.90.27":"2014-07-26T02:36:43.717Z","0.90.28":"2014-07-26T04:34:01.680Z","0.90.29":"2014-07-26T15:12:31.900Z","0.90.30":"2014-07-26T16:54:06.101Z","0.90.31":"2014-07-26T18:00:40.175Z","0.90.32":"2014-07-26T22:57:05.929Z","0.90.33":"2014-07-28T01:18:48.556Z","0.90.34":"2014-07-28T02:08:38.217Z","0.90.35":"2014-08-05T02:48:22.956Z","0.90.36":"2014-08-05T03:03:24.777Z","0.90.37":"2014-08-07T01:41:43.890Z","0.90.10":"2014-08-11T22:56:45.756Z","0.90.38":"2014-08-11T22:58:26.194Z","0.90.39":"2014-08-14T14:36:24.846Z","0.90.40":"2014-08-17T01:30:00.114Z","0.90.41":"2014-08-19T12:47:52.809Z","0.90.42":"2014-11-16T18:42:38.016Z","0.90.43":"2014-11-16T19:03:53.974Z","0.90.44":"2014-11-16T19:27:45.368Z","0.90.45":"2014-11-16T19:47:16.770Z","0.90.46":"2015-01-26T23:47:48.898Z","0.90.47":"2015-02-08T00:45:47.571Z","0.90.48":"2015-04-03T15:03:37.448Z","0.90.49":"2015-04-25T19:21:12.963Z","0.91.10":"2016-02-19T04:23:19.618Z"}}}