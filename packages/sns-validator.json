{"name":"sns-validator","version":"0.3.0","description":"A standalone validator for inbound SNS HTTP messages. No dependency on the AWS SDK for JavaScript.","repository":"https://github.com/aws/aws-js-sns-message-validator","main":"index.js","devDependencies":{"chai":"^3.3.0","mocha":"^2.3.3","pem":"^1.8.1","rewire":"^2.3.4","sinon":"^1.17.6","underscore":"^1.8.3"},"scripts":{"test":"node_modules/mocha/bin/mocha"},"keywords":["AWS","SNS"],"license":"Apache-2.0","gitHead":"981c1e47a852dfd071ae01a8a52ac1cba050002c","homepage":"https://github.com/aws/aws-js-sns-message-validator#readme","readme":"# Amazon SNS Message Validator for JavaScript\n\n[![@awsforjs on Twitter](http://img.shields.io/badge/twitter-%40awsforjs-blue.svg?style=flat)](https://twitter.com/awsforjs)\n[![Build Status](https://img.shields.io/travis/aws/aws-js-sns-message-validator.svg?style=flat)](https://travis-ci.org/aws/aws-js-sns-message-validator)\n[![Apache 2 License](https://img.shields.io/github/license/aws/aws-js-sns-message-validator.svg?style=flat)](http://aws.amazon.com/apache-2-0/)\n\nThe **Amazon SNS Message Validator for Node.js** library allows you to validate\nthat incoming HTTP(S) POST messages are valid Amazon SNS notifications. This\nlibrary is standalone and does not depend on the AWS SDK for JavaScript.\n\n## Basic Usage\n\nTo validate a message, you can instantiate a `MessageValidator` object and pass\nan SNS message and a callback to its `validate` method. The message should be\nthe result of calling `JSON.parse` on the body of the HTTP(S) message sent by\nSNS to your endpoint. The callback should take two arguments, the first being\nan error and the second being the successfully validated SNS message.\n\nThe message validator checks the `SigningCertURL`, `SignatureVersion`, and\n`Signature` to make sure they are valid and consistent with the message data.\n\n```javascript\nvar MessageValidator = require('sns-validator'),\n    validator = new MessageValidator();\n\nvalidator.validate(message, function (err, message) {\n    if (err) {\n        // Your message could not be validated.\n        return;\n    }\n\n    // message has been validated and its signature checked.\n});\n```\n\n## Installation\n\nThe SNS Message Validator relies on the Node crypto module and is only designed\nto work on a server, not in a browser. The validation performed is only\nnecessary when subscribing HTTP(S)\n\n## About Amazon SNS\n\n[Amazon Simple Notification Service (Amazon SNS)][sns] is a fast, fully-managed,\npush messaging service. Amazon SNS can deliver messages to email, mobile devices\n(i.e., SMS; iOS, Android and FireOS push notifications), Amazon SQS queues,and\n— of course — HTTP/HTTPS endpoints.\n\nWith Amazon SNS, you can setup topics to publish custom messages to subscribed\nendpoints. However, SNS messages are used by many of the other AWS services to\ncommunicate information asynchronously about your AWS resources. Some examples\ninclude:\n\n* Configuring Amazon Glacier to notify you when a retrieval job is complete.\n* Configuring AWS CloudTrail to notify you when a new log file has been written.\n* Configuring Amazon Elastic Transcoder to notify you when a transcoding job\n  changes status (e.g., from \"Progressing\" to \"Complete\")\n\nThough you can certainly subscribe your email address to receive SNS messages\nfrom service events like these, your inbox would fill up rather quickly. There\nis great power, however, in being able to subscribe an HTTP/HTTPS endpoint to\nreceive the messages. This allows you to program webhooks for your applications\nto easily respond to various events.\n\n## Handling Messages\n\n### Confirming a Subscription to a Topic\n\nIn order to handle a `SubscriptionConfirmation` message, you must use the\n`SubscribeURL` value in the incoming message:\n\n```javascript\nvar https = require('https'),\n    MessageValidator = require('sns-validator'),\n    validator = new MessageValidator();\n\nvalidator.validate(message, function (err, message) {\n    if (err) {\n        console.error(err);\n        return;\n    }\n\n    if (message['Type'] === 'SubscriptionConfirmation') {\n        https.get(message['SubscribeURL'], function (res) {\n          // You have confirmed your endpoint subscription\n        });\n    }\n});\n```\n\nIf an incoming message includes multibyte characters and its encoding is utf8,\nset the encoding to `validator`.\n\n```javascript\nvar MessageValidator = require('sns-validator'),\n    validator = new MessageValidator();\nvalidator.encoding = 'utf8';\n```\n\n### Receiving a Notification\n\nTo receive a notification, use the same code as the preceding example, but\ncheck for the `Notification` message type.\n\n```javascript\nif (message['Type'] === 'Notification') {\n    // Do whatever you want with the message body and data.\n    console.log(message['MessageId'] + ': ' + message['Message']);\n}\n```\n\nThe message body will be a string, and will hold whatever data was published\nto the SNS topic.\n\n### Unsubscribing\n\nUnsubscribing looks the same as subscribing, except the message type will be\n`UnsubscribeConfirmation`.\n\n```javascript\nif (message['Type'] === 'UnsubscribeConfirmation') {\n    https.get(message['SubscribeURL'], function (res) {\n        // You have unsubscribed your endpoint.\n    });\n}\n```\n\n[sns]: http://aws.amazon.com/sns/\n[AWS SDK for JavaScript]: https://github.com/aws/aws-sdk-js\n","versions":[{"number":"0.0.1","date":"2015-10-19T21:40:57.508Z"},{"number":"0.1.1","date":"2015-10-19T21:42:41.900Z"},{"number":"0.1.2","date":"2015-10-19T22:52:17.641Z"},{"number":"0.1.0","date":"2015-10-19T22:59:31.187Z"},{"number":"0.2.0","date":"2015-10-22T03:24:56.708Z"},{"number":"0.2.1","date":"2016-04-14T00:02:12.925Z"},{"number":"0.2.2","date":"2016-12-08T00:56:08.516Z"},{"number":"0.3.0","date":"2017-04-04T20:20:31.961Z"}],"starsCount":1,"created":"2015-10-19T21:40:57.508Z","modified":"2017-04-04T20:20:31.961Z","lastPublisher":{"name":"aws","email":"aws-sdk-js@amazon.com"},"owners":[{"name":"aws","email":"aws-sdk-js@amazon.com"}],"other":{"_attachments":{},"_from":".","_id":"sns-validator","_nodeVersion":"7.8.0","_npmOperationalInternal":{"host":"packages-18-east.internal.npmjs.com","tmp":"tmp/sns-validator-0.3.0.tgz_1491337230075_0.2865946334786713"},"_npmUser":{"name":"aws","email":"aws-sdk-js@amazon.com"},"_npmVersion":"4.2.0","_rev":"4-9625175c2dd05bccf796756a4a03052c","_shasum":"bc69fa7d1ebec883b3bdede81a21b191c91c8e9f","author":{"name":"Amazon Web Services"},"bugs":{"url":"https://github.com/aws/aws-js-sns-message-validator/issues"},"directories":{"test":"test"},"dist-tags":{"latest":"0.3.0"},"dist":{"shasum":"bc69fa7d1ebec883b3bdede81a21b191c91c8e9f","tarball":"https://registry.npmjs.org/sns-validator/-/sns-validator-0.3.0.tgz"},"maintainers":[{"name":"aws","email":"aws-sdk-js@amazon.com"}],"readmeFilename":"README.md","time":{"modified":"2017-04-04T20:20:31.961Z","created":"2015-10-19T21:40:57.508Z","0.0.1":"2015-10-19T21:40:57.508Z","0.1.1":"2015-10-19T21:42:41.900Z","0.1.2":"2015-10-19T22:52:17.641Z","0.1.0":"2015-10-19T22:59:31.187Z","0.2.0":"2015-10-22T03:24:56.708Z","0.2.1":"2016-04-14T00:02:12.925Z","0.2.2":"2016-12-08T00:56:08.516Z","0.3.0":"2017-04-04T20:20:31.961Z"},"users":{"benignradiance":true}}}