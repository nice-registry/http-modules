{"name":"multi-node","version":"0.2.3","keywords":["multiple processes","http"],"licenses":[{"type":"AFLv2.1","url":"http://trac.dojotoolkit.org/browser/dojo/trunk/LICENSE#L43"},{"type":"BSD","url":"http://trac.dojotoolkit.org/browser/dojo/trunk/LICENSE#L13"}],"repository":"https://github.com/kriszyp/multi-node","main":"./lib/multi-node","readme":"Multi-node provides launching of multiple NodeJS processes for TCP/HTTP serving.\nWith multi-node it is very simple to add utilize multiple processes to concurrently\nserve HTTP requests, simply pass an http.Server object to the listen function:\n\n    var server = require(\"http\").createServer(function(request, response){\n            ... standard node request handler ...\n        });\n    var nodes = require(\"multi-node\").listen({\n    \t\tport: 80, \n    \t\tnodes: 4\n    \t}, server);\n\nThe listen function takes two arguments, the first is the options, the second is the \nserver.  The options argument may have the following properties:\n\n* port - specifying the port number to listen on (defaults to 80)\n* nodes - specifying the number of node processes (defaults to 1)\n* host - address to listen on (defaults to 0.0.0.0)\n* masterListen - Indicate whether the master process should listen and handle \nrequests as well (on by default, but you may want to turn this off if you processes are \nprone to dying and you want to reliably utilize auto-restart of processes), defaults to true\n* restartChildren - Automatically restart child process when they die (defaults to true)\n\nThe object returned from the listen function also provides some useful capabilities. \nThe return object has an \"isMaster\" property indicating if the current process is the \noriginal initiating master process. This can be used like:\n\n    var nodes = require(\"multi-node\").listen(...);\n    if(nodes.isMaster){\n        // start a repl on just one process\n        require(\"repl\").start();\n    }\n\nThe returned object also provides an \"id\" property with an id for the current \nprocess (each node/process has a unique id).\n\nInter-process Communication\n=======================\n\nMulti-node also provides critical inter-process communication facilities. For any web\napplication that requires processes to be able to communicate with each other \n(for sending messages like in chat applications, or for doing in-memory sessions, etc.),\nit is necessary for each process to be able to communicate with other processes.\nThe returned object is also an event emitter, and the \"node\" event is fired for each\nother node process that is created. The event handler is a passed a readable and \nwritable stream that can be used to communicate with the other process. For example:\n\n    var nodes = require(\"multi-node\").listen(...);\n    var allStreams = [];\n    nodes.addListener(\"node\", function(stream){\n        stream.addListener(\"data\", function(data){\n            ... receiving data from this other node process ...\n        });\n        allStreams.push(stream);\n    });\n    \n    function notifyOtherProcesses(message){\n        allStreams.forEach(function(stream){\n            stream.write(message);\n        });\n    }\n\nFraming\n--------\n\nThe stream object returned from the \"node\" event for cross-process communication\ncan be a bit unwieldy to work with by itself, since the stream events can break data\nup in non-deterministic fashion, and works at the binary level. You can use \nmulti-node's framing mechanism to simplify this. Use the frameStream() function to\ntransform a raw stream into a framed stream that follows the WebSocket API. With\nthis API you can send strings, objects, and other values with the send(value) function\nand receive these values by listening for the \"message\" event:\n\n    nodes.addListener(\"node\", function(stream){\n        stream = require(\"multi-node\").frameStream(stream);\n        stream.addListener(\"message\", function(data){\n            ... receiving string, object, or other value from the other node process ...\n        });\n        stream.send({foo:\"bar\"});\n    });\n\n\nNotes\n----\n\nNode doesn't support fd passing windows yet, so mult-process delegation doesn't work on windows. \n\nLicensing\n--------\n\nMulti-node is part of the Persevere project, and therefore is licensed under the\nAFL or BSD license. The Persevere project is administered under the Dojo foundation,\nand all contributions require a Dojo CLA.\n \n","description":"Multi-node provides launching of multiple NodeJS processes for TCP/HTTP serving. With multi-node it is very simple to add utilize multiple processes to concurrently serve HTTP requests, simply pass an http.Server object to the listen function:","scripts":{},"versions":[{"number":"0.2.2","date":"2012-07-06T21:46:22.601Z"},{"number":"0.2.3","date":"2012-07-06T21:46:25.928Z"}],"starsCount":1,"created":"2011-07-01T15:48:39.094Z","modified":"2012-07-06T22:04:03.554Z","owners":[{"name":"Kris Zyp","email":"kriszyp@gmail.com"},{"name":"kriszyp","email":"kriszyp@gmail.com"}],"other":{"_attachments":{},"_id":"multi-node","_rev":"1-e7420d1f11a93d1306037de0d6fdb95d","author":{"name":"Kris Zyp"},"directories":{"lib":"./lib"},"dist-tags":{"latest":"0.2.3"},"dist":{"shasum":"be846291357e76d7215a306805a8db464c67c156","tarball":"http://registry.npmjs.org/multi-node/-/multi-node-0.2.3.tgz"},"maintainers":[{"name":"Kris Zyp","email":"kriszyp@gmail.com"},{"name":"kriszyp","email":"kriszyp@gmail.com"}],"time":{"modified":"2012-07-06T22:04:03.554Z","created":"2011-07-01T15:48:39.094Z","0.2.2":"2012-07-06T21:46:22.601Z","0.2.3":"2012-07-06T21:46:25.928Z"},"users":{"subchen":true}}}