{"name":"pm2-githook","version":"1.9.1","description":"receive http hook from multiple source and ask pm2 to reload the application for you","main":"index.js","scripts":{"test":"echo \"Error: no test specified\" && exit 1"},"repository":"https://github.com/vmarchaud/pm2-githook","keywords":["pm2","github","gitlab","webhook","hook","reload","restart","git","pull","droneci","ci","jenkins","bitbucket"],"license":"MIT","homepage":"https://github.com/vmarchaud/pm2-githook#readme","dependencies":{"async":"^2.1.1","ipaddr.js":"^1.2.0","pm2":"^2.0.18","pmx":"^0.6.8","vizion":"^0.2.13"},"config":{"apps":{"app_name":{"secret":"mysecret","prehook":"npm install --production && git submodule update --init","posthook":"echo done","service":"github"}},"port":8888},"gitHead":"12e5b1e7eb96869e57eccb866eb85ded8b4ca218","versions":[{"number":"1.0.0","date":"2016-10-11T20:07:43.402Z"},{"number":"1.0.1","date":"2016-10-11T20:41:37.728Z"},{"number":"1.0.2","date":"2016-10-11T21:46:10.379Z"},{"number":"1.2.0","date":"2016-10-13T20:10:31.883Z"},{"number":"1.3.0","date":"2016-10-13T21:09:59.027Z"},{"number":"1.3.1","date":"2016-10-13T21:14:21.537Z"},{"number":"1.3.2","date":"2016-10-13T22:13:39.153Z"},{"number":"1.5.0","date":"2016-11-22T22:32:59.304Z"},{"number":"1.6.0","date":"2016-11-23T14:10:05.750Z"},{"number":"1.6.1","date":"2016-11-23T19:09:54.655Z"},{"number":"1.7.2","date":"2016-12-04T17:27:39.619Z"},{"number":"1.9.1","date":"2017-03-22T13:46:41.011Z"}],"readme":"## Description\n\nPM2 module to receive http webhook from github, execute pre/post hook and gracefull reload the application using pm2.\n\n## Install\n\n`pm2 install pm2-githook`\n\n## Configure\n\n- `port` (Defaults to `8888`) : The port that will be used by the http server to receive hooks.\n- `apps` : Contains definition of applications in JSON : \n\n    ```json\n      {\n        \"APP_NAME\" : {\n          \"secret\" : \"supersecret\",\n          \"prehook\" : \"npm install --production && git submodule update --init\",\n          \"posthook\" : \"echo done\",\n          \"service\": \"github\"\n        }\n      }\n    ```\n    \n    - `APP_NAME` is the name of the api **in pm2** and in the **url** defined on github or gitlab (eg: : `http://127.0.0.1:8888/APP_NAME`).\n    - `secret` is the secret you put in github/gitlab to verify that the transaction is made by github/gitlab.\n    - `prehook` is the shell command executed in the `cwd` **(care of this)** of the app after the `pull` and before the `gracefullReload`.\n    - `posthook` is the shell command executed in the `cwd` **(care of this)** of the app after making the `gracefullReload`.\n    - `service` is the service used to make the http call (`github` is the default)\n      - `github` : you'll need to set the same secret as defined in github \n      - `gitlab` : you'll need to set the secret as the token defined in gitlab\n      - `jenkins` : you'll need to set the secret as the ip of the jenkins (can specify branch)\n      - `bitbucket` : secret not needed, bitbucket ip range is inside the code (can specify branch)\n      - `droneci` : you'll need to set the secret to match the `Authorization` header defined inside the [plugin](http://addons.drone.io/webhook/) (can specify branch)\n    - `nopm2` if set to true, we will not reload the application using pm2 (default to `false`)\n    - `cwd` if provided we don't resolve the cwd using pm2 and will take this value (defaults to `undefined`)\n\n`(can specify branch)`  mean that you can use a addional configuration to run the posthook on a specific branch\n\n#### How to set these values ?\n\n After having installed the module you have to type :\n`pm2 set pm2-githook:key value`\n\nTo set the `apps` option and since its a json string, i advice you to escape it to be sure that the string is correctly set ([using this kind of tool](http://bernhardhaeussner.de/odd/json-escape/)).\n\ne.g: \n- `pm2 set pm2-githook:port 8080` (bind the http server port to 8080)\n- `pm2 set pm2-githook:apps \"{\\\"APP_NAME\\\":{\\\"secret\\\":\\\"supersecret\\\",\\\"prehook\\\":\\\"npm install --production && git submodule update --init\\\",\\\"posthook\\\":\\\"echo done\\\"}}\"` \n\n## Uninstall\n\n`pm2 uninstall pm2-githook\n","starsCount":1,"created":"2016-10-11T20:07:43.402Z","modified":"2017-04-02T08:21:02.232Z","lastPublisher":{"name":"vmarchaud","email":"contact@vmarchaud.fr"},"owners":[{"name":"vmarchaud","email":"contact@vmarchaud.fr"}],"other":{"_attachments":{},"_from":".","_id":"pm2-githook","_nodeVersion":"7.4.0","_npmOperationalInternal":{"host":"packages-18-east.internal.npmjs.com","tmp":"tmp/pm2-githook-1.9.1.tgz_1490190400377_0.9718921240419149"},"_npmUser":{"name":"vmarchaud","email":"contact@vmarchaud.fr"},"_npmVersion":"4.0.5","_rev":"7-0c9dbe2cdea2d64ce02fd8ce4913f6bb","_shasum":"d90a2e85e1cc435e4b2bfbe223896f47579e2d2d","author":{"name":"vmarchaud"},"bugs":{"url":"https://github.com/vmarchaud/pm2-githook/issues"},"directories":{},"dist-tags":{"latest":"1.9.1"},"dist":{"shasum":"d90a2e85e1cc435e4b2bfbe223896f47579e2d2d","tarball":"https://registry.npmjs.org/pm2-githook/-/pm2-githook-1.9.1.tgz"},"maintainers":[{"name":"vmarchaud","email":"contact@vmarchaud.fr"}],"readmeFilename":"README.md","time":{"modified":"2017-04-02T08:21:02.232Z","created":"2016-10-11T20:07:43.402Z","1.0.0":"2016-10-11T20:07:43.402Z","1.0.1":"2016-10-11T20:41:37.728Z","1.0.2":"2016-10-11T21:46:10.379Z","1.2.0":"2016-10-13T20:10:31.883Z","1.3.0":"2016-10-13T21:09:59.027Z","1.3.1":"2016-10-13T21:14:21.537Z","1.3.2":"2016-10-13T22:13:39.153Z","1.5.0":"2016-11-22T22:32:59.304Z","1.6.0":"2016-11-23T14:10:05.750Z","1.6.1":"2016-11-23T19:09:54.655Z","1.7.2":"2016-12-04T17:27:39.619Z","1.9.1":"2017-03-22T13:46:41.011Z"},"users":{"rocket0191":true}}}