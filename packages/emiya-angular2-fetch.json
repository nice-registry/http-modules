{"name":"emiya-angular2-fetch","version":"1.11.0","description":"An angular2 http component with token management and mutil url switch","main":"index.js","scripts":{"test":"echo \"Error: no test specified\" && exit 1"},"dependencies":{"emiya-js-utils":">=1.0.5","emiya-angular2-token":">=1.0.9"},"repository":"https://github.com/ionic2-ninja/emiya-angular2-fetch","keywords":["angular2","ionic2","javascript","js","es6","http","https","fetch","request","network","get","post","delete","put","restful","xhr"],"license":"MIT","homepage":"https://github.com/ionic2-ninja/emiya-angular2-fetch#readme","gitHead":"a8903549f3570d3666f8f7e54325fe5207927aad","versions":[{"number":"1.0.0","date":"2016-11-03T07:50:11.276Z"},{"number":"1.0.1","date":"2016-11-08T09:08:32.678Z"},{"number":"1.0.3","date":"2016-11-11T08:06:24.491Z"},{"number":"1.0.4","date":"2016-11-14T08:00:27.242Z"},{"number":"1.0.5","date":"2016-11-14T08:04:23.234Z"},{"number":"1.0.6","date":"2016-11-18T09:21:07.531Z"},{"number":"1.0.7","date":"2016-11-24T07:54:23.602Z"},{"number":"1.0.8","date":"2016-11-25T08:28:00.530Z"},{"number":"1.0.9","date":"2017-02-15T05:37:12.962Z"},{"number":"1.10.0","date":"2017-03-08T08:47:43.461Z"},{"number":"1.10.1","date":"2017-04-04T18:32:45.381Z"},{"number":"1.10.3","date":"2017-04-04T18:37:31.522Z"},{"number":"1.11.0","date":"2017-04-06T17:38:03.120Z"}],"readme":"#Emiya Angular2 Fetch\r\n\r\n##How to install\r\n```\r\nnpm install --save emiya-angular2-fetch\r\n```\r\n\r\n\r\n## Features\r\n\r\n* provide api to fetch data from remote/local address\r\n* integrated token auto management and login redirection\r\n\r\n\r\n### Usage\r\n\r\n```\r\nexport const Api = {\r\n  \r\n  //full config\r\n  \"full\": {\r\n    \"url\": {  //request url,different key correspond to different runtime enviroment\r\n       \"release\": \"http://www.hcf/h0/users/token\", \r\n       \"local\": \"local://hcf/h0/users/token.json\",     //prefix \"local://\" means it request a local json file in your project path\r\n       \"dev\": \"/hcf/h0/users/token\", \r\n       \"beta\": \"http://172.26.0.235:4040/h0/users/token\"\r\n    },\r\n    \"method\": \"post\",   //get(default)/post/put/delete\r\n    \"headers\":{uuid:'dasklaslkfh313124124'}, //additional added to request header\r\n    \"params\":{userid:'emiyalee'},   //url query params\r\n    \"data\":{password:'fasfgjal;sk2312412'},   //body params\r\n    \"restful\":{index:0},     //restful params,for example a request url like '/abc/:index/' will transform to '/abc/0/' \r\n   \r\n    \"timeout\": 6000,   //request timeout,unit is ms,default is 15000\r\n    \"sendTokens\": [{   //optional,auto send token config,can be mutilple\r\n      \"token_map\": \"uuid\",   //id for this token\r\n      \"token_src\": \"local\",  //where we get this token,local or session,default is local\r\n      \"token_transfer_mode\": \"header\",  //where we put this token on,header/query/payload/restful\r\n      \"token_name\": \"access_token\"    //how we named this token in header/query/payload/restful\r\n    },\r\n    \"getTokens\": [{  //optional,auto get token config,can be mutilple\r\n      \"token_receive_mode\": \"header\",  //where we get this token,header/payload\r\n      \"token_receive_path\": \"data.access_token.[2].[0]\",   //get token from json structure like {data:access_token[[..],                               [..],[\"tokenHere\",..]}\r\n      \"token_map\": \"a3\", how we named this token\r\n      \"token_storage_method\": \"local\"   //where we put this token,local or session,default is local\r\n    },..],\r\n    \"removeTokens\": [{optional,auto remove token config,can be mutilple\r\n      \"response_type\": \"success\",  //on request sucess(status=200) or \"error\"(status!=200)\r\n      condition_mode: 'payload',//header|payload   //determine the target data flag path(header/payload) \r\n      condition_path: 'data.list.[0].status',//determine the target data flag path\r\n      condition_value: 'ok',//optional,determine the target data flag value,null means any value representing matched,otherwise only value===condition_value means matched\r\n      \"token_map\": \"uuid\",    //which token we want to remove\r\n      \"token_remove_method\": \"local\",   //where the token we removed from\r\n    }, ..]\r\n  },\r\n  \r\n  //minimal config\r\n  \"mini\": {\r\n    \"url\": {\r\n      \"release\": \"abc\",\r\n      \"local\": \"/hcf/globalsearch/portal/querybykeyword\",\r\n      \"dev\": \"/hcf/globalsearch/portal/querybykeyword\",\r\n      \"test\": \"abc9\"\r\n    }\r\n  }\r\n  \r\n}\r\n\r\nexport const proxy = [  //proxy config\r\n  { //in cordova running enviroment or proxy force enable set to true,any request via fetch with keyword '/hcf/' will replace with \"http://www.google.com/hcfbase/hcf/\"\r\n    \"path\": \"/hcf/\",\r\n    \"proxyUrl\": \"http://www.google.com/hcfbase/hcf/\"\r\n  },..]\r\n\r\n```\r\n\r\n```\r\nimport {Fetch} from \"emiya-angular2-fetch\";\r\nimport {Api} from \"Api\";\r\n\r\n@Component({\r\n  template: `<ion-nav></ion-nav>`\r\n})\r\nexport class MyApp {\r\n\r\nconstructor(platform: Platform, fetch: Fetch,) {\r\n    //load config\r\n    fetch.load('dev', Api, proxy)   //'dev' tell fetch to use url.dev as request url,Api and proxy is what you define above\r\n    \r\n    //initiate a request\r\n    fetch.request({\r\n      \"url\":'full',    //use Api.full config\r\n      \"method\": \"post\",   //get(default)/post/put/delete\r\n      \"headers\":{uuid:'dasklaslkfh313124124'}, //additional added to request header\r\n      \"params\":{userid:'emiyalee'},   //url query params\r\n      \"data\":{password:'fasfgjal;sk2312412'},   //body params\r\n      \"restful\":{index:0},     //restful params,for example a request url like '/abc/:index/' will transform to '/abc/0/' \r\n    }).then((data)=>{dosomething..}).catch((err)=>{dosomething..})\r\n    \r\n    \r\n    //or you can initiate a request without using config\r\n    fetch.request({\r\n      \"url\":'http://www.google.com/hcfbase/hcf/login',    //fetch can not find this url in config so will treat this as a direct request url\r\n      \"method\": \"post\",\r\n    }).then((data)=>{dosomething..}).catch((err)=>{dosomething..})\r\n    \r\n    \r\n    //get request url\r\n    let url=this.fetch.src('lite',{params:{index:0}})    //fetch.srcWithoutToken do the same just without any token\r\n    console.log(url)  //url=\"http://www.google.com/hcfbase/hcf/globalsearch/portal/querybykeyword?index=0\"\r\n    \r\n    \r\n    \r\n  }\r\n}\r\n```\r\n\r\n### How to set and delete token\r\n\r\n```\r\nimport {Router} from 'emiya-angular2-token';\r\n\r\nexport class TabsPage {\r\n\r\nconstructor() {\r\n    //set tokon\r\n    Token.set('uuid','fasfasjfasjlk9312jkkfasjfaskl')\r\n    Token.set('token','fasfasjfasjlk9312jkkfasjfaskl')\r\n    //delete token\r\n    Token.delete('uuid')\r\n    Token.delete('token')\r\n    //check if token exists\r\n    Token.has('uuid')   //true or false\r\n    Token.has('token')\r\n  }\r\n}\r\n```\r\n#####more can be found [emiya-angular2-token](https://github.com/ionic2-ninja/emiya-angular2-token)\r\n\r\n\r\n### Api Referrences(todo..)\r\n\r\n\r\n","created":"2016-11-03T07:50:11.276Z","modified":"2017-04-06T17:38:03.120Z","lastPublisher":{"name":"emiyalee","email":"2288136aaa@gmail.com"},"owners":[{"name":"emiyalee","email":"2288136aaa@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"emiya-angular2-fetch","_nodeVersion":"8.0.0-rc.0","_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/emiya-angular2-fetch-1.11.0.tgz_1491500282802_0.5782855406869203"},"_npmUser":{"name":"emiyalee","email":"2288136aaa@gmail.com"},"_npmVersion":"3.10.9","_rev":"13-21c26229e680506aebd8f507c3b26b41","_shasum":"8ea66307d7406480bc26064be6a528115e3bbefb","author":{"name":"emiyalee"},"bugs":{"url":"https://github.com/ionic2-ninja/emiya-angular2-fetch/issues"},"directories":{},"dist-tags":{"latest":"1.11.0"},"dist":{"shasum":"8ea66307d7406480bc26064be6a528115e3bbefb","tarball":"https://registry.npmjs.org/emiya-angular2-fetch/-/emiya-angular2-fetch-1.11.0.tgz"},"maintainers":[{"name":"emiyalee","email":"2288136aaa@gmail.com"}],"readmeFilename":"readme.md","time":{"modified":"2017-04-06T17:38:03.120Z","created":"2016-11-03T07:50:11.276Z","1.0.0":"2016-11-03T07:50:11.276Z","1.0.1":"2016-11-08T09:08:32.678Z","1.0.3":"2016-11-11T08:06:24.491Z","1.0.4":"2016-11-14T08:00:27.242Z","1.0.5":"2016-11-14T08:04:23.234Z","1.0.6":"2016-11-18T09:21:07.531Z","1.0.7":"2016-11-24T07:54:23.602Z","1.0.8":"2016-11-25T08:28:00.530Z","1.0.9":"2017-02-15T05:37:12.962Z","1.10.0":"2017-03-08T08:47:43.461Z","1.10.1":"2017-04-04T18:32:45.381Z","1.10.3":"2017-04-04T18:37:31.522Z","1.11.0":"2017-04-06T17:38:03.120Z"}}}