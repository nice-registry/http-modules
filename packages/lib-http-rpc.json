{"name":"lib-http-rpc","version":"0.2.3","description":"define client/server http rpc","main":"index.js","scripts":{"test":"jshint index.js && tap test"},"license":"MIT","devDependencies":{"tap":"^0.4.8","routes-router":"^1.5.4","jshint":"^2.4.4"},"dependencies":{"lib-stream-future":"^0.1.0","lib-stream-liquify":"0.0.1","lib-stream-solidify":"0.0.1","lib-http-api":"0.0.1","lib-stream-http":"0.0.3"},"repository":"https://github.com/groundwater/node-lib-http-rpc","homepage":"https://github.com/groundwater/node-lib-http-rpc","versions":[{"number":"0.0.0","date":"2014-03-15T07:35:41.466Z"},{"number":"0.0.1","date":"2014-03-15T21:25:34.592Z"},{"number":"0.0.2","date":"2014-03-16T19:11:43.431Z"},{"number":"0.0.3","date":"2014-03-16T22:32:59.668Z"},{"number":"0.0.4","date":"2014-03-16T22:52:23.378Z"},{"number":"0.0.5","date":"2014-03-19T04:14:54.191Z"},{"number":"0.0.6","date":"2014-03-21T06:57:59.806Z"},{"number":"0.1.0","date":"2014-04-01T03:56:42.193Z"},{"number":"0.2.0","date":"2014-04-01T05:33:25.368Z"},{"number":"0.2.1","date":"2014-04-09T02:41:22.409Z"},{"number":"0.2.2","date":"2014-04-10T02:22:43.831Z"},{"number":"0.2.3","date":"2014-04-10T02:26:10.880Z"}],"readme":"# http rpc\n\n> rpc over http using streams\n\n[![Build Status](https://travis-ci.org/groundwater/node-lib-http-rpc.png?branch=master)](https://travis-ci.org/groundwater/node-lib-http-rpc)\n[![NPM version](https://badge.fury.io/js/lib-http-rpc.png)](http://badge.fury.io/js/lib-http-rpc)\n\nBuild *both* the client and server from a common interface.\n\n## Install\n\n```bash\nnpm install --save lib-http-rpc\n```\n\n## Usage\n\n### Common\n\nSpecify a common API between the client and server.\n\n```javascript\nvar iface = {\n  getUser: {\n    method : 'GET',\n    route  : '/user/:name',\n  },\n  setUser: {\n    method : 'POST',\n    route  : '/user/:name',\n  },\n  listUsers: {\n    method : 'GET',\n    route  : '/users',\n    options: {\n      limit: 10,\n      order: 'desc'\n    }\n  }\n};\n```\n\nCreate an `rpc` from your interface.\n\n```javascript\nvar RPC = require('lib-http-rpc')();\nvar rpc = RPC.NewFromInterface(iface);\n```\n\n### Server\n\nDefine your server application without any `http` dependencies.\n\n```javascript\nvar solidify = require('lib-stream-solidify');\nvar liquify  = require('lib-stream-liquify');\n\nfunction App() {\n  this.users = {};\n}\n\nApp.prototype.getUser = function (stream, params) {\n  var name = params.name;\n  var user = this.users[name];\n\n  // this causes an HTTP 404 error\n  if (!user) throw new RPC.Error(404, 'user not found');\n\n  stream.write(JSON.stringify(user));\n};\n\nApp.prototype.setUser = function (stream, params) {\n  var name  = params.name;\n  var users = this.users;\n\n  // parse incoming stream as json\n  solidify(stream).json(function (err, obj) {\n    if (err) throw err;\n\n    users[name] = obj;\n\n    // send response\n    stream.end();\n  });\n};\n\nApp.prototype.listUsers = function (stream, params) {\n  var limit = params.limit;\n  var order = params.order;\n  var users = Object.keys(this.users);\n\n  // sort and limit users\n  users = limitBy(limit, sortBy(order, users));\n\n  // turn user object into a stream\n  liquify(users).pipe(stream);\n};\n```\n\nGenerate a router from your application.\n\n```javascript\nvar router = rpc.getRouter(new App());\nrequire('http').createServer(router).listen(8080);\n```\n\n### Client\n\nGenerate a client based on the shared interface.\n\n```javascript\nvar client = rpc.getClient(8080, 'localhost');\nvar stream = client.getUser({name: 'bob'});\n\nstream.end().pipe(process.stdout);\n```\n","created":"2014-03-15T07:35:41.466Z","modified":"2014-04-10T02:26:10.880Z","lastPublisher":{"name":"groundwater","email":"groundwater@gmail.com"},"owners":[{"name":"groundwater","email":"groundwater@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"lib-http-rpc","_npmUser":{"name":"groundwater","email":"groundwater@gmail.com"},"_npmVersion":"1.4.4","_rev":"1-a72ea880be856983398020235d8ed779","author":{"name":"Jacob Groundwater","email":"groundwater@gmail.com"},"bugs":{"url":"https://github.com/groundwater/node-lib-http-rpc/issues"},"directories":{"test":"test"},"dist-tags":{"latest":"0.2.3"},"dist":{"shasum":"f8f9f271128122ad1404be420e4e871d27a204bd","tarball":"http://registry.npmjs.org/lib-http-rpc/-/lib-http-rpc-0.2.3.tgz"},"maintainers":[{"name":"groundwater","email":"groundwater@gmail.com"}],"readmeFilename":"README.md","time":{"modified":"2014-04-10T02:26:10.880Z","created":"2014-03-15T07:35:41.466Z","0.0.0":"2014-03-15T07:35:41.466Z","0.0.1":"2014-03-15T21:25:34.592Z","0.0.2":"2014-03-16T19:11:43.431Z","0.0.3":"2014-03-16T22:32:59.668Z","0.0.4":"2014-03-16T22:52:23.378Z","0.0.5":"2014-03-19T04:14:54.191Z","0.0.6":"2014-03-21T06:57:59.806Z","0.1.0":"2014-04-01T03:56:42.193Z","0.2.0":"2014-04-01T05:33:25.368Z","0.2.1":"2014-04-09T02:41:22.409Z","0.2.2":"2014-04-10T02:22:43.831Z","0.2.3":"2014-04-10T02:26:10.880Z"}}}