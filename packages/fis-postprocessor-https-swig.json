{"name":"fis-postprocessor-https-swig","version":"1.0.3","description":"http --> https 的处理","main":"index.js","gitHead":"39e3ea7c36bb52f697e1adcd1b809af3a9d2e09c","scripts":{},"versions":[{"number":"1.0.0","date":"2016-11-16T11:14:46.840Z"},{"number":"1.0.1","date":"2016-11-17T07:07:51.818Z"},{"number":"1.0.2","date":"2016-11-23T03:15:50.830Z"},{"number":"1.0.3","date":"2017-02-15T10:14:26.155Z"}],"readme":"# fis-postprocessor-https-swig\n> 标准后处理器插件\n\n## 作用\n> 在fis进行了异构语言编译以及标准化处理后,进行对 swig 模板中的静态资源引用作处理，以支持https请求模式下的访问。\n\n1. 将 `<img src=\"{{imgurl}}\">` 这样的模板标记替换成 `<img src=\"{{imgurl|url_trans}}\">`,不仅支持`img`标签，对所有具有`src`属性的标签都起作用，`url_trans`这个`filter`是个`swige`自定义的`filter`。\n2. 将 `<img src=\"http://www.baidu.com/favicon.ico\">` 这样的静态资源引用替换成 `<img src=\"{{'http://www.baidu.com/favicon.ico'|url_trans}}\">`\n3. 将 `<img src=\"http://www.baidu.com/{{imgname}}\">` 这样的混合拼接的`src`值，替换成`<img src=\"{{('http://www.baidu.com/' + imgname) |url_trans }}\">`\n4. 将内联css中的`background-image`的`url`为静态文本值的替换成可以同时支持http/https访问的url.\n5. 将内联css中的`background-image`的`url`为模板变量混合拼接的`url`添加`filter`。\n\n## 安装\n> `npm -g install fis-postprocessor-https-swig`\n\n## 配置\n> 需要在yog2中先定义好依赖的swig `filter`\n> 还需要一个http/https 的域名映射表，如：`var domainmap = {'http://www.baidu.com': 'https://www.baidu.com'}` 这样的object定义。\n\n    fis.config.merge({\n        ...\n        modules: {\n            ...\n            postprocessor: {\n                tpl: 'https-swig,...', // 配置tpl文件的标准化处理插件\n            },\n            ...\n        },\n        'settings': {\n            postprocessor: {\n                ...\n                'https-swig': { // 设置fis-postprocessor-https-swig\n                    domainmap: require('./domain-map.js').domainmap, // 域名映射表\n                    filter: 'http2https(_httpsInfo)', // swig filter \n                    ignore: [ // 需要忽略处理的文件列表\n                        '/client/static/js/domain-map.js'\n                    ]\n                },\n                ...\n            }\n        },\n        ...\n    });\n\n","created":"2016-11-16T11:14:46.840Z","modified":"2017-02-15T10:14:26.155Z","lastPublisher":{"name":"sudongyan","email":"feng.su@163.com"},"owners":[{"name":"sudongyan","email":"feng.su@163.com"}],"other":{"_attachments":{},"_from":".","_id":"fis-postprocessor-https-swig","_nodeVersion":"4.3.2","_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/fis-postprocessor-https-swig-1.0.3.tgz_1487153665936_0.81693788128905"},"_npmUser":{"name":"sudongyan","email":"feng.su@163.com"},"_npmVersion":"2.14.12","_rev":"4-0b5e2dce10521381bb2dde41374316ae","_shasum":"f6fb0fbf9617b5068a918d974c4d49b76baf60fe","author":{"name":"sudongyan@baidu.com"},"directories":{},"dist-tags":{"latest":"1.0.3"},"dist":{"shasum":"f6fb0fbf9617b5068a918d974c4d49b76baf60fe","tarball":"https://registry.npmjs.org/fis-postprocessor-https-swig/-/fis-postprocessor-https-swig-1.0.3.tgz"},"maintainers":[{"name":"sudongyan","email":"feng.su@163.com"}],"readmeFilename":"README.md","time":{"modified":"2017-02-15T10:14:26.155Z","created":"2016-11-16T11:14:46.840Z","1.0.0":"2016-11-16T11:14:46.840Z","1.0.1":"2016-11-17T07:07:51.818Z","1.0.2":"2016-11-23T03:15:50.830Z","1.0.3":"2017-02-15T10:14:26.155Z"}}}