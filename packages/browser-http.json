{"name":"browser-http","description":"Simple (but advanced) HTTP for browser","version":"4.0.2","repository":"https://github.com/Carrooi/Node-BrowserHttp","license":"MIT","keywords":["http","client","browser","ajax","url"],"engines":{"node":">=0.9"},"main":"./lib/Http.js","dependencies":{"events":"~1.0.2","escape-regexp":"~0.0.1"},"devDependencies":{"mocha":"~2.1.0","mocha-phantomjs":"~3.5.2","phantomjs":"~1.9.16","chai":"~2.1.1","vinyl-source-stream":"~1.1.0","browserify":"~9.0.3","coffeeify":"~1.0.0","gulp":"~3.8.11","gulp-coffee":"~2.3.1","gulp-util":"~3.0.4","gulp-rename":"~1.2.0","gulp-uglify":"~1.1.0"},"scripts":{"compile":"gulp compile","compile-source":"gulp compile-source","compile-standalone":"gulp compile-standalone","compile-tests":"gulp compile-tests","test":"mocha-phantomjs ./test/index.html","prepublish":"gulp compile-source"},"gitHead":"5e879aa8f00625a11871321c86942e517df5fd62","homepage":"https://github.com/Carrooi/Node-BrowserHttp","versions":[{"number":"1.0.0","date":"2013-07-21T17:20:58.590Z"},{"number":"1.0.1","date":"2013-07-21T17:22:46.079Z"},{"number":"1.0.2","date":"2013-07-22T21:27:29.494Z"},{"number":"1.1.2","date":"2013-07-23T08:44:09.249Z"},{"number":"1.2.0","date":"2013-07-23T13:34:51.836Z"},{"number":"1.2.1","date":"2013-07-24T10:08:14.440Z"},{"number":"1.2.2","date":"2013-08-13T17:54:25.112Z"},{"number":"1.2.3","date":"2013-08-13T18:07:26.096Z"},{"number":"1.2.4","date":"2013-08-13T18:18:48.370Z"},{"number":"1.2.5","date":"2013-08-13T18:25:39.909Z"},{"number":"1.3.0","date":"2013-08-22T08:35:25.521Z"},{"number":"1.3.1","date":"2013-08-22T08:55:34.269Z"},{"number":"1.3.2","date":"2013-08-22T09:15:38.678Z"},{"number":"1.3.3","date":"2013-08-22T09:27:33.694Z"},{"number":"1.3.4","date":"2013-08-22T09:32:23.400Z"},{"number":"1.3.5","date":"2013-08-22T09:36:41.886Z"},{"number":"1.4.0","date":"2013-08-22T10:41:12.932Z"},{"number":"1.5.0","date":"2013-08-22T17:21:48.930Z"},{"number":"1.5.1","date":"2013-08-23T07:47:22.210Z"},{"number":"1.5.2","date":"2013-08-23T13:48:06.794Z"},{"number":"1.6.0","date":"2013-08-24T08:19:25.302Z"},{"number":"1.6.1","date":"2013-08-24T08:44:20.318Z"},{"number":"1.6.2","date":"2013-08-24T08:53:16.491Z"},{"number":"1.6.3","date":"2013-08-24T09:54:09.682Z"},{"number":"1.6.4","date":"2013-08-24T10:22:19.397Z"},{"number":"1.7.0","date":"2013-08-31T10:53:22.196Z"},{"number":"1.7.1","date":"2013-09-18T07:25:16.926Z"},{"number":"1.8.0","date":"2013-09-18T10:30:27.378Z"},{"number":"2.0.0","date":"2013-12-08T16:23:00.687Z"},{"number":"2.1.1","date":"2014-01-02T08:54:40.104Z"},{"number":"2.2.0","date":"2014-01-22T20:28:15.284Z"},{"number":"3.0.0","date":"2014-05-31T19:06:17.110Z"},{"number":"3.0.1","date":"2014-05-31T19:17:57.502Z"},{"number":"3.0.2","date":"2014-11-25T14:29:05.769Z"},{"number":"3.0.3","date":"2014-11-26T08:41:12.370Z"},{"number":"4.0.1","date":"2015-03-07T15:02:12.162Z"},{"number":"4.0.2","date":"2015-03-12T12:50:38.153Z"}],"readme":"[![NPM version](https://img.shields.io/npm/v/browser-http.svg?style=flat-square)](https://www.npmjs.com/package/browser-http)\n[![Dependency Status](https://img.shields.io/gemnasium/Carrooi/Node-BrowserHttp.svg?style=flat-square)](https://gemnasium.com/Carrooi/Node-BrowserHttp)\n[![Build Status](https://img.shields.io/travis/Carrooi/Node-BrowserHttp.svg?style=flat-square)](https://travis-ci.org/Carrooi/Node-BrowserHttp)\n\n[![Donate](https://img.shields.io/badge/donate-PayPal-brightgreen.svg?style=flat-square)](https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=YJCJ4FWVRDT4A)\n\n# http-browser\n\nSimple (but advanced) library for working with http in browser (like for example jQuery.ajax).\n\nhttp-browser is instance of [EventEmitter](http://nodejs.org/api/events.html).\n\n**Newer versions uses callbacks instead of promises!!!**\n\n## Installation\n\n```\n$ npm install browser-http\n```\n\nor for standalone version just choose desired version and include it.\n\n* [Development version](https://github.com/Carrooi/Node-BrowserHttp/blob/develop/dist/http.js)\n* [Minified version](https://github.com/Carrooi/Node-BrowserHttp/blob/develop/dist/http.min.js)\n\n\n## Usage\n\n```\nvar http = require('browser-http');\n\n// or standalone version:\nvar http = window.http;\t\t// you can of course just call http directly without window at the beginning\n\nhttp.request('http://www.google.com', {type: 'GET'}, function(response, err) {\n\tif (!err) {\n\t\tconsole.log(response.text);\n\t} else {\n\t\tthrow err;\t\t// some error occurred\n\t}\n});\n```\n\nIn then function, you will get response object with data from server.\n\n## Shorthands\n\n```\nvar http = require('browser-http');\n\nhttp.get('http://www.google.com');\nhttp.post('http://www.google.com');\nhttp.put('http://www.google.com');\nhttp.delete('http://www.google.com');\nhttp.getJson('http://www.google.com');\nhttp.postJson('http://www.google.com');\nhttp.jsonp('http://www.google.com');\n```\n\n## Options\n\nIn every http function, you can set other options. Now it is just type and data.\n\n* `type`: GET, POST, PUT or DELETE. This is always replaced in shorthand methods\n* `data`: literal object of data which needs to be send to server\n* `jsonp`: name of callback for jsonp requests, when true is given `callback` name is used. Default is false\n* `jsonPrefix`: prefix for json requests\n* `parallel`: can disable parallel sending of GET requests, see issue [#4](https://github.com/sakren/node-browser-http/issues/4)\n\n### Rewriting default options\n\nSome options can be rewritten globally for all requests.\n\n* `http.options.type`: default is `GET`\n* `http.options.jsonPrefix`: default is `null`, see section `json hijacking` below\n* `http.options.parallel`: default is `true`, see issue [#4](https://github.com/sakren/node-browser-http/issues/4)\n\n## Response object\n\nBasically it is just wrapper for some data from XMLHttpRequest.\n\n* state\n* status\n* statusText\n* rawData: same like responseText\n* data: same like responseText or literal object (json)\n* xml: same like responseXML\n* error: possible error\n\n## Load JSON\n\nIf content-type in response header is `application/json` then your data will be automatically transformed into js object.\n\nIf you can not set this header on your server, than you can use `*Json` methods.\n\n```\nhttp.getJson('http://www.google.com/some.json', function(response, err) {\n\tconsole.log(response.data);\t\t// output will be object\n});\n\nhttp.postJson('http://www.google.com/some.json');\n```\n\n## Requests queue\n\nBy default all your requests are called from queue one by one, so there is always just one request running (or zero).\nInspiration from this article [http://blog.alexmaccaw.com/queuing-ajax-requests](http://blog.alexmaccaw.com/queuing-ajax-requests).\n\nYou can of course disable this behavior:\n```\nhttp.useQueue = false;\n```\n\n## JSONP\n\nIt is very easy to work with jsonp requests.\n\n```\nhttp.jsonp('http://some.url.com', function(response, err) {\n\tconsole.log(response.data);\n});\n```\n\n## Json hijacking\n\nFirst, please read [this](http://stackoverflow.com/questions/2669690/why-does-google-prepend-while1-to-their-json-responses)\ndiscussion on stackoverflow.\n\nNow if you want to use same technique just like Google or eg. Facebook do, you only need to set your own prefix in requests.\n\n```\nhttp.get('http://some.url.com', {\n\tjsonPrefix: 'while(1);'\n}, function(response, err) {\n\tconsole.log(response.data);\n});\n```\n\nString `while(1);` will be removed from the beginning of received data before parsing into json object.\n\n## Events\n\nYou can listen for all http events with your own functions.\n\n```\nhttp.on('send', function(response, request) {\n\tconsole.log('In any moment, new http request will be send to server');\n});\n\nhttp.on('afterSend', function(response, request) {\n\tconsole.log('I just sent some request to server, but there is still no response');\n});\n\nhttp.on('complete', function(error, response, request) {\n\tconsole.log('I just finished some request, but there may be some error');\n});\n\nhttp.on('success', function(response, request) {\n\tconsole.log('I have got response from server without any error :-)');\n});\n\nhttp.on('error', function(err, response, request) {\n\tconsole.log('Sorry, there was some error with this response');\n});\n```\n\n## Extensions\n\nSometimes it will be better to register whole group of events and this group is called extension.\n\n```\nhttp.addExtension('nameOfMyExtension', {\n\tsend: function(response, request) {},\n\tcomplete: function(response, request) {},\n\tsuccess: function(response, request) {},\n\terror: function(err, response, request) {},\n});\n```\n\nYou can also remove other extensions.\n\n```\nhttp.removeExtension('nameOfMyExtension');\n```\n\n### Build in extensions\n\nbrowser-http already comes with few extensions. Originally they were created for projects build on [Nette](http://nette.org/en/)\nframework, but can be used on any other project.\n\n#### Loading cursor\n\n```\nhttp.addExtension('loading', new http.Extensions.Loading);\n```\n\nEvery time new request is send, your cursor is changed into `progress` cursor. After receiving response from server, cursor\nis changed into `auto`.\n\n#### Redirect\n\n```\nhttp.addExtension('redirect', new http.Extensions.Redirect);\n```\n\nIf your server sends json data with `redirect` variable, then you will be redirected to address in this variable.\n\n#### Snippets\n\n```\nhttp.addExtension('snippets', new http.Extensions.Snippets);\n```\n\nIf in response data is `snippets` object with html id and content pairs, then browser-http will iterate throw this object,\nfind element in page with given id and change content of this element into the one from given data.\n\nSnippets HTML can be also appended to elements instead of replaced.\n\n```\n<div id=\"comments\" data-append>\n\n</div>\n```\n\n#### Ajax links\n\n```\nhttp.addExtension('links', new http.Extensions.Links(window.jQuery));\n```\n\nThis is not true extension for browser-http. It listen for all click events on `a` links with class `ajax` but not with\nclass `not-ajax` and after this click, it creates ajax request.\n\nDepends on jquery.\n\n#### Ajax forms\n\nThis is the same like the previous one, but apply for all forms with `ajax` class.\nThis extension can not handle forms with file uploads.\nDepends on jquery.\n\n```\nhttp.addExtension('forms', new http.Extensions.Forms(window.jQuery));\n```\n\n#### Am I offline?\n\n```\nhttp.addExtension('offline', new http.Extensions.Offline);\n\nhttp.on('disconnected', function() {\n\talert('Lost internet connection');\n});\n\nhttp.on('connected', function() {\n\talert('You were again connected');\n});\n```\n\nThis extension testing if your favicon.ico is reachable. You can change test destination by specifying Offline's\nconstructor argument.\n\n## Tests\n\n```\n$ npm test\n```\n\n### Test mocks\n\n```\nvar Http = null;\n\nbeforeEach(function() {\t\t// create new mocked Http object for each test case\n\tHttp = new (require('browser-http/lib/Mocks/Http'));\n\n\t// or standalone version: Http = new http.Mocks.Http;\n});\n\nit('should load some data', function(done) {\n\tHttp.receive('some data', {'content-type': 'text/plain'}, 200);\n\n\tHttp.get('localhost', function(response, err) {\n\t\texpect(response.data).to.be.equal('some data');\n\t\tdone();\n\t});\n});\n\n// text/plain in headers list is default content-type, so you don't have to set it. Also status 200 is default.\n\nit('should load some data and check received data', function(done) {\n\thttp.receive('some data', {'content-type': 'application/json'});\n\n\tHttp.once('send', function(response, request) {\n\t\texpect(request.xhr.url).to.be.equal('localhost?greeting=hello');\t\t\t// now we can test eg. url with parsed data\n\t});\n\n\tHttp.get('localhost', {data: {greeting: 'hello'}}, function(response, err) {\n\t\texpect(response.data).to.be.eql({greeting: 'hello'});\n    \tdone();\n\t});\n});\n```\n\n### Resending sent data back in response\n\n```\nHttp.receiveDataFromRequestAndSendBack({'content-type': 'application/json'});\n\nHttp.get('localhost', {data: {greeting: 'hello'}}, function(response, err) {\n\texpect(response.data).to.be.eql({greeting: 'hello'});\n});\n\nHttp.get('localhost', {data: {greeting: 'good day'}}, function(response, err) {\n\texpect(response.data).to.be.eql({greeting: 'good day'});\n});\n```\n\n### Timeout\n\nResponse will be send after 400 ms:\n```\nHttp.receive('some data', {'content-type': 'text/plain'}, 200, 400);\n\n// or simple\n\nHttp.receive('some data', null, null, 400);\n```\n\nResponse will be send between 100 and 300 ms:\n```\nHttp.receive('some data', {'content-type': 'text/plain'}, 200, {min: 100, max: 300});\n```\n\n## Changelog\n\n* 4.0.2\n\t+ Removed from bower...\n\t+ Bug with redirect and snippets extensions when there were no data in response\n\n* 4.0.1\n\t+ Updated dependencies\n\t+ Some optimizations\n\t+ Removed dependency on Q package (standalone size reduced from 201.846kb to 61.605kb) (BR break)\n\t+ Moved under [Carrooi](https://github.com/Carrooi) organization\n\t+ Add to bower registry\n\n* 3.0.3\n\t+ Accepting all responses with status 2xx and 304 as successful responses\n\t+ Added responseText to errored responses\n\n* 3.0.2\n\t+ Use upper-cased HTTP methods everywhere [#13](https://github.com/sakren/node-browser-http/issues/13)\n\n* 3.0.0 - 3.0.1\n\t+ Updated and optimized all dependencies\n\t+ Added global options [#5](https://github.com/sakren/node-browser-http/issues/5)\n\t+ Refactored and optimized queue\n\t+ Intelligent queue [#4](https://github.com/sakren/node-browser-http/issues/4)\n\t+ Mocked http object can automatically resend received data\n\t+ Mocked http object can work also with timeouts\n\t+ Optimized mocked http\n\t+ Added many tests\n\t+ Optimized development and npm environments\n\t+ Optimized all build-in extensions\n\t+ All extensions must be added via `addExtension` method (BC break)\n\t+ Removed all shortcut files, use objects in main `http` object (BC break)\n\t+ Removed dependency on jQuery in snippets extension [#6](https://github.com/sakren/node-browser-http/issues/6)\n\t+ Added support for browser history api with links extension [#7](https://github.com/sakren/node-browser-http/issues/7)\n\t+ Added support for appending HTML with snippets extension [#11](https://github.com/sakren/node-browser-http/issues/11)\n\t+ Ajax forms can be submitted just with submit inputs with `ajax` class [#12](https://github.com/sakren/node-browser-http/issues/12)\n\t+ Added offline extension for checking for internet connection [#10](https://github.com/sakren/node-browser-http/issues/10)\n\t+ Optimized standalone versions (using [gulp](http://gulpjs.com/))\n\t+ Added `removePending` and `stop` methods to queue [#3](https://github.com/sakren/node-browser-http/issues/3)\n\t+ Mocked http object must be instantiate by hand (BC break)\n\t+ Added support for missing HEAD, CONNECT, OPTIONS, and TRACE HTTP methods\n\n* 2.2.0\n\t+ Added support for environments without `require` (like with [simq](https://github.com/sakren/node-simq))\n\t+ Tests uses minified standalone version of browser-http\n\n* 2.1.1\n\t+ Removed forgotten tests building\n\n* 2.1.0\n\t+ Added support for json prefixes ([discussion on stackoverflow](http://stackoverflow.com/questions/2669690/why-does-google-prepend-while1-to-their-json-responses))\n\n* 2.0.0\n\t+ jQuery must be passed in constructor into extensions which depends on it\n\t+ Updated dependencies\n\t+ Test frameworks are in devDependencies (not globally installed)\n\t+ Large refactoring (better for testing)\n\t+ Tests does not need real server (using mock from [philikon/MockHttpRequest](https://github.com/philikon/MockHttpRequest))\n\t+ Many optimizations\n\t+ Added some badges + travis\n\n* 1.8.0\n\t+ Requests are added into queue\n\t+ Added support for jsonp\n\n* 1.7.1\n\t+ Added some tests\n\t+ Bug with responses without content-type header\n\n* 1.7.0\n\t+ Refactoring\n\t+ `buildQuery` and `urlencode` moved to `browser-http/Helpers`\n\t+ Instance of EventEmitter\n\n* 1.6.4\n\t+ Optimizations + bug with sending data\n\n* 1.6.3\n\t+ Bug with `buildQuery` - replaced with the real one from jQuery\n\n* 1.6.2\n\t+ Just removed some useless code\n\n* 1.6.1\n\t+ Forgot to add Extensions/Links shortcut\n\n* 1.6.0\n\t+ `buildQuery` should got the same output like jQuery.param\n\t+ Added some extensions\n\n* 1.5.2\n\t+ Bug with sending data via POST method\n\n* 1.5.1\n\t+ Bug with X-Requested-With header\n\n* 1.5.0\n\t+ Added method isHistoryApiSupported\n\n* 1.4.0\n\t+ Sending X-Requested-With header\n\n* 1.3.1 - 1.3.5\n\t+ Bugs\n\n* 1.3.0\n\t+ Added `urlencode` and `buildQuery` methods\n\t+ Prepared changelog\n\t+ Added some tests\n\t+ Some bugs and optimizations\n\t+ Transforming response data into json if mime type is application/json\n","created":"2013-07-21T17:20:49.712Z","modified":"2015-03-12T12:50:38.153Z","lastPublisher":{"name":"sakren","email":"sakren@gmail.com"},"owners":[{"name":"sakren","email":"sakren@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"browser-http","_npmUser":{"name":"sakren","email":"sakren@gmail.com"},"_npmVersion":"1.4.28","_rev":"1-9b18dc13b035cb156b40a87c5df02f05","_shasum":"bc3f9d5f42a5b31261f177320b4143843b0a2285","author":{"name":"David Kudera","email":"sakren@gmail.com"},"bugs":{"url":"https://github.com/Carrooi/Node-BrowserHttp/issues"},"directories":{},"dist-tags":{"latest":"4.0.2"},"dist":{"shasum":"bc3f9d5f42a5b31261f177320b4143843b0a2285","tarball":"http://registry.npmjs.org/browser-http/-/browser-http-4.0.2.tgz"},"maintainers":[{"name":"sakren","email":"sakren@gmail.com"}],"readmeFilename":"README.md","time":{"modified":"2015-03-12T12:50:38.153Z","created":"2013-07-21T17:20:49.712Z","1.0.0":"2013-07-21T17:20:58.590Z","1.0.1":"2013-07-21T17:22:46.079Z","1.0.2":"2013-07-22T21:27:29.494Z","1.1.2":"2013-07-23T08:44:09.249Z","1.2.0":"2013-07-23T13:34:51.836Z","1.2.1":"2013-07-24T10:08:14.440Z","1.2.2":"2013-08-13T17:54:25.112Z","1.2.3":"2013-08-13T18:07:26.096Z","1.2.4":"2013-08-13T18:18:48.370Z","1.2.5":"2013-08-13T18:25:39.909Z","1.3.0":"2013-08-22T08:35:25.521Z","1.3.1":"2013-08-22T08:55:34.269Z","1.3.2":"2013-08-22T09:15:38.678Z","1.3.3":"2013-08-22T09:27:33.694Z","1.3.4":"2013-08-22T09:32:23.400Z","1.3.5":"2013-08-22T09:36:41.886Z","1.4.0":"2013-08-22T10:41:12.932Z","1.5.0":"2013-08-22T17:21:48.930Z","1.5.1":"2013-08-23T07:47:22.210Z","1.5.2":"2013-08-23T13:48:06.794Z","1.6.0":"2013-08-24T08:19:25.302Z","1.6.1":"2013-08-24T08:44:20.318Z","1.6.2":"2013-08-24T08:53:16.491Z","1.6.3":"2013-08-24T09:54:09.682Z","1.6.4":"2013-08-24T10:22:19.397Z","1.7.0":"2013-08-31T10:53:22.196Z","1.7.1":"2013-09-18T07:25:16.926Z","1.8.0":"2013-09-18T10:30:27.378Z","2.0.0":"2013-12-08T16:23:00.687Z","2.1.1":"2014-01-02T08:54:40.104Z","2.2.0":"2014-01-22T20:28:15.284Z","3.0.0":"2014-05-31T19:06:17.110Z","3.0.1":"2014-05-31T19:17:57.502Z","3.0.2":"2014-11-25T14:29:05.769Z","3.0.3":"2014-11-26T08:41:12.370Z","4.0.1":"2015-03-07T15:02:12.162Z","4.0.2":"2015-03-12T12:50:38.153Z"}}}