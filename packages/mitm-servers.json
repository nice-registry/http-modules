{"name":"mitm-servers","version":"1.0.3","description":"Higher level intercepting and mocking library for Node.js HTTP requests in testing","main":"index.js","scripts":{"lint":"eslint index.js test/*.js","pretest":"npm run lint","test":"node test/test.js","coveralls":"istanbul cover test/test.js --report lcovonly -- -R spec && cat ./coverage/lcov.info | coveralls && rm -rf ./coverage"},"repository":"https://github.com/nice-shot/node-mitm-servers","keywords":["http","mocking","interception","express","test","testing"],"license":"ISC","homepage":"https://github.com/nice-shot/node-mitm-servers","devDependencies":{"async":"^0.9.0","bluebird":"^2.9.30","coveralls":"^2.11.2","eslint":"^0.24.1","express":"^4.12.3","istanbul":"^0.3.14","supertest":"^0.15.0","tape":"^4.0.0"},"dependencies":{"mitm":"^1.1.0"},"eslintConfig":{"env":{"node":true},"rules":{"quotes":[2,"single","avoid-escape"],"camelcase":[2],"linebreak-style":[2,"unix"],"max-len":[1,80,4],"no-mixed-spaces-and-tabs":[2],"semi":[2,"always"],"eqeqeq":[2],"strict":[2,"never"],"one-var":[2,"never"],"no-underscore-dangle":[0],"space-before-function-paren":[2,"always"],"no-warning-comments":[1],"indent":[2,2]}},"gitHead":"63c70bde94d5cc25eca9a9855b96ead9c379544e","versions":[{"number":"1.0.0","date":"2015-05-13T07:55:56.175Z"},{"number":"1.0.1","date":"2015-05-13T08:06:42.224Z"},{"number":"1.0.2","date":"2015-06-29T07:41:10.280Z"},{"number":"1.0.3","date":"2015-07-27T14:06:55.135Z"}],"readme":"[![Build Status](https://travis-ci.org/nice-shot/node-mitm-servers.svg?branch=master)](https://travis-ci.org/nice-shot/node-mitm-servers)\n[![Coverage Status](https://coveralls.io/repos/nice-shot/node-mitm-servers/badge.svg?branch=master)](https://coveralls.io/r/nice-shot/node-mitm-servers?branch=master)\n\n# mitm-servers\nPackage for high level HTTP server mocking using [mitm] and [express]. It allows\nmaking complex mock servers and APIs without actually running live servers in\nyour unit tests. It also simplifies the process by separating the mock servers\nfrom the actual tests as oppose to libraries like [nock] and [sinon].\n\nThis library will not intercept standard HTTP requests or TCP connections to\nanything other than the servers you define.\n\n## Usage\nEace server you create will have to be attached to a specific address. A basic\nmock will be:\n\n```js\nvar mitmServers = require('mitm-servers');\nvar express = require('express');\n\nvar mockApp = express();\nmockApp.use(express.static('test_static_google'));\n\nmitmServers.addApp('google.com', mockApp);\n```\n\nNow, whenever you send a request to google.com, you will be routed to the files\nin the `test_static_google` folder. For example:\n\n```js\nvar request = require('supertest');\n\nrequest('google.com')\n  .get('/')\n  .expect('<html><body>Fake google</body></html>')\n;\n```\n\n## Functions\n### addApp(hostname, app)\nStarts intercepting requests to the given host and handling those requests with\nthe given express app.\n* `hostname`: The target hostname as a string. You can also specific a port with\n  `:`. For example: `localhost:1234`\n* `app`: An app you've created with **express** or **connect**. Alternatively,\n  you can use any function that handles an `http.IncomingMessage` and\n  `http.ServerResponse`\n\n### removeApp(hostname)\nRemoves interceptions from the given host.\n* `hostname`: The target hostname as a string\n\n### removeAllApps()\nRemoves interceptions for all the hosts. Convenient for teardown functions.\n\n## HTTPS\nIf you need to mock a host that connections to it are sent with HTTPS you'll\nneed to specifiy the SSL port for it (443). For example:\n```js\nmitmServers.addApp('google.com:443', mockApp);\n```\n\n[mitm]: https://github.com/moll/node-mitm\n[express]: http://expressjs.com/\n[nock]: https://github.com/pgte/nock\n[sinon]: http://sinonjs.org/\n","starsCount":1,"created":"2015-05-13T07:55:56.175Z","modified":"2015-07-27T14:06:55.135Z","lastPublisher":{"name":"nice-shot","email":"shefferu@gmail.com"},"owners":[{"name":"nice-shot","email":"shefferu@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"mitm-servers","_nodeVersion":"0.12.7","_npmUser":{"name":"nice-shot","email":"shefferu@gmail.com"},"_npmVersion":"2.11.3","_rev":"1-3ef297e915eaa37efa2da947df0aa746","_shasum":"a536c4ec12871ae90d9c804fd3b7593e4244d5de","author":{"name":"Nadav Sheffer","url":"https://github.com/nice-shot"},"bugs":{"url":"https://github.com/nice-shot/node-mitm-servers/issues"},"directories":{},"dist-tags":{"latest":"1.0.3"},"dist":{"shasum":"a536c4ec12871ae90d9c804fd3b7593e4244d5de","tarball":"http://registry.npmjs.org/mitm-servers/-/mitm-servers-1.0.3.tgz"},"maintainers":[{"name":"nice-shot","email":"shefferu@gmail.com"}],"readmeFilename":"README.md","time":{"modified":"2015-07-27T14:06:55.135Z","created":"2015-05-13T07:55:56.175Z","1.0.0":"2015-05-13T07:55:56.175Z","1.0.1":"2015-05-13T08:06:42.224Z","1.0.2":"2015-06-29T07:41:10.280Z","1.0.3":"2015-07-27T14:06:55.135Z"},"users":{"jalcine":true}}}