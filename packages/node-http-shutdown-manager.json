{"name":"node-http-shutdown-manager","version":"0.1.0","description":"Class to provide for orderly shutdown of Node HTTP servers","main":"lib","repository":"https://github.com/UberEther/node-shutdown-events","license":"MIT","homepage":"https://github.com/UberEther/node-http-shutdown-manager","scripts":{"test":"mocha","test-cov":"istanbul cover --config test/istanbul.yml node_modules/mocha/bin/_mocha"},"dependencies":{"bluebird":"^2.9.13","coffee-script":"^1.9.2"},"devDependencies":{"mocha":"^2.3.0","chai":"^3.2.0","rewire":"^2.3.4","istanbul":"^0.3.5","coffee-coverage":"^0.6.3"},"gitHead":"30d28e9854bf8396c48fcb76ff7b287aa4b9f842","versions":[{"number":"0.1.0","date":"2015-09-10T15:40:19.908Z"}],"readme":"[![Build Status](https://travis-ci.org/UberEther/node-http-shutdown-manager.svg?branch=master)](https://travis-ci.org/UberEther/node-http-shutdown-manager)\n[![NPM Status](https://badge.fury.io/js/node-http-shutdown-manager.svg)](http://badge.fury.io/js/node-http-shutdown-manager)\n\n# Overview\n\nThis library provides a class to coordinate an orderly shutdown for Node.js HTTP servers.  It does so by tracking the open connections and requests,\nand when a shutdown is requested, it closes connections with no open requests and closes other connections once all requests are complete.\n\nNote that in case a request is stuck, you should always have a timeout on your shutdowns.  Consider using [node-shutdown-events](https://github.com/UberEther/node-shutdown-events) to provide for a clean way to hook into the shutdown chain.\n\nThis was inspired by [code from JoshuaWise](https://github.com/joyent/node/issues/9066).\n\n# Examples of use:\n\n```\nvar HttpShutdownManager = require(\"node-http-shutdown-manager\");\nvar http = require(\"http\");\n\n// Option 1 - let the ShutdownManager create the server\nvar mgr = new HttpShutdownManager();\nvar svr = mgr.server;\n\n// Option 2 - create it yourself\nvar svr = http.createServer();\nvar mgr = new HttpShutdownManager(svr);\n\n// When ready to shutdown...\nmgr.shutdown(function() { console.log(\"HTTP server cleanly shutdown\") });\n\n// To use the promise:\nmgr.shutdown()\n.then(function() { console.log(\"HTTP server cleanly shutdown\") });\n\n// To use with node-shutdown-events:\nprocess.on(\"shutdown\", mgr.shutdown.bind(mgr));\n```\n\n# API\n\n## new HttpShutdownManager(http = http.createServer())\nCreates a new shutdown manager for the specified server.\n- If no server is specified, one is created - the server can be accessed at ```.server```\n- You must do this **before** you start listening on the server\n\nMember variables of public interest:\n- server: Server being managed\n- numOpenConnections - Number of currently open connections to the server\n- numOpenRequests - Number of currently open requests to the server\n- totalConnections - Total number of connections opened against the server (includes currently open connections)\n- totalRequests - Total number of requests submitted to the server (includes pending requests)\n\n## reset()\nResets total counts for the server\n\n## shutdown(cb)\nCloses the server and proceedes to start closing connections.  Once all connections are closed, the callback is called.\n\nReturns a promise that is resolved when all connections are closed.\n\n# Contributing\n\nAny PRs are welcome but please stick to following the general style of the code and stick to [CoffeeScript](http://coffeescript.org/).  I know the opinions on CoffeeScript are...highly varied...I will not go into this debate here - this project is currently written in CoffeeScript and I ask you maintain that for any PRs.","created":"2015-09-10T15:40:19.908Z","modified":"2015-09-10T15:40:19.908Z","lastPublisher":{"name":"msamblanet","email":"samblanetm@uberether.com"},"owners":[{"name":"msamblanet","email":"samblanetm@uberether.com"}],"other":{"_attachments":{},"_from":".","_id":"node-http-shutdown-manager","_nodeVersion":"0.12.7","_npmUser":{"name":"msamblanet","email":"samblanetm@uberether.com"},"_npmVersion":"2.14.1","_rev":"1-f45468ca881cfefb54c2d7154d4f4706","_shasum":"7bb474d17354d122ee81dbb6a95819065cd3c99c","author":{"name":"Michael Samblanet","email":"samblanetm@uberether.com","url":"http://github.com/msamblanet/"},"bugs":{"url":"https://github.com/UberEther/node-http-shutdown-manager/issues"},"directories":{},"dist-tags":{"latest":"0.1.0"},"dist":{"shasum":"7bb474d17354d122ee81dbb6a95819065cd3c99c","tarball":"http://registry.npmjs.org/node-http-shutdown-manager/-/node-http-shutdown-manager-0.1.0.tgz"},"maintainers":[{"name":"msamblanet","email":"samblanetm@uberether.com"}],"readmeFilename":"README.md","time":{"modified":"2015-09-10T15:40:19.908Z","created":"2015-09-10T15:40:19.908Z","0.1.0":"2015-09-10T15:40:19.908Z"}}}