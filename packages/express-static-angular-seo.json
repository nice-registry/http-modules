{"name":"express-static-angular-seo","version":"1.0.0","description":"A simple reverse proxy that takes any URL and uses PhantomJS to fetch a version that has the JavaScript executed. Set the Host HTTP header to use this for more than one domain.","main":"server.coffee","license":"MIT","keywords":["generator","reverse-proxy","static","nginx"],"dependencies":{"coffee-script":"~1.6.3","forever":"~0.10.10","express":"~3.4.6","phantomjs":"~1.9.2-5","node-phantom":"alecgorge/node-phantom"},"engines":{"node":">=0.8.0"},"scripts":{"start":"node_modules/.bin/forever start -c node_modules/.bin/coffee -l forever.log server.coffee","stop":"node_modules/.bin/forever stop -c node_modules/.bin/coffee -l forever.log server.coffee || true"},"readme":"express-static-angular-seo\n==========================\n\nA simple reverse proxy that takes any URL and uses PhantomJS to fetch a version that has the JavaScript executed. Set the Host HTTP header to use this for more than one domain.\n\nThis app listens on port `8888` by default, it can be changed by setting the environment variable `NODE_PORT`.\n\nWhen loading is done on your webpage (all XHR, rendering, etc), you should call \n\n```javascript\nif(typeof window.callPhantom === \"function\") {\n\twindow.callPhantom({rendered: true});\n}\n```\n\nOr if you prefer coffeescript\n\n```coffeescript\nif typeof window.callPhantom is \"function\"\n\twindow.callPhantom rendered: true\n```\n\n## Angular.js\n\nIf you are using angular.js, you can use my module [angular-static-seo](https://github.com/alecgorge/angular-static-seo). Instructions are on that readme.\n\n# Nginx Setup\n\nYou can setup nginx to automatically send Google, Facebook, Twitter, etc to the pre-rendered versions. Nginx can also automatically cache the results:\n\n## nginx.conf\n\n```\n...\nhttp {\n\t...\n\t# caching options\n\tproxy_cache_path /var/cache/nginx levels=1:2 keys_zone=node_express_cache:8m max_size=1000m inactive=600m;\n\tproxy_temp_path /var/cache/tmp;\n\n\tserver_names_hash_bucket_size 64;\n\t...\n}\n```\n\n## sites-enabled/demo\n\n```\nupstream node_express {\n    server localhost:9000;\n}\n\nupstream express_static_angular_seo {\n\tserver localhost:8888;\n}\n\nserver {\n\tlisten 80;\n\n\taccess_log on;\n\terror_log on;\n\n\troot /www/var/express/public;\n\tindex index.html;\n\n\tserver_name example.com;\n\n\tset $is_bot '0';\n\n\tif ($http_user_agent ~ '(facebookexternalhit|googlebot|bingbot|twitterbot|teoma|Baiduspider)') {\n\t\tset $is_bot '1';\n\t}\n\n\tlocation / {\n\t\tadd_header X-Bot $is_bot;\n\n\t\tproxy_cache node_express_cache;\n\n\t\tproxy_redirect off;\n\t\tproxy_set_header Host $host;\n\t\tproxy_set_header X-Real-IP $remote_addr;\n\t\tproxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n\t\tproxy_cache_key \"$scheme$host$request_uri$is_bot\";\n\n\t\tproxy_cache_valid 1d;\n\n\t\tadd_header X-Cached $upstream_cache_status;\n\n\t\tproxy_pass http://node_express;\n\t\tif ($is_bot = '1') {\n\t\t\tproxy_pass http://express_static_angular_seo;\n\t\t}\n\t}\n}\n```\n\n## Clearing/purging the cache\n\n```\nfind /var/cache/nginx/ -type f -delete\nservice nginx restart\n```\n\nRestarting nginx is important after clearing the cache.\n","versions":[{"number":"1.0.0","date":"2013-12-11T23:15:52.928Z"}],"created":"2013-12-11T23:15:52.139Z","modified":"2013-12-11T23:15:52.928Z","lastPublisher":{"name":"alecgorge","email":"alecgorge@gmail.com"},"owners":[{"name":"alecgorge","email":"alecgorge@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"express-static-angular-seo","_npmUser":{"name":"alecgorge","email":"alecgorge@gmail.com"},"_npmVersion":"1.2.18","_rev":"1-b37c1b3898d9db426f8e01f652a504cb","author":{"name":"Alec Gorge","email":"alecgorge@gmail.com"},"directories":{},"dist-tags":{"latest":"1.0.0"},"dist":{"shasum":"3517978aae9ee02660322f75f3503f72e5a1f85b","tarball":"http://registry.npmjs.org/express-static-angular-seo/-/express-static-angular-seo-1.0.0.tgz"},"maintainers":[{"name":"alecgorge","email":"alecgorge@gmail.com"}],"readmeFilename":"README.md","time":{"modified":"2013-12-11T23:15:52.928Z","created":"2013-12-11T23:15:52.139Z","1.0.0":"2013-12-11T23:15:52.928Z"}}}