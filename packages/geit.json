{"name":"geit","version":"0.0.7","description":"Simply get source code trees from a git repository via Smart HTTP","main":"index.js","scripts":{"test":"mocha && cd test && cat list.txt list-large.txt | ./run.sh"},"repository":"https://github.com/h2so5/geit","keywords":["git","http"],"license":"MIT","homepage":"https://github.com/h2so5/geit#readme","dependencies":{"levelup":"^1.3.1","memdown":"^1.1.1","pako":"^0.2.8","request":"^2.67.0"},"devDependencies":{"minimist":"^1.2.0"},"gitHead":"2485cf58d0ecda8234db72079545cf3ed44cedf6","versions":[{"number":"0.0.1","date":"2016-01-23T05:21:09.852Z"},{"number":"0.0.2","date":"2016-01-23T11:25:21.754Z"},{"number":"0.0.3","date":"2016-01-23T15:58:22.673Z"},{"number":"0.0.4","date":"2016-01-24T02:24:37.843Z"},{"number":"0.0.5","date":"2016-01-24T09:49:06.674Z"},{"number":"0.0.6","date":"2016-01-24T12:10:36.243Z"},{"number":"0.0.7","date":"2016-01-27T07:58:08.393Z"}],"readme":"# geit 🐐\n\n[![Build Status](https://travis-ci.org/h2so5/geit.svg?branch=master)](https://travis-ci.org/h2so5/geit)\n[![npm version](https://badge.fury.io/js/geit.svg)](https://badge.fury.io/js/geit)\n\nSimply get source code trees from a git repository via Smart HTTP.\n\n- No git command-line tool required\n- Caching git objects with [levelup](https://github.com/level/levelup) (Using [memdown](https://github.com/level/memdown) as a backend by default)\n- Supporting HTTP Authentication, proxies, etc. with [request](https://github.com/request/request)\n\n## Installation\n\n```bash\n$ npm install --save geit\n```\n\n## Examples\n\n### Get 'README.md' on HEAD\n\n```javascript\nconst geit = require('geit');\nconst repo = geit('https://github.com/h2so5/geit.git');\n\nrepo.tree('HEAD', function(tree, err) {\n  const blobID = tree['README.md'].object;\n\n  repo.blob(blobID, function(data, err) {\n    console.log(data.toString());\n  });\n});\n```\n\n### Get 'README.md' on HEAD (Promise)\n\n```javascript\nconst geit = require('geit');\nconst repo = geit('https://github.com/h2so5/geit.git');\n\nrepo.tree('HEAD').then((tree) => {\n  const blobID = tree['README.md'].object;\n  \n  return repo.blob(blobID);\n}).then((data) => {\n  console.log(data.toString());\n});\n```\n\n### Extract all files in a tree\n\n(Same as `git clone --depth 1` without .git directory)\n\n```javascript\nconst geit = require('geit');\nconst path = require('path');\nconst fs = require('fs');\n\nconst repo = geit('https://github.com/h2so5/geit.git');\n\nrepo.tree('HEAD', function(tree, err) {\n  extractTree(repo, tree, './geit');\n});\n\nfunction extractTree(repo, tree, dir) {\n  fs.mkdirSync(dir);\n  for (let name in tree) {\n    const item = tree[name];\n    const pathname = path.join(dir, name);\n    switch (item.mode) {\n      case '040000':  // directory\n        extractTree(repo, item.children, pathname);\n        break;\n      case '120000':  // symbolic link\n        repo.blob(item.object, function(blob, err) {\n          fs.linkSync(pathname, blob.toString());\n        });\n\n        break;\n      case '160000':  // submodule\n        fs.mkdirSync(pathname);\n        break;\n      default:\n        const mode = parseInt(item.mode.slice(-4), 8); // permissions\n        repo.blob(item.object, function(blob, err) {\n          fs.writeFileSync(pathname, blob, { mode: mode });\n        });\n    }\n  }\n}\n```\n\n### HTTP Authentication\n```javascript\nconst repo = geit('https://github.com/h2so5/geit.git', {\n  request: {\n    auth: { user: 'username', pass: 'password' },\n  },\n});\n```\n\n### Use leveldown instead of memdown\n```bash\n$ npm install --save leveldown\n```\n\n```javascript\nconst levelup = require('levelup');\nconst repo = geit('https://github.com/h2so5/geit.git', {\n  db: levelup('./geit.db'),\n});\n```\n\n## API\n\n## `geit(url[, options]) -> [Repository]`\n\n- `url` String - Repository URL\n- `options` Object\n  - `db` Object - [levelup](https://github.com/level/levelup) database object\n  - `request` - Additional options for [request](https://github.com/request/request)\n\n## `repo.refs([callback]) -> [Promise]`\n\n- `callback` Function\n  - `refs` Object - Git references\n  - `err` Object - Error\n\n## `repo.tree(id[, callback]) -> [Promise]`\n\n- `id` String - Commit ID | Branch name | Tag name | Ref name\n- `callback` Function\n  - `tree` Object - Git tree\n  - `err` Object - Error\n\n## `repo.blob(id[, callback]) -> [Promise]`\n\n- `id` String - Blob ID\n- `callback` Function\n  - `blob` Buffer - Blob data\n  - `err` Object - Error\n","starsCount":1,"created":"2016-01-23T05:21:09.852Z","modified":"2016-01-27T07:58:08.393Z","lastPublisher":{"name":"h2so5","email":"mail@h2so5.net"},"owners":[{"name":"h2so5","email":"mail@h2so5.net"}],"other":{"_attachments":{},"_from":".","_id":"geit","_nodeVersion":"4.0.0","_npmUser":{"name":"h2so5","email":"mail@h2so5.net"},"_npmVersion":"2.14.2","_rev":"1-5e5fdb345dcbb74b61e30cb10aa8c0bf","_shasum":"c04054b2528bd7a5934d619bafdf6cd497eecc29","author":{"name":"h2so5"},"bugs":{"url":"https://github.com/h2so5/geit/issues"},"directories":{},"dist-tags":{"latest":"0.0.7"},"dist":{"shasum":"c04054b2528bd7a5934d619bafdf6cd497eecc29","tarball":"http://registry.npmjs.org/geit/-/geit-0.0.7.tgz"},"maintainers":[{"name":"h2so5","email":"mail@h2so5.net"}],"readmeFilename":"README.md","time":{"modified":"2016-01-27T07:58:08.393Z","created":"2016-01-23T05:21:09.852Z","0.0.1":"2016-01-23T05:21:09.852Z","0.0.2":"2016-01-23T11:25:21.754Z","0.0.3":"2016-01-23T15:58:22.673Z","0.0.4":"2016-01-24T02:24:37.843Z","0.0.5":"2016-01-24T09:49:06.674Z","0.0.6":"2016-01-24T12:10:36.243Z","0.0.7":"2016-01-27T07:58:08.393Z"},"users":{"tzmartin":true}}}