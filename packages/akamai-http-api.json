{"name":"akamai-http-api","version":"0.6.0","main":"./lib/akamai.js","description":"Akamai NetStorage HTTP API for Node.js","keywords":["akamai","api","http","netstorage"],"repository":"https://github.com/kkamkou/node-akamai-http-api","license":"MIT","scripts":{"test":"istanbul cover ./node_modules/mocha/bin/_mocha --report lcovonly -- -R spec && cat ./coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js && rm -rf ./coverage"},"dependencies":{"lodash":"~4.16","request":"~2.78","xml2js":">=0.4.16"},"devDependencies":{"coveralls":"~2.11","istanbul":"~0.4.3","mocha":"~3.1","should":"~11.1"},"gitHead":"a57ffd25b784cdb206dbb9d6a1f3571d69dd2438","homepage":"https://github.com/kkamkou/node-akamai-http-api#readme","versions":[{"number":"0.1.1","date":"2013-10-27T11:53:15.632Z"},{"number":"0.2.0","date":"2013-11-22T18:53:37.983Z"},{"number":"0.2.1","date":"2013-11-29T20:10:01.016Z"},{"number":"0.2.2","date":"2015-05-25T19:52:34.676Z"},{"number":"0.3.0","date":"2015-08-19T11:33:07.530Z"},{"number":"0.4.0","date":"2015-10-16T10:45:14.485Z"},{"number":"0.5.0","date":"2016-06-08T18:01:55.345Z"},{"number":"0.5.1","date":"2016-09-04T11:29:02.556Z"},{"number":"0.6.0","date":"2017-01-25T20:27:56.587Z"}],"readme":"node-akamai-http-api\n====================\nAkamai NetStorage HTTP API for Node.js (Unofficial).  \n\n[![Build Status](https://travis-ci.org/kkamkou/node-akamai-http-api.svg?branch=master)](https://travis-ci.org/kkamkou/node-akamai-http-api)\n[![Dependency Status](https://www.versioneye.com/user/projects/56eca2d34fb9b000127dc24e/badge.svg?style=flat)](https://www.versioneye.com/user/projects/56eca2d34fb9b000127dc24e)\n[![Coverage Status](https://coveralls.io/repos/github/kkamkou/node-akamai-http-api/badge.svg?branch=master)](https://coveralls.io/github/kkamkou/node-akamai-http-api?branch=master)\n[![Code Climate](https://codeclimate.com/github/kkamkou/node-akamai-http-api/badges/gpa.svg)](https://codeclimate.com/github/kkamkou/node-akamai-http-api)\n\n* Official library [might be found here](https://github.com/akamai-open/NetStorageKit-Node)  \n(though, the quality of this library is suspicious).\n\n## Installation\n```\n\"dependencies\": {\n  \"akamai-http-api\": \"0.6.*\" // see the \"releases\" section\n}\n```\n```npm update```\n\n## Initialization\n```javascript\nvar akamai = require('akamai-http-api');\nakamai.setConfig({\n  keyName: 'keyName',\n  key: 'aLongString',\n  host: 'changeme.akamaihd.net',\n  ssl: true, // optional, default: false\n  verbose: false, // optional, default: false\n  request: { // optional, request.js options, see: https://github.com/request/request#requestoptions-callback\n    timeout: 20000 // 20s is the dafault value\n  }\n});\n```\n\n### Notices\n1. You have to [enable the netstorage HTTP API](https://control.akamai.com/dl/customers/NS/NetStrgHttpCM.pdf) access using the control.akamai.com website\n2. Ensure there are no more than 15 operations/second on netstorage, otherwise you can expect netstorage to serve 500 errors.\n3. Double check the `host` value. In case of typo (fe: `test.upload.akamai.com`), the client just sits there trying to open up a socket. Default timeout is `20s`.\n\n## API\n### Advanced\n#### upload\n```javascript\nvar fs = require('fs'),\n  stream = fs.createReadStream('cool/file.jpg');\nakamai.upload(stream, '/12345/MyFolder/MyFile.jpg', function (err, data) {});\n```\n#### download\n```javascript\nvar fs = require('fs'),\n  stream = fs.createWriteStream('cool/file_download.jpg');\nakamai.download(pathRemoteFile, stream, function (err, data) {});\n```\n#### mtime\n```javascript\nakamai.mtime('/12345/MyFolder/MyFile.jpg', new Date(), function (err, data) {});\n```\n\n### Basic\n#### du\n```javascript\nakamai.du('/12345/MyFolder', function (err, data) {});\n```\n#### dir\n```javascript\nakamai.dir('/12345/MyFolder', function (err, data) {});\n```\n#### stat\n```javascript\nakamai.stat('/12345/MyFolder', function (err, data) {});\n```\n#### delete\n```javascript\nakamai.delete('/12345/MyFolder/MyFile.jpg', function (err, data) {});\n```\n#### mkdir\n```javascript\nakamai.mkdir('/12345/MyFolder', function (err, data) {});\n```\n#### rmdir\n```javascript\nakamai.rmdir('/12345/MyFolder', function (err, data) {});\n```\n#### rename\n```javascript\nakamai.rename('/12345/MyFile.jpg', '/12345/MyFileNew.jpg', function (err, data) {});\n```\n#### symlink\n```javascript\nakamai.symlink('/12345/MyFile.jpg', '/12345/MyFileSymlink.jpg', function (err, data) {});\n```\n\n### Helpers\n#### fileExists\n```javascript\nakamai.fileExists('/12345/MyFile.jpg', function (err, boolFlag) {});\n```\n\n### Exceptions\nFor the communication netstorage HTTP API uses [HTTP codes](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html).\nHence, a number of methods may trigger an exception. For example `mkdir` in case the target already exists.\nOr `symlink` in case the target doesn't exist.\n\nTo handle these exceptions the `err` object has an abnormal `code` attribute.\n\n```javascript\nakamai.mkdir('...', function (err, data) {\n  if (err.code === 409) { } // it already exists\n  if (err.message.indexOf(409) !== -1) // the same\n});\n```\n\n### How to extend it?\n```javascript\nvar akamai = require('akamai-http-api'),\n  _ = require('lodash'),\n  myAkamai = Object.create(akamai);\n\n// custom headers for the upload function\nmyAkamai.upload = function (stream, path, custHeaders, cb) {\n  var options = {\n    request: {method: 'put'},\n    headers: _.extend({action: 'upload', 'upload-type': 'binary'}, custHeaders)\n  };\n  stream.pipe(this.getRequestObject(path, options, cb));\n  return this;\n};\n\n// quick-delete function (you should enable it first!)\nmyAkamai.quickDelete = function (path, cb) {\n  var options = {\n    request: {method: 'put'},\n    headers: {action: 'quick-delete', 'quick-delete': 'imreallyreallysure'}\n  };\n  this.getRequestObject(path, options, cb);\n  return this;\n};\n\n// exporting outside\nmodule.exports = myAkamai;\n```\n\n## Docker\n```sh\n# modify test/akamai.js#19-21 first\n[sudo] docker build -t node-akamai-http-api .\n[sudo] docker run -ti --rm node-akamai-http-api\n```\n\n## License\nThe MIT License (MIT)  \nCopyright (c) 2013-2017 Kanstantsin Kamkou\n","starsCount":2,"created":"2013-10-27T11:53:11.345Z","modified":"2017-01-25T20:27:56.587Z","lastPublisher":{"name":"kkamkou","email":"kkamkou@gmail.com"},"owners":[{"name":"kkamkou","email":"kkamkou@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"akamai-http-api","_nodeVersion":"4.7.2","_npmOperationalInternal":{"host":"packages-18-east.internal.npmjs.com","tmp":"tmp/akamai-http-api-0.6.0.tgz_1485376076033_0.8708966388367116"},"_npmUser":{"name":"kkamkou","email":"kkamkou@gmail.com"},"_npmVersion":"2.15.11","_rev":"2-c8db34cf916cf2ddea3431f30db9cf89","_shasum":"4dc3e579d8705bde8343aa8ba99285a24133bcc3","author":{"name":"Kanstantsin Kamkou","email":"kkamkou@gmail.com"},"bugs":{"url":"https://github.com/kkamkou/node-akamai-http-api/issues"},"directories":{},"dist-tags":{"latest":"0.6.0"},"dist":{"shasum":"4dc3e579d8705bde8343aa8ba99285a24133bcc3","tarball":"https://registry.npmjs.org/akamai-http-api/-/akamai-http-api-0.6.0.tgz"},"maintainers":[{"name":"kkamkou","email":"kkamkou@gmail.com"}],"readmeFilename":"README.md","time":{"modified":"2017-01-25T20:27:56.587Z","created":"2013-10-27T11:53:11.345Z","0.1.1":"2013-10-27T11:53:15.632Z","0.2.0":"2013-11-22T18:53:37.983Z","0.2.1":"2013-11-29T20:10:01.016Z","0.2.2":"2015-05-25T19:52:34.676Z","0.3.0":"2015-08-19T11:33:07.530Z","0.4.0":"2015-10-16T10:45:14.485Z","0.5.0":"2016-06-08T18:01:55.345Z","0.5.1":"2016-09-04T11:29:02.556Z","0.6.0":"2017-01-25T20:27:56.587Z"},"users":{"kkamkou":true,"nmrony":true}}}