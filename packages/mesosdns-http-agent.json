{"name":"mesosdns-http-agent","version":"0.2.2","description":"A http.Agent which makes it possible to consume Mesos service resources by simply using the Mesos DNS service names","main":"index.js","scripts":{"test":"echo \"Error: no test specified\" && exit 1"},"repository":"https://github.com/tobilg/mesosdns-http-agent","keywords":["Mesos DNS","DNS","Mesosphere","Service Discovery","http","agent","request","transparent","resolve"],"license":"MIT","homepage":"https://github.com/tobilg/mesosdns-http-agent","dependencies":{"mesosdns-client":"^0.3.2"},"gitHead":"89c314e95ecba5a82e70989539d14c04b698db42","versions":[{"number":"0.1.0","date":"2015-11-05T10:51:00.354Z"},{"number":"0.2.0","date":"2016-04-26T18:36:05.214Z"},{"number":"0.2.1","date":"2016-04-26T19:06:47.868Z"},{"number":"0.2.2","date":"2016-04-27T10:24:40.485Z"}],"readme":"# mesosdns-http-agent\n\nA http.Agent which makes it possible to consume Mesos service resources by simply using the Mesos DNS service names.\n\n## Usage\n\n### Basic usage\n\nTo use the `mesosdns-http-agent` package together with the [request](https://www.npmjs.com/package/request) module, you can simple modify the `Request.defaults()`. \nThis will then use the same configuration with every request. Minimally, you'll have to configure one or more Mesos DNS server IPs:\n\n```\nvar MesosDNSAgent = require(\"mesosdns-http-agent\"),\n    Request = require(\"request\");\n\nvar request = Request.defaults({\n    agentClass: MesosDNSAgent,\n    agentOptions: {\n        \"dnsServers\": [\"192.168.0.101\", \"192.168.0.101\", \"192.168.0.102\"],\n        \"mesosTLD\": \".mesos\" // This is optional, the mesosdns-client default is .mesos\n    },\n    pool: {}\n});\n\nvar start1 = new Date().getTime();\n// Will just use the globalAgent because the TLD is not associated with Mesos DNS\nrequest(\"http://pkg.freebsd.org/\", function(error, response, body) {\n    if (error) console.log(error);\n    console.log(\"First call took \" + (new Date().getTime()-start1));\n});\n\nvar start2 = new Date().getTime();\n// Will use the mesosdns-http-agent\nrequest(\"http://web.marathon.mesos/\", function(error, response, body) {\n    if (error) {\n        console.log(error);\n    } else {\n        console.log(\"Call took \" + (new Date().getTime()-start2) + 'ms with status ' + response.statusCode);\n        console.log(body);\n    }\n});\n```\n\nYou can use all available options of the [mesosdns-client](https://github.com/tobilg/mesosdns-client#options) package.\n\n### Advanced usage\n\nBy default, the `mesosdns-client` will always use the first port which is returned for each service (instance). There may be applications which require to use another exposed port,\nfor example if a dockerized app (in bridged mode) was started on Marathon which exposes multiple `containerPort` values. This is also important if you defined the `Request.defaults()`,\n but also want to be able to use other Marathon app's ports within the same Node.js application. \n \nThen, you can create an `options` object like the following to define the port index to be used by setting the `defaultPortIndex` property to the desired value (look in the Marathon UI to compare).\n\n```\nvar MesosDNSAgent = require(\"mesosdns-http-agent\"),\n    request = require(\"request\");\n    \nvar options = {\n    agentClass: MesosDNSAgent,\n    agentOptions: {\n        \"dnsServers\": [\"192.168.0.101\", \"192.168.0.101\", \"192.168.0.102\"],\n        \"defaultPortIndex\": 1\n    },\n    url: \"http://web.marathon.mesos/\"\n};\n\nvar start = new Date().getTime();\nrequest(options, function(error, response, body) {\n    if (error) console.log(error);\n    console.log(body);\n    console.log(\"Call took \" + (new Date().getTime()-start));\n});\n```\n\n\n","created":"2015-11-05T10:51:00.354Z","modified":"2016-04-27T10:24:40.485Z","lastPublisher":{"name":"tobilg","email":"tobilg@users.noreply.github.com"},"owners":[{"name":"tobilg","email":"tobi.78@gmx.de"}],"other":{"_attachments":{},"_from":".","_id":"mesosdns-http-agent","_nodeVersion":"4.1.1","_npmOperationalInternal":{"host":"packages-16-east.internal.npmjs.com","tmp":"tmp/mesosdns-http-agent-0.2.2.tgz_1461752679543_0.8962946766987443"},"_npmUser":{"name":"tobilg","email":"tobilg@users.noreply.github.com"},"_npmVersion":"2.14.4","_rev":"1-cd4cc5d7c19a3a1849861b6f0208e7fc","_shasum":"a806776bcf393be9a0661a3daa47b4f0b227b30f","author":{"name":"TobiLG"},"bugs":{"url":"https://github.com/tobilg/mesosdns-http-agent/issues"},"directories":{},"dist-tags":{"latest":"0.2.2"},"dist":{"shasum":"a806776bcf393be9a0661a3daa47b4f0b227b30f","tarball":"http://registry.npmjs.org/mesosdns-http-agent/-/mesosdns-http-agent-0.2.2.tgz"},"maintainers":[{"name":"tobilg","email":"tobi.78@gmx.de"}],"readmeFilename":"README.md","time":{"modified":"2016-04-27T10:24:40.485Z","created":"2015-11-05T10:51:00.354Z","0.1.0":"2015-11-05T10:51:00.354Z","0.2.0":"2016-04-26T18:36:05.214Z","0.2.1":"2016-04-26T19:06:47.868Z","0.2.2":"2016-04-27T10:24:40.485Z"}}}