{"name":"restling","version":"0.9.1","description":"Restling is a lightweight Node.js module for building promise-based asynchronous HTTP requests.","main":"restling.js","scripts":{"test":"mocha spec/test.js"},"repository":"https://github.com/lucasfeliciano/restling","keywords":["resquest","http","async","asynchronous","promise","restler","rest","parallel","bluebird"],"license":"MIT","homepage":"https://github.com/lucasfeliciano/restling","dependencies":{"bluebird":"^2.3.11","lodash":"^3.2.0","restler":"^3.2.2"},"devDependencies":{"chai":"^1.9.1","chai-as-promised":"^4.1.1","mocha":"^1.20.1","nock":"^0.59.1"},"gitHead":"1b23292eb4cce2eacb1eb6fdca0c5351b89196f4","versions":[{"number":"0.0.1","date":"2014-07-11T04:11:10.697Z"},{"number":"0.0.2","date":"2014-07-11T18:52:23.582Z"},{"number":"0.0.3","date":"2014-07-11T18:56:11.871Z"},{"number":"0.0.4","date":"2014-07-11T18:58:24.768Z"},{"number":"0.0.5","date":"2014-07-11T19:01:32.223Z"},{"number":"0.0.6","date":"2014-07-11T19:03:01.001Z"},{"number":"0.0.7","date":"2014-07-13T10:06:07.808Z"},{"number":"0.0.8","date":"2014-07-14T04:53:55.331Z"},{"number":"0.0.9","date":"2014-07-14T05:01:28.502Z"},{"number":"0.1.1","date":"2014-07-15T07:52:42.182Z"},{"number":"0.1.2","date":"2014-07-15T07:58:08.447Z"},{"number":"0.1.3","date":"2014-07-16T08:13:18.304Z"},{"number":"0.1.4","date":"2014-07-16T09:29:18.334Z"},{"number":"0.1.5","date":"2014-07-16T21:01:34.603Z"},{"number":"0.1.6","date":"2014-07-16T22:35:10.324Z"},{"number":"0.1.7","date":"2014-07-18T21:04:03.672Z"},{"number":"0.2.7","date":"2014-07-20T08:57:25.170Z"},{"number":"0.3.1","date":"2014-07-21T05:38:39.125Z"},{"number":"0.3.2","date":"2014-07-21T08:30:36.357Z"},{"number":"0.3.3","date":"2014-07-21T17:39:12.879Z"},{"number":"0.4.1","date":"2014-07-24T10:56:55.474Z"},{"number":"0.6.1","date":"2014-07-25T07:12:41.716Z"},{"number":"0.6.2","date":"2014-07-28T12:05:56.033Z"},{"number":"0.6.3","date":"2014-08-04T19:14:41.229Z"},{"number":"0.6.4","date":"2014-08-11T18:39:53.131Z"},{"number":"0.6.5","date":"2014-10-16T15:56:58.787Z"},{"number":"0.7.0","date":"2014-12-16T07:31:27.090Z"},{"number":"0.7.1","date":"2015-02-13T13:29:14.568Z"},{"number":"0.8.0","date":"2015-02-13T14:58:42.028Z"},{"number":"0.9.0","date":"2015-03-07T20:58:14.584Z"},{"number":"0.9.1","date":"2015-03-07T21:17:36.378Z"}],"readme":"<a href=\"http://promisesaplus.com/\">\n    <img src=\"http://promisesaplus.com/assets/logo-small.png\" alt=\"Promises/A+ logo\"\n         title=\"Promises/A+ 1.1 compliant\" align=\"right\" />\n</a>\n\n[![NPM](https://nodei.co/npm/restling.png?downloads=true&stars=true)](https://nodei.co/npm/restling/)\n\n[![Build Status](https://travis-ci.org/lucasfeliciano/restling.svg?branch=master)](https://travis-ci.org/lucasfeliciano/restling) [![Dependency Status](https://david-dm.org/lucasfeliciano/restling.svg)](https://david-dm.org/lucasfeliciano/restling) [![NPM version](https://badge.fury.io/js/restling.svg)](http://badge.fury.io/js/restling)\n\nRestling\n---------\n\nRestling is a lightweight Node.js module for building **promise-based asynchronous HTTP requests**.\nUnder the hood it uses [restler](https://github.com/danwrong/restler) to make HTTP calls and [bluebird](https://github.com/petkaantonov/bluebird) to transform it in promises.\n\nAvoid callback hell\n----------\n\nWorking on an asynchronous environment you have probably seen this:\n\n##### Traditional callback approach\n```javascript\nUser.logIn(\"user\", \"pass\", {\n  success: function(user) {\n    query.find({\n      success: function(results) {\n        results[0].save({ key: value }, {\n          success: function(result) {\n            // the object was saved.\n          }\n        });\n      }\n    });\n  }\n});\n```\n\n##### With Restling\n\n```javascript\nUser.logIn(\"user\", \"pass\").then(function(user) {\n  return query.find();\n}).then(function(results) {\n  return results[0].save({ key: value });\n}).then(function(result) {\n  // the object was saved.\n});\n```\nInstalling\n----------\n\n```\nnpm install restling\n```\n\nBasic Usage\n-----------\n\n```javascript\nvar rest = require('restling');\n\nrest.get('http://google.com').then(function(result){\n  console.log(result.data);\n}, function(error){\n  console.log(error.message);\n});\n```\nThe result passed into the success callback is an object with two keys:\n`data` and `response`.\nExample: `{'data': 3, 'response': res}`\n\nThe error passed into the error callback is an instance of Error with the attributes below:\n\nExample:\n```javascript\n  {\n    'message'   : 'getaddrinfo ENOTFOUND',\n    'statusCode': 404,\n    'response:' : res,\n    'data'      : result.data\n  }\n```\n\nParallel Request Basic Usage\n----------------------------\n\nRun requests in parallel, without waiting until the previous\nrequests has completed.\n\nTo make this we will use a `myRequest` object which contains two keys:\n* `url` : Path to make the request.\n* `options` : __OPTIONAL__ - Some extra params and settings of the request.\n\nExample of `myRequest` object: `{'url': 'http://path/to/api', options:{timeout: 5000}}`\n\n#### Passing an object\n\nEach property must be a `myRequest` object that will be executed.\nThe return is a promise with a value that is a object containing each property of the object passed with their respective value.\n\n\n```javascript\nvar rest = require('restling');\nvar obj  = {'google':{'url':'http://google.com'},\n            'api':{'url':'http://some/rest/api'}}\n\nrest.settleAsync(obj).then(function(result){\n  // handle result here\n  // result is {google: responseFromGoogle, api: responseFromApi}\n},function(err){\n  // handle error here\n});\n```\n#### Passing an array\n\nIt is also possible pass an array of `myRequest` object.\nTHe return is a promise with a value a array which each index contain it respective value in order.\n\n```javascript\nvar rest  = require('restling');\nvar array = [{'url':'http://google.com'},\n             {'url':'http://some/rest/api'}]\n\nrest.settleAsync(array).then(function(result){\n  // handle results here\n  // result is [responseFromGoogle, responseFromApi]\n},function(err){\n  // handle error here\n});\n```\n#### Using the `allAsync` instead `settleAsync`\n\nIf you want to reject the return promise for the whole if one of the parallel request is rejected use `allAsync` instead of `settleAsync`.\n\nFeatures\n--------\n* Easy interface for common operations via http.request\n* Automatic serialization of post data\n* Automatic serialization of query string data\n* Automatic deserialization of XML, JSON and YAML responses to JavaScript objects\n* Provide your own deserialization functions for other datatypes\n* Automatic following of redirects\n* Send files with multipart requests\n* Transparently handle SSL (just specify https in the URL)\n* Deals with basic auth for you, just provide username and password options\n* Simple service wrapper that allows you to easily put together REST API libraries\n* Transparently handle content-encoded responses (gzip, deflate)\n* Transparently handle different content charsets via [iconv-lite](https://github.com/ashtuchkin/iconv-lite)\n\nAPI\n---\n### request(url, options)\n\nBasic method to make a request of any type. The function returns a promise object:\n\n### get(url, options)\n\nCreate a GET request.\n\n### post(url, options)\n\nCreate a POST request.\n\n### put(url, options)\n\nCreate a PUT request.\n\n### del(url, options)\n\nCreate a DELETE request.\n\n### head(url, options)\n\nCreate a HEAD request.\n\n### patch(url, options)\n\nCreate a PATCH request.\n\n### json(url, data, options)\n\nSend json `data` via GET method.\n\n### postJson(url, data, options)\n\nSend json `data` via POST method.\n\n### putJson(url, data, options)\n\nSend json `data` via PUT method.\n\n### settleAsync(requestObjects, callback)\n\nRun the `requestObjects` array/object in parallel, without waiting until the previous request has completed.\n\n### Parsers\n\nYou can give any of these to the parsers option to specify how the response data is deserialized.\nIn case of malformed content, parsers emit `error` event. Original data returned by server is stored in `response.raw`.\n\n#### parsers.auto\n\nChecks the content-type and then uses parsers.xml, parsers.json or parsers.yaml.\nIf the content type isn't recognised it just returns the data untouched.\n\n#### parsers.json, parsers.xml, parsers.yaml\n\nAll of these attempt to turn the response into a JavaScript object. In order to use the YAML and XML parsers you must have yaml and/or xml2js installed.\n\n### Options\n\n* `method` Request method, can be get, post, put, delete. Defaults to `\"get\"`.\n* `query` Query string variables as a javascript object, will override the querystring in the URL. Defaults to empty.\n* `data` The data to be added to the body of the request. Can be a string or any object.\nNote that if you want your request body to be JSON with the `Content-Type: application/json`, you need to\n`JSON.stringify` your object first. Otherwise, it will be sent as `application/x-www-form-urlencoded` and encoded accordingly.\nAlso you can use `json()` and `postJson()` methods.\n* `parser` A function that will be called on the returned data.\n* `encoding` The encoding of the request body. Defaults to `\"utf8\"`.\n* `decoding` The encoding of the response body. For a list of supported values see [Buffers](http://nodejs.org/api/buffer.html#buffer_buffer). Additionally accepts `\"buffer\"` - returns response as `Buffer`. Defaults to `\"utf8\"`.\n* `headers` A hash of HTTP headers to be sent. Defaults to `{ 'Accept': '*/*', 'User-Agent': 'Restling for node.js' }`.\n* `username` Basic auth username. Defaults to empty.\n* `password` Basic auth password. Defaults to empty.\n* `accessToken` OAuth Bearer Token. Defaults to empty.\n* `multipart` If set the data passed will be formated as `multipart/form-encoded`. See multipart example below. Defaults to `false`.\n* `client` A http.Client instance if you want to reuse or implement some kind of connection pooling. Defaults to empty.\n* `followRedirects` If set will recursively follow redirects. Defaults to `true`.\n* `timeout` If set, will emit the timeout event when the response does not return within the said value (in ms)\n* `rejectUnauthorized` If true, the server certificate is verified against the list of supplied CAs. An 'error' event is emitted if verification fails. Verification happens at the connection level, before the HTTP request is sent. Default true.\n\n\nExample usage\n-------------\n\n```javascript\nvar rest = require('./restling');\n\nvar successCallback = function(result){\nconsole.log('Data: ' + result.data);\nconsole.log('Response: ' + result.response);\n};\n\nvar errorCallback = function(error){\n  console.log('Error: ' + error.message);\n  if (error.response) {\n    console.log('Response: ' + error.response);\n  }\n};\n\nrest.get('http://google.com').then(successCallback, errorCallback);\n\n// auto convert json to object\nrest.get('http://twaud.io/api/v1/users/danwrong.json')\n  .then(successCallback, errorCallback);\n\n// auto convert xml to object\nrest.get('http://twaud.io/api/v1/users/danwrong.xml')\n  .then(successCallback, errorCallback);\n\nrest.get('http://someslowdomain.com',{timeout: 10000})\n  .then(successCallback, errorCallback);\n\nrest.post('http://user:pass@service.com/action', {\n  data: { id: 334 },\n}).then(function(result) {\n  if (result.response.statusCode == 201) {\n    result.data;// you can get at the raw response like this...\n  }\n},\nerrorCallback);\n\n// multipart request sending a 321567 byte long file using https\nrest.post('https://twaud.io/api/v1/upload.json', {\n  multipart: true,\n  username: 'danwrong',\n  password: 'wouldntyouliketoknow',\n  data: {\n    'sound[message]': 'hello from restling!',\n    'sound[file]': rest.file('doug-e-fresh_the-show.mp3', null, 321567, null, 'audio/mpeg')\n  }\n}).then(successCallback, errorCallback);\n\n// post JSON\nvar jsonData = { id: 334 };\nrest.postJson('http://example.com/action', jsonData).then(successCallback, errorCallback);\n\n// put JSON\nvar jsonData = { id: 334 };\nrest.putJson('http://example.com/action', jsonData).then(successCallback, errorCallback);\n```\n\nTODO\n----\n\n* What do you need? Let me know or fork.\n","starsCount":8,"created":"2014-07-11T04:11:10.697Z","modified":"2015-03-07T21:17:36.378Z","lastPublisher":{"name":"lucasfeliciano","email":"mail@lucasfeliciano.com"},"owners":[{"name":"lucasfeliciano","email":"mail@lucasfeliciano.com"}],"other":{"_attachments":{},"_from":".","_id":"restling","_nodeVersion":"0.10.28","_npmUser":{"name":"lucasfeliciano","email":"mail@lucasfeliciano.com"},"_npmVersion":"2.1.2","_rev":"1-c9e976656a33cbaa325a82f2bdbb6a28","_shasum":"bc0dd2441cec2688a4164d1818572a3530f1534f","author":{"name":"Lucas Feliciano","email":"mail@lucasfeliciano.com","url":"http://lucasfeliciano.com/"},"bugs":{"url":"https://github.com/lucasfeliciano/restling/issues"},"directories":{},"dist-tags":{"latest":"0.9.1"},"dist":{"shasum":"bc0dd2441cec2688a4164d1818572a3530f1534f","tarball":"http://registry.npmjs.org/restling/-/restling-0.9.1.tgz"},"maintainers":[{"name":"lucasfeliciano","email":"mail@lucasfeliciano.com"}],"readmeFilename":"README.md","time":{"modified":"2015-03-07T21:17:36.378Z","created":"2014-07-11T04:11:10.697Z","0.0.1":"2014-07-11T04:11:10.697Z","0.0.2":"2014-07-11T18:52:23.582Z","0.0.3":"2014-07-11T18:56:11.871Z","0.0.4":"2014-07-11T18:58:24.768Z","0.0.5":"2014-07-11T19:01:32.223Z","0.0.6":"2014-07-11T19:03:01.001Z","0.0.7":"2014-07-13T10:06:07.808Z","0.0.8":"2014-07-14T04:53:55.331Z","0.0.9":"2014-07-14T05:01:28.502Z","0.1.1":"2014-07-15T07:52:42.182Z","0.1.2":"2014-07-15T07:58:08.447Z","0.1.3":"2014-07-16T08:13:18.304Z","0.1.4":"2014-07-16T09:29:18.334Z","0.1.5":"2014-07-16T21:01:34.603Z","0.1.6":"2014-07-16T22:35:10.324Z","0.1.7":"2014-07-18T21:04:03.672Z","0.2.7":"2014-07-20T08:57:25.170Z","0.3.1":"2014-07-21T05:38:39.125Z","0.3.2":"2014-07-21T08:30:36.357Z","0.3.3":"2014-07-21T17:39:12.879Z","0.4.1":"2014-07-24T10:56:55.474Z","0.6.1":"2014-07-25T07:12:41.716Z","0.6.2":"2014-07-28T12:05:56.033Z","0.6.3":"2014-08-04T19:14:41.229Z","0.6.4":"2014-08-11T18:39:53.131Z","0.6.5":"2014-10-16T15:56:58.787Z","0.7.0":"2014-12-16T07:31:27.090Z","0.7.1":"2015-02-13T13:29:14.568Z","0.8.0":"2015-02-13T14:58:42.028Z","0.9.0":"2015-03-07T20:58:14.584Z","0.9.1":"2015-03-07T21:17:36.378Z"},"users":{"lucasfeliciano":true,"jsanchesleao":true,"leonardodavila":true,"candreoliveira":true,"pribarella":true,"raphaelom":true,"jadbaz":true,"andrewtlove":true}}}