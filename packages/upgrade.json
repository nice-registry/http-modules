{"name":"upgrade","version":"1.1.0","license":"MIT","description":"A simple Node websocket library to handle http upgrades.","homepage":"https://github.com/cobbdb/upgrade","main":"upgrade.js","scripts":{"test":"echo \"Error: no test specified\" && exit 1"},"repository":"https://github.com/cobbdb/upgrade","keywords":["websocket","http","upgrade","native","simple"],"dependencies":{},"readme":"# UpgradeJS\n### A simple NodeJS websocket library to handle http upgrades.\nVersion **1.0.0**\n\n---\n* See: [NPM Page](https://npmjs.org/package/upgrade)\n* See: [Github Repo](http://www.github.com/cobbdb/UpgradeJS)\n\n### Installation\n> ```\nnpm install upgrade\n```\n\n### Usage\n###### Here is an example of a basic upgrade setup:\n> ```JavaScript\n// server.js\nvar http = require('http');\nvar upgrade = require('upgrade');\nvar server = http.createServer();\nserver.on('upgrade', function (req, socket) {\n    var send = upgrade.getSend(socket);\n    upgrade.writeHead(req, socket);\n    socket.on('data', function (buff) {\n        var data = upgrade.getData(buff);\n        console.log('> ' + data);\n    });\n    send('Welcome to the Server!');\n});\nserver.listen(8000);\n```\n```JavaScript\n// client.js\nvar socket = new WebSocket('ws://localhost:8000');\nsocket.onopen = function () {\n    socket.send('Hello Server!');\n    console.log('> Socket Open.');\n};\nsocket.onmessage = function (evt) {\n    var msg = evt.data;\n    console.log('> ' + msg);\n};\n```\n\n\n## writeHead(req, socket)\nWrite upgrade handshake header to socket.\n\n**Parameters**\n* {ServerRequest} req - ServerRequest from HTTPServer.\n* {Socket} socket - Socket from upgrade event.\n\n```JavaScript\nserver.on('upgrade', function (req, socket) {\n    upgrade.writeHead(req, socket);\n```\n\n\n## getData(buffer)\nRemoves mask from incoming frame.\n\n**Parameters**\n* {Buffer} buffer - Buffer object from data event of WebSocket.\n\n**Returns** {String} Unmasked data.\n\n```JavaScript\nsocket.on('data', function (buff) {\n    var data = upgrade.getData(buff);\n```\n\n\n## frameData(msg)\nWraps data in a websocket frame. Note that UpgradeJS does not support payloads larger than 125 bytes.\n\n**Parameters**\n* {String} msg - Some data to wrap.\n\n**Returns** {Buffer} Hex encoded Buffer.  \n**Throws** {RangeError}\n\n```JavaScript\nvar data = exports.frameData(message);\nsocket.write(data);\n```\n\n\n## getSend(socket)\nConvenience method to lock send behavior to a specific socket.\n\n**Parameters**\n* {Socket} socket - The socket to communicate over.\n\n**Returns** {Function} Send behavior using a specific socket.\n\n```JavaScript\nvar send = upgrade.getSend(socket);\nsend('foo');\nsend('bar');\n```\n\n\n## send(msg, socket)\nConvenience method for sending framed data.\n\n**Parameters**\n* {String} msg - Data to send across websocket.\n* {Socket} socket - The socket to commincate over.\n\n**Throws** {RangeError}\n\n```JavaScript\nupgrade.send('foo', socket);\nupgrade.send('bar', socket);\n```\n\n---\nBy Dan Cobb: <cobbdb@gmail.com> - [petitgibier.sytes.net](http://petitgibier.sytes.net)\n","versions":[{"number":"1.0.0","date":"2013-04-22T07:04:49.248Z"},{"number":"1.0.1","date":"2013-04-22T19:02:21.473Z"},{"number":"1.0.2","date":"2013-05-21T03:19:53.932Z"},{"number":"1.1.0","date":"2013-10-28T16:04:36.235Z"}],"created":"2013-04-22T07:04:46.592Z","modified":"2013-10-28T16:04:36.235Z","lastPublisher":{"name":"cobbdb","email":"cobbdb@gmail.com"},"owners":[{"name":"cobbdb","email":"cobbdb@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"upgrade","_npmUser":{"name":"cobbdb","email":"cobbdb@gmail.com"},"_npmVersion":"1.3.8","_rev":"1-f37ff50783b35617b9487dd7e8da94e1","author":{"name":"Dan Cobb","email":"cobbdb@gmail.com","url":"http://sites.google.com/site/petitgibier/"},"bugs":{"url":"https://github.com/cobbdb/upgrade/issues"},"directories":{},"dist-tags":{"latest":"1.1.0"},"dist":{"shasum":"4a50875ec5c715d19379799f0590a0e796958f61","tarball":"http://registry.npmjs.org/upgrade/-/upgrade-1.1.0.tgz"},"maintainers":[{"name":"cobbdb","email":"cobbdb@gmail.com"}],"readmeFilename":"README.md","time":{"modified":"2013-10-28T16:04:36.235Z","created":"2013-04-22T07:04:46.592Z","1.0.0":"2013-04-22T07:04:49.248Z","1.0.1":"2013-04-22T19:02:21.473Z","1.0.2":"2013-05-21T03:19:53.932Z","1.1.0":"2013-10-28T16:04:36.235Z"}}}