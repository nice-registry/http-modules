{"name":"opentsdb-url","version":"0.0.2","description":"OpenTSDB HTTP data request URL generator.","scripts":{"test":"mocha","test-cov":"istanbul cover ./node_modules/.bin/_mocha --dir ./reports/coverage -- -R spec","coveralls":"istanbul cover ./node_modules/.bin/_mocha --dir ./reports/coveralls/coverage --report lcovonly -- -R spec && cat ./reports/coveralls/coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js && rm -rf ./reports/coveralls"},"main":"./lib","repository":"https://github.com/opentsdb-js/url","keywords":["opentsdb","tsdb","timeseries","query","url"],"dependencies":{},"devDependencies":{"chai":"1.x.x","coveralls":"^2.11.1","istanbul":"^0.3.0","mocha":"1.x.x","opentsdb-client":"~0.0.1","opentsdb-mquery":"0.0.1","opentsdb-tquery":"0.0.2"},"licenses":[{"type":"MIT","url":"http://www.opensource.org/licenses/MIT"}],"gitHead":"db8e07d5ebd0490b9b17287c9ccf7f394f9318f3","homepage":"https://github.com/opentsdb-js/url#readme","versions":[{"number":"0.0.0","date":"2014-10-15T08:40:05.932Z"},{"number":"0.0.1","date":"2014-10-15T19:23:17.431Z"},{"number":"0.0.2","date":"2016-03-16T09:56:52.510Z"}],"readme":"URL\n===\n[![NPM version][npm-image]][npm-url] [![Build Status][travis-image]][travis-url] [![Coverage Status][coveralls-image]][coveralls-url] [![Dependencies][dependencies-image]][dependencies-url]\n\n> URL generator for [OpenTSDB](http://opentsdb.net) HTTP data requests.\n\n\n### Install\n\nFor use in Node.js,\n\n``` bash\n$ npm install opentsdb-url\n```\n\nFor use in the browser, use [browserify](https://github.com/substack/node-browserify).\n\n\n### Usage\n\nTo use the module,\n\n``` javascript\nvar createFactory = require( 'opentsdb-url' );\n```\n\nA URL generator must be bound to a particular OpenTSDB [client](https://github.com/opentsdb-js/client) instance.\n\n``` javascript\nvar createClient = require( 'opentsdb-client' );\n\n// Create a new client:\nvar client = createClient();\n\n// Bind the generator to the client:\nvar url = createFactory( client );\n```\n\nThe instance has the following methods...\n\n\n#### url.template()\n\nCreates a URL template based on the OpenTSDB client configuration. The template contains two parameters: `start` and `end`.\n\n``` javascript\nurl.template();\n``` \n\nNote: this method does not provide public access to the URL template. Instead, the method returns the current URL generator instance.\n\n\n#### url.create()\n\nInserts `start` and `end` times into a template OpenTSDB query string. The `start` and `end` times are obtained from the bound client instance.\n\n``` javascript\nurl.create();\n// returns '...'\n```\n\nNote: Ensure that you have first generated a template __before__ trying to create a URL.\n\nThe motivation for the `template`/`create` separation is the recognition that `start` and `end` times are more likely to change than other `client` parameters, particularly when periodically polling OpenTSDB for data belonging to the same metric. \n\n\n## Examples\n\n``` javascript\nvar createClient = require( 'opentsdb-client' ),\n\tmQuery = require( 'opentsdb-mquery' ),\n\tcreateFactory = require( 'opentsdb-url' ),\n\tend = Date.now(),\n\tstart = end - 1000,\n\tclient,\n\tquery,\n\turl;\n\n// Create a new metric query and configure:\nquery = mQuery();\n\nquery.metric( 'cpu.utilization' )\n\t.tags( 'beep', 'boop' );\n\n// Create a new client and configure:\nclient = createClient();\n\nclient.queries( query );\n\n// Bind the client to a URL generator:\nurl = createFactory( client );\n\n// Create the url template:\nurl.template();\n\n// Periodically create new URLs...\nfor ( var i = 0; i < 10; i++ ) {\n\tsetTimeout( createURL( i*1000 ), i*1000 );\n}\n\nfunction createURL( offset ) {\n\tvar begin = start + offset,\n\t\tstop = end + offset;\n\treturn function onTimeout() {\n\t\tclient.start( begin )\n\t\t\t.end( stop );\n\n\t\tconsole.log( url.create() );\n\t};\n}\n```\n\nTo run the example code from the top-level application directory,\n\n``` bash\n$ node ./examples/index.js\n```\n\n\n\n## Tests\n\n### Unit\n\nUnit tests use the [Mocha](http://visionmedia.github.io/mocha) test framework with [Chai](http://chaijs.com) assertions. To run the tests, execute the following command in the top-level application directory:\n\n``` bash\n$ make test\n```\n\nAll new feature development should have corresponding unit tests to validate correct functionality.\n\n\n### Test Coverage\n\nThis repository uses [Istanbul](https://github.com/gotwarlost/istanbul) as its code coverage tool. To generate a test coverage report, execute the following command in the top-level application directory:\n\n``` bash\n$ make test-cov\n```\n\nIstanbul creates a `./reports/coverage` directory. To access an HTML version of the report,\n\n``` bash\n$ make view-cov\n```\n\n\n## License\n\n[MIT license](http://opensource.org/licenses/MIT). \n\n\n---\n## Copyright\n\nCopyright &copy; 2014. Athan Reines.\n\n\n[npm-image]: http://img.shields.io/npm/v/opentsdb-url.svg\n[npm-url]: https://npmjs.org/package/opentsdb-url\n\n[travis-image]: http://img.shields.io/travis/opentsdb-js/url/master.svg\n[travis-url]: https://travis-ci.org/opentsdb-js/url\n\n[coveralls-image]: https://img.shields.io/coveralls/opentsdb-js/url/master.svg\n[coveralls-url]: https://coveralls.io/r/opentsdb-js/url?branch=master\n\n[dependencies-image]: http://img.shields.io/david/opentsdb-js/url.svg\n[dependencies-url]: https://david-dm.org/opentsdb-js/url\n\n[dev-dependencies-image]: http://img.shields.io/david/dev/opentsdb-js/url.svg\n[dev-dependencies-url]: https://david-dm.org/dev/opentsdb-js/url\n\n[github-issues-image]: http://img.shields.io/github/issues/opentsdb-js/url.svg\n[github-issues-url]: https://github.com/opentsdb-js/url/issues","created":"2014-10-15T08:40:05.932Z","modified":"2016-03-16T09:56:52.510Z","lastPublisher":{"name":"kgryte","email":"kgryte@gmail.com"},"owners":[{"name":"kgryte","email":"kgryte@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"opentsdb-url","_nodeVersion":"4.2.3","_npmOperationalInternal":{"host":"packages-13-west.internal.npmjs.com","tmp":"tmp/opentsdb-url-0.0.2.tgz_1458122212048_0.8540860193315893"},"_npmUser":{"name":"kgryte","email":"kgryte@gmail.com"},"_npmVersion":"2.14.7","_rev":"1-03589ed1099adff8218a1b971c6d7f2f","_shasum":"49a595018bbea1ed1745902a66c9fd68cf339e5d","author":{"name":"Athan Reines","email":"kgryte@gmail.com"},"bugs":{"url":"https://github.com/opentsdb-js/url/issues"},"contributors":[{}],"directories":{},"dist-tags":{"latest":"0.0.2"},"dist":{"shasum":"49a595018bbea1ed1745902a66c9fd68cf339e5d","tarball":"http://registry.npmjs.org/opentsdb-url/-/opentsdb-url-0.0.2.tgz"},"maintainers":[{"name":"kgryte","email":"kgryte@gmail.com"}],"readmeFilename":"README.md","time":{"modified":"2016-03-16T09:56:52.510Z","created":"2014-10-15T08:40:05.932Z","0.0.0":"2014-10-15T08:40:05.932Z","0.0.1":"2014-10-15T19:23:17.431Z","0.0.2":"2016-03-16T09:56:52.510Z"}}}