{"name":"anubis","version":"2.0.0","description":"make your express application respond correctly when http requests are failing","main":"index.js","scripts":{"pretest":"eslint .","test":"mocha"},"repository":"https://github.com/m90/anubis","keywords":["express","middleware","error","http"],"license":"MIT","homepage":"https://github.com/m90/anubis#readme","devDependencies":{"eslint":"^2.11.0","express":"^4.13.4","mocha":"^2.5.3","nock":"^8.0.0","request-promise":"^3.0.0","supertest":"^1.2.0","underscore":"^1.8.3"},"gitHead":"dff96781f94950988feac3a8601ef86db9ab59ea","versions":[{"number":"1.0.0","date":"2016-05-28T14:32:16.246Z"},{"number":"2.0.0","date":"2016-08-27T13:28:10.173Z"}],"readme":"# anubis\n\n[![Build Status](https://travis-ci.org/m90/anubis.svg?branch=master)](https://travis-ci.org/m90/anubis)\n\n> Make sure your express application responds correctly when outgoing http requests are failing\n\nWhen your express application is calling failing resources, mount this middleware to ensure it will respond with a proper `502 Bad Gateway` response when needed.\n\n### Installation\n\n```sh\n$ npm install anubis --save\n```\n\n### Usage\n\nThis is a tiny express app that will do nothing but proxy another resource. In case the call fails with a 5xx error, anubis makes sure the correct `502` status code is returned.\n\n```js\nvar express = require('express');\nvar rp = require('request-promise');\nvar anubis = require('anubis');\n\nvar app = express();\n\napp.get('/', function(req, res, next){\n\trp('http://my-unreliable-api.com')\n\t\t.then(function(payload){\n\t\t\tres.json({ok: true, payload: payload});\n\t\t})\n\t\t.catch(next);\n});\n\n// always make sure to mount anubis **after** all routes that call\n// external resources\n// pass a function that transforms the Error into a status code\napp.use(anubis(function(err){\n    return err.statusCode;\n}));\n\napp.use(function(err, req, res, next){ //eslint-disable-line no-unused-vars\n\tres.status(err.status);\n\tres.json({ok: false});\n});\n```\n\n### License\n\nMIT Â© [Frederik Ring](http://www.frederikring.com)\n","created":"2016-05-28T14:32:16.246Z","modified":"2016-08-27T13:28:10.173Z","lastPublisher":{"name":"m90","email":"frederik.ring@gmail.com"},"owners":[{"name":"m90","email":"frederik.ring@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"anubis","_nodeVersion":"6.3.1","_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/anubis-2.0.0.tgz_1472304488327_0.7027155796531588"},"_npmUser":{"name":"m90","email":"frederik.ring@gmail.com"},"_npmVersion":"3.10.3","_rev":"1-b04028d79170bc4dba8fb2a2d9fbef3a","_shasum":"d368800a757d79fd5c3abf7a1ef1130ac4816c9b","author":{"name":"Frederik Ring","email":"frederik.ring@gmail.com"},"bugs":{"url":"https://github.com/m90/anubis/issues"},"directories":{},"dist-tags":{"latest":"2.0.0"},"dist":{"shasum":"d368800a757d79fd5c3abf7a1ef1130ac4816c9b","tarball":"http://registry.npmjs.org/anubis/-/anubis-2.0.0.tgz"},"maintainers":[{"name":"m90","email":"frederik.ring@gmail.com"}],"readmeFilename":"README.md","time":{"modified":"2016-08-27T13:28:10.173Z","created":"2016-05-28T14:32:16.246Z","1.0.0":"2016-05-28T14:32:16.246Z","2.0.0":"2016-08-27T13:28:10.173Z"}}}