{"name":"grunt-connect-prism","version":"1.0.11","description":"Record, mock, and proxy HTTP traffic using the connect-prism middleware.","main":"Gruntfile.js","scripts":{"test":"grunt test"},"repository":"https://github.com/seglo/grunt-connect-prism","licenses":[{"type":"MIT","url":"https://github.com/seglo/grunt-connect-prism/blob/master/LICENSE-MIT"}],"engines":{"node":">= 0.8.0"},"devDependencies":{"grunt":"^0.4.5","grunt-contrib-clean":"^0.6.0","grunt-contrib-connect":"^0.10.1","grunt-contrib-jshint":"^0.11.2","grunt-mocha-test":"^0.12.7","mocha":"^2.2.4"},"dependencies":{"connect-prism":"^1.0.11","lodash":"^4.3.0"},"peerDependencies":{"grunt":">=0.4.0"},"keywords":["gruntplugin","mock","record","proxy","connect","http","grunt","prism","test","vcr"],"gitHead":"597b062321e6562e9d69884cbc6680901fee186e","homepage":"https://github.com/seglo/grunt-connect-prism#readme","versions":[{"number":"0.1.0","date":"2014-06-09T14:03:43.023Z"},{"number":"0.1.1","date":"2014-06-12T19:32:34.649Z"},{"number":"0.2.0","date":"2014-06-17T03:18:33.470Z"},{"number":"0.2.1","date":"2014-06-18T00:12:23.300Z"},{"number":"0.2.2","date":"2014-06-18T18:08:18.163Z"},{"number":"0.3.0","date":"2014-06-30T00:21:21.222Z"},{"number":"0.4.0","date":"2014-07-08T02:59:20.209Z"},{"number":"0.4.1","date":"2014-07-16T02:11:34.423Z"},{"number":"0.4.2","date":"2014-07-23T02:17:48.457Z"},{"number":"0.5.0","date":"2014-07-28T02:58:40.780Z"},{"number":"0.6.0","date":"2014-08-27T01:25:57.470Z"},{"number":"0.7.0","date":"2014-08-29T03:59:51.414Z"},{"number":"0.7.1","date":"2014-08-30T19:16:13.632Z"},{"number":"0.7.3","date":"2014-09-14T02:28:58.881Z"},{"number":"0.7.4","date":"2014-09-29T12:16:12.720Z"},{"number":"0.7.5","date":"2014-09-30T04:18:26.307Z"},{"number":"0.7.6","date":"2014-10-01T00:26:59.383Z"},{"number":"1.0.0","date":"2015-01-18T15:57:13.601Z"},{"number":"1.0.1","date":"2015-01-18T16:33:28.798Z"},{"number":"1.0.3","date":"2015-04-17T01:23:44.398Z"},{"number":"1.0.5","date":"2016-02-10T01:04:43.992Z"},{"number":"1.0.11","date":"2016-12-03T21:20:26.419Z"}],"readme":"# grunt-connect-prism\n\n[![NPM version](https://badge.fury.io/js/grunt-connect-prism.svg)](http://badge.fury.io/js/grunt-connect-prism)\n[![Build Status](https://travis-ci.org/seglo/grunt-connect-prism.svg?branch=master)](https://travis-ci.org/seglo/grunt-connect-prism)\n[![Dependency Status](https://david-dm.org/seglo/grunt-connect-prism.svg)](https://david-dm.org/seglo/grunt-connect-prism)\n[![devDependency Status](https://david-dm.org/seglo/grunt-connect-prism/dev-status.svg)](https://david-dm.org/seglo/grunt-connect-prism#info=devDependencies)\n\n> Record, mock, and proxy HTTP traffic using the connect-prism middleware.\n\n## Getting Started\nThis plugin requires Grunt `~0.4.1` and the [grunt-contrib-connect](https://github.com/gruntjs/grunt-contrib-connect) `~0.7.1` plugin to already be installed.\n\nIf you haven't used [Grunt](http://gruntjs.com/) before, be sure to check out the [Getting Started](http://gruntjs.com/getting-started) guide, as it explains how to create a [Gruntfile](http://gruntjs.com/sample-gruntfile) as well as install and use Grunt plugins. Once you're familiar with that process, you may install this plugin with this command:\n\n```shell\nnpm install grunt-connect-prism --save-dev\n```\n\nOne the plugin has been installed, it may be enabled inside your Gruntfile with this line of JavaScript:\n\n```js\ngrunt.loadNpmTasks('grunt-connect-prism');\n```\n## Overview\n\nThis grunt plugin is a wrapper around the [connect-prism](https://github.com/seglo/connect-prism) middleware.\n\nPrism is similar to the Ruby project [VCR](https://github.com/elcuervo/vcr.js).\n\nThe purpose of this plugin is to provide an easy way for front end developers to record HTTP responses returned by their API (or some other remote source) and then be able replay the responses in the future.  It's basically an HTTP cache, but for developers working on a Single Page Application (SPA).\n\nIt's useful for mocking complex & high latency API calls during development.  It's also useful when writing e2e tests for your SPA only, removing the server from the equation.  This results in much faster execution of your e2e test suite.\n\nPrism works by adding a custom connect middleware to the connect server provided by the [grunt-contrib-connect](https://github.com/gruntjs/grunt-contrib-connect) plugin.\n\n### Modes\n\nThere are currently 4 supported modes of operation.\n\n#### Record\n\nThe record mode will allow you to both record and proxy all HTTP traffic for a certain endpoint on your connect development server.  For example, if in production your API sits at an endpoint `/api` then you may be currently proxying requests to a server you're hosting locally on another port or to an integration machine somewhere else.  You may have also attempted to mock out services that make HTTP calls in your client side code itself.  While in record mode you can navigate your application and trigger all the types of API calls you would like to have recorded.  Prism will then listen for responses and serialize them to disk.  When you want to read these responses instead of proxying traffic to the real server you shutdown and switch to the 'mock' mode.\n\nTo make mocks more readable, responses with a content-type of `json` or `javascript` will have their data stringified as an object.  If the content-type is anything other than json or if stringification fails then it falls back to a string.\n\nIf the server returns a compressed response (gzip or deflate are supported), then prism will decompress the payload when recording the response.\n\nExample mock generated:\n\n```javascript\n{\n  \"requestUrl\": \"/api/ponies\",\n  \"contentType\": \"application/json\",\n  \"statusCode\": 200,\n  \"data\": {\n    \"text\": \"my little ponies\"\n  }\n}\n```\n\n#### Mock\n\nThe mock (read) mode will listen for requests to a certain endpoint.  When a request matches an endpoint it will attempt to find a previously recorded response in the directory you defined mocks to be saved in (./mocks by default).  \n\nIf a matching response is not found then prism will return a 404.  Prism will also create a mock during a 404.  This is useful when you want to mock API endpoints that may not exist yet.  To avoid having the subsequent request from returning the generated empty mock, the file has a .404 extension.  To use the mock, populate it with the appropriate values and remove the .404 extension.  This feature was contributed by [Miloš Mošovský](https://github.com/MilosMosovsky).\n\n#### Mock & Record\n\nAs its name implies this operation will mock and record.  This mode will first attempt to load a mock if one exists.  If a mock does not exist it will then proxy the request and record the response instead of returning a 404.\n\n#### Proxy\n\nAnd finally, prism supports simple proxying in much the same way as the [grunt-connect-proxy](https://github.com/drewzboto/grunt-connect-proxy) plugin works.  In fact, this plugin is heavily inspired by that project.  While in proxy mode, listening events for recording and mocking are disabled.\n\n### Adapting the \"connect\" task\n\n#### Adding the middleware\n\nThis configuration is based on a modification to the connect middleware configuration that the yeoman [angular-generator](https://github.com/yeoman/generator-angular) will create.\n\n```js\nconnect: {\n  livereload: {\n    options: {\n      middleware: function(connect) {\n        return [\n          require('grunt-connect-prism/middleware'),\n          connect.static('.tmp'),\n          connect().use(\n            '/bower_components',\n            connect.static('./bower_components')\n          ),\n          connect.static(appConfig.app)\n        ];\n      }\n    }\n  }\n}\n```\n\n## Configuration \n\nIn your project's Gruntfile, add a section named `prism`.\n\n### Adding prism configuration.\n\nYou can add all the options in the root task options, in a target options, or a mix of both (where the target options will inherit from the root options).  If only the root prism options are provided than a prism instance with the name 'default' will be created.\n\ni.e)\n\n```js\nprism: {\n  options: {\n    mode: 'record',\n    host: 'localhost',\n    port: 8090,\n    context: '/api'\n  }\n}\n```\n\n#### Multiple targets\n\nYou can create multiple prism targets in the standard convention of grunt configuration.  `grunt-connect-prism` will create a directory in the `mocksPath` directory named after the target. \n\ni.e.)\n\n```js\nprism: {\n  options: {\n    host: 'localhost',\n    port: 8090,\n    https: true,\n    mocksPath: './stubs',\n    useApi: true\n  },\n  server: {\n    options: {\n      mode: 'record',\n      context: '/api'\n    }\n  }\n}\n```\n\n### Running prism\nTypically you will want to run your prism task while you're running your development server, or while e2e tests are running.  There are several different ways to add prism tasks to the grunt task queue.\n\nUsage)\n\n`'prism[:target[:mode]]'`\n\nIf `'prism'` is executed by itself then all prism targets will be created.\n\nIf a target is supplied (i.e. `'prism:targetOne'`) then only that prism target instance will be created.\n\nIf a target and mode are supplied (i.e. `'prism:targetOne:record'`) then only that prism target instance will be created and will be in the record mode.\n\nBasic `grunt serve` example.\n\n```js\ngrunt.registerTask('serve', function () {\n  grunt.task.run([\n    'clean:server',\n    'compass:server',\n    'prism',\n    'livereload-start',\n    'connect:livereload',\n    'open',\n    'watch'\n  ]);\n});\n```\n\nTarget and mode override example (i.e. `grunt serve:targetOne:record`).\n\n```js\ngrunt.registerTask('serve', function (target, prismMode) {\n  grunt.task.run([\n    'clean:server',\n    'compass:server',\n    'prism:' + target + ':' + prismMode, /* see mode configuration for more details */\n    'livereload-start',\n    'connect:livereload',\n    'open',\n    'watch'\n  ]);\n});\n```\n\n### Options\n\nOptions pass through directly to `connect-prism`.  See [Options](https://github.com/seglo/connect-prism#options) section in `connect-prism`.\n\n### API features\n\nThe API can be enabled in the root prism configuration.  The API is disabled by default.\n\n```js\nprism: {\n  options: {\n    useApi: true\n  }\n}\n```\n\nSee the [API features](https://github.com/seglo/connect-prism#api-features) section in `connect-prism` for more details.\n\n## Release History\n* 1.0.0 Use connect-prism 1.0.0.  Added API capabilities.\n* 0.7.6 Use connect-prism 0.7.5 to fix socket hang up issue by handling aborted requests appropriately ([issue #15](https://github.com/seglo/grunt-connect-prism/issues/15)).\n[Issue #527 from node-http-proxy project.](https://github.com/nodejitsu/node-http-proxy/issues/527)\n* 0.7.4 Support 'default' instance.\nRe-factor tests.\n* 0.7.3 Upgrade to connect-prism 0.7.3.\n* 0.7.1 Upgrade to connect-prism 0.7.1.\n* 0.7.0 Upgrade to connect-prism 0.7.0.  \nFix legacy middleware call.\n* 0.6.0 Upgrade to connect-prism 0.6.0.  \nFix spec to use PrismManager.\n* 0.5.0 Upgrade to connect-prism 0.5.0.\n* 0.4.2 Upgrade to connect-prism 0.4.2.\n* 0.4.1 Upgrade to connect-prism 0.4.1.\n* 0.3.0 Use connect-prism core library.\n* 0.2.2 Support change origin.\n* 0.2.1 Fixed record mode and tests so we don't release broken again!\n* 0.2.0 Support 'cassettes' by putting mocks into directories named after target.  \nUse http-proxy 0.10.4 to workaround around socket hangup issues in 1.1.4.\n* 0.1.1 Stop recording all response headers.  \nOnly capture content-type.\n* 0.1.0 Initial release","starsCount":1,"created":"2014-06-09T14:03:43.023Z","modified":"2016-12-03T21:20:26.419Z","lastPublisher":{"name":"seglo","email":"seglo@randonom.com"},"owners":[{"name":"seglo","email":"seglo@randonom.com"}],"other":{"_attachments":{},"_from":".","_id":"grunt-connect-prism","_nodeVersion":"4.0.0","_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/grunt-connect-prism-1.0.11.tgz_1480800024490_0.13814787240698934"},"_npmUser":{"name":"seglo","email":"seglo@randonom.com"},"_npmVersion":"2.14.2","_rev":"2-b6bc80238872db58140a60a436fd686f","_shasum":"f0a1fdb851c382f4e46730a5f54b2b417355a0ef","author":{"name":"Sean Glover","email":"seglo@randonom.com","url":"http://randonom.com/blog/"},"bugs":{"url":"https://github.com/seglo/grunt-connect-prism/issues"},"directories":{},"dist-tags":{"latest":"1.0.11"},"dist":{"shasum":"f0a1fdb851c382f4e46730a5f54b2b417355a0ef","tarball":"http://registry.npmjs.org/grunt-connect-prism/-/grunt-connect-prism-1.0.11.tgz"},"maintainers":[{"name":"seglo","email":"seglo@randonom.com"}],"readmeFilename":"README.md","time":{"modified":"2016-12-03T21:20:26.419Z","created":"2014-06-09T14:03:43.023Z","0.1.0":"2014-06-09T14:03:43.023Z","0.1.1":"2014-06-12T19:32:34.649Z","0.2.0":"2014-06-17T03:18:33.470Z","0.2.1":"2014-06-18T00:12:23.300Z","0.2.2":"2014-06-18T18:08:18.163Z","0.3.0":"2014-06-30T00:21:21.222Z","0.4.0":"2014-07-08T02:59:20.209Z","0.4.1":"2014-07-16T02:11:34.423Z","0.4.2":"2014-07-23T02:17:48.457Z","0.5.0":"2014-07-28T02:58:40.780Z","0.6.0":"2014-08-27T01:25:57.470Z","0.7.0":"2014-08-29T03:59:51.414Z","0.7.1":"2014-08-30T19:16:13.632Z","0.7.3":"2014-09-14T02:28:58.881Z","0.7.4":"2014-09-29T12:16:12.720Z","0.7.5":"2014-09-30T04:18:26.307Z","0.7.6":"2014-10-01T00:26:59.383Z","1.0.0":"2015-01-18T15:57:13.601Z","1.0.1":"2015-01-18T16:33:28.798Z","1.0.3":"2015-04-17T01:23:44.398Z","1.0.5":"2016-02-10T01:04:43.992Z","1.0.11":"2016-12-03T21:20:26.419Z"},"users":{"seglo":true}}}