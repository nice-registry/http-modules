{"name":"fis-postprocessor-https-smarty","version":"1.0.5","description":"http --> https 的处理","main":"index.js","gitHead":"8164b13bc882750752b6817b53b618f35e52f64e","scripts":{},"versions":[{"number":"1.0.0","date":"2016-12-07T07:01:05.543Z"},{"number":"1.0.1","date":"2016-12-22T08:34:11.338Z"},{"number":"1.0.2","date":"2017-01-05T05:23:50.777Z"},{"number":"1.0.3","date":"2017-02-15T11:18:53.898Z"},{"number":"1.0.4","date":"2017-02-15T11:22:14.286Z"},{"number":"1.0.5","date":"2017-02-15T11:24:22.120Z"}],"readme":"# fis-postprocessor-https-smarty\n> 标准后处理器插件\n\n## 作用\n> 在fis进行了异构语言编译以及标准化处理后,进行对 smarty 模板中的静态资源引用作处理，以支持https请求模式下的访问。\n\n1. 将 `<img src=\"{{imgurl}}\">` 这样的模板标记替换成 `<img src=\"{{imgurl|url_trans}}\">`,不仅支持`img`标签，对所有具有`src`属性的标签都起作用，`url_trans`这个`filter`是个`smarty`自定义的`modifier`。\n2. 将 `<img src=\"http://www.baidu.com/favicon.ico\">` 这样的静态资源引用替换成 `<img src=\"{{'http://www.baidu.com/favicon.ico'|url_trans}}\">`\n3. 将 `<img src=\"http://www.baidu.com/{{imgname}}\">` 这样的混合拼接的`src`值，替换成`<img src=\"{{('http://www.baidu.com/' + imgname) |url_trans }}\">`\n4. 将内联css中的`background-image`的`url`为静态文本值的替换成可以同时支持http/https访问的url.\n5. 将内联css中的`background-image`的`url`为模板变量混合拼接的`url`添加`filter`。\n6. 将`{{data|json_encode}}` 替换为 `{{(data|json_encode)|url_trans}}`\n7. 将`{{file_get_contents('path')}}` 替换为 ``{{(file_get_contents(path))|url_trans}}``\n\n## 安装\n> `npm -g install fis-postprocessor-https-smarty`\n\n## 配置\n> 需要在smarty plugin中先定义好依赖的`modifier`,用于url的动态转换\n> 还需要一个http/https 的域名映射表，如：`var domainmap = {'http://www.baidu.com': 'https://www.baidu.com'}` 这样的object定义。\n\n    fis.config.merge({\n        ...\n        modules: {\n            ...\n            postprocessor: {\n                tpl: 'https-smarty,...', // 配置tpl文件的标准化处理插件\n            },\n            ...\n        },\n        settings: {\n            postprocessor: {\n                ...\n                'https-smarty': { // 设置fis-postprocessor-https-swig\n                    domainmap: require('./domain-map.js').domainmap, // 域名映射表\n                    left_delimiter: '{{', // 模板左标记\n                    right_delimiter: '}}' // 模板右标记\n                    filter: 'url_trans', // smarty modifier\n                    ignore: [ // 需要忽略处理的文件列表\n                        '/client/static/js/domain-map.js'\n                    ]\n                },\n                ...\n            }\n        },\n        ...\n    });\n\n","created":"2016-12-07T07:01:05.543Z","modified":"2017-02-15T11:24:22.120Z","lastPublisher":{"name":"sudongyan","email":"feng.su@163.com"},"owners":[{"name":"sudongyan","email":"feng.su@163.com"}],"other":{"_attachments":{},"_from":".","_id":"fis-postprocessor-https-smarty","_nodeVersion":"4.3.2","_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/fis-postprocessor-https-smarty-1.0.5.tgz_1487157861879_0.7607394447550178"},"_npmUser":{"name":"sudongyan","email":"feng.su@163.com"},"_npmVersion":"2.14.12","_rev":"6-d87a2646a5db3c7906632435fe10f81a","_shasum":"2de6a054ace3669b17a8bb8b863ea34076cd8280","author":{"name":"sudongyan@baidu.com"},"directories":{},"dist-tags":{"latest":"1.0.5"},"dist":{"shasum":"2de6a054ace3669b17a8bb8b863ea34076cd8280","tarball":"https://registry.npmjs.org/fis-postprocessor-https-smarty/-/fis-postprocessor-https-smarty-1.0.5.tgz"},"maintainers":[{"name":"sudongyan","email":"feng.su@163.com"}],"readmeFilename":"README.md","time":{"modified":"2017-02-15T11:24:22.120Z","created":"2016-12-07T07:01:05.543Z","1.0.0":"2016-12-07T07:01:05.543Z","1.0.1":"2016-12-22T08:34:11.338Z","1.0.2":"2017-01-05T05:23:50.777Z","1.0.3":"2017-02-15T11:18:53.898Z","1.0.4":"2017-02-15T11:22:14.286Z","1.0.5":"2017-02-15T11:24:22.120Z"}}}