{"name":"express-route-versioning","version":"1.5.0","description":"Express middleware that re-routes requests based on HTTP header value","main":"./lib","scripts":{"test":"./node_modules/mocha/bin/mocha tests"},"repository":"https://github.com/peralmq/express-route-versioning","keywords":["express","route","router","version","versioning","accept"],"license":"MIT","homepage":"https://github.com/peralmq/express-route-versioning","devDependencies":{"chai":"^1.9.2","express":"^4.12.1","mocha":"^2.0.1","should":"^4.1.0","supertest":"^0.15.0"},"gitHead":"fa7ad1f9515d6f8495ac82b2f21412196ca519ee","versions":[{"number":"1.0.0","date":"2014-11-05T10:16:43.620Z"},{"number":"1.1.0","date":"2015-03-02T16:52:49.950Z"},{"number":"1.2.0","date":"2015-03-09T10:36:04.644Z"},{"number":"1.3.0","date":"2015-03-17T15:32:30.220Z"},{"number":"1.4.0","date":"2015-03-26T16:38:10.159Z"},{"number":"1.5.0","date":"2015-05-18T12:03:26.847Z"}],"readme":"#express-route-versioning\nA [Connect](https://github.com/senchalabs/connect) style middleware to re-direct the execution flow into multiple branches based on HTTP header values. Tested and used for REST API versioning with [Express](https://github.com/strongloop/express) routes but other applications might be suiting.\n\n##Features\nCustomize the extraction of the version via `version.use(options)` for:\n* any HTTP header using `header`, i.e. `version.use({header: 'Accept-Version'})`\n* any HTTP header value using RegEx capture groups in `grab`, i.e. `version.use({grab: /vnd.my.company.()})`\n\nCustomize the HTTP status code for a failed re-routing using the `error`, i.e. `version.use({error: 404})`\n\n##Example\nRe-route based on version in HTTP header `Accept: vnd.mycompany.com+json; version=1`.\n```javascript\nvar express = require('express');\n    version = require('express-version-reroute');\nversion.use({\n    'header': 'accept',\n    'grab': /vnd.mycompany.com\\+json; version=(\\d+)(,|$)/,\n    'error': 406,\n});\nvar router = express.Router()\n  .all('/ping',\n       version.reroute({\n         1: function(req, res, next) { res.json('pong'); },\n         2: function(req, res, next) { res.status(200).end(); },\n       })\n   );\nexpress().use(router).listen(5000, function() {});\n```\n[cURL](http://curl.haxx.se/) examples that give different behavior based on version.\n```\n➜  ~  curl -i -X GET 'http://127.0.0.1:5000/ping' -H 'Accept: vnd.mycompany.com+json; version=2'\nHTTP/1.1 200 OK\nX-Powered-By: Express\nDate: Wed, 05 Nov 2014 10:09:50 GMT\nConnection: keep-alive\nTransfer-Encoding: chunked\n\n➜  ~  curl -i -X GET 'http://127.0.0.1:5000/ping' -H 'Accept: vnd.mycompany.com+json; version=1'\nHTTP/1.1 200 OK\nX-Powered-By: Express\nContent-Type: application/json; charset=utf-8\nContent-Length: 6\nETag: W/\"6-dca458aa\"\nDate: Wed, 05 Nov 2014 10:09:56 GMT\nConnection: keep-alive\n\n\"pong\"%\n➜  ~  curl -i -X GET 'http://127.0.0.1:5000/ping' -H 'Accept: vnd.mycompany.com+json; version=0'\nHTTP/1.1 406 Not Acceptable\nX-Powered-By: Express\nDate: Wed, 05 Nov 2014 10:09:58 GMT\nConnection: keep-alive\nTransfer-Encoding: chunked\n```\n\n## Development\n```\nnpm install\nnpm test\n```\n","created":"2014-11-05T10:16:43.620Z","modified":"2015-05-18T12:03:26.847Z","lastPublisher":{"name":"peralmq","email":"per.almquist@gmail.com"},"owners":[{"name":"peralmq","email":"per.almquist@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"express-route-versioning","_nodeVersion":"0.12.2","_npmUser":{"name":"peralmq","email":"per.almquist@gmail.com"},"_npmVersion":"2.7.5","_rev":"1-84c1290bce7da5de2f8e872506b0ab72","_shasum":"6629193326ee9e48a4065f7b957968eccab2b116","author":{"name":"Pelle Almquist","email":"per.almquist@gmail.com"},"bugs":{"url":"https://github.com/peralmq/express-route-versioning/issues"},"directories":{},"dist-tags":{"latest":"1.5.0"},"dist":{"shasum":"6629193326ee9e48a4065f7b957968eccab2b116","tarball":"http://registry.npmjs.org/express-route-versioning/-/express-route-versioning-1.5.0.tgz"},"maintainers":[{"name":"peralmq","email":"per.almquist@gmail.com"}],"readmeFilename":"README.md","time":{"modified":"2015-05-18T12:03:26.847Z","created":"2014-11-05T10:16:43.620Z","1.0.0":"2014-11-05T10:16:43.620Z","1.1.0":"2015-03-02T16:52:49.950Z","1.2.0":"2015-03-09T10:36:04.644Z","1.3.0":"2015-03-17T15:32:30.220Z","1.4.0":"2015-03-26T16:38:10.159Z","1.5.0":"2015-05-18T12:03:26.847Z"}}}