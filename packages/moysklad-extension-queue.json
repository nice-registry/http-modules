{"name":"moysklad-extension-queue","version":"0.1.0","description":"Очередь http запросов (расширение для библиотеки moysklad)","main":"lib/index.js","scripts":{"lint":"eslint src","clean":"rm -rf lib || :","build":"npm run clean && cp -rf src lib && babel --out-dir lib ./src","test":"npm run lint && npm run build && blue-tape -r dotenv/config -r isomorphic-fetch lib/**/__tests__/*.test.js | tap-spec"},"repository":"https://github.com/wmakeev/moysklad-tools/tree/master/packages/moysklad-extension-queue","keywords":["moysklad","tools","extension"],"dependencies":{"stampit":"^3.1.2"},"devDependencies":{"babel-cli":"^6.24.0","babel-plugin-transform-async-to-generator":"^6.22.0","babel-preset-es2015-node4":"^2.1.1","blue-tape":"^1.0.0","debug":"^2.6.3","dotenv":"^4.0.0","eslint":"^3.13.0","eslint-config-standard":"6.2.0","eslint-plugin-promise":"^3.4.0","eslint-plugin-standard":"^2.0.1","have2":"^1.0.0-beta.1","isomorphic-fetch":"^2.2.1","moysklad":"^0.1.0","tap-spec":"^4.1.1","tmp":"^0.0.31"},"license":"MIT","versions":[{"number":"0.0.2","date":"2017-03-20T14:11:35.657Z"},{"number":"0.0.3","date":"2017-03-25T18:09:11.739Z"},{"number":"0.1.0","date":"2017-05-04T10:22:02.191Z"}],"readme":"moysklad-extension-queue\n------------------------\n\n> Расширение для библиотеки [moysklad](https://github.com/wmakeev/moysklad)\n\nДобавляет возможность котролировать поток запросов.\nИспользуется для избежания ошибки 429 при интенсивном обмене с API.\n\n## Установка\n\n```\n$ npm install moysklad-extension-queue\n```\n\n## Использование\n\n```js\nconst MoyskladQueue = require('moysklad-extension-queue')\nconst MoyskladCore = require('moysklad')\n\nconst Moysklad = MoyskladCore.compose(MoyskladQueue)\n\nconst moysklad = Moysklad({\n  queue: true // включение очереди запросов\n})\n```\n\nОчередь глобальная, т.е. для всех запросов всех экземпляров библиотеки в рамках приложения будет\nиспользоваться одна общая очередь.\n\n```js\nconst Moysklad = MoyskladCore.compose(MoyskladQueue)\nconst moysklad1 = Moysklad({ queue: true })\nconst moysklad2 = Moysklad({ queue: true })\nconst moysklad3 = MoyskladCore.compose(MoyskladQueue).create({ queue: true })\n\n// для moysklad1, moysklad2 и moysklad3 будет общая очередь\n```\n\nДля каждого логина автоматически создается отдельная очередь.\n\n```js\nconst moysklad1 = Moysklad({\n  login: 'user1@account',\n  password: '****',\n  queue: true\n})\n\nconst moysklad2 = Moysklad({\n  login: 'user2@account',\n  password: '****',\n  queue: true\n})\n\n// для moysklad1 и moysklad2 очереди будут разные\n```\n\n## Настройка\n\nМожно указать параметры очереди\n\n```js\nconst moysklad = Moysklad({\n  queue: {\n    period: 5500,\n    tasksPerPeriod: 100,\n    parallelTasks: 50\n  }\n})\n```\n\nПараметр | Ограничение МойСклад | По умолчанию | Описание\n---------|----------------------|--------------|---------\n`period` | 5000 | 5500 | период (мс) на который ставится ограничение по максимальному кол-ву запросов\n`tasksPerPeriod` | 100 | 100 | максимальное кол-во запросов за период `period`\n`parallelTasks` | 50 | 50 | максимальное кол-во параллельных запросов\n\n[Официальная информация по лимитам](https://youtu.be/k2o-IFe0L9s?t=8m55s)\n\n\n\n\n","created":"2017-03-20T14:11:35.657Z","modified":"2017-05-04T10:22:12.687Z","lastPublisher":{"name":"wmakeev","email":"w.makeev@gmail.com"},"owners":[{"name":"wmakeev","email":"w.makeev@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"moysklad-extension-queue","_nodeVersion":"7.9.0","_npmOperationalInternal":{"host":"packages-18-east.internal.npmjs.com","tmp":"tmp/moysklad-extension-queue-0.1.0.tgz_1493893320278_0.4701932587195188"},"_npmUser":{"name":"wmakeev","email":"w.makeev@gmail.com"},"_npmVersion":"4.2.0","_rev":"6-061282fb9ebfaafca6e847625ececf6b","_shasum":"db1a48f0b654e7890859a61440eccbbbc589565c","author":{"name":"Vitaliy V. Makeev"},"directories":{},"dist-tags":{"latest":"0.1.0"},"dist":{"shasum":"db1a48f0b654e7890859a61440eccbbbc589565c","tarball":"https://registry.npmjs.org/moysklad-extension-queue/-/moysklad-extension-queue-0.1.0.tgz"},"maintainers":[{"name":"wmakeev","email":"w.makeev@gmail.com"}],"readmeFilename":"README.md","time":{"modified":"2017-05-04T10:22:12.687Z","created":"2017-03-20T14:11:35.657Z","0.0.2":"2017-03-20T14:11:35.657Z","0.0.3":"2017-03-25T18:09:11.739Z","0.1.0":"2017-05-04T10:22:02.191Z"}}}