{"name":"nonstop-index","version":"0.2.2","description":"HTTP server/site for hosting and management of nonstop packages and bootstrappers","main":"src/index.js","scripts":{"start":"node src/index.js","test":"gulp test"},"bin":{"nsindex":"./bin/nonstop-index"},"repository":"https://github.com/LeanKit-Labs/nonstop-index","keywords":["nonstop","hub","cd","package"],"license":"MIT","publishConfig":{"registry":"https://registry.npmjs.org/"},"homepage":"https://github.com/LeanKit-Labs/nonstop-index","devDependencies":{"biggulp":"~0.2.*","chai":"^3.2.0","chai-as-promised":"^5.1.0","gulp":"~3.9.*","halon":"^0.3.2","hyped":"^0.2.4","nock":"^2.10.0","proxyquire":"^1.7.0","request":"^2.61.0","should":"^4.0.4","sinon":"^1.16.0","sinon-as-promised":"^4.0.0","sinon-chai":"^2.8.0"},"dependencies":{"autohost":"~0.5.4","autohost-nedb-auth":"~0.2.0","autohost-webhook":"~0.1.1","commander":"^2.3.0","configya":"~0.2.0","daedalus":"~0.3.2","debug":"^2.0.0","fount":"^0.1.0","hyped":"~0.5.0","inquirer":"^0.7.2","lodash":"^2.4.1","machina":"^0.4.0-1","nedb":"^1.1.3","node-uuid":"^1.4.1","nonstop-pack":"~0.2.1","nonstop-package-resource":"~0.2.1","nonstop-registry-resource":"~0.2.0","postal":"^1.0.6","request":"^2.61.0","when":"^3.7.3"},"gitHead":"cb10eda3d22676e227e30369b9d2e202cf6d0a10","versions":[{"number":"0.1.0","date":"2015-08-12T03:06:32.899Z"},{"number":"0.1.1","date":"2015-08-12T16:36:21.729Z"},{"number":"0.1.2","date":"2015-08-17T03:56:05.154Z"},{"number":"0.1.3","date":"2015-08-17T07:32:58.305Z"},{"number":"0.1.5","date":"2015-08-21T03:43:30.561Z"},{"number":"0.1.6","date":"2015-08-21T14:12:36.106Z"},{"number":"0.1.7","date":"2015-08-22T11:07:42.590Z"},{"number":"0.1.8","date":"2015-08-24T03:21:05.515Z"},{"number":"0.1.9","date":"2015-08-24T11:04:59.774Z"},{"number":"0.1.10","date":"2015-08-29T19:18:27.622Z"},{"number":"0.1.11","date":"2015-11-14T19:08:33.687Z"},{"number":"0.1.12","date":"2015-11-14T23:19:28.642Z"},{"number":"0.1.13","date":"2015-11-16T06:11:43.056Z"},{"number":"0.1.14","date":"2015-11-17T13:43:00.294Z"},{"number":"0.2.0","date":"2015-11-24T20:58:07.847Z"},{"number":"0.2.1","date":"2015-11-25T15:55:12.091Z"},{"number":"0.2.2","date":"2015-12-08T20:36:36.107Z"}],"readme":"## nonstop index\n\n## Security Roles\nEach of the actions provided by the index's API requires a user assigned to a specific role. The roles are:\n\n * admin - can perform all actions\n * agent - can upload new packages to the index\n * client - can make calls related to searching the index, downloading packages, registering hosts and updating status\n\n### Installation\nInstall the index globally from NPM:\n\n```bash\nnpm install nonstop-index -g\n```\n\n### Setup\nYou'll need to provide some information during the first run in order to create client and agent credentials. This information is stored in NeDB files by default. The `users.db` file will contain a list of users that displays their roles and tokens.\n\n### Running\nOnce you've set everything up, use the `-s` flag to auto-start the service and skip the menu.\n\n```bash\nnsindex -s\n```\n\n## Configuration\nThe process will look in the current working directory (where `nsindex` was called from, not where it is installed to) for a `config.json` file. This file can provide keys that will override the defaults specified.\n\n> Note: when overriding a key with an array value, you must provide _all_ desired values for the array.\n\n### defaults\n```javascript\n{\n\thost: {\n\t\tcors: {\n\t\t\t\"Access-Control-Allow-Origin\": \"*\",\n\t\t\t\"Access-Control-Allow-Headers\": \"X-Requested-With,Authorization,Content-Type\",\n\t\t\t\"Access-Control-Allow-Methods\": \"OPTIONS,POST,PUT,PATCH,GET,DELETE\"\n\t\t},\n\t\tmodules: [\n\t\t\t\"nonstop-package-resource\",\n\t\t\t\"nonstop-registry-resource\",\n\t\t\t\"autohost-webhook\"\n\t\t],\n\t\tnoSession: true,\n\t\tapiPrefix: \"\",\n\t\turlPrefix: \"\",\n\t\tport: 4444,\n\t\tlogging: {\n\t\t\tadapters: {\n\t\t\t\tstdOut: {\n\t\t\t\t\tlevel: 3,\n\t\t\t\t\ttopic: \"#\"\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n```\n\n### config.json\n```javascript\n{\n\t\"host\": {\n\t\t\"cors\": {\n\t\t\t\"Access-Control-Allow-Origin\": \"*\",\n\t\t\t\"Access-Control-Allow-Headers\": \"X-Requested-With,Authorization,Content-Type\",\n\t\t\t\t\"Access-Control-Allow-Methods\": \"OPTIONS,POST,PUT,PATCH,GET,DELETE\"\n\t\t},\n\t\t\"modules\": [\n\t\t\t\"nonstop-package-resource\",\n\t\t\t\"nonstop-registry-resource\",\n\t\t\t\"autohost-webhook\"\n\t\t],\n\t\t\"noSession\": true,\n\t\t\"apiPrefix\": \"\",\n\t\t\"urlPrefix\": \"\",\n\t\t\"port\": 4444\n\t},\n\t\"logging\": {\n\t\t\"adapters\": {\n\t\t\t\"stdOut\": {\n\t\t\t\t\"level\": 3,\n\t\t\t\t\"topic\": \"#\"\n\t\t\t}\n\t\t}\n\t},\n\t\"storage\": {\n\t\t\"s3\": {\n\t\t\t\"id\": \"\",\n\t\t\t\"key\": \"\",\n\t\t\t\"bucket\": \"nonstop-packages\"\n\t\t},\n\t\t\"rethink\": {\n\t\t\t\"host\": \"localhost\",\n\t\t\t\"port\": 28015,\n\t\t\t\"database\": \"nonstop\"\n\t\t}\n\t}\n}\n```\n\n## Dockerization\nUsing the sample Dockerfile below, you can supply a config.json file that will provide the customization you need.\n\n### Sample Dockerfile\n```bash\nFROM nodesource/trusty:0.12.7\nENV DEBIAN_FRONTEND noninteractive\nUSER root\n\n# install node via NPM and nonstop index\nRUN /bin/bash -c \"npm install nonstop-index@0.2.0 -g\"\n\n# Index HTTP\nEXPOSE 4444\n\n# setup directories for data and packages\nRUN mkdir /usr/src/app/data && mkdir /usr/src/app/public\n\n# expose data and packages as volumes\nVOLUME [ \"/usr/src/app/data\", \"/usr/src/app/public\" ]\n\n# add configuration file\nADD config.json /usr/src/app/config.json\n\nCMD /bin/bash -c \"nsindex -s\"\n```\n\n## Setup\nThe first time you run this container will need to be in interactive mode in order to create the authentication information.\n\n> Note: the image name `nonstop-index` is intentionally generic and would be replaced with your own Docker image.\n\n### first-time setup\n```bash\nsudo docker run -it \\\n\t-v ~/nsdata:/usr/src/app/data \\\n\t-v ~/packages:/usr/src/app/public \\\n\t-e HOSTNAME=nonstop-index \\\n\t-p 4444:4444 \\\n\t--name nonstop-index \\\n\t--restart=always \\\n\tnonstop-index \\\n\tbash\n```\n\n## Updating\nAfter that, container instances based on the original or newer versions of the image can be started directly as they will re-use the externalized NeDB files.\n\n### starting the container after setup\n```bash\nsudo docker run -d \\\n\t-v ~/nsdata:/usr/src/app/data \\\n\t-v ~/packages:/usr/src/app/public \\\n\t-e HOSTNAME=nonstop-index \\\n\t-p 4444:4444 \\\n\t--name nonstop-index \\\n\t--restart=always\n\tnonstop-index\n```\n","created":"2015-08-12T03:06:32.899Z","modified":"2015-12-08T20:36:36.107Z","lastPublisher":{"name":"arobson","email":"asrobson@gmail.com"},"owners":[{"name":"arobson","email":"asrobson@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"nonstop-index","_nodeVersion":"0.12.7","_npmUser":{"name":"arobson","email":"asrobson@gmail.com"},"_npmVersion":"2.11.3","_rev":"1-fff32488e56f3b14cbb4d6b92014f890","_shasum":"6a7bb789696834f21bc81f96bc385abd740f9300","author":{"name":"LeanKit"},"bugs":{"url":"https://github.com/LeanKit-Labs/nonstop-index/issues"},"contributors":[{"name":"Alex Robson","url":"http://nerdventure.io"},{"name":"Doug Neiner","email":"doug@dougneiner.com","url":"http://code.dougneiner.com"}],"directories":{},"dist-tags":{"latest":"0.2.2"},"dist":{"shasum":"6a7bb789696834f21bc81f96bc385abd740f9300","tarball":"http://registry.npmjs.org/nonstop-index/-/nonstop-index-0.2.2.tgz"},"maintainers":[{"name":"arobson","email":"asrobson@gmail.com"}],"readmeFilename":"README.md","time":{"modified":"2015-12-08T20:36:36.107Z","created":"2015-08-12T03:06:32.899Z","0.1.0":"2015-08-12T03:06:32.899Z","0.1.1":"2015-08-12T16:36:21.729Z","0.1.2":"2015-08-17T03:56:05.154Z","0.1.3":"2015-08-17T07:32:58.305Z","0.1.5":"2015-08-21T03:43:30.561Z","0.1.6":"2015-08-21T14:12:36.106Z","0.1.7":"2015-08-22T11:07:42.590Z","0.1.8":"2015-08-24T03:21:05.515Z","0.1.9":"2015-08-24T11:04:59.774Z","0.1.10":"2015-08-29T19:18:27.622Z","0.1.11":"2015-11-14T19:08:33.687Z","0.1.12":"2015-11-14T23:19:28.642Z","0.1.13":"2015-11-16T06:11:43.056Z","0.1.14":"2015-11-17T13:43:00.294Z","0.2.0":"2015-11-24T20:58:07.847Z","0.2.1":"2015-11-25T15:55:12.091Z","0.2.2":"2015-12-08T20:36:36.107Z"}}}