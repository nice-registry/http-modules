{"name":"hal-http-client","version":"0.7.0","description":"A status code driven JSON HAL HTTP client based on the fetch API.","main":"dist/hal-http-client.js","scripts":{"test":"jasmine","test-watch":"watch \"npm test\" . --wait=1 -p /node_modules/","prepublish":"npm run dist","apidoc":"laxar-dox -d docs/api hal-http-client.js","dist":"babel hal-http-client.js -d dist --source-maps"},"repository":"https://github.com/aixigo/hal-http-client","homepage":"https://github.com/aixigo/hal-http-client","keywords":["fetch","hal","http","hypermedia","json","rest"],"license":"MIT","devDependencies":{"babel-cli":"^6.23.0","babel-plugin-transform-es2015-modules-umd":"^6.23.0","babel-plugin-transform-object-rest-spread":"^6.23.0","babel-preset-es2015":"^6.22.0","babel-preset-es2016":"^6.22.0","babel-preset-es2017":"^6.22.0","eslint":"^3.15.0","eslint-config-laxarjs":"^0.3.0","fetch-mock":"^5.9.3","jasmine-es6":"^0.4.0","laxar-dox":"^2.0.0-rc.0","watch":"^1.0.1"},"gitHead":"7d8766d4b2ea88dd365f15c60c9484b2550ec3e3","versions":[{"number":"0.3.0","date":"2017-02-17T13:22:13.390Z"},{"number":"0.4.0","date":"2017-02-17T14:30:19.832Z"},{"number":"0.6.0-pre","date":"2017-02-20T14:58:30.186Z"},{"number":"0.5.0","date":"2017-02-20T14:58:52.957Z"},{"number":"0.6.0","date":"2017-02-24T09:30:00.989Z"},{"number":"0.6.1","date":"2017-04-24T09:31:12.023Z"},{"number":"0.7.0","date":"2017-06-23T13:07:04.483Z"}],"readme":"# hal-http-client\n\n> A _status code driven_ JSON [HAL](http://stateless.co/hal_specification.html) HTTP client based on the [fetch API](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API).\n\nThe API doc can be found [here](docs/api/hal-http-client.md).\n\n\n## What is HAL and where does this client come into play?\n\nHAL _(Hypertext Application Layer)_, as the name already states, is an application level layer on top of JSON or XML that provides conventions for linking between different resources.\nFor RESTful APIs it helps to reach level 3 of the [Richardson Maturity Model](https://martinfowler.com/articles/richardsonMaturityModel.html) .\nAdditionally it defines how to embed related resources into the response of their parent resource for efficient APIs and lowering the need for actual HTTP requests over the wire.\n\nThe _hal-http-client_ defines a convenient API for accessing resources represented as HAL on top of JSON (XML is currently not supported and there are no plans in doing so):\n- It allows _navigating_ through resources with `application/hal+json` media type by _following the available relations_\n- If a resource is embedded, it _transparently reads the embedded representation_ instead of making a real HTTP request\n- Flow control is supported by providing a _status code driven_ API\n\n\n## Installation and Usage\n\n```sh\nnpm install hal-http-client\n```\n\nBasically import the library, make a new instance and start discovering resources by making a `GET` request to the root URL of your API.\n\n```js\nimport * as halHttp from '../hal-http-client';\n\nconst hal = halHttp.create( {\n   headers: { 'accept-language': 'de' },\n   on: {\n      // globally define how responses for status codes should be handled that were not handled locally\n      '5xx': ( data, response ) => {\n         console.error( `Caught unhandled 5xx error (status: ${response.status})` );\n      }\n   }\n} );\nhal.get( 'http://my-server/api/root' )\n// See the example below on how to go on from here\n```\n\n\n## Example\n\nLets take the following simple model of a person and his cars from the specs:\n\n```js\n// person\n{\n   \"name\": \"Peter\",\n   \"age\": 34\n}\n// his address\n{\n   \"street\": \"Mainstreet 12\",\n   \"postalCode\": \"12345\",\n   \"city\": \"Faketown\"\n}\n// his cars\n[\n   {\n      \"type\": \"VW\",\n      \"model\": \"T3 Vanagon\"\n   },\n   {\n      \"type\": \"DMC\",\n      \"model\": \"DeLorean\"\n   }\n]\n```\n\nAn according JSON response with all sub resources embedded could look like this:\n\n```js\n{\n   \"name\": \"Peter\",\n   \"age\": 34,\n   \"_links\": {\n      \"self\": { \"href\": \"peter\" },\n      \"address\": { \"href\": \"peter/address\" },\n      \"cars\": { \"href\": \"peter/cars\" }\n   },\n   \"_embedded\": {\n      \"address\": {\n         \"street\": \"Mainstreet 12\",\n         \"postalCode\": \"12345\",\n         \"city\": \"Faketown\",\n         \"_links\": { \"self\": { \"href\": \"peter/address\" } }\n      },\n      \"cars\": {\n         \"_links\": {\n            \"self\": { \"href\": \"peter/cars\" },\n            \"car\": [ { \"href\": \"peter/cars/0\" }, { \"href\": \"peter/cars/1\" } ]\n         },\n         \"_embedded\": {\n            \"car\": [\n               {\n                  \"type\": \"VW\",\n                  \"model\": \"T3 Vanagon\",\n                  \"_links\": { \"self\": { \"href\": \"peter/cars/0\" } }\n               },\n               {\n                  \"type\": \"DMC\",\n                  \"model\": \"DeLorean\",\n                  \"_links\": { \"self\": { \"href\": \"peter/cars/1\" } }\n               }\n            ]\n         }\n      }\n   }\n}\n```\n\nGetting the cars starting from the person can be achieved in the following way:\n\n```js\nhal.get( '/peter' )\n   .on( {\n      '200': hal.thenFollow( 'cars' )\n   } )\n   .on( {\n      '200': hal.thenFollowAll( 'car' )\n   } )\n   .on( {\n      '200': carList => {\n         console.log( carList );\n         // will print:\n         /*\n           [\n               {\n                  \"type\": \"VW\",\n                  \"model\": \"T3 Vanagon\",\n                  \"_links\": { \"self\": { \"href\": \"peter/cars/0\" } }\n               },\n               {\n                  \"type\": \"DMC\",\n                  \"model\": \"DeLorean\",\n                  \"_links\": { \"self\": { \"href\": \"peter/cars/1\" } }\n               }\n            ]\n         */\n      }\n   } );\n```\n\nThe `hal.thenFollow` method is a convenience factory for creating a function, which takes the response of the previous request, then _follows_ the given relation in the response body and finally returns a `ResponsePromise` for further `on` chaining.\nSo instead this part could have been written the following way:\n\n```js\nhal.get( '/peter' )\n   .on( {\n      '200': ( peterResource, response ) => {\n         return hal.follow( peterResource, 'cars' );\n      }\n   } )\n```\n\nDiving even deeper into details, the `hal.follow` method actually does the following (written in pseudo code):\n\n```vb\nfunction follow( resource, relation ) {\n   if relation_is_embedded then\n      return promise_for_embedded_representation;\n\n   else if relation_is_in_links then\n      set url to href_of_link_object;\n      set httpResponse to result_of_HTTP_GET_url;\n      return promise_for_http_response;\n\n   else\n      return rejected_promise;\n}\n```\n\nThe method `hal.thenFollowAll` basically works the same, only that it expects to find an array of relations to follow on the given resource and return all results again as an array.\n\nFrom here on you should consult the [API doc](docs/api/hal-http-client.md) to have a look at all the other APIs available on the _hal-http-client_.\n","created":"2017-02-17T13:22:13.390Z","modified":"2017-06-23T13:07:04.483Z","lastPublisher":{"name":"aixigo","email":"oss-npm@aixigo.de"},"owners":[{"email":"oss-npm@aixigo.de","name":"aixigo"},{"email":"alexander.wilden+npm@gmail.com","name":"alex3683"}],"other":{"_attachments":{},"_from":".","_id":"hal-http-client","_nodeVersion":"7.7.4","_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/hal-http-client-0.7.0.tgz_1498223223029_0.9079701816663146"},"_npmUser":{"name":"aixigo","email":"oss-npm@aixigo.de"},"_npmVersion":"4.1.2","_rev":"8-ae2fe029bc573145e84909bc2e3ef487","_shasum":"bb13c7ac4eb8792dfa9b8adc51fb3aab56d84c80","author":{"name":"Alexander Wilden","email":"alexander.wilden@aixigo.de"},"bugs":{"url":"https://github.com/aixigo/hal-http-client/issues"},"directories":{},"dist-tags":{"latest":"0.7.0"},"dist":{"shasum":"bb13c7ac4eb8792dfa9b8adc51fb3aab56d84c80","tarball":"https://registry.npmjs.org/hal-http-client/-/hal-http-client-0.7.0.tgz"},"maintainers":[{"email":"oss-npm@aixigo.de","name":"aixigo"},{"email":"alexander.wilden+npm@gmail.com","name":"alex3683"}],"readmeFilename":"README.md","time":{"modified":"2017-06-23T13:07:04.483Z","created":"2017-02-17T13:22:13.390Z","0.3.0":"2017-02-17T13:22:13.390Z","0.4.0":"2017-02-17T14:30:19.832Z","0.6.0-pre":"2017-02-20T14:58:30.186Z","0.5.0":"2017-02-20T14:58:52.957Z","0.6.0":"2017-02-24T09:30:00.989Z","0.6.1":"2017-04-24T09:31:12.023Z","0.7.0":"2017-06-23T13:07:04.483Z"}}}