{"name":"snub-http","version":"1.0.6","description":"HTTP server middleware for snub","main":"snub-http.js","scripts":{"test":"echo \"Error: no test specified\" && exit 1"},"repository":"https://github.com/cokeeffekt/snub-http","keywords":["redis","http"],"license":"ISC","homepage":"https://github.com/cokeeffekt/snub-http#readme","devDependencies":{"snub":"^1.0.2"},"gitHead":"f3c8bddb0fd5e31396fa0302db91717b81e7f5bc","versions":[{"number":"1.0.0","date":"2017-03-30T00:21:03.836Z"},{"number":"1.0.1","date":"2017-05-05T11:08:30.607Z"},{"number":"1.0.2","date":"2017-05-05T11:35:38.244Z"},{"number":"1.0.3","date":"2017-05-05T12:56:21.014Z"},{"number":"1.0.4","date":"2017-05-05T13:10:35.887Z"},{"number":"1.0.5","date":"2017-05-07T09:38:36.174Z"},{"number":"1.0.6","date":"2017-05-07T09:49:07.480Z"}],"readme":"# Snub-HTTP\n\nMiddleware HTTP server that allows you to run http over snub. Simply put it takes http requests, emits and event on the pub/sub bus and waits for a reply.\n\n#### Usage\n\n`npm install snub`\n`npm install snub-http`\n\n#### Basic Example\n\nWith redis installed and running with default port and no auth.\n\n```javascript\nconst Snub = require('snub');\nconst SnubHTTP = require('snub-http');\n\nconst snub = new Snub();\nconst snubHttp = new SnubHTTP();\n\nsnub.use(snubHttp);\n\nsnub.on('http:*', (payload) => {\n  console.log(payload);\n});\n```\n\nFor further examples take a look in [examples](/examples).\n\n#### Advanced Setup\nOptional config, defaults are applied if omitted.\n```javascript\nconst Snub = require('snub');\nconst SnubHTTP = require('snub-http');\n\nconst snub = new Snub();\nconst snubHttp = new SnubHTTP({\n    port: 8484, // listen on http port\n    debug: false, // dump debug junk\n    timeout: 5000 // http timeout (time to wait for reply)\n    headers: {\n      'Access-Control-Allow-Origin': '*' // global headers to apply to all responses\n    }\n  });\n\nsnub.use(snubHttp);\n\n```\n\n### API\n\n##### `snub.on('http:{{method}}:{{path}}', (payload, [reply]) => {});`\n\nAll events emitted from HTTP will be prefixed with `http:` followed by the method in caps `GET` `POST` `PUT` ... so on. The path is then appended. An example listener will look like this.\n\n```javascript\nsnub.on('http:GET:/api/hullo', (payload, reply) => {\n  console.log(payload);\n});\n```\n##### Payload\nThe payload will be an object with http data.\n\nExample for `[GET] localhost:8484/api/hullo?test=123`\n\n```javascript\n{ method: 'GET',\n  path: '/api/hullo',\n  body: '',\n  headers:\n   { host: 'localhost:8484',\n     connection: 'keep-alive',\n     'cache-control': 'no-cache',\n     'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_3)',\n     'accept-encoding': 'gzip, deflate, sdch, br',\n     'accept-language': 'en-US,en;q=0.8,it;q=0.6' },\n  query: { test: '123' } }\n```\n\n##### Reply\n\nReply is a standard snub reply, it accepts a single param, an object with some optional keys. The reply object is passed as the http response.\n\n```javascript\nreply({\n    headers: {'Content-Type': 'application/json'} // headers are optional.\n    statusCode: 200, // int\n    body: ['hullo?'] // can be a string or Obj, objects are automatically stringifyed to json.\n});\n```","created":"2017-03-30T00:21:03.836Z","modified":"2017-05-07T09:49:07.480Z","lastPublisher":{"name":"cokeeffekt","email":"pat.ggf@gmail.com"},"owners":[{"name":"cokeeffekt","email":"pat.ggf@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"snub-http","_nodeVersion":"6.7.0","_npmOperationalInternal":{"host":"packages-18-east.internal.npmjs.com","tmp":"tmp/snub-http-1.0.6.tgz_1494150545760_0.17717829532921314"},"_npmUser":{"name":"cokeeffekt","email":"pat.ggf@gmail.com"},"_npmVersion":"3.10.3","_rev":"7-2306c77bad980a100ea9cbe62e5a8a42","_shasum":"05ca31677d2499ab22bfc2fa6952d29cd2bb6398","author":{"name":"Patrik Hartwig"},"bugs":{"url":"https://github.com/cokeeffekt/snub-http/issues"},"directories":{},"dist-tags":{"latest":"1.0.6"},"dist":{"shasum":"05ca31677d2499ab22bfc2fa6952d29cd2bb6398","tarball":"https://registry.npmjs.org/snub-http/-/snub-http-1.0.6.tgz"},"maintainers":[{"name":"cokeeffekt","email":"pat.ggf@gmail.com"}],"readmeFilename":"readme.md","time":{"modified":"2017-05-07T09:49:07.480Z","created":"2017-03-30T00:21:03.836Z","1.0.0":"2017-03-30T00:21:03.836Z","1.0.1":"2017-05-05T11:08:30.607Z","1.0.2":"2017-05-05T11:35:38.244Z","1.0.3":"2017-05-05T12:56:21.014Z","1.0.4":"2017-05-05T13:10:35.887Z","1.0.5":"2017-05-07T09:38:36.174Z","1.0.6":"2017-05-07T09:49:07.480Z"}}}