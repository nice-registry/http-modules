{"name":"response-streams","version":"0.1.7","description":"Helps to write streams-containing object into non-object stream. For example, http response stream.","main":"lib/response-streams.js","scripts":{"test":"jasmine-node test","cover":"istanbul cover node_modules/jasmine-node/lib/jasmine-node/cli.js -- test"},"repository":"https://github.com/rmdm/response-streams","keywords":["stream","response","http","express"],"license":"MIT","homepage":"https://github.com/rmdm/response-streams","devDependencies":{"istanbul":"^0.3.2","jasmine-node":"git://github.com/mhevery/jasmine-node","through2":"^0.6.2"},"dependencies":{"readable-stream":"~1.0.0"},"gitHead":"0dc2573754fdcdc4d41dcb75d5abc4c2fc6fd889","versions":[{"number":"0.1.1","date":"2014-09-24T17:08:51.756Z"},{"number":"0.1.2","date":"2014-09-24T17:13:47.808Z"},{"number":"0.1.3","date":"2014-09-24T17:40:44.142Z"},{"number":"0.1.4","date":"2014-09-24T17:47:53.657Z"},{"number":"0.1.5","date":"2014-09-25T10:23:09.166Z"},{"number":"0.1.6","date":"2014-10-14T12:13:58.691Z"},{"number":"0.1.7","date":"2015-01-12T13:55:33.404Z"}],"readme":"response-streams\r\n================\r\nHelps to write streams-containing object into non-object stream. The streams packaged with the object will be exhausted.\r\n\r\n#Compatibility\r\nCompatible with **Streams2** & **3**. An object treated as Readable stream using duck type checking. That means you can freely use third-party modules such as [*readable-stream*](https://github.com/isaacs/readable-stream).\r\n\r\nFor older streams (such as *mongoose* offers) you can pipe them into newer (likely passing through) streams.\r\n\r\n#Installation\r\n```\r\nnpm install response-streams\r\n```\r\n\r\n#Usage\r\nModule exposes a function wich takes two args: writable non-object stream and an object to write.\r\n```javascript\r\nvar stream = require('response-streams');\r\n...\r\nstream(dest, obj);\r\n```\r\nPassed object could itself be a readable stream, or could contain any number of readable streams at any level of nesting.\r\n\r\n#Output\r\nGenerated and written into `dest` stream data represents valid JSON except for the following cases:\r\n\r\n* instead of an object a primitive was passed;\r\n* non-object stream was passed.\r\n\r\nIndependently of level at which stream is placed, **object stream turns into array** consisting of objects from that stream whereas **non-object stream turns into string** consisting of its chunks.\r\n\r\n#Backpressure\r\nModule respects backpressure.\r\n\r\n#Example\r\nLets say we have writable destination stream and two readable streams: one in object mode and other not:\r\n```javascript\r\nvar dest = ...;\r\n\r\nvar objStream = ...;\r\nvar nonObjStream = ...;\r\n```\r\nWe also have written some data into them:\r\n```javascript\r\nobjStream.write({a: 'b'});\r\nobjStream.write({c: 'd'});\r\nobjStream.end();\r\n\r\nnonObjStream.write('x');\r\nnonObjStream.write('y');\r\nnonObjStream.write('z');\r\nnonObjStream.end();\r\n```\r\n###top-level streams\r\n```javascript\r\nstream(dest, nonObjStream); // '\"xyz\"' in dest\r\n```\r\nor\r\n```javascript\r\nstream(dest, objStream); // [{\"a\":\"b\"},{\"c\":\"d\"}] in dest\r\n```\r\n###deep nesting\r\n```javascript\r\nvar obj = {\r\n  arr: [[], [1,2,3], [[nonObjStream]]],\r\n  obj: {\r\n    subobj: {\r\n      k: objStream\r\n    }\r\n  },\r\n  num: 5,\r\n  bool: true\r\n};\r\n\r\nstream(dest, obj);\r\n```\r\nIn `dest` we get:\r\n```javascript\r\n{\r\n  \"arr\": [[],[1,2,3],[[\"xyz\"]]],\r\n  \"obj\": {\r\n    \"subobj\": {\r\n      \"k\": [{\"a\":\"b\"},{\"c\":\"d\"}]\r\n    }\r\n  },\r\n  \"num\": 5,\r\n  \"bool\": true\r\n}\r\n```\r\n","created":"2014-09-24T17:08:51.756Z","modified":"2015-01-12T13:55:33.404Z","lastPublisher":{"name":"rmdm","email":"i@nlidb.info"},"owners":[{"name":"rmdm","email":"i@nlidb.info"}],"other":{"_attachments":{},"_from":".","_id":"response-streams","_npmUser":{"name":"rmdm","email":"i@nlidb.info"},"_npmVersion":"2.0.0-beta.3","_rev":"1-829582b8b48302231d52b20f652ce069","_shasum":"b213795961c7eb6c0bb22664baf12f843c200ed6","author":{"name":"Rumyantsev Dmitry"},"bugs":{"url":"https://github.com/rmdm/response-streams/issues"},"directories":{},"dist-tags":{"latest":"0.1.7"},"dist":{"shasum":"b213795961c7eb6c0bb22664baf12f843c200ed6","tarball":"http://registry.npmjs.org/response-streams/-/response-streams-0.1.7.tgz"},"maintainers":[{"name":"rmdm","email":"i@nlidb.info"}],"readmeFilename":"README.md","time":{"modified":"2015-01-12T13:55:33.404Z","created":"2014-09-24T17:08:51.756Z","0.1.1":"2014-09-24T17:08:51.756Z","0.1.2":"2014-09-24T17:13:47.808Z","0.1.3":"2014-09-24T17:40:44.142Z","0.1.4":"2014-09-24T17:47:53.657Z","0.1.5":"2014-09-25T10:23:09.166Z","0.1.6":"2014-10-14T12:13:58.691Z","0.1.7":"2015-01-12T13:55:33.404Z"}}}