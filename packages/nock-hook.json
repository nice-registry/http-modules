{"name":"nock-hook","description":"Convinient wrapper around Nock for HTTP testing","version":"1.0.1","main":"index.js","scripts":{"lint":"eslint '*.js' 'test/**/*.js'","precommit":"npm run lint && npm test","test":"npm run test:ava && npm run test:mocha","test:ava":"ava test/*.ava.js","test:mocha":"mocha test/mocha"},"engines":{"node":">=4.0"},"keywords":["tests","nock","replay"],"dependencies":{"nock":"^9.0.2"},"devDependencies":{"assert":"^1.4.1","ava":"^0.16.0","babel-eslint":"^6.0.0","eslint":"^3.0.0","got":"^6.6.1","husky":"^0.11.6","mocha":"^3.1.2"},"files":["index.js","ava.js"],"license":"MIT","repository":"https://github.com/ewnd9/nock-hook","gitHead":"e10e7e21486a343a93dfc6523df55d6c61f0fef9","homepage":"https://github.com/ewnd9/nock-hook#readme","versions":[{"number":"1.0.0","date":"2016-11-06T10:11:12.300Z"},{"number":"1.0.1","date":"2016-11-06T10:13:24.763Z"}],"readme":"# nock-hook\n\n[![Build Status](https://travis-ci.org/ewnd9/nock-hook.svg?branch=master)](https://travis-ci.org/ewnd9/nock-hook)\n\nConvinient wrapper around [Nock](https://github.com/node-nock/nock) for HTTP testing\n\n## Install\n\n```sh\n$ npm install nock-hook --save-dev\n```\n\n## Examples\n\n### `mocha`\n\n```js\n'use strict';\n\nconst assert = require('assert');\nconst nockHook = require('nock-hook');\n\nconst got = require('got');\n\ndescribe('nock-hook', function() {\n\n  it('fetch ya.ru', function() {\n    const closeNock = nockHook('fetch-ya.ru', { dirname: __dirname + '/fixtures/mocha' });\n    const startTime = Date.now();\n\n    return got('https://ya.ru/')\n      .then(res => {\n        assert(res.body.toLowerCase().indexOf('<!doctype html>') === 0, 'body starts by doctype');\n        assert((Date.now() - startTime) < 20, 'less than 50 ms');\n\n        closeNock();\n      })\n      .catch(err => {\n        closeNock();\n        return Promise.reject(err);\n      });\n  });\n\n});\n```\n\n### `ava`\n\n- All tests should be serial\n\n```js\nimport test from 'ava';\nimport nockHook from 'nock-hook';\n\nimport got from 'got';\n\ntest.serial('test', async t => {\n  const startTime = Date.now();\n  const closeHook = nockHook('fetch-ya-ru', { dirname: __dirname + '/fixtures/ava.default' });\n\n  const res = await got('https://ya.ru/');\n\n  t.truthy(res.body.toLowerCase().indexOf('<!doctype html>') === 0);\n  t.truthy((Date.now() - startTime) < 50);\n\n  closeHook();\n});\n```\n\n### `ava` with helper\n\n- All tests should be serial\n- Automatically setup function name\n\n```js\nimport test from 'ava';\nimport nockHook from 'nock-hook/ava';\n\nimport got from 'got';\n\ntest.beforeEach(t => {\n  t.context.closeNock = nockHook(t, __filename, { dirname: __dirname + '/fixtures/ava.helper' });\n});\n\ntest.afterEach.always(t => {\n  t.context.closeNock();\n});\n\ntest.serial('fetch ya.ru', async t => {\n  const startTime = Date.now();\n  const res = await got('https://ya.ru/');\n\n  t.truthy(res.body.toLowerCase().indexOf('<!doctype html>') === 0);\n  t.truthy((Date.now() - startTime) < 50);\n});\n```\n\n## License\n\nMIT Â© [ewnd9](http://ewnd9.com)\n","created":"2016-11-06T10:11:12.300Z","modified":"2016-11-06T10:13:24.763Z","lastPublisher":{"name":"ewnd9","email":"ewndnine@gmail.com"},"owners":[{"name":"ewnd9","email":"ewndnine@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"nock-hook","_nodeVersion":"6.3.1","_npmOperationalInternal":{"host":"packages-18-east.internal.npmjs.com","tmp":"tmp/nock-hook-1.0.1.tgz_1478427204236_0.49813888035714626"},"_npmUser":{"name":"ewnd9","email":"ewndnine@gmail.com"},"_npmVersion":"3.10.3","_rev":"2-f9442457704e66937af98bfda69fe527","_shasum":"a063707a17f00458a6f10d1eac8ecd4f23a6cd6f","author":{"name":"ewnd9","email":"ewndnine@gmail.com"},"bugs":{"url":"https://github.com/ewnd9/nock-hook/issues"},"directories":{},"dist-tags":{"latest":"1.0.1"},"dist":{"shasum":"a063707a17f00458a6f10d1eac8ecd4f23a6cd6f","tarball":"http://registry.npmjs.org/nock-hook/-/nock-hook-1.0.1.tgz"},"maintainers":[{"name":"ewnd9","email":"ewndnine@gmail.com"}],"readmeFilename":"README.md","time":{"modified":"2016-11-06T10:13:24.763Z","created":"2016-11-06T10:11:12.300Z","1.0.0":"2016-11-06T10:11:12.300Z","1.0.1":"2016-11-06T10:13:24.763Z"}}}