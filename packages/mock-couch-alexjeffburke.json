{"name":"mock-couch-alexjeffburke","version":"0.1.3-patch2","description":"An http server pretending to be couchdb, for unit testing.","homepage":"http://chris-l.github.io/mock-couch/","main":"index.js","scripts":{"test":"grunt"},"keywords":["couchdb","http","server","testing","mock"],"license":"MIT","repository":"https://github.com/chris-l/mock-couch","dependencies":{"ramda":"^0.8.0","restify":"^2.7.0","underscore":"^1.6.0"},"devDependencies":{"grunt":"^0.4.4","grunt-jslint":"^1.1.12","grunt-jasmine-nodejs":"^1.3.0"},"gitHead":"6194347c04915969d446b4b2a6c6a0f92588d733","versions":[{"number":"0.1.3-patch1","date":"2015-06-18T10:08:34.467Z"},{"number":"0.1.3-patch2","date":"2015-10-07T21:15:52.788Z"}],"readme":"<h1><img src=\"http://chris-l.github.io/mock-couch/img/title.png\" alt=\"The Mock Couch\" width=\"500px\" height=\"97px\" /></h1>\n\n[![Build Status](https://travis-ci.org/chris-l/mock-couch.png?branch=master)](https://travis-ci.org/chris-l/mock-couch)\n\nMock a CouchDB server for your unit tests.\n\n<img src=\"http://chris-l.github.io/mock-couch/img/mock-couch.svg\" height=\"316\" alt=\"A photo of a Mock Couch\" title=\"&quot;It's the thing Mock Couch Soup is made from,&quot; said the Queen.\" />\n\nMock Couch will create an HTTP server that emulates the responses of a real CouchDB server.\nSince it is an actual HTTP server, no matter if you use libraries like cradle and nano, your code should work out of the box.\n\nMock Couch emit events, so you can listen to them to see the result of your test.\n\n## Installation\n\n```\nnpm install --save-dev mock-couch\n```\n\n## Changelog\n\n* 0.1.3\n - Several fixes (Thanks to @monowerker and @alexjeffburke)\n - Rewriting a lot of the code using [Ramda](http://ramdajs.com/) (to make it more functional)\n - Support for [linked documents](http://wiki.apache.org/couchdb/Introduction_to_CouchDB_views#Linked_documents) in views (Credits to @monowerker)\n - Implementation of [`_changes`](https://wiki.apache.org/couchdb/HTTP_database_API#Changes) (Credits to @conor-mac-aoidh)\n* 0.1.2\n - Added HEAD requests. (Credits to @davidwood)\n - Added option to prevent keep-alive connections. (Credits to @davidwood)\n - Now is possible to use the query option `key` on views.\n - Other fixes.\n* 0.1.1\n - The emitted events are now standarized. Read about the [events](http://chris-l.github.io/mock-couch/#events) on the documentation.\n* 0.1.0\n - **Support for views** (map and reduce functions). Create a `_design/` document to use them. Read more about them [here](http://chris-l.github.io/mock-couch/#views).\n - Documentation available on http://chris-l.github.io/mock-couch/\n - Added `addDoc` method to add a document from the node.js side. Contrary to adding a document with a PUT, this is sync and allows you to specify the `_rev`\n\n## Documentation\n\nVisit the [Mock Couch website](http://chris-l.github.io/mock-couch/).\n\n## Features\n\n* Implemented with [restify](https://github.com/mcavage/node-restify).\n* Uses simple JavaScript objects as documents.\n* It emit events, so the tests can listen to them.\n* The `mock_couch` object has a `databases` public property, to examine how the databases are in any moment.\n* Several of the CouchDB REST methods. Right now it has:\n - GET one document\n - GET `_all_docs`, including:\n    - `include_docs=true`\n    - `descending=true`\n    - `startkey`\n    - `endkey`\n    - also, using `_all_docs` with POST to specify the desired keys\n - GET the information of a database\n - GET `_all_dbs`\n - GET `_uuids`\n - GET views (like `http://localhost:5984/database/_design/myviews/_view/someview/`)\n - PUT one document\n - PUT a database\n - POST one document\n - POST to `_bulk_docs` multiple documents\n - DELETE one document\n - DELETE a database\n\n## Not yet implemented\n\n* deleting by setting the `_deleted` member\n* `_changes`\n* And a lot of other things!\n\nKeep in mind that Mock Couch is not attempting to fully implement CouchDB, but only the features necessary for unit testing CouchDB based apps.\n\nHowever, if there is a feature you need for your tests, feel free to add a feature request in the [issues section](https://github.com/chris-l/mock-couch/issues)!\n\n## Usage\n\nHere is an example:\n\n```javascript\nvar mockCouch = require('mock-couch');\n\n// myfun is the function that we want to test.\n// It uses couchdb, either by using cradle, nano, or direct http requests\n// This function takes an object as parameter, maybe runs some validations\n// and if everything is ok, then save it on couchdb.\nvar myfun = require('somefunc');\n\n\ndescribe('myfun', function() {\n\n  beforeEach(function() {\n    // Starting the server\n    var couchdb = mockCouch.createServer();\n\n    // Make sure you are either executing this test under a machine that does not have couchdb installed/enabled,\n    // or that you are using a different port!\n    // (which may require that you are able to specify the couchdb port on the function you are about to test)\n    couchdb.listen(5984);\n\n    // This creates a db for Mock Couch. The db is nothing but an array of objects.\n    // If we provide an object with an _id property, it will use it. Otherwise, it will create a random one.\n    couchdb.addDB('people', [ { name : 'one name', lastname : 'one lastname' }, { _id : '4568797890', name : 'second name', lastname : 'other lastname' } ]);\n  });\n\n\n  // Here is the test\n  it('must add a person to couchdb', function(done) {\n\n    // Now we add a listener that is expecting the data we are about to send.\n    couchdb.on('POST', function(data) {\n      expect(data.doc.name).toBe('reimu');\n      expect(data.doc.lastname).toBe('hakurei');\n      done();\n    });\n\n    // And here we are finally calling the function\n    myfun({ name : 'reimu', lastname : 'hakurei' });\n\n  });\n});\n```\n\nIf your testing requires the frequent setup and teardown of the mock server, it may be beneficial to prevent keep-alive connections. The server will always return a `Connection: close` header if constructed with a `keepAlive` option set to `false`.\n\n```\nvar couchdb = mockCouch.createServer({ keepAlive: false });\n```\n\n## Status\n\nIs still in its alpha stage, so its possible that it changes a lot.\n\n## License\n\nMIT license\n\n## Contribution\n\nYour feedback, pull requests, etc are welcomed! :)\n","created":"2015-06-18T10:08:34.467Z","modified":"2015-10-07T21:15:52.788Z","lastPublisher":{"name":"alexjeffburke","email":"alex@alexjeffburke.com"},"owners":[{"name":"alexjeffburke","email":"alex@alexjeffburke.com"}],"other":{"_attachments":{},"_from":".","_id":"mock-couch-alexjeffburke","_npmUser":{"name":"alexjeffburke","email":"alex@alexjeffburke.com"},"_npmVersion":"1.4.28","_rev":"1-b0e98cd2f1f2391eb00bfb91d5886693","_shasum":"0d21731f3b169169724078c58db413bec8ba6d2d","author":{"name":"Christopher Luna","email":"dev@christopher-luna.com"},"bugs":{"url":"https://github.com/chris-l/mock-couch/issues"},"directories":{},"dist-tags":{"latest":"0.1.3-patch2"},"dist":{"shasum":"0d21731f3b169169724078c58db413bec8ba6d2d","tarball":"http://registry.npmjs.org/mock-couch-alexjeffburke/-/mock-couch-alexjeffburke-0.1.3-patch2.tgz"},"maintainers":[{"name":"alexjeffburke","email":"alex@alexjeffburke.com"}],"readmeFilename":"README.md","time":{"modified":"2015-10-07T21:15:52.788Z","created":"2015-06-18T10:08:34.467Z","0.1.3-patch1":"2015-06-18T10:08:34.467Z","0.1.3-patch2":"2015-10-07T21:15:52.788Z"}}}