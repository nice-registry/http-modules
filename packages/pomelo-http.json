{"name":"pomelo-http","version":"0.0.8","description":"Wrap express module as pomelo http tools.","main":"index.js","private":false,"homepage":"https://github.com/Sailor20/pomelo-http","repository":"https://github.com/Sailor20/pomelo-http","licenses":[{"type":"MIT","url":"https://github.com/Sailor20/pomelo-http#license"}],"keywords":["pomelo","express","http","pomelo-http","pomelo http"],"license":"MIT","dependencies":{"assert":"^1.4.1","body-parser":"^1.17.1","compression":"^1.6.2","express":"^4.15.2","method-override":"^2.3.8"},"gitHead":"c7fcff1e3a5e8adb3720a1b2f8e2fedfd16d9f9f","scripts":{},"readme":"pomelo-http\n==================\n\nWrap express module as pomelo http tools.\n\n\n[wiki][]\n[wiki]: https://github.com/Sailor20/pomelo-http/wiki\n\n###How to use pomelo-http:\n\n###Single server\n\nFor example, your http server name is gamehttp.\n\n#####1. Create config/http.json, configure your http server\n```js\n{\n  \"development\": {\n    \"gamehttp\": {\n      \"host\": \"127.0.0.1\",\n      \"port\": 3001\n    }\n  }\n}\n```\nIf you want to support https, you should add more keys to config/http.json\n```js\n{\n  \"development\": {\n    \"gamehttp\": {\n      \"useSSL\": true,\n      \"keyFile\": \"config/key.pem\",\n      \"certFile\": \"config/cert.pem\",\n      \"host\": \"127.0.0.1\",\n      \"port\": 3001\n    }\n  }\n}\n```\n#####2. Change servers.json, add gamehttp config\n```js\n\"gamehttp\": [{\n  \"id\": \"gamehttp\",\n  \"port\": 3002,\n  \"host\": \"127.0.0.1\"\n}]\n```\n#####3. Change adminServer.json, add server type config\n```js\n{\n  \"type\": \"gamehttp\",\n  \"token\": \"agarxhqb98rpajloaxn34ga8xrunpagkjwlaw3ruxnpaagl29w4rxn\"\n}\n```\n#####4. Change app.js\n```js\nconst pomeloHttp = require('pomelo-http');\nconst path = require('path');\napp.configure('development', 'gamehttp', () => {\n  app.loadConfig('httpConfig', path.join(app.getBase(), 'config/http.json'));\n  app.use(pomeloHttp, {\n    http: app.get('httpConfig')[app.getServerId()]\n  });\n});\n```\n#####5. Create app/servers/gamehttp/route/testRoute.js\n```js\nmodule.exports = (app, express) => {\n  const router = express.Router();\n  \n  router.get('/test', (req, res) => {\n    res.send('test success')\n  });\n  \n  return router;\n};\n```\n#####6. Run your app and open url http://127.0.0.1:3001/test\n\n###Server cluster\n\nThis example, we configure our http server as a server cluster, just have a little difference with the before example.\n\n#####1. Create config/http.json, configure your http server\n```js\n{\n  \"development\": {\n    \"gamehttp\": {\n      \"isCluster\": true,\n      \"host\": \"127.0.0.1\",\n      \"port\": \"3001++\"\n    }\n  }\n}\n```\nIf you want to support https, you should add more keys to config/http.json\n```js\n{\n  \"development\": {\n    \"gamehttp\": {\n      \"useSSL\": true,\n      \"keyFile\": \"config/key.pem\",\n      \"certFile\": \"config/cert.pem\",\n      \"isCluster\": true,\n      \"host\": \"127.0.0.1\",\n      \"port\": \"3001++\"\n    }\n  }\n}\n```\n#####2. Change servers.json, add gamehttp config\n```js\n\"gamehttp\": [{\n  \"id\": \"gamehttp\",\n  \"clusterCount\": 2,\n  \"port\": \"3101++\",\n  \"host\": \"127.0.0.1\"\n}]\n```\n#####3. Change adminServer.json, add server type config\n```js\n{\n  \"type\": \"gamehttp\",\n  \"token\": \"agarxhqb98rpajloaxn34ga8xrunpagkjwlaw3ruxnpaagl29w4rxn\"\n}\n```\n#####4. Change app.js\n```js\nconst pomeloHttp = require('pomelo-http');\nconst path = require('path');\n\napp.configure('development', 'gamehttp', () => {\n  app.loadConfig('httpConfig', path.join(app.getBase(), 'config/http.json'));\n  app.use(pomeloHttp, {\n    httpComponent: app.get('httpConfig')[app.getServerType()]\n  });\n});\n```\n#####5. Create app/servers/gamehttp/route/testRoute.js\n```js\nmodule.exports = (app, express) => {\n  const router = express.Router();\n  \n  router.get('/test', (req, res) => {\n    res.send('test success')\n  });\n};\n```\n#####6. Run your app and open urls: http://127.0.0.1:3001/test, http://127.0.0.1:3002/test\n#####7. Optional, you can use nginx or any other similar program to reverse proxy the http port, just google it!\n","versions":[{"number":"1.0.0","date":"2017-04-29T16:29:41.211Z"},{"number":"0.0.1","date":"2017-04-30T04:27:29.526Z"},{"number":"0.0.2","date":"2017-04-30T04:35:46.971Z"},{"number":"0.0.3","date":"2017-04-30T05:28:22.818Z"},{"number":"0.0.4","date":"2017-04-30T05:39:40.715Z"},{"number":"0.0.5","date":"2017-04-30T05:44:57.284Z"},{"number":"0.0.6","date":"2017-04-30T06:02:32.454Z"},{"number":"0.0.7","date":"2017-05-01T06:16:55.112Z"},{"number":"0.0.8","date":"2017-05-18T03:01:35.524Z"}],"created":"2017-04-29T16:29:41.211Z","modified":"2017-05-18T03:01:35.524Z","lastPublisher":{"name":"sailor20","email":"920819339@qq.com"},"owners":[{"name":"sailor20","email":"920819339@qq.com"}],"other":{"_attachments":{},"_from":".","_id":"pomelo-http","_nodeVersion":"6.10.2","_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/pomelo-http-0.0.8.tgz_1495076495264_0.8223026134073734"},"_npmUser":{"name":"sailor20","email":"920819339@qq.com"},"_npmVersion":"3.10.10","_rev":"16-45c545363a6c7a6cfd6a63811a622ce9","_shasum":"14f4c9ec23918025a0d5eaa6b431571e69cbd2e0","author":{"name":"Sailor20"},"bugs":{"url":"https://github.com/Sailor20/pomelo-http/issues"},"directories":{},"dist-tags":{"latest":"0.0.8"},"dist":{"shasum":"14f4c9ec23918025a0d5eaa6b431571e69cbd2e0","tarball":"https://registry.npmjs.org/pomelo-http/-/pomelo-http-0.0.8.tgz"},"maintainers":[{"name":"sailor20","email":"920819339@qq.com"}],"readmeFilename":"README.md","time":{"modified":"2017-05-18T03:01:35.524Z","created":"2017-04-29T16:29:41.211Z","1.0.0":"2017-04-29T16:29:41.211Z","0.0.1":"2017-04-30T04:27:29.526Z","0.0.2":"2017-04-30T04:35:46.971Z","0.0.3":"2017-04-30T05:28:22.818Z","0.0.4":"2017-04-30T05:39:40.715Z","0.0.5":"2017-04-30T05:44:57.284Z","0.0.6":"2017-04-30T06:02:32.454Z","0.0.7":"2017-05-01T06:16:55.112Z","0.0.8":"2017-05-18T03:01:35.524Z"}}}