{"name":"engined-http","version":"0.0.1","description":"http agent service for engined","main":"index.js","scripts":{"test":"echo \"Error: no test specified\" && exit 1"},"repository":"https://github.com/cfsghost/engined-http","keywords":["service","engined","http"],"engines":{"node":">=7.4"},"license":"MIT","homepage":"https://github.com/cfsghost/engined-http#readme","dependencies":{"engined":"0.0.2","koa":"^2.2.0","koa-bodyparser":"^4.2.0","koa-logger":"^3.0.0","koa2-cors":"^2.0.3"},"gitHead":"c52ef4a94ed05d463334eaca3eaa63d0fa5411f7","versions":[{"number":"0.0.1","date":"2017-06-13T18:51:55.597Z"}],"readme":"# engined-http\n\nHTTP agent service for engined, which is based on `koa 2`.\n\n[![NPM](https://nodei.co/npm/engined-http.png)](https://nodei.co/npm/engined-http/)\n\n## Installation\n\nInstall via NPM:\n\n```shell\nnpm install engined-http\n```\n\n## Usage\n\nStart HTTP agent service in engined, see example below:\n\n```javascript\nconst { Manager } = require('engined');\nconst HTTPService = require('engined-http');\n\nconst MyHTTPService = HTTPService({\n\tport: 8080, // optional: default to 3001 if not set\n\tagentName: 'MyHTTP' // optional: default to 'default' if not set\n});\n\nconst main = async () => {\n\n\t// Create manager\n\tlet serviceManager = new Manager({ verbose: true });\n\n\t// Adding agent to manager\n\tserviceManager.add('MyHTTPService', MyHTTPService);\n\n\t// Start all services\n\tawait serviceManager.startAll();\n};\n\nmain();\n```\n\n## Setup Router\n\nFor HTTP routing, there is a way to inherit `RouterService` class to create a router service to manage routes by using `koa-router`.\n\n```javascript\nconst Router = require('koa-router');\nconst { RouterService } = require('engined-http');\n\n// Create service prototype and specify agent\nconst Service = RouterService({\n\tagentName: 'MyHTTP' // optional: default to 'default' if not set\n});\n\nclass MyRouterService extends Service {\n\n\tasync setupRoutes() {\n\t\tlet router = Router();\n\n\t\trouter.get('/', async (ctx) => {\n\t\t\tctx.body = 'Hello!';\n\t\t});\n\n\t\treturn router;\n\t}\n}\n```\n\nNote: remember to add this service to engined service manager and start it.\n\n## Setup Middlewares\n\nBy default, HTTP service will apply `koa-logger`, `koa2-cors` and `koa-bodyparser` middlewares. If you would like to apply any perfered middlewares, just override `setupMiddleware` method of service.\n\n```javascript\nclass MyHTTPService extends HTTPService{{ port: 8080 }} {\n\n\tasync setupMiddleware() {\n\t\t// Apply original `koa-logger`, `koa2-cors` and `koa-bodyparser` if you still need it\n\t\tawait this._setupMiddleware();\n\n\t\t// Add your middleware\n\t\tthis.agent.use(async (ctx) => {\n\t\t\t// Do something\n\t\t});\n\t}\n}\n```\n\n## Setup CORS (Cross-Origin Resource Sharing)\n\nBy override `setupCORS` method of service, to make settings as parameter for `koa2-cors` to support CORS.\n\n```javascript\nclass MyHTTPService extends HTTPService{{ port: 8080 }} {\n\n\tasync setupCORS() {\n\t\treturn { origin: '*' };\n\t}\n}\n```\n\n## Setup Body Parser\n\nThe body parser is common middleware to parse HTTP body, we can have settings supported by `koa-bodyparser`.\n\n```javascript\nclass MyHTTPService extends HTTPService{{ port: 8080 }} {\n\n\tasync setupBodyParser() {\n\t\treturn {\n\t\t\tjsonLimit: '50mb',\n\t\t\ttextLimit: '50mb'\n\t\t};\n\t}\n}\n```\n\n## License\nLicensed under the MIT License\n \n## Authors\nCopyright(c) 2017 Fred Chien（錢逢祥） <<cfsghost@gmail.com>>\n","created":"2017-06-13T18:51:55.597Z","modified":"2017-06-13T18:51:55.597Z","lastPublisher":{"name":"fredchien","email":"cfsghost@gmail.com"},"owners":[{"name":"fredchien","email":"cfsghost@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"engined-http","_nodeVersion":"7.6.0","_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/engined-http-0.0.1.tgz_1497379915448_0.06926312413997948"},"_npmUser":{"name":"fredchien","email":"cfsghost@gmail.com"},"_npmVersion":"4.1.2","_rev":"1-5a63b00d1f1b1af0d456ff52a1589fa5","_shasum":"f20ac5e7b1f621376c0e72696a7f56b9093a0e71","author":{"name":"Fred Chien","email":"cfsghost@gmail.com"},"bugs":{"url":"https://github.com/cfsghost/engined-http/issues"},"directories":{},"dist-tags":{"latest":"0.0.1"},"dist":{"shasum":"f20ac5e7b1f621376c0e72696a7f56b9093a0e71","tarball":"https://registry.npmjs.org/engined-http/-/engined-http-0.0.1.tgz"},"maintainers":[{"name":"fredchien","email":"cfsghost@gmail.com"}],"readmeFilename":"README.md","time":{"modified":"2017-06-13T18:51:55.597Z","created":"2017-06-13T18:51:55.597Z","0.0.1":"2017-06-13T18:51:55.597Z"}}}