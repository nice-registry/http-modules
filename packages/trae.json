{"name":"trae","version":"1.4.2","description":"Fetch based HTTP client for the browser","keywords":["fetch","http","request","api"],"main":"dist/trae.js","module":"dist/trae.umd.min.js","unpkg":"dist/trae.umd.min.js","files":["src","dist/*.js"],"license":"MIT","repository":"https://github.com/huemul/trae","homepage":"https://github.com/huemul/trae#readme","scripts":{"add":"all-contributors add","contributors":"all-contributors generate","build":"NODE_ENV=production node build/rollup.js","build:dev":"node build/rollup.js","build:docs":"npm run build && cp dist/trae.min.js docs/js/trae.min.js","docs":"http-server ./docs -o","test":"npm run eslint && jest --coverage --verbose","test:w":"jest --watch --verbose","check-cover":"open coverage/lcov-report/index.html","check-bundle":"open coverage/bundle-statistics.html","prepublish":"in-publish && ./scripts/publish.sh || echo 'just installing'","eslint":"eslint . --ext .js","release":"np"},"dependencies":{"isomorphic-fetch":"^2.2.1","merge":"^1.2.0","qs":"^6.3.1"},"devDependencies":{"all-contributors-cli":"^4.0.0","babel-core":"^6.23.1","babel-jest":"^19.0.0","babel-loader":"^6.3.2","babel-preset-es2015":"^6.22.0","babel-preset-es2015-rollup":"^3.0.0","coveralls":"^2.11.16","eslint":"^3.16.0","eslint-config-airbnb":"^14.1.0","eslint-loader":"^1.6.1","eslint-plugin-import":"^2.2.0","eslint-plugin-jsx-a11y":"^4.0.0","eslint-plugin-react":"^6.10.0","fetch-mock":"^5.9.4","http-server":"^0.10.0","in-publish":"^2.0.0","jest":"^19.0.0","node-inspector":"^0.12.8","np":"^2.14.1","pre-commit":"^1.2.2","rollup":"^0.41.4","rollup-plugin-babel":"^2.7.1","rollup-plugin-commonjs":"^7.0.0","rollup-plugin-conditional":"^1.1.1","rollup-plugin-eslint":"^3.0.0","rollup-plugin-filesize":"^1.0.1","rollup-plugin-json":"^2.1.1","rollup-plugin-node-builtins":"^2.1.0","rollup-plugin-node-globals":"^1.1.0","rollup-plugin-node-resolve":"^2.0.0","rollup-plugin-replace":"^1.1.1","rollup-plugin-uglify":"^1.0.1","rollup-plugin-visualizer":"^0.2.0","rollup-watch":"^3.2.2"},"pre-commit":["eslint","test"],"jest":{"coverageThreshold":{"global":{"branches":70,"functions":70,"lines":70,"statements":70}},"collectCoverageFrom":["!**/node_modules/**","lib/**"],"roots":["test/"]},"engines":{"node":">=6"},"gitHead":"b8482217566b20c92addb292080e3e4bf85a82ce","versions":[{"number":"0.0.1","date":"2016-11-02T14:24:02.595Z"},{"number":"0.0.2","date":"2016-11-17T13:21:52.172Z"},{"number":"0.0.3","date":"2016-11-23T21:04:17.362Z"},{"number":"0.0.4","date":"2016-11-23T22:36:39.334Z"},{"number":"0.0.5","date":"2016-11-24T17:07:55.748Z"},{"number":"0.0.6","date":"2016-11-24T20:41:39.976Z"},{"number":"0.0.7","date":"2016-11-25T13:17:38.695Z"},{"number":"0.0.8","date":"2016-11-25T13:30:59.810Z"},{"number":"0.0.10","date":"2016-11-30T21:15:49.211Z"},{"number":"0.0.11","date":"2016-12-11T17:47:48.452Z"},{"number":"0.0.12","date":"2016-12-15T23:19:48.169Z"},{"number":"0.0.13","date":"2017-01-04T15:25:42.953Z"},{"number":"1.0.0","date":"2017-01-04T20:06:55.725Z"},{"number":"1.0.1","date":"2017-01-05T15:14:55.879Z"},{"number":"1.1.0","date":"2017-01-12T20:33:51.516Z"},{"number":"1.1.1","date":"2017-01-13T13:01:54.804Z"},{"number":"1.1.2","date":"2017-02-22T13:14:51.162Z"},{"number":"1.1.3","date":"2017-02-23T18:03:16.613Z"},{"number":"1.2.0","date":"2017-02-25T05:31:36.932Z"},{"number":"1.2.1-1","date":"2017-03-07T17:50:51.159Z"},{"number":"1.3.0","date":"2017-03-09T01:49:58.605Z"},{"number":"1.4.0","date":"2017-03-28T00:14:36.817Z"},{"number":"1.4.1","date":"2017-05-04T00:33:43.862Z"},{"number":"1.4.2","date":"2017-05-12T20:10:32.968Z"}],"readme":"# trae\n\nMinimalistic HTTP client for the browser. Based on [Fetch](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API) API, allows `trae` to be future-proofing, to have a clean implementation and support streaming among other goodies.\n\n[![Codeship Status for Huemul/trae](https://img.shields.io/codeship/1d9dc9b0-84c0-0134-0393-62ca7b64624e/master.svg)](https://app.codeship.com/projects/183213)\n[![Coverage Status](https://coveralls.io/repos/github/Huemul/trae/badge.svg?branch=master)](https://coveralls.io/github/Huemul/trae?branch=master)\n[![bitHound Overall Score](https://www.bithound.io/github/Huemul/trae/badges/score.svg)](https://www.bithound.io/github/Huemul/trae)\n[![bitHound Dependencies](https://www.bithound.io/github/Huemul/trae/badges/dependencies.svg)](https://www.bithound.io/github/Huemul/trae/master/dependencies/npm)\n[![bitHound Dev Dependencies](https://www.bithound.io/github/Huemul/trae/badges/devDependencies.svg)](https://www.bithound.io/github/Huemul/trae/master/dependencies/npm)\n[![bitHound Code](https://www.bithound.io/github/Huemul/trae/badges/code.svg)](https://www.bithound.io/github/Huemul/trae)\n[![All Contributors](https://img.shields.io/badge/all_contributors-6-orange.svg?style=flat-square)](#contributors)\n\n## Content\n\n1. [Install](#install)\n1. [Basic Usage](#basic-usage)\n1. [Trae API](#trea-api)\n  1. [Request methods](#request-methods)\n  1. [Config](#config)\n  1. [Defaults](#defaults)\n  1. [Middlewares](#middlewares)\n  1. [Instances](#instances)\n1. [Response](#response)\n  1. [Data](#data)\n  1. [Headers](#headers)\n1. [Rejection](#rejection)\n1. [Resources](#resources)\n1. [License](#license)\n1. [Contributing](#contributing)\n1. [Contributors](#contributors)\n1. [TODO](#todo)\n\n## Install\n\n```bash\n$ npm install --save trae\n```\n\n```bash\n$ yarn add trae\n```\n\n## Basic Usage\n\nA `GET` request to `https://www.google.com.ar/search?q=foo`:\n\n```js\ntrae.get('https://www.google.com.ar/search', { params: { q: 'foo' } })\n  .then((response) => {\n    console.log(response);\n  })\n  .catch((err) => {\n    console.error(err);\n  });\n```\n\nA `POST` request to `https://www.foo.com/api/posts`:\n\n```js\ntrae.post('https://www.foo.com/api/posts', {\n  title  : 'My Post',\n  content: 'My awesome post content...'\n})\n  .then(() => {\n    console.log('Success!!!');\n  })\n  .catch((err) => {\n    console.error(err);\n  });\n```\n\nCheck out more examples [here](https://huemul.github.io/trae-examples).\n\n[‚¨Ü back to top](#content)\n\n## Trae API\n\n### Request methods\n\n```js\ntrae.get(url[, config]);\n\ntrae.delete(url[, config]);\n\ntrae.head(url[, config]);\n\ntrae.post(url[, body[, config]]);\n\ntrae.put(url[, body[, config]]);\n\ntrae.patch(url[, body[, config]]);\n```\n\n[‚¨Ü back to top](#content)\n\n### Config\n\nThe configuration object can be used in all request methods, the following attributes are available:\n\n```javascript\n{\n  // Absolute or relative url of the request\n  url: '/foo/bar',\n\n  // The URL parameters to be sent with the request\n  params: {\n    id: 123\n  },\n\n  // Represents the body of the response, allowing you to declare what its content type is and how it should be handled.\n  // Available readers are `arrayBuffer`, `blob`, `formData`, `json`, `text` and `raw`. The last one returns the response body without being     \n  // parsed. `raw` is used for streaming the response body among other things.\n  // @link: https://developer.mozilla.org/en-US/docs/Web/API/Body\n  bodyType: 'json',\n\n  // The Headers object associated with the request\n  headers: {\n    'Content-Type': 'application/json' // Default header for methods with body (patch, post & put)\n    'X-My-Custom-Header': 'foo-bar'\n  },\n\n  // The mode of the request. Available values are: `same-origin`, `no-cors`, `cors` and `navigate`\n  // @link: https://developer.mozilla.org/en-US/docs/Web/API/Request/mode\n  // Default: 'cors'\n  mode: 'same-origin',\n\n  // Indicates whether the user agent should send cookies from the other domain in the case of cross-origin requests.\n  // @link: https://developer.mozilla.org/en-US/docs/Web/API/Request/credentials\n  // Default: 'omit'\n  credentials: 'same-origin',\n\n  // The cache mode of the request. Available values are:\n  // `default`, `no-store`, `reload`, `no-cache`, `force-cache` and `only-if-cached`\n  // @link: https://developer.mozilla.org/en-US/docs/Web/API/Request/cache\n  // Default: 'default'\n  cache: 'only-if-cached'\n}\n```\nMore information about Request properties can be found on this [`MDN article`](https://developer.mozilla.org/en-US/docs/Web/API/Request).\n\n### Defaults\n\n#### `trae.defaults([config])`\n\nSets the default configuration to use on every requests. This is merged with the existing configuration.\n\n```js\ntrae.defaults({\n  mode       : 'no-cors',\n  credentials: 'same-origin'\n});\n```\n\nWhen called with no params acts as a getter, returning the defined defaults.\n\n```js\nconst config = trae.defaults();\n```\n\nIt is possible to set default configuration for specific methods passing an\nobject with the method as key:\n\n```js\ntrae.defaults({\n  post: {\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded'\n    }\n  }\n});\n```\n\n#### Request configuration precedence\n\nThe configuration for a request will be merged following this precedence rules, each level overrides the followings:\n\n  1. Request params config.\n  1. Method config set with `trae.defaults({ [method]: { ... } })`.\n  1. Trae config set with `trae.defaults({ ... })`.\n\n#### `trae.baseUrl([url])`\n\nShorthand for `trae.defaults({baseUrl: url})`. Also returns the `baseUrl` when no params are passed.\n\n```js\ntrae.baseUrl('https://www.foo.com');\n\nconst baseUrl = trae.baseUrl();\nconsole.log(baseUrl); // 'https://www.foo.com'\n\ntrae.get('/baz'); // GET: https://www.foo.com/baz\n```\n\n### Middlewares\n\n`trae` api provides three middleware methods, `before`, `after` and `finally`.\n\n#### `trae.before([middleware])`\n\nRuns before the request is made and it has access to the configuration object, it is run in a promise chain, so it should always return the configuration object.\n\n```js\nconst beforeMiddleware = (config) => {\n  config.headers['X-ACCESSS-TOKEN'] = getUserToken();\n  return config;\n}\n\ntrae.before(beforeMiddleware);\n```\n\n#### `trae.after(fullfill[, reject])`\n\nRuns after the request is made, it chains the provided `fullfill` and `reject` methods together to the `then` method from fetch response. When no `fulfill` callback is provided, the identity function is used. When no `reject` callback is provided, a rejected promise is returned, to be handled down the chain.\n\n```js\nconst fullfillMiddleware = (res) => {\n  console.log(res);\n  res.data.foo = 'bar'\n  return res;\n};\n\nconst rejectMiddleware = (err) => {\n  console.error(err);\n  err.foo = 'bar';\n  return Promise.reject(err);\n};\n\ntrae.after(fullfillMiddleware, rejectMiddleware);\n```\n\nUsing the above `after` middleware is the same as doing:\n\n```js\ntrae.get('/api/posts')\n  .then(fullfillMiddleware, rejectMiddleware);\n```\n\n#### `trae.finally([middleware])`\n\nRuns at the end regardless of the request result, it has access to the configuration object and the url that was used to made the request. Is not promise based. Functions provided to this method are run synchronously. \n\n```js\nconst finallyMiddleware = (config, url) => {\n  console.log('The End');\n  makeTheSpinnerStop();\n};\n\ntrae.finally(finallyMiddleware);\n```\n\n[‚¨Ü back to top](#content)\n\n### Instances\n\n#### `trae.create([config])`\n\nCreates an instance of `Trae` with its own defaults and middlewares. The API documentation applies for instances as well.\n\n```js\nconst api = trae.create({baseUrl: '/api'})\n\napi.get('/posts') // GET: /api/posts\n```\n\nThe created method inherits all the defaults and middlewares from its creator.\n\n```js\ntrae.baseUrl('/api')\nconst api = trae.create()\n\napi.get('/posts') // GET: /api/posts\n\napi.defaults({ mode: 'no-cors' })\n\nconst apiFoo = api.create()\n\napiFoo.defaults() // { mode: 'no-cors', ... }\n```\n\n[‚¨Ü back to top](#content)\n\n## Response\n\nThe request methods returns a promise that resolves to this object:\n\n```js\n{\n  // body of the response\n  data: { ... },\n\n  // status code of the response\n  status: 200,\n\n  // status message of the response\n  statusText: 'OK',\n\n  // headers of the response\n  headers: { ... },\n\n  // the config used to execute the request\n  config: { ... },\n}\n```\n\n#### Data\n\nResponse body is read using `response.json()` when `response.headers['Content-Type']` contains `application/json` and will be an object, otherwise it is read using `response.text()` and will result in a string. If you need to use [another reader ](https://developer.mozilla.org/en-US/docs/Web/API/Body), it can be specified by setting the `bodyType` [config property](#config).\n\n`bodyType` is not used on rejection, response body is read according to `response.headers['Content-Type']`.\n\nIn both cases it is passed to the after middleware as the `data` property.\n\n#### Headers\n\n`headers` is an instance of [Headers](https://developer.mozilla.org/en-US/docs/Web/API/Headers/Headers), it has methods handlers like `append`, `get`, `getAll`, `has`, `set`.\n\n## Rejection\n\nOn rejection an `Error` is passed to the rejection middleware with the same properties as the response object.\n\n[‚¨Ü back to top](#content)\n\n## Resources\n\n- Motivation: if you want to know more about the motivations behind this library check out [this article](https://hackernoon.com/trae-another-http-library-70000860a5f4).\n- Middlewares\n  - [`trae-events`](https://github.com/Huemul/trae-events).\n  - [`trae-logger`](https://github.com/Huemul/trae-logger).\n\n## License\n\n[MIT License](https://github.com/Huemul/trae/blob/master/LICENSE).\n\n## Contributing\n\n[Create an issue](https://github.com/Huemul/trae/issues/new) to report bugs or give suggestions on how to improve this project.\n\nIf you want to submit a PR and do not know where to start or what to add check out the [project page](https://github.com/Huemul/trae/projects/1) to find out what we are working on, and what to contribute next.\n\nThis project follows the [all-contributors](https://github.com/kentcdodds/all-contributors) specification. Contributions of any kind welcome!\n\n## Contributors\n\nThanks goes to these wonderful people ([emoji key](https://github.com/kentcdodds/all-contributors#emoji-key)):\n\n<!-- ALL-CONTRIBUTORS-LIST:START - Do not remove or modify this section -->\n| [<img src=\"https://avatars.githubusercontent.com/u/6719053?v=3\" width=\"64px;\"/><br /><sub>Nicolas Del Valle</sub>](http://nico.delvalle.xyz)<br />[üíª](https://github.com/Huemul/trae/commits?author=ndelvalle) [üìñ](https://github.com/Huemul/trae/commits?author=ndelvalle) [‚ö†Ô∏è](https://github.com/Huemul/trae/commits?author=ndelvalle) üí° üëÄ | [<img src=\"https://avatars.githubusercontent.com/u/8309423?v=3\" width=\"64px;\"/><br /><sub>Christian Gill</sub>](https://gillchristian.xyz)<br />[üíª](https://github.com/Huemul/trae/commits?author=gillchristian) [üìñ](https://github.com/Huemul/trae/commits?author=gillchristian) [‚ö†Ô∏è](https://github.com/Huemul/trae/commits?author=gillchristian) üí° üëÄ | [<img src=\"https://avatars.githubusercontent.com/u/3258966?v=3\" width=\"64px;\"/><br /><sub>Ignacio Anaya</sub>](http://keepe.rs)<br />[üíª](https://github.com/Huemul/trae/commits?author=ianaya89) üëÄ üé® [üêõ](https://github.com/Huemul/trae/issues?q=author%3Aianaya89) üíÅ | [<img src=\"https://avatars.githubusercontent.com/u/1145624?v=3\" width=\"64px;\"/><br /><sub>Fred Guest</sub>](https://twitter.com/fredguest)<br />üíÅ [üêõ](https://github.com/Huemul/trae/issues?q=author%3Afredguest) | [<img src=\"https://avatars.githubusercontent.com/u/11802102?v=3\" width=\"64px;\"/><br /><sub>Joni</sub>](http://joni.website)<br />üé® | [<img src=\"https://avatars.githubusercontent.com/u/4614574?v=3\" width=\"64px;\"/><br /><sub>Gerardo Nardelli</sub>](https://gnardelli.com)<br />[üìñ](https://github.com/Huemul/trae/commits?author=patitonar) |\n| :---: | :---: | :---: | :---: | :---: | :---: |\n<!-- ALL-CONTRIBUTORS-LIST:END -->\n\n[‚¨Ü back to top](#content)\n\n## TODO\n\n- [ ] Provide a build with no polyfill.\n- [ ] CHANGELOG. [#48](https://github.com/Huemul/trae/issues/48)\n- [ ] Add logging and warnings to the dev build. [#49](https://github.com/Huemul/trae/issues/49#issuecomment-272533323)\n- [ ] Improve examples and add more. [`trae-exampels` repo](https://github.com/Huemul/trae-examples/).\n- [ ] Add a way to remove middlewares.\n- [ ] Add browser based tests.\n\n[‚¨Ü back to top](#content)\n","starsCount":1,"created":"2016-11-02T14:24:02.595Z","modified":"2017-05-12T20:10:32.968Z","lastPublisher":{"name":"gillchristian","email":"gillchristiang@gmail.com"},"owners":[{"name":"gillchristian","email":"gillchristiang@gmail.com"},{"name":"ndelvalle","email":"nicolas.delvalle@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"trae","_nodeVersion":"6.9.1","_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/trae-1.4.2.tgz_1494619832710_0.8877118942327797"},"_npmUser":{"name":"gillchristian","email":"gillchristiang@gmail.com"},"_npmVersion":"3.10.8","_rev":"26-dffcc8a6c39387034a1c906a9125ad17","_shasum":"e2b034aa9a48c25ff38545da3c257a801506d055","author":{"name":"gillchristian","email":"gillchristiang@gmail.com"},"bugs":{"url":"https://github.com/huemul/trae/issues"},"contributors":[{"name":"ndelvalle","email":"nicolas.delvalle@gmail.com"}],"directories":{},"dist-tags":{"latest":"1.4.2","next":"1.2.1-1"},"dist":{"shasum":"e2b034aa9a48c25ff38545da3c257a801506d055","tarball":"https://registry.npmjs.org/trae/-/trae-1.4.2.tgz"},"maintainers":[{"name":"gillchristian","email":"gillchristiang@gmail.com"},{"name":"ndelvalle","email":"nicolas.delvalle@gmail.com"}],"readmeFilename":"README.md","time":{"modified":"2017-05-12T20:10:32.968Z","created":"2016-11-02T14:24:02.595Z","0.0.1":"2016-11-02T14:24:02.595Z","0.0.2":"2016-11-17T13:21:52.172Z","0.0.3":"2016-11-23T21:04:17.362Z","0.0.4":"2016-11-23T22:36:39.334Z","0.0.5":"2016-11-24T17:07:55.748Z","0.0.6":"2016-11-24T20:41:39.976Z","0.0.7":"2016-11-25T13:17:38.695Z","0.0.8":"2016-11-25T13:30:59.810Z","0.0.10":"2016-11-30T21:15:49.211Z","0.0.11":"2016-12-11T17:47:48.452Z","0.0.12":"2016-12-15T23:19:48.169Z","0.0.13":"2017-01-04T15:25:42.953Z","1.0.0":"2017-01-04T20:06:55.725Z","1.0.1":"2017-01-05T15:14:55.879Z","1.1.0":"2017-01-12T20:33:51.516Z","1.1.1":"2017-01-13T13:01:54.804Z","1.1.2":"2017-02-22T13:14:51.162Z","1.1.3":"2017-02-23T18:03:16.613Z","1.2.0":"2017-02-25T05:31:36.932Z","1.2.1-1":"2017-03-07T17:50:51.159Z","1.3.0":"2017-03-09T01:49:58.605Z","1.4.0":"2017-03-28T00:14:36.817Z","1.4.1":"2017-05-04T00:33:43.862Z","1.4.2":"2017-05-12T20:10:32.968Z"},"users":{"ndelvalle":true}}}