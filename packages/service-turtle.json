{"name":"service-turtle","description":"HTTP mock in-page proxy using ServiceWorker","version":"0.7.2","dependencies":{},"devDependencies":{"console-log-div":"0.1.0","eslint-rules":"0.3.0","grunt":"0.4.5","grunt-contrib-jshint":"0.11.0","grunt-deps-ok":"0.5.2","grunt-eslint":"4.0.0","grunt-gh-pages":"0.9.1","grunt-jscs":"1.2.0","grunt-nice-package":"0.9.2","grunt-npm2bower-sync":"0.8.1","matchdep":"0.3.0","pre-git":"0.1.1"},"engines":{"node":"> 0.10.*"},"homepage":"https://github.com/bahmutov/service-turtle","keywords":["testing","test","exploratory","mock","fake","http","proxy","ServiceWorker"],"license":"MIT","main":"turtles.js","pre-commit":["npm test","npm version"],"repository":"https://github.com/bahmutov/service-turtle","scripts":{"test":"grunt"},"gitHead":"5c55026a48eee1ed9000fa109fc88cd17ea0885b","versions":[{"number":"0.3.0","date":"2014-12-30T21:45:44.783Z"},{"number":"0.3.1","date":"2014-12-30T22:30:25.707Z"},{"number":"0.3.2","date":"2015-01-22T17:02:31.477Z"},{"number":"0.3.3","date":"2015-01-22T19:39:46.210Z"},{"number":"0.4.0","date":"2015-01-23T15:18:20.434Z"},{"number":"0.5.0","date":"2015-01-23T15:42:05.236Z"},{"number":"0.5.1","date":"2015-01-23T18:51:51.711Z"},{"number":"0.6.0","date":"2015-01-24T21:52:22.819Z"},{"number":"0.6.1","date":"2015-01-24T21:53:52.319Z"},{"number":"0.7.2","date":"2015-01-26T13:48:58.699Z"}],"readme":"# service-turtle\n\n> HTTP mock in-page proxy using ServiceWorker\n\n[![NPM][service-turtle-icon] ][service-turtle-url]\n\n[![Build status][service-turtle-ci-image] ][service-turtle-ci-url]\n[![dependencies][service-turtle-dependencies-image] ][service-turtle-dependencies-url]\n[![devdependencies][service-turtle-devdependencies-image] ][service-turtle-devdependencies-url]\n\nRead [Robustness testing using proxies](http://bahmutov.calepin.co/robustness-testing-using-proxies.html).\n\nSee [intro to ServiceWorker](http://jakearchibald.com/2014/using-serviceworker-today/) to see how to \nenable ServiceWorker in Chrome today.\n\n    Open chrome://flags/#enable-experimental-web-platform-features in the Chrome browser\n    Enable \"Enable experimental Web Platform features.\"\n    Restart Chrome\n\n**NOTE** Google Chrome v40 broke loading of ServiceWorkers. For now, please use Google Chrome Canary \n(I tested v42). You can also *load* ServiceWorker in Firefox (after turning on service worker in `about:config` page),\nbut Firefox has implemented a different communication model, thus you cannot send commands to the ServiceWorker :(\n\n## Install\n\n    bower install service-turtle\n\nInclude `turtle.js` in your page. It will call `service-turtle.js` as a service worker.\nThis will register `turtle` object on the `window` scope. Use `turtle` object methods to add\nmock responses for specific urls.\n\n## Use\n\n```js\nturtle.get(urlRegexString, options);\nurlgRegexString - string used to construct RegExp to test against request url\noptions - response fields\n    code - numeric return code for given url (between 200 and 599)\n    timeout (ms) - return mock code after waiting for timeout milliseconds\n    body - object to return\n```\n\n**alias** You can use `turtle.get('/path/part', <code>)` as a shortcut to return `<code>` when url matches\nthe `/path/part` regular expression.\n\n## Example\n\nMock all GET requests to `/some/url/` to return 502 error after 3 seconds.\nSee [index.html](index.html) in this repo as example.\n\n```js\nturtle.get('/some/url', { code: 502, timeout: 3000 });\n```\n\nClear all installed mocks\n\n```js\nturtle.clear();\n```\n\n![screenshot](images/service-turtle.png)\n\n## Updating service worker code\n\nService worker JavaScript stays with the browser, and could require reloading the page twice to get the browser\nto notice changed code, install it and run on the second reload. You also need to use it with a webserver, not\nopening the HTML file from the file system. If reloading the page does not refresh the service worker, or\nif you want to step through its code to debug it:\n\n    Open chrome://serviceworker-internals/\n    Find the script in the list, something like `Script: http://localhost:3003/service-turtle.js`\n    Click `Stop` and then `Unregister` buttons to remove it\n\nThese steps will force the page to load the new service worker next time you visit the page.\nThen after another reload the service worker will start.\n\n**Note:** service worker script can only be loaded from a safe url: `localhost`, `127.0.0.1` or via `https` protocol. \n\n## Determine the service worker url\n\nBy default, the `turtle.js` script determines the url to the service worker automatically (assuming it is in the\nsame folder as itself). You can override the service worker url and provide the url using global config\n\n```html\n<script>\nvar serviceTurtleConfig = {\n  serviceScriptUrl: '/path/to/service-turtle.js'\n};\n</script>\n<script src=\"bower_components/service-turtle/turtle.js\"></script>\n```\n\n## Pass the ServiceWorker scope\n\nServiceWorker is limited in the requests it can intercept to a given scope url. By default\nthe scope is all sub urls of the script that loads the service worker (`turtl.js`). You can\npass a different scope using config object\n\n```html\n<script>\nvar serviceTurtleConfig = {\n  serviceScriptUrl: '/path/to/service-turtle.js',\n  scope: '/'\n};\n</script>\n<script src=\"bower_components/service-turtle/turtle.js\"></script>\n```\n\n\n### Small print\n\nAuthor: Gleb Bahmutov &copy; 2014\n\n* [@bahmutov](https://twitter.com/bahmutov)\n* [glebbahmutov.com](http://glebbahmutov.com)\n* [blog](http://bahmutov.calepin.co/)\n\nLicense: MIT - do anything with the code, but don't blame me if it does not work.\n\nSpread the word: tweet, star on github, etc.\n\nSupport: if you find any problems with this module, email / tweet /\n[open issue](https://github.com/bahmutov/service-turtle/issues) on Github\n\n## MIT License\n\nThe MIT License (MIT)\n\nCopyright (c) 2014 Gleb Bahmutov\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of\nthis software and associated documentation files (the \"Software\"), to deal in\nthe Software without restriction, including without limitation the rights to\nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\nthe Software, and to permit persons to whom the Software is furnished to do so,\nsubject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\nFOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\nCOPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\nIN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\nCONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n[service-turtle-icon]: https://nodei.co/npm/service-turtle.png?downloads=true\n[service-turtle-url]: https://npmjs.org/package/service-turtle\n[service-turtle-ci-image]: https://travis-ci.org/bahmutov/service-turtle.png?branch=master\n[service-turtle-ci-url]: https://travis-ci.org/bahmutov/service-turtle\n[service-turtle-dependencies-image]: https://david-dm.org/bahmutov/service-turtle.png\n[service-turtle-dependencies-url]: https://david-dm.org/bahmutov/service-turtle\n[service-turtle-devdependencies-image]: https://david-dm.org/bahmutov/service-turtle/dev-status.png\n[service-turtle-devdependencies-url]: https://david-dm.org/bahmutov/service-turtle#info=devDependencies\n","created":"2014-12-30T21:45:44.783Z","modified":"2015-01-26T13:48:58.699Z","lastPublisher":{"name":"bahmutov","email":"gleb.bahmutov@gmail.com"},"owners":[{"name":"bahmutov","email":"gleb.bahmutov@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"service-turtle","_nodeVersion":"0.11.10","_npmUser":{"name":"bahmutov","email":"gleb.bahmutov@gmail.com"},"_npmVersion":"2.1.16","_rev":"1-aff83b8047e87c4d3fad36e439f954b1","_shasum":"cd486a290297a6e05eeced8e1b9aadfd2326ba77","author":{"name":"Gleb Bahmutov","email":"gleb.bahmutov@gmail.com"},"bugs":{"url":"https://github.com/bahmutov/service-turtle/issues"},"contributors":[],"directories":{},"dist-tags":{"latest":"0.7.2"},"dist":{"shasum":"cd486a290297a6e05eeced8e1b9aadfd2326ba77","tarball":"http://registry.npmjs.org/service-turtle/-/service-turtle-0.7.2.tgz"},"maintainers":[{"name":"bahmutov","email":"gleb.bahmutov@gmail.com"}],"readmeFilename":"README.md","time":{"modified":"2015-01-26T13:48:58.699Z","created":"2014-12-30T21:45:44.783Z","0.3.0":"2014-12-30T21:45:44.783Z","0.3.1":"2014-12-30T22:30:25.707Z","0.3.2":"2015-01-22T17:02:31.477Z","0.3.3":"2015-01-22T19:39:46.210Z","0.4.0":"2015-01-23T15:18:20.434Z","0.5.0":"2015-01-23T15:42:05.236Z","0.5.1":"2015-01-23T18:51:51.711Z","0.6.0":"2015-01-24T21:52:22.819Z","0.6.1":"2015-01-24T21:53:52.319Z","0.7.2":"2015-01-26T13:48:58.699Z"}}}