{"name":"http-app-router","main":"index.js","version":"3.1.0","description":"Request router for building HTTP proxy servers","license":"MIT","repository":"https://github.com/bendrucker/http-app-router","scripts":{"test":"standard && 100 tape *.js"},"keywords":["http","router","app","req","request"],"devDependencies":{"assert-100":"~1.1.0","concat-stream":"~1.5.1","from2-string":"~1.1.0","mock-req":"~0.2.0","nock":"~9.0.2","nyc":"~10.0.0","proxyquire":"~1.7.10","shot":"~3.4.0","standard":"^8.0.0","tape":"^4.0.0","transformify":"~0.1.2"},"files":["*.js","schemas/"],"dependencies":{"absoluteify":"~1.0.1","ajv":"~4.9.2","ap":"~0.2.0","boolean-filter-obj":"~1.0.0","cookie":"~0.3.1","error":"~7.0.2","escape-string-regexp":"~1.0.5","geval":"~2.1.1","http-hash-router":"~1.1.0","is-my-json-valid":"~2.15.0","object.pick":"~1.2.0","pump":"~1.0.1","pumpify":"~1.3.5","set-cookie-parser":"~1.0.2","standard-headers":"~0.1.1","xtend":"~4.0.1"},"gitHead":"240a8357e2fc537a520109e50595ace4ef86b639","homepage":"https://github.com/bendrucker/http-app-router#readme","versions":[{"number":"1.0.0","date":"2016-07-06T15:54:46.583Z"},{"number":"1.0.1","date":"2016-07-06T16:06:42.631Z"},{"number":"1.0.2","date":"2016-07-06T16:22:58.591Z"},{"number":"1.1.0","date":"2016-07-08T22:46:28.088Z"},{"number":"1.1.1","date":"2016-07-08T22:54:58.167Z"},{"number":"1.2.0","date":"2016-07-13T23:05:15.896Z"},{"number":"1.3.0","date":"2016-07-14T16:07:55.939Z"},{"number":"1.3.1","date":"2016-07-14T16:09:24.971Z"},{"number":"1.4.0","date":"2016-07-18T23:10:38.010Z"},{"number":"1.4.1","date":"2016-07-18T23:12:54.138Z"},{"number":"2.0.0","date":"2016-07-19T19:28:13.651Z"},{"number":"2.0.1","date":"2016-07-28T23:37:30.403Z"},{"number":"2.0.2","date":"2016-08-07T15:45:53.157Z"},{"number":"2.0.3","date":"2016-08-29T01:43:59.919Z"},{"number":"2.0.4","date":"2016-09-20T16:12:15.898Z"},{"number":"2.1.0","date":"2016-11-08T19:16:18.914Z"},{"number":"2.1.1","date":"2016-11-08T19:20:41.871Z"},{"number":"2.1.2","date":"2016-11-29T23:25:38.036Z"},{"number":"2.1.3","date":"2016-11-29T23:36:14.997Z"},{"number":"3.0.0","date":"2016-11-30T23:33:46.626Z"},{"number":"3.0.1","date":"2016-12-01T00:50:27.656Z"},{"number":"3.1.0","date":"2016-12-10T21:32:59.573Z"}],"readme":"# http-app-router [![Build Status](https://travis-ci.org/bendrucker/http-app-router.svg?branch=master)](https://travis-ci.org/bendrucker/http-app-router) [![codecov](https://codecov.io/gh/bendrucker/http-app-router/branch/master/graph/badge.svg)](https://codecov.io/gh/bendrucker/http-app-router)\n\n> Request router for building HTTP proxy servers\n\nhttp-app-router is a Node HTTP router designed for serving multiple HTML applications on the same domain. HTML applications might include:\n\n* A single page JavaScript web app\n* A CMS-powered blog\n* Static HTML content\n\nIf it speaks HTTP and sends HTML, it's an HTML app. Apps are defined with a server `host` and a list of `routes` that should match to that app. The router will make a request to your app and stream the response down to the client.\n\n\n## Install\n\n```\n$ npm install --save http-app-router\n```\n\n\n## Usage\n\nPass an array of `apps` to the `Router` contructor to create a router handler. Use that handler to route requests and send a response if an app matches the request. Handlers are `req, res, callback` functions that you can use with plain `http.Server` instances or connect/express apps.\n\nThe router will *always* send a response when fetching the app is successful and will *never* send an error response. That's up to you.\n\n```js\nvar Router = require('http-app-router')\nvar http = require('http')\n\nvar router = Router([\n  {\n    name: 'github',\n    host: 'github.com',\n    routes: [\n      '/bendrucker'\n    ]\n  },\n  {\n    name: 'local',\n    host: 'localhost',\n    routes: '*'\n  }\n])\n\nvar server = http.createServer(function (req, res) {\n  router(req, res, function (err) {\n    if (err) res.end('oh no, an error!')\n  })\n})\n```\n\n## API\n\n#### `Router(apps)` -> `function`\n\nReturns a `router` function.\n\n##### app\n\n*Required*  \nType: `array[object]`\n\nAn array of app objects, containing:\n\n###### name\n\n*Required*  \nType: `string`  \n\nAn application name.\n\n###### host\n\n*Required*  \nType: `string`  \n\nThe application host.\n\n###### insecure\n\nType: `boolean`  \nDefault: `false`\n\nToggles the app to be fetched over plain HTTP instead of HTTPS.\n\n###### prefix\n\nType: `string`  \nDefault: `''`\n\nA prefix that will be removed from the URL before being passed along.\n\n###### headers\n\nType: `object`  \n\nOptional headers to set on requests.\n\n###### cookies\n\nType: `array[string]`\n\nA whitelist of cookie names that can be sent by a client or set by an app.\n\n###### transforms\n\nType: `array[string]`\n\nAn array of [`transform`](transforms.js) function keys that receive the `app` as an argument and return a [`Transform` stream](https://nodejs.org/api/stream.html#stream_class_stream_transform). The transform stream will receive and output HTML. \n\nBuilt in:\n\n* [absolute](github.com/bendrucker/absoluteify)\n\nOr add custom things, maybe minification or something equally practical:\n\n```js\nvar transforms = require('http-app-router/transforms')\nvar through = require('through2')\n\ntranforms.uppercase = function (app) {\n  return through(function (chunk, enc, callback) {\n    callback(null, chunk.toString().toUpperCase())\n  })\n}\n```\n\n#### `router.onLog(listener)` -> `function`\n\nListens on log output from the router.\n\n##### listener\n\n*Required*  \nType: `function`  \nArguments: `{level, message}`\n\n## License\n\nMIT Â© [Ben Drucker](http://bendrucker.me)\n","created":"2016-07-06T15:54:46.583Z","modified":"2016-12-10T21:32:59.573Z","lastPublisher":{"name":"bendrucker","email":"bvdrucker@gmail.com"},"owners":[{"name":"bendrucker","email":"bvdrucker@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"http-app-router","_nodeVersion":"7.1.0","_npmOperationalInternal":{"host":"packages-18-east.internal.npmjs.com","tmp":"tmp/http-app-router-3.1.0.tgz_1481405577573_0.32049459707923234"},"_npmUser":{"name":"bendrucker","email":"bvdrucker@gmail.com"},"_npmVersion":"3.10.9","_rev":"8-1c8e42d74ab6cc380b6f0e64934572ed","_shasum":"3af8b4eab8d0a980a91937c9348dcbe415a341cc","author":{"name":"Ben Drucker","email":"bvdrucker@gmail.com","url":"bendrucker.me"},"bugs":{"url":"https://github.com/bendrucker/http-app-router/issues"},"directories":{},"dist-tags":{"latest":"3.1.0"},"dist":{"shasum":"3af8b4eab8d0a980a91937c9348dcbe415a341cc","tarball":"http://registry.npmjs.org/http-app-router/-/http-app-router-3.1.0.tgz"},"maintainers":[{"name":"bendrucker","email":"bvdrucker@gmail.com"}],"readmeFilename":"readme.md","time":{"modified":"2016-12-10T21:32:59.573Z","created":"2016-07-06T15:54:46.583Z","1.0.0":"2016-07-06T15:54:46.583Z","1.0.1":"2016-07-06T16:06:42.631Z","1.0.2":"2016-07-06T16:22:58.591Z","1.1.0":"2016-07-08T22:46:28.088Z","1.1.1":"2016-07-08T22:54:58.167Z","1.2.0":"2016-07-13T23:05:15.896Z","1.3.0":"2016-07-14T16:07:55.939Z","1.3.1":"2016-07-14T16:09:24.971Z","1.4.0":"2016-07-18T23:10:38.010Z","1.4.1":"2016-07-18T23:12:54.138Z","2.0.0":"2016-07-19T19:28:13.651Z","2.0.1":"2016-07-28T23:37:30.403Z","2.0.2":"2016-08-07T15:45:53.157Z","2.0.3":"2016-08-29T01:43:59.919Z","2.0.4":"2016-09-20T16:12:15.898Z","2.1.0":"2016-11-08T19:16:18.914Z","2.1.1":"2016-11-08T19:20:41.871Z","2.1.2":"2016-11-29T23:25:38.036Z","2.1.3":"2016-11-29T23:36:14.997Z","3.0.0":"2016-11-30T23:33:46.626Z","3.0.1":"2016-12-01T00:50:27.656Z","3.1.0":"2016-12-10T21:32:59.573Z"}}}