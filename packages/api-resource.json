{"name":"api-resource","version":"1.0.12","description":"Simple HTTP resource wrapper","main":"index.js","scripts":{"test":"mocha test"},"license":"MIT","dependencies":{"async":"^0.9.x","eventemitter2":"^2.1.3","q":"^1.0.x","qs":"^0.6.x","tiny-emitter":"0.1.x","xmlhttprequest":"^1.6.x"},"repository":"https://github.com/KanoComputing/js-api-resource","devDependencies":{"mocha":"^1.20.x","should":"^4.0.x"},"gitHead":"9f8e5a5a07402411ab2a8bbb91d7d8c094b8d9c5","homepage":"https://github.com/KanoComputing/js-api-resource#readme","readme":"## API Resource\n\n> Simple wrapper for http resources for client-side JavaScript or Node.js\n\n## Setup\n\n`npm install api-resource`\n\n## Simple usage\n\n```javascript\nvar Resource = require('api-resource');\n\nvar listUsers = new Resource({\n        method: 'get',\n        route: 'http://localhost/users/:group',\n    }),\n    createUser: new Resource({\n        method: 'post',\n        route: 'http://localhost/users',\n    });\n\n// Fires GET request to http://localhost/users/followers?q=foo\nlistUsers.query({ // Request payload + route variables\n    group: 'followers'\n}, { // Query params\n    q: 'foo'\n})\n.then(function (res) {\n    // Response code was successful (<= 200)\n    var results = res.body;\n}, function (res) {\n    // Response code was not successful (> 200)\n    throw new Error('Users list responded ' + res.status + ', ' + res.body);\n})\n\n// Fires GET request to http://localhost/users/followers?q=foo\ncreateUser.query({ // Request payload + route variables\n    username: 'johndoe'\n})\n.then(function (res) {\n    var response = res;\n});\n```\n\n## Middleware example\n\n```javascript\nvar Resource = require('api-resource'),\n    token = 'arbitrary-auth-token',\n    session;\n\nvar sessionEndpoint = new Resource({\n    method: 'get',\n    route: 'http://localhost/session'\n});\n\nsessionEndpoint.use(function (req, next) {\n    // Always add authorisation header to this resource\n    req.setRequestHeader('Authorization', token);\n\n    // Bind a callback to an event on this resource\n    this.once('success', function (res) {\n        console.log('Session received correctly');\n    });\n});\n\nsessionEndpoint.query()\n.then(function (res) {\n    session = res.body;\n});\n```\n\n## Resource\n\nResource instances are also event-emitters.\nAfter querying them you can listen you can handle responses by using the promised form or by binding callbacks to their events.\n\n#### Options\n\n* `method` (*String*) Case insensitive HTTP method (E.g. `'post'`)\n* `route` (*String*) Dynamic resource route (E.g. `'http://www.foo.bar/users/:username'`)\n\n#### Events\n\n* `response` Fired when a response is received, with a response object passed as argument\n* `success` Fired when a successful response (Status <= 200) is received, with a response object passed as argument\n* `failure` Fired when a unsuccessful response (Status > 200) is received, with a response object passed as argument\n* `error` Fired when an error occurs sending the XMLHttpRequest, with the error passed as argument\n\n#### Methods\n\n`.query([ data ], [ query_params ])` Query endpoint. The values in the `data` object will also be used to build the URL if the resource route is dynamic. Query params will be added to the final URL as a query string.\n`.use(middleware)` Add a middleware function to the resource. The function will be called on the `Resource` instance and receive as arguments the `XMLHttpRequest` request instance and the `next` function to proceed.\n\n## Test\n\nTests are currently written on server-side only. Run `npm install` and `npm test` to test.\n\n## Contribution\n\nContributions are welcome as long as documented and tested.\n\n## License\n\nCopyright (c) 2014 Kano Computing Ltd. - Released under the [MIT license](https://github.com/KanoComputing/js-api-resource/blob/master/LICENSE)","versions":[{"number":"0.0.0","date":"2014-06-20T13:28:12.201Z"},{"number":"0.0.1","date":"2014-06-20T13:30:43.646Z"},{"number":"0.0.2","date":"2014-06-20T13:33:07.493Z"},{"number":"0.0.3","date":"2014-06-20T13:36:55.708Z"},{"number":"0.0.4","date":"2014-06-20T13:38:45.006Z"},{"number":"0.0.5","date":"2014-06-20T13:43:25.809Z"},{"number":"0.0.7","date":"2014-06-20T16:47:29.442Z"},{"number":"0.0.8","date":"2014-06-23T10:57:37.181Z"},{"number":"0.0.9","date":"2014-06-23T11:05:14.453Z"},{"number":"1.0.0","date":"2014-06-24T14:53:29.850Z"},{"number":"1.0.1","date":"2014-06-24T14:58:04.495Z"},{"number":"1.0.2","date":"2014-07-01T14:13:28.387Z"},{"number":"1.0.3","date":"2014-07-01T14:18:22.998Z"},{"number":"1.0.4","date":"2014-12-12T16:12:46.889Z"},{"number":"1.0.5","date":"2015-08-28T14:08:28.846Z"},{"number":"1.0.6","date":"2015-09-25T13:19:37.954Z"},{"number":"1.0.7","date":"2015-10-01T13:54:45.301Z"},{"number":"1.0.8","date":"2015-10-01T14:00:14.404Z"},{"number":"1.0.9","date":"2015-10-01T14:07:56.661Z"},{"number":"1.0.10","date":"2015-10-15T13:49:44.922Z"},{"number":"1.0.11","date":"2015-12-18T11:02:51.725Z"},{"number":"1.0.12","date":"2016-09-06T15:58:47.257Z"}],"starsCount":1,"created":"2014-06-20T13:28:12.201Z","modified":"2016-09-06T15:58:47.257Z","lastPublisher":{"name":"tancredi","email":"tancredi.trugenberger@gmail.com"},"owners":[{"name":"tancredi","email":"tancredi.trugenberger@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"api-resource","_nodeVersion":"6.4.0","_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/api-resource-1.0.12.tgz_1473177525432_0.04829825018532574"},"_npmUser":{"name":"tancredi","email":"tancredi.trugenberger@gmail.com"},"_npmVersion":"3.10.3","_rev":"1-0c6d355745d4eb605077f75f6d5f7435","_shasum":"6cd826541ea1cdac47f308b82c92f0bd6cab0ae3","author":{"name":"Tancredi Trugenberger"},"bugs":{"url":"https://github.com/KanoComputing/js-api-resource/issues"},"directories":{},"dist-tags":{"latest":"1.0.12"},"dist":{"shasum":"6cd826541ea1cdac47f308b82c92f0bd6cab0ae3","tarball":"http://registry.npmjs.org/api-resource/-/api-resource-1.0.12.tgz"},"maintainers":[{"name":"tancredi","email":"tancredi.trugenberger@gmail.com"}],"readmeFilename":"README.md","time":{"modified":"2016-09-06T15:58:47.257Z","created":"2014-06-20T13:28:12.201Z","0.0.0":"2014-06-20T13:28:12.201Z","0.0.1":"2014-06-20T13:30:43.646Z","0.0.2":"2014-06-20T13:33:07.493Z","0.0.3":"2014-06-20T13:36:55.708Z","0.0.4":"2014-06-20T13:38:45.006Z","0.0.5":"2014-06-20T13:43:25.809Z","0.0.7":"2014-06-20T16:47:29.442Z","0.0.8":"2014-06-23T10:57:37.181Z","0.0.9":"2014-06-23T11:05:14.453Z","1.0.0":"2014-06-24T14:53:29.850Z","1.0.1":"2014-06-24T14:58:04.495Z","1.0.2":"2014-07-01T14:13:28.387Z","1.0.3":"2014-07-01T14:18:22.998Z","1.0.4":"2014-12-12T16:12:46.889Z","1.0.5":"2015-08-28T14:08:28.846Z","1.0.6":"2015-09-25T13:19:37.954Z","1.0.7":"2015-10-01T13:54:45.301Z","1.0.8":"2015-10-01T14:00:14.404Z","1.0.9":"2015-10-01T14:07:56.661Z","1.0.10":"2015-10-15T13:49:44.922Z","1.0.11":"2015-12-18T11:02:51.725Z","1.0.12":"2016-09-06T15:58:47.257Z"},"users":{"darlanalves":true}}}