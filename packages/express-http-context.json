{"name":"express-http-context","version":"0.3.4","description":"Get and set request-scoped context anywhere","main":"index.js","scripts":{"cover":"istanbul cover _mocha index.js -R ./tests --coverage","test":"mocha ./tests","coveralls":"npm run cover -- --report lcovonly && cat ./coverage/lcov.info | coveralls"},"repository":"https://github.com/skonves/express-http-context","keywords":["express","http","request","context"],"license":"MIT","homepage":"https://github.com/skonves/express-http-context#readme","dependencies":{"continuation-local-storage":"^3.2.0"},"devDependencies":{"chai":"^3.5.0","coveralls":"^2.13.0","express":"^4.15.2","istanbul":"^0.4.5","mocha":"^3.2.0","mocha-lcov-reporter":"^1.3.0","supertest":"^3.0.0"},"gitHead":"4fe4a3d375eb61ed431f83c5c14578f2c869a22e","versions":[{"number":"0.2.0","date":"2017-01-15T01:48:22.496Z"},{"number":"0.3.0","date":"2017-01-23T20:31:39.790Z"},{"number":"0.3.1","date":"2017-01-23T20:41:54.187Z"},{"number":"0.3.2","date":"2017-04-02T01:15:31.169Z"},{"number":"0.3.3","date":"2017-04-02T03:17:56.988Z"},{"number":"0.3.4","date":"2017-04-02T15:01:32.256Z"}],"readme":"[![travis](https://img.shields.io/travis/skonves/express-http-context.svg)](https://travis-ci.org/skonves/express-http-context)\n[![coveralls](https://img.shields.io/coveralls/skonves/express-http-context.svg)](https://coveralls.io/github/skonves/express-http-context)\n[![npm](https://img.shields.io/npm/v/express-http-context.svg)](https://www.npmjs.com/package/express-http-context)\n[![npm](https://img.shields.io/npm/dm/express-http-context.svg)](https://www.npmjs.com/package/express-http-context)\n\n# Express HTTP Context\nGet and set request-scoped context anywhere.  This is just an unopinionated, idiomatic ExpressJS implementation of [continuation-local-storage](https://www.npmjs.com/package/continuation-local-storage).  It's a great place to store user state, claims from a JWT, request/correlation IDs, and any other request-scoped data.\n\n## How to use it\n\nInstall: `npm install --save express-http-context`\n\nUse the middleware.  The earlier the better; you won't have access to the context from any middleware \"used\" before this one.\n\n``` js\nvar express = require('express');\nvar httpContext = require('express-http-context');\n\nvar app = express();\n\napp.use(httpContext.middleware);\n// all code from here on has access to the same context for each request\n```\n\nSet values based on the incomming request:\n\n``` js\n// Example authorization middleware\napp.use((req, res, next) => {\n\tuserService.getUser(req.get('Authorization'), (err, result) => {\n\t\tif (err) {\n\t\t\tnext(err);\n\t\t} else {\n\t\t\thttpContext.set('user', result.user)\n\t\t\tnext();\n\t\t}\n\t});\n});\n```\n\nGet them from code that doesn't have access to the express `req` object:\n\n``` js\nvar httpContext = require('express-http-context');\n\n// Somewhere deep in the Todo Service\nfunction createTodoItem(title, content, callback) {\n\tvar user = httpContext.get('user');\n\tdb.insert({ title, content, userId: user.id }, callback);\n}\n```\n","created":"2017-01-15T01:48:22.496Z","modified":"2017-04-02T15:01:32.256Z","lastPublisher":{"name":"skonves","email":"stephen.konves@gmail.com"},"owners":[{"name":"skonves","email":"stephen.konves@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"express-http-context","_nodeVersion":"4.4.7","_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/express-http-context-0.3.4.tgz_1491145292008_0.011494422797113657"},"_npmUser":{"name":"skonves","email":"stephen.konves@gmail.com"},"_npmVersion":"4.0.3","_rev":"6-072ea029ec7fcfa639b3bb76423a8c60","_shasum":"7a1c988235d50e68ffd4edf3a533568719084141","author":{"name":"Steve Konves"},"bugs":{"url":"https://github.com/skonves/express-http-context/issues"},"directories":{},"dist-tags":{"latest":"0.3.4"},"dist":{"shasum":"7a1c988235d50e68ffd4edf3a533568719084141","tarball":"https://registry.npmjs.org/express-http-context/-/express-http-context-0.3.4.tgz"},"maintainers":[{"name":"skonves","email":"stephen.konves@gmail.com"}],"readmeFilename":"README.md","time":{"modified":"2017-04-02T15:01:32.256Z","created":"2017-01-15T01:48:22.496Z","0.2.0":"2017-01-15T01:48:22.496Z","0.3.0":"2017-01-23T20:31:39.790Z","0.3.1":"2017-01-23T20:41:54.187Z","0.3.2":"2017-04-02T01:15:31.169Z","0.3.3":"2017-04-02T03:17:56.988Z","0.3.4":"2017-04-02T15:01:32.256Z"}}}