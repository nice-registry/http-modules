{"name":"http-ndjson","version":"3.0.0","description":"Log http requests as ndjson","main":"index.js","scripts":{"deps":"dependency-check . && dependency-check . --extra --no-dev","test":"standard && npm run deps && NODE_ENV=test node test","test:cov":"standard && npm run deps && NODE_ENV=test istanbul cover test.js"},"repository":"https://github.com/yoshuawuyts/http-ndjson","keywords":["http","log","logger","ndjson","standard","request","response","server","development","production","modular","tiny","bole","bistre","garnish"],"license":"MIT","dependencies":{"end-of-stream":"^1.1.0","xtend":"^4.0.0"},"devDependencies":{"dependency-check":"^2.5.0","get-server-port":"^1.0.0","istanbul":"^0.3.19","standard":"^5.1.1","tape":"^4.2.0"},"files":["LICENSE","index.js","README.md"],"gitHead":"3ffbb40c48984c84405343c5ab364a1edc9b7738","homepage":"https://github.com/yoshuawuyts/http-ndjson#readme","versions":[{"number":"1.0.0","date":"2015-09-04T09:42:17.009Z"},{"number":"1.0.1","date":"2015-09-04T09:49:45.785Z"},{"number":"1.1.0","date":"2015-09-06T05:03:32.745Z"},{"number":"1.1.1","date":"2015-09-15T03:12:53.141Z"},{"number":"1.1.2","date":"2015-09-19T04:55:46.405Z"},{"number":"2.0.0","date":"2015-10-25T23:32:58.093Z"},{"number":"2.1.0","date":"2015-10-27T00:53:26.918Z"},{"number":"2.2.0","date":"2015-10-27T13:00:33.630Z"},{"number":"2.3.0","date":"2015-10-27T13:33:06.517Z"},{"number":"2.3.1","date":"2015-10-27T13:45:58.790Z"},{"number":"2.3.2","date":"2015-10-27T14:02:23.362Z"},{"number":"2.3.3","date":"2015-10-27T14:07:51.310Z"},{"number":"3.0.0","date":"2016-03-04T04:38:29.808Z"}],"readme":"# http-ndjson\n[![NPM version][npm-image]][npm-url]\n[![build status][travis-image]][travis-url]\n[![Test coverage][codecov-image]][codecov-url]\n[![Downloads][downloads-image]][downloads-url]\n[![js-standard-style][standard-image]][standard-url]\n\nLog http requests as ndjson. Works pretty well with `bole`, so you should\nprobably use it with that. That is my recommendation.\n\n## Installation\n```sh\n$ npm install http-ndjson\n```\n\n## Usage\n```js\nconst httpNdjson = require('http-ndjson')\nconst http = require('http')\n\nhttp.createServer(function (req, res) {\n  const setSize = httpNdjson(req, res, console.log)\n  const myCoolResponse = 'chickens'\n  setSize(myCoolResponse.length)\n  res.end(myCoolResponse)\n}).listen()\n```\n```js\n{ name: 'http', method: 'GET', message: 'request', url: '/' }\n{ name: 'http', method: 'GET', message: 'response', url: '/', statusCode: 200, elapsed: '5ms' }\n```\n\n## Log custom properties\n`http-ndjson` logs a sensible set of standard properties, but sometimes there's\na need to dive in and log more. An optional third argument can be added with\ncustom fields that will be logged on either `request` or `response`.\n```js\nconst httpNdjson = require('http-ndjson')\nconst http = require('http')\n\nhttp.createServer(function (req, res) {\n  const opts = { req: { requestId: req.headers['requestId'] } }\n  httpNdjson(req, res, opts, console.log)\n  res.end()\n}).listen()\n```\n\n## Forward headers\nDetermining the origin of a request can be hard when using reverse-proxies.\nIt's not too uncommon for users to mask their IP by providing an\n`x-forwarded-for` header. `http-ndjson` makes no assumptions about forwarding\nheaders and logs all properties instead. The following headers are logged:\n- __x-forwarded-for:__ standardized reverse proxy header ([rfc7239][7239])\n- __x-real-ip:__ non-standard reverse proxy header\n- __http-client-ip:__ non-standard reverse proxy header\n\n## API\n### readStream = httpNdjson(req, res, opts?, cb)\nCreate an http logger. Returns a write stream. Opts can contain the following\nvalues:\n- __req:__ an object with values that will be logged on `request`\n- __res:__ an object with values that will be logged on `response`\n- __opts:__ set options\n- __cb:__ handle the returned message\n\n## See Also\n- [bole](https://github.com/rvagg/bole)\n- [garnish](https://github.com/mattdesl/garnish)\n- [ndjson](https://github.com/maxogden/ndjson)\n\n## License\n[MIT](https://tldrlegal.com/license/mit-license)\n\n[npm-image]: https://img.shields.io/npm/v/http-ndjson.svg?style=flat-square\n[npm-url]: https://npmjs.org/package/http-ndjson\n[travis-image]: https://img.shields.io/travis/yoshuawuyts/http-ndjson/master.svg?style=flat-square\n[travis-url]: https://travis-ci.org/yoshuawuyts/http-ndjson\n[codecov-image]: https://img.shields.io/codecov/c/github/yoshuawuyts/http-ndjson/master.svg?style=flat-square\n[codecov-url]: https://codecov.io/github/yoshuawuyts/http-ndjson\n[downloads-image]: http://img.shields.io/npm/dm/http-ndjson.svg?style=flat-square\n[downloads-url]: https://npmjs.org/package/http-ndjson\n[standard-image]: https://img.shields.io/badge/code%20style-standard-brightgreen.svg?style=flat-square\n[standard-url]: https://github.com/feross/standard\n[7239]: https://tools.ietf.org/html/rfc7239\n","starsCount":1,"created":"2015-09-04T09:42:17.009Z","modified":"2016-03-04T04:38:29.808Z","lastPublisher":{"name":"yoshuawuyts","email":"i@yoshuawuyts.com"},"owners":[{"name":"yoshuawuyts","email":"i@yoshuawuyts.com"}],"other":{"_attachments":{},"_from":".","_id":"http-ndjson","_nodeVersion":"5.0.0","_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/http-ndjson-3.0.0.tgz_1457066308651_0.4821360839996487"},"_npmUser":{"name":"yoshuawuyts","email":"i@yoshuawuyts.com"},"_npmVersion":"3.5.2","_rev":"1-d4cd3a99d80dde6b769a8b07a4c365be","_shasum":"d21654c0b770417275528b900af589283f2d07fb","bugs":{"url":"https://github.com/yoshuawuyts/http-ndjson/issues"},"directories":{},"dist-tags":{"latest":"3.0.0"},"dist":{"shasum":"d21654c0b770417275528b900af589283f2d07fb","tarball":"http://registry.npmjs.org/http-ndjson/-/http-ndjson-3.0.0.tgz"},"maintainers":[{"name":"yoshuawuyts","email":"i@yoshuawuyts.com"}],"readmeFilename":"README.md","time":{"modified":"2016-03-04T04:38:29.808Z","created":"2015-09-04T09:42:17.009Z","1.0.0":"2015-09-04T09:42:17.009Z","1.0.1":"2015-09-04T09:49:45.785Z","1.1.0":"2015-09-06T05:03:32.745Z","1.1.1":"2015-09-15T03:12:53.141Z","1.1.2":"2015-09-19T04:55:46.405Z","2.0.0":"2015-10-25T23:32:58.093Z","2.1.0":"2015-10-27T00:53:26.918Z","2.2.0":"2015-10-27T13:00:33.630Z","2.3.0":"2015-10-27T13:33:06.517Z","2.3.1":"2015-10-27T13:45:58.790Z","2.3.2":"2015-10-27T14:02:23.362Z","2.3.3":"2015-10-27T14:07:51.310Z","3.0.0":"2016-03-04T04:38:29.808Z"},"users":{"nelix":true}}}