{"name":"calamarble-xhub-sns","version":"1.0.2","main":"./src/index.js","license":"MIT","scripts-info":{"build:npm":"Builds the transpiled npm package under dist/npm","ppp":"Increases the version patch number, push to github and publish to npm","mpp":"Increases the version minor number, push to github and publish to npm"},"scripts":{"info":"npm-scripts-info","start":"NODE_DEBUG=dev babel-node ./src/index.js","foo":"NODE_DEBUG=dev babel-node ./foo.js","build:npm":"babel --ignore node_modules,dist,tasks --out-dir ./dist/npm .","postbuild:npm":"babel-node tasks/npmPostBuild.js","publish:npm":"npm run build:npm && npm publish dist/npm","ppp":"npm version patch && git push && git push --tags && npm run publish:npm","mpp":"npm version minor && git push && git push --tags && npm run publish:npm"},"babel":{"plugins":["transform-es2015-modules-commonjs","transform-object-rest-spread","transform-async-to-generator"]},"eslintConfig":{"extends":"calamar"},"devDependencies":{"babel-cli":"^6.11.4","babel-plugin-transform-async-to-generator":"^6.8.0","babel-plugin-transform-es2015-modules-commonjs":"^6.11.5","babel-plugin-transform-object-rest-spread":"^6.8.0","eslint":"^3.2.2","eslint-config-calamar":"^2.1.1","eslint-plugin-babel":"^3.3.0","eslint-plugin-import":"^1.12.0","npm-scripts-info":"^0.3.6","shelljs":"^0.7.3"},"description":"check the signature of a http request and if valid post to an AWS SNS topic","repository":"https://github.com/fczuardi/calamarble-xhub-sns","keywords":["calamar","aws","sns","lambda","facebook","messenger","webhook"],"homepage":"https://github.com/fczuardi/calamarble-xhub-sns#readme","dependencies":{"aws-sdk":"^2.5.0","calamarble-xhub":"^0.6.1"},"_resolved":"file:dist/npm","versions":[{"number":"0.2.0","date":"2016-08-16T10:46:57.371Z"},{"number":"0.2.1","date":"2016-08-16T11:14:30.783Z"},{"number":"1.0.0","date":"2016-08-16T11:20:54.272Z"},{"number":"1.0.1","date":"2016-08-16T11:30:30.271Z"},{"number":"1.0.2","date":"2016-08-16T20:41:47.196Z"}],"readme":"# calamarble-xhub-sns\n## Auto-publish to an Amazon SNS topic after a X-Hub-Signature check\n\nChecks the signature of a http request and if valid post the body of the request\nto a configurable existing AWS SNS topic.\n\n## Usage\n\n### With express.js\n\n```javascript\nimport express from 'express';\nimport bodyParser from 'body-parser';\nimport { apiEndpoint } from 'calamarble-xhub-sns';\n\nconst expressConfig = {\n    port: 8088,\n    postPath: '/mywebhook',\n    messages: {\n        serverRunning: port => `Server running on port ${port}`\n    }\n};\nconst xHubSnsConfig = {\n    algo: 'sha1',\n    secret: 'MY_APP_SECRET',\n    topicArn: 'arn:aws:sns:us-east-1:XXXXX:yyyyy',\n    awsConfig: {\n        region: 'us-east-1'\n    }\n    messages: {\n        wrongSignature: 'Content signature don\\'t match'\n    }\n};\nconst app = express();\nconst postEndPoint = apiEndpoint(xHubConfig);\napp.use(bodyParser.raw({ type: 'application/json' }));\napp.post(expressConfig.postPath, postEndPoint);\napp.listen(expressConfig.port, () => console.log(`Server running on port ${expressConfig.port}`));\n\n```\n\n### With claudia-api-builder\n\n```javascript\nimport ApiBuilder from 'claudia-api-builder';\nimport { apiEndpoint as webhookPost} from 'calamarble-xhub-sns';\n\nconst api = new ApiBuilder();\nconst xHubConfig = {\n    algo: 'sha1',\n    secret: 'MY_APP_SECRET',\n    topicArn: 'arn:aws:sns:us-east-1:XXXXX:yyyyy',\n    messages: {\n        wrongSignature: 'Content signature don\\'t match'\n    }\n}\n\napi.post('/fbwebhook', webhookPost(xHubConfig));\n\nexport { api as default };\n```\n\nRemember to copy the file ```policies/sns-publish.json``` and include it in your\nclaudia create ```--policies``` command line argument when creating your lambdas.\n","created":"2016-08-16T10:46:57.371Z","modified":"2016-08-16T20:41:47.196Z","lastPublisher":{"name":"fczuardi","email":"fabricio@fabricio.org"},"owners":[{"name":"fczuardi","email":"fabricio@fabricio.org"}],"other":{"_attachments":{},"_from":"dist/npm","_id":"calamarble-xhub-sns","_nodeVersion":"4.3.2","_npmOperationalInternal":{"host":"packages-16-east.internal.npmjs.com","tmp":"tmp/calamarble-xhub-sns-1.0.2.tgz_1471380104528_0.3907697282265872"},"_npmUser":{"name":"fczuardi","email":"fabricio@fabricio.org"},"_npmVersion":"2.14.12","_rev":"1-fe1bd681c96e58a810ce16a8cc928ba5","_shasum":"934f06c20fe77f6a1b91e0859eacc8420ceb4901","author":{"name":"Fabricio C Zuardi"},"bugs":{"url":"https://github.com/fczuardi/calamarble-xhub-sns/issues"},"directories":{},"dist-tags":{"latest":"1.0.2"},"dist":{"shasum":"934f06c20fe77f6a1b91e0859eacc8420ceb4901","tarball":"http://registry.npmjs.org/calamarble-xhub-sns/-/calamarble-xhub-sns-1.0.2.tgz"},"maintainers":[{"name":"fczuardi","email":"fabricio@fabricio.org"}],"readmeFilename":"README.md","time":{"modified":"2016-08-16T20:41:47.196Z","created":"2016-08-16T10:46:57.371Z","0.2.0":"2016-08-16T10:46:57.371Z","0.2.1":"2016-08-16T11:14:30.783Z","1.0.0":"2016-08-16T11:20:54.272Z","1.0.1":"2016-08-16T11:30:30.271Z","1.0.2":"2016-08-16T20:41:47.196Z"}}}