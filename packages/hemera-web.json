{"name":"hemera-web","version":"0.0.23","description":"Http route mapping for Hemera microservices.","main":"index.js","repository":"https://github.com/hemerajs/hemera","scripts":{},"license":"MIT","dependencies":{"body-parser":"1.17.2","express":"4.15.3","hemera-plugin":"^0.0.7","hoek":"4.1.x","lodash":"4.17.x"},"engines":{"node":">=4"},"homepage":"https://github.com/hemerajs/hemera#readme","versions":[{"number":"0.0.1","date":"2017-05-07T14:15:27.584Z"},{"number":"0.0.2","date":"2017-05-07T14:46:43.873Z"},{"number":"0.0.3","date":"2017-05-07T20:06:11.529Z"},{"number":"0.0.4","date":"2017-05-07T20:45:44.172Z"},{"number":"0.0.5","date":"2017-05-13T23:38:56.663Z"},{"number":"0.0.6","date":"2017-05-14T20:01:25.327Z"},{"number":"0.0.7","date":"2017-05-17T11:05:04.328Z"},{"number":"0.0.8","date":"2017-05-21T11:19:45.438Z"},{"number":"0.0.9","date":"2017-05-21T12:12:57.936Z"},{"number":"0.0.10","date":"2017-05-21T13:38:30.357Z"},{"number":"0.0.11","date":"2017-05-24T21:49:08.548Z"},{"number":"0.0.12","date":"2017-05-25T14:31:32.634Z"},{"number":"0.0.13","date":"2017-05-25T20:47:51.015Z"},{"number":"0.0.14","date":"2017-05-25T22:18:14.025Z"},{"number":"0.0.15","date":"2017-06-04T11:30:06.823Z"},{"number":"0.0.16","date":"2017-06-04T12:08:44.909Z"},{"number":"0.0.17","date":"2017-06-05T14:24:38.360Z"},{"number":"0.0.18","date":"2017-06-15T10:47:59.760Z"},{"number":"0.0.19","date":"2017-06-15T15:39:30.407Z"},{"number":"0.0.20","date":"2017-06-20T20:30:51.054Z"},{"number":"0.0.21","date":"2017-06-20T21:44:59.186Z"},{"number":"0.0.22","date":"2017-06-21T21:59:24.843Z"},{"number":"0.0.23","date":"2017-06-21T23:02:27.316Z"}],"readme":"# Hemera-web\r\nHttp route mapping for Hemera microservices. Based on [Express 4](https://github.com/expressjs/express)\r\n\r\n- Depends on minimalist web framework\r\n- Respect `Body` and `Query` payload as pattern\r\n- Provide a REST like interface `/:topic/:cmd`\r\n- Transport small binary or text data in pattern\r\n- Returns correct Hemera errors without stack traces\r\n\r\n[![npm](https://img.shields.io/npm/v/hemera-web.svg?maxAge=3600)](https://www.npmjs.com/package/hemera-web)\r\n[![js-standard-style](https://img.shields.io/badge/code%20style-standard-brightgreen.svg)](http://standardjs.com)\r\n\r\n#### Example\r\n\r\n```js\r\nconst Hemera = require('nats-hemera')\r\nconst nats = require('nats').connect()\r\nconst hemeraWeb = require('hemera-web')\r\n\r\nconst hemera = new Hemera(nats)\r\nhemera.use(hemeraWeb, {\r\n  port: 3000,\r\n  host: '127.0.0.1',\r\n  pattern: {} // default pattern\r\n})\r\n\r\nhemera.ready(() => {\r\n  hemera.add({\r\n    topic: 'math',\r\n    cmd: 'add'\r\n  }, (req, cb) => {\r\n    cb(null, req.a + req.b)\r\n  })\r\n})\r\n```\r\n\r\n### How to execute a server method ?\r\n\r\nYou can transport the pattern in different ways:\r\n\r\n- As Query parameters\r\n- As Payload from type JSON\r\n- As Payload from type x-www-form-urlencoded\r\n- `topic` and `cmd` can be declared in url parameters\r\n\r\n### Examples\r\n\r\n- GET Request\r\n```\r\nhttp://localhost:3000?topic=math&cmd=add&a=1&b=2\r\nhttp://localhost:3000/math/add?a=1&b=2\r\n```\r\n- POST Request\r\n```\r\nhttp://localhost:3000?topic=math&cmd=add\r\nhttp://localhost:3000/math/add\r\n\r\nBody:\r\n{\r\n  \"a\": 1,\r\n  \"b\": 2\r\n}\r\n```\r\n- application/x-www-form-urlencoded\r\n```\r\nhttp://localhost:3000?topic=math&cmd=add\r\nhttp://localhost:3000/math/add\r\n\r\nPayload: a=1&bd=2\r\n```\r\n### Define default pattern\r\n\r\nIn Hemera:\r\n```js\r\nconst hemera = new Hemera(nats)\r\nhemera.use(hemeraWeb, {\r\n  port: 3000,\r\n  host: '127.0.0.1',\r\n  pattern: {\r\n    topic: 'math'\r\n  }\r\n})\r\n\r\nGET - http://localhost:3000?cmd=add&a=1&b=2\r\n```\r\n\r\n### Error handling\r\n\r\nIn Hemera:\r\n```js\r\nconst CustomError = hemera.createError('CustomError')\r\n\r\nhemera.add({\r\n  topic: 'math',\r\n  cmd: 'add'\r\n}, function (req, cb) {\r\n  const error = new CustomError()\r\n  error.statusCode = 404\r\n  cb(error)\r\n})\r\n```\r\n#### Results in\r\n_Status Code_: __404__ - _default (500)_\r\n```json\r\n{\r\n  \"error\": {\r\n    \"name\": \"Error\",\r\n    \"message\": \"test\",\r\n    \"hops\": [\r\n      {\r\n        \"service\": \"math\",\r\n        \"method\": \"a:1,b:2,cmd:add,topic:math\",\r\n        \"app\": \"hemera-starptech\",\r\n        \"ts\": 299208574491\r\n      }\r\n    ]\r\n  }\r\n}\r\n```\r\n\r\n### Show error stack for debugging\r\n\r\nIn Hemera:\r\n```js\r\nconst hemera = new Hemera(nats)\r\nhemera.use(hemeraWeb, {\r\n  port: 3000,\r\n  host: '127.0.0.1',\r\n  errors: { propBlacklist: [] }\r\n})\r\n```\r\n\r\n","created":"2017-05-07T14:15:27.584Z","modified":"2017-06-21T23:02:27.316Z","lastPublisher":{"name":"starptech","email":"deusdustin@gmail.com"},"owners":[{"name":"starptech","email":"deusdustin@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"hemera-web","_nodeVersion":"8.1.2","_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/hemera-web-0.0.23.tgz_1498086146419_0.8521844740025699"},"_npmUser":{"name":"starptech","email":"deusdustin@gmail.com"},"_npmVersion":"4.6.1","_rev":"23-d1397a760f2abf6f3c66dd5842248c5b","_shasum":"44e163013320f1d35f386f05952b5caa62fbcd49","author":{"name":"Dustin Deus","url":"https://github.com/StarpTech"},"bugs":{"url":"https://github.com/hemerajs/hemera/issues"},"directories":{},"dist-tags":{"latest":"0.0.23"},"dist":{"shasum":"44e163013320f1d35f386f05952b5caa62fbcd49","tarball":"https://registry.npmjs.org/hemera-web/-/hemera-web-0.0.23.tgz"},"maintainers":[{"name":"starptech","email":"deusdustin@gmail.com"}],"readmeFilename":"README.md","time":{"modified":"2017-06-21T23:02:27.316Z","created":"2017-05-07T14:15:27.584Z","0.0.1":"2017-05-07T14:15:27.584Z","0.0.2":"2017-05-07T14:46:43.873Z","0.0.3":"2017-05-07T20:06:11.529Z","0.0.4":"2017-05-07T20:45:44.172Z","0.0.5":"2017-05-13T23:38:56.663Z","0.0.6":"2017-05-14T20:01:25.327Z","0.0.7":"2017-05-17T11:05:04.328Z","0.0.8":"2017-05-21T11:19:45.438Z","0.0.9":"2017-05-21T12:12:57.936Z","0.0.10":"2017-05-21T13:38:30.357Z","0.0.11":"2017-05-24T21:49:08.548Z","0.0.12":"2017-05-25T14:31:32.634Z","0.0.13":"2017-05-25T20:47:51.015Z","0.0.14":"2017-05-25T22:18:14.025Z","0.0.15":"2017-06-04T11:30:06.823Z","0.0.16":"2017-06-04T12:08:44.909Z","0.0.17":"2017-06-05T14:24:38.360Z","0.0.18":"2017-06-15T10:47:59.760Z","0.0.19":"2017-06-15T15:39:30.407Z","0.0.20":"2017-06-20T20:30:51.054Z","0.0.21":"2017-06-20T21:44:59.186Z","0.0.22":"2017-06-21T21:59:24.843Z","0.0.23":"2017-06-21T23:02:27.316Z"}}}