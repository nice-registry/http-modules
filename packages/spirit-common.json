{"name":"spirit-common","version":"0.0.3","description":"common http middlewares for spirit","main":"index.js","scripts":{"test":"make test"},"repository":"https://github.com/spirit-js/spirit-common","keywords":["spirit","middlewares"],"files":["lib","index.js"],"license":"ISC","homepage":"https://github.com/spirit-js/spirit-common#readme","devDependencies":{"babel-cli":"^6.11.4","babel-preset-es2015":"^6.9.0","istanbul":"^1.1.0-alpha.1","jasmine":"2.4.x","rewire":"^2.5.2","superagent":"^2.1.0"},"dependencies":{"bluebird":"3.4.x","body-parser":"1.15.x","express-session":"1.14.x","spirit":"0.3.x","spirit-express":"0.2.x"},"gitHead":"b449483d019bdb6090eea812465c0989871766c8","versions":[{"number":"0.0.1","date":"2016-09-01T22:25:53.382Z"},{"number":"0.0.2","date":"2016-09-20T01:27:13.811Z"},{"number":"0.0.3","date":"2016-10-21T16:28:32.619Z"}],"readme":"# spirit-common\n\nCommon http middleware setup for spirit.\n\nIt's purpose is to reduce boilerplate and avoid middleware ordering confusion.\n\n[![Build Status](https://travis-ci.org/spirit-js/spirit-common.svg?branch=master)](https://travis-ci.org/spirit-js/spirit-common)\n[![Coverage Status](https://coveralls.io/repos/github/spirit-js/spirit-common/badge.svg?branch=master)](https://coveralls.io/github/spirit-js/spirit-common?branch=master)\n\n### Usage\n\n```js\nconst defaults = require(\"spirit-common\").defaults\nconst site = defaults(\"site\") // returns a middleware with a lot of common http middleware supported\n\nspirit.node.adapter(..., [site]) // use middleware with spirit node adapter\n```\n\nThis sets up and provides body parsing, session, as well as other common middleware.\n\nNOTE: By default it stores cookies in memory, to change, pass in a configuration object:\n```js\ndefaults(\"site\", {\n  session: {\n    store: <A compatible express-session store, ex: new MongoStore()>\n  }\n})\n```\n\nThe secret used for cookies is auto-generated on startup, to use your own you can pass it in as an option too:\n```js\ndefaults(\"site\", {\n  session: {\n    secret: \"my_secret\"\n  }\n})\n```\n\nAside from changing the session secret and store option, most other options are safe to leave alone.\n\nIf you wanted to disable a middleware used by `defaults` then pass in `false` as it's option, for example to turn off the console logger and session support:\n\n```js\ndefaults(\"site\", {\n  log: false,\n  session: false\n})\n```\n\nA list of middlewares used:\n```js\n{\n  log: true/false,\n  proxy: true/false,\n  ifmod: true/false,\n  body: {\n    json: ...,      // body-parser .json\n    urlencoded: ... // body-parser .urlencoded\n  },\n  session: { ... }  // express-session\n}\n```\nFor the 'body' and 'session' middleware, it uses the npm modules [body-parser](https://www.npmjs.com/package/body-parser) and [express-session](https://www.npmjs.com/package/express-session). So the same options can be passed in.\n\nThere is also a \"api\" configuration:\n```js\ndefaults(\"api\")\n```\n\nWhich loads every middleware from the \"site\" configuration _except_ session support.\n","created":"2016-09-01T22:25:53.382Z","modified":"2016-10-21T16:28:32.619Z","lastPublisher":{"name":"hnry","email":"hheennrryy@gmail.com"},"owners":[{"name":"hnry","email":"hheennrryy@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"spirit-common","_nodeVersion":"6.9.1","_npmOperationalInternal":{"host":"packages-18-east.internal.npmjs.com","tmp":"tmp/spirit-common-0.0.3.tgz_1477067311329_0.9921122565865517"},"_npmUser":{"name":"hnry","email":"hheennrryy@gmail.com"},"_npmVersion":"3.10.8","_rev":"3-8338fceee42b0e9085e4bd0348d420c9","_shasum":"13c18361c5e8fb67f1783d064c6c65ef69e3d52d","author":{"name":"hnry"},"bugs":{"url":"https://github.com/spirit-js/spirit-common/issues"},"directories":{},"dist-tags":{"latest":"0.0.3"},"dist":{"shasum":"13c18361c5e8fb67f1783d064c6c65ef69e3d52d","tarball":"http://registry.npmjs.org/spirit-common/-/spirit-common-0.0.3.tgz"},"maintainers":[{"name":"hnry","email":"hheennrryy@gmail.com"}],"readmeFilename":"README.md","time":{"modified":"2016-10-21T16:28:32.619Z","created":"2016-09-01T22:25:53.382Z","0.0.1":"2016-09-01T22:25:53.382Z","0.0.2":"2016-09-20T01:27:13.811Z","0.0.3":"2016-10-21T16:28:32.619Z"}}}