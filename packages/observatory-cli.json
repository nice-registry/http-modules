{"name":"observatory-cli","description":"Command line client for Mozilla HTTP observatory service","version":"0.7.1","bin":{"observatory":"./index.js"},"dependencies":{"chalk":"^1.1.3","clim":"^1.1.1","commander":"^2.9.0","request":"^2.74.0","request-promise":"^4.1.1","sprintf-js":"^1.0.3","timeout-as-promise":"^1.0.0"},"devDependencies":{"depcheck":"^0.6.4","eslint":"^3.5.0","eslint-plugin-node":"^2.1.2","eslint-plugin-promise":"^3.0.0","fixpack":"^2.3.1","npm-run-all":"^3.1.0","nsp":"^2.6.1"},"engines":{"node":">=6"},"homepage":"https://github.com/mozilla/observatory-cli#readme","keywords":["https","mozilla","security"],"license":"MPL-2.0","main":"index.js","repository":"https://github.com/mozilla/observatory-cli","scripts":{"lint":"npm-run-all lint:*","lint:depcheck":"depcheck --ignores=nsp,eslint-*","lint:eslint":"eslint .","lint:fixpack":"fixpack","lint:nsp":"nsp check -o summary","prepublish":"npm shrinkwrap","pretest":"npm run lint","test":"echo OK","start":"node server.js"},"gitHead":"0a64d6f746371a4da97679935c46dd0c76f83ced","versions":[{"number":"0.5.0","date":"2016-09-23T02:02:57.646Z"},{"number":"0.5.1","date":"2016-09-23T02:27:34.983Z"},{"number":"0.6.0","date":"2016-09-23T17:55:07.624Z"},{"number":"0.6.1","date":"2016-09-23T18:44:04.694Z"},{"number":"0.6.2","date":"2016-09-24T02:49:15.839Z"},{"number":"0.6.3","date":"2016-09-27T18:49:59.737Z"},{"number":"0.6.5","date":"2016-10-10T20:15:43.440Z"},{"number":"0.7.0","date":"2016-10-11T16:37:55.695Z"},{"number":"0.7.1","date":"2016-10-17T21:53:40.044Z"}],"readme":"# Observatory by Mozilla CLI Client\n\n## Score your site's HTTPS practices\n\nObservatory by Mozilla is a project designed to help developers, system administrators, and security professionals configure their sites safely and securely.\n\n## Observatory in action!\n\n- <https://observatory.mozilla.org/>\n- [FAQ](https://observatory.mozilla.org/faq.html)\n\n### Example site report, with additional options\n\n![Screenshot of ssllabs.com report, showing colors](report.png)\n\nThe [full report url](https://observatory.mozilla.org/analyze.html?host=ssllabs.com) has suggestions to **repair** each of these issues.\n\n\n## Install\n\n```\n$ npm install -g observatory-cli\n```\n\n(Optional `Docker` instructions below.)\n\n## Usage\n\n1.  **Scan a site** for `https` best practices.\n\n    ```\n    # json!\n    $ observatory some.site.name\n\n    # include 'zero' scores, display as a tabular report\n    $ observatory some.site.name --zero --format=report\n\n    # attempt to force a re-scan\n    $ observatory some.site.name --rescan\n\n    ```\n\n2.  **Test a site** as part of a Continuous Integration pipeline.\n\n    Script will FAIL unless the grade is AT LEAST `B+`\n\n    ```\n    $ observatory some.site.name --min-grade B+\n    ```\n\n    ...and the score is at least 50.\n\n    ```\n    $ observatory some.site.name --min-grade B+ --min-score 50\n    ```\n\n\n3.  **Print the URL** for the expanded online report.\n\n    ```\n    $ observatory some.site.name --format=url\n    ```\n\n4.  **nagios** monitoring plugin mode.\n\n    For `--nagios <failcode>`, `failcode` will be the exit code if the test fails.\n\n    `--min-score`, `--min-grade`, `--zero`, `--skip` affect the test.\n\n    ```\n    $ observatory  --nagios 2 --min-score 85 -z --skip cookies\n    CRITICAL [\"content-security-policy\",...,\"x-xss-protection\"]\n    ```\n\n    Any **negative scores fail the test**, unless `--min-score` or `--min-grade` is specified.\n\n    ```\n    # '2' maps to nagios 'critical.'  Exits '2'\n\n    $ observatory ssllabs.com --nagios 2\n    CRITICAL [\"redirection\"]\n    ```\n\n    We can `--skip` the failing rule, and affect the score.\n\n    ```\n    $ observatory ssllabs.com --nagios 2 --skip redirection\n    observatory [INFO] modfiying score, because of --skip.  was: 100, now: 105\n    OK\n    ```\n\n    Quiet output with `-q`.\n\n    ```\n    $ observatory ssllabs.com --nagios 2 --skip redirection -q\n    OK\n    ```\n\n## Help Ouput\n\n```\n$ observatory --help\n\n  Usage: observatory [options] <site>\n\n  cli for interacting with Mozilla HTTP Observatory\n\n  https://observatory.mozilla.org/\n\n  Options:\n\n    -h, --help               output usage information\n    -V, --version            output the version number\n    --format [format]        format for output.  choice:  (json|report|csv|url).  `json` is default\n    --min-grade <grade>      testing: this grade or better, or exit(1)\n    --min-score <score>      testing: this score or better, or exit(1)\n    --nagios [failcode]      nagios mode, exits with [failcode] on failure\n    --rescan                 initiate a rescan instead of showing recent scan results\n    -z, --zero               show test results that don't affect the final score\n    --attempts <n>           number of attempts to try before failing\n    --api-version [version]  api version:  defaults to 1\n    --skip <rule>            skip rules by name.  works with min-score only\n    --tls                    do tls checks instead\n    -q, --quiet              turns off all logging\n\n\n  Output Formats (--format)\n    - json    json of the report\n    - report  plain-text tabular format\n    - csv     alias for report\n    - url     url for online version\n\n\n  Nagios Mode (--nagios)\n    - if `--min-score` and/or `--min-grade`, use those.\n    - else *any* negative rules fail the check.\n    - exits with integer `failcode`.\n```\n\n## Example Report, Text Version\n\nReport, with options:\n\n* `-z` to show '0' rules (all rules)\n* `--skip` to skip a rule (affects SCORE, but not GRADE)\n\n```\n$ observatory some.site --format=report -z --skip redirection\n\nobservatory [INFO] modfiying score, because of --skip.  was: 60, now: 65\n\nHTTP Observatory Report: some.site\n\nScore Description\n\n  -20 content-security-policy        Content Security Policy (CSP) implemented, but allows 'unsafe-inline' inside script-src\n  -10 x-xss-protection               X-XSS-Protection header not implemented\n   -5 x-content-type-options         X-Content-Type-Options header not implemented\n    0 contribute                     Contribute.json implemented with the required contact information\n    0 cookies                        No cookies detected\n    0 cross-origin-resource-sharing  Content is not visible via cross-origin resource sharing (CORS) files or headers\n    0 public-key-pinning             HTTP Public Key Pinning (HPKP) header not implemented\n    0 strict-transport-security      HTTP Strict Transport Security (HSTS) header set to a minimum of six months (15768000)\n    0 subresource-integrity          Subresource Integrity (SRI) not implemented, but all scripts are loaded from a similar origin\n    0 x-frame-options                X-Frame-Options (XFO) header set to SAMEORIGIN or DENY\n\nScore: 65 (modified due to --skip)\nGrade: C+\n\nFull Report Url: https://observatory.mozilla.org/analyze.html?host=some.site\n\n```\n\n## Technical / Development\n\n### Debug observatory api urls\n\n```\nNODE_DEBUG=request observatory --format report --rescan --zero www.mozilla.org\n```\n\n### API Documentation\n\nhttps://github.com/mozilla/http-observatory/blob/master/httpobs/docs/api.md\n\n### Dockerized `observatory-cli`\n\nUse the provided [Dockerfile](./Dockerfile), to build and execute `observatory` in Docker container.  Useful for Continuous Integration/Continuous Deployment (CI/CD) pipelines capable of running containers but that otherwise don't need a lot of extra software.\n\n**To get started,**\n\n1. Build the container.  Tag it as `mozilla/observatory-cli`\n\n    ```\n    docker build -t mozilla/observatory-cli .\n    ```\n\n2. Add a section like this to your `profile` (varies depending on your operating system and shell. `bash` shown).\n\n    ```\n    ## $HOME/.bashrc\n    if [[ -d $HOME/.bash_functions ]]; then\n        for file in $HOME/.bash_functions/*; do\n            . $file\n        done\n    fi\n    ```\n\n3. Create the directory referenced in point 2 and copy the files in `shell_functions` (not `bash_completion`) into that directory:\n\n    ```\n    $ mkdir $HOME/.bash_functions\n    $ find shell_functions -maxdepth 1 -type f -executable | while read file; do cp $file $HOME/.bash_functions; done\n    ```\n\n4. *Optional*: Add Bash completion to your shell.  (varies depending on your host operating system)\n\n    ```\n    ## On Red Hat based distributions:\n    sudo cp shell_functions/bash_completion/observatory.bash /etc/bash_completion.d/\n    ```\n\n5. Start a new shell and execute `observatory`.  Now it's in a Docker container.  Bash completion is available if you've added it.\n\n![Screenshot showing use of containerized observatory-cli](docker_example.png)\n\n\n## Related projects\n\n- [HTTP Observatory](https://github.com/mozilla/http-observatory) by April King\n- [Python observatory-cli](https://github.com/mozilla/http-observatory-cli) by April King\n","starsCount":1,"created":"2016-09-23T02:02:57.646Z","modified":"2016-10-17T21:53:40.044Z","lastPublisher":{"name":"gregglind","email":"gregg.lind@gmail.com"},"owners":[{"name":"gregglind","email":"gregg.lind@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"observatory-cli","_nodeVersion":"6.6.0","_npmOperationalInternal":{"host":"packages-16-east.internal.npmjs.com","tmp":"tmp/observatory-cli-0.7.1.tgz_1476741218065_0.640210872516036"},"_npmUser":{"name":"gregglind","email":"gregg.lind@gmail.com"},"_npmVersion":"3.10.8","_rev":"1-7d9c93edaf732d903b6cb215b6a10bc3","_shasum":"fb7f1d1cee6289c57300f92d75cb9f0b30c558f3","author":{"name":"Gregg Lind","email":"glind@mozilla.com"},"bugs":{"url":"https://github.com/mozilla/observatory-cli/issues"},"directories":{},"dist-tags":{"latest":"0.7.1"},"dist":{"shasum":"fb7f1d1cee6289c57300f92d75cb9f0b30c558f3","tarball":"http://registry.npmjs.org/observatory-cli/-/observatory-cli-0.7.1.tgz"},"maintainers":[{"name":"gregglind","email":"gregg.lind@gmail.com"}],"readmeFilename":"README.md","time":{"modified":"2016-10-17T21:53:40.044Z","created":"2016-09-23T02:02:57.646Z","0.5.0":"2016-09-23T02:02:57.646Z","0.5.1":"2016-09-23T02:27:34.983Z","0.6.0":"2016-09-23T17:55:07.624Z","0.6.1":"2016-09-23T18:44:04.694Z","0.6.2":"2016-09-24T02:49:15.839Z","0.6.3":"2016-09-27T18:49:59.737Z","0.6.5":"2016-10-10T20:15:43.440Z","0.7.0":"2016-10-11T16:37:55.695Z","0.7.1":"2016-10-17T21:53:40.044Z"},"users":{"gregglind":true}}}