{"name":"strong-express-metrics","version":"2.0.3","description":"An Express middleware for collecting HTTP statistics.","keywords":["StrongLoop","LoopBack","Express","Statistics","Metrics"],"repository":"https://github.com/strongloop/strong-express-metrics","main":"index.js","scripts":{"pretest":"jscs . && jshint .","test":"mocha"},"license":"SEE LICENSE IN LICENSE.md","dependencies":{"debug":"^2.2.0"},"devDependencies":{"chai":"^3.0.0","express":"^4.11.1","jscs":"^1.13.1","jshint":"^2.8.0","loopback":"^2.18.0","loopback-datasource-juggler":"^2.30.1","mocha":"^2.1.0","supertest":"^1.0.1"},"gitHead":"3db876a8b8645a581cf6e799a03b09d73cd924f0","homepage":"https://github.com/strongloop/strong-express-metrics#readme","versions":[{"number":"1.0.0","date":"2015-02-04T07:19:19.165Z"},{"number":"1.0.1","date":"2015-02-04T07:43:00.817Z"},{"number":"1.1.0","date":"2015-04-15T15:45:33.388Z"},{"number":"2.0.0","date":"2015-05-25T15:03:42.597Z"},{"number":"2.0.1","date":"2015-06-24T18:41:43.965Z"},{"number":"2.0.3","date":"2016-05-06T22:29:36.844Z"}],"readme":"# strong-express-metrics\n\nAn Express middleware for collecting HTTP statistics.\n\n## Installation\n\n```\n$ npm install strong-express-metrics\n```\n\n## Usage\n\n```js\nvar express = require('express');\nvar metrics = require('strong-express-metrics');\n\nvar app = express();\napp.use(metrics());\napp.listen(3000);\n```\n\nYou can extend the metrics reported by the middleware by providing\na builder function. The output of this builder function will be merged\nwith the default record produced by the middleware.\n\n```js\napp.use(metrics(function buildRecord(req, res) {\n  return {\n    client: {\n      id: req.authInfo.app.id,\n      username: req.authInfo.user.email\n    },\n    data: {\n      // put your custom metrics here\n    }\n  };\n}));\n```\n\nIf your application is not running inside StrongLoop's Supervisor,\nyou can provide a custom function to process and report the statistics.\n\n```js\nmetrics.onRecord(function(data) {\n  // simple statsd output\n  console.log('url:%s|1|c', data.request.url);\n  console.log('status:%s|1|c', data.response.status);\n  console.log('response-time|%s|ms', data.duration);\n});\n```\n\n## Record format\n\nThe middleware produces records in the following format.\n\n```js\n{\n  version: require('./package.json').version,\n  timestamp: Date.now(),\n  client: {\n    address: req.socket.address().address,\n    id: undefined, // builder should override\n    username: undefined // builder should override\n  },\n  request: {\n    method: req.method,\n    url: req.url\n  },\n  response: {\n    status: res.statusCode,\n    duration: res.durationInMs,\n    bytes: undefined // TODO\n  },\n  process: {\n    pid: process.pid,\n    workerId: cluster.worker && cluster.workerId\n  },\n  data: {\n    // placeholder for user-provided data\n  },\n  // extra info filled for LoopBack applications only\n  loopback: {\n    modelName: 'User',\n    remoteMethod: 'prototype.updateAttributes',\n    // instanceId is undefined for static methods\n    // e.g. User.find() or User.login()\n    instanceId: 1234\n  }\n}\n```\n","starsCount":1,"created":"2015-02-04T07:19:19.165Z","modified":"2017-06-02T16:39:14.635Z","lastPublisher":{"name":"rmg","email":"r.m.graham@gmail.com"},"owners":[{"email":"kjdelisle@gmail.com","name":"kjdelisle"},{"email":"tffrench@us.ibm.com","name":"tonyf-ibm"},{"email":"gpandya@live.com","name":"thegman"},{"email":"qpresley@ca.ibm.com","name":"qpresley"},{"email":"gewily@ca.ibm.com","name":"loay"},{"email":"juehou@ca.ibm.com","name":"jannyhou2016"},{"email":"captain@hacksparrow.com","name":"hacksparrow"},{"email":"davidcheung@live.ca","name":"davidcheung"},{"email":"binadmt@hotmail.com","name":"b-admike"},{"email":"amirali.jfr61@gmail.com","name":"amir-61"},{"email":"ngcandy@ca.ibm.com","name":"0candy"},{"email":"superkhau@gmail.com","name":"superkhau"},{"email":"setogit@gmail.com","name":"setogit"},{"email":"mbajtoss@gmail.com","name":"bajtos"},{"email":"rmg@ca.ibm.com","name":"ibmcloud-admin"},{"email":"enjoyjava@gmail.com","name":"rfeng"},{"email":"skawful@gmail.com","name":"ritch"},{"email":"kraman@gmail.com","name":"kraman"},{"email":"strngops@us.ibm.com","name":"strongloop"},{"email":"r.m.graham@gmail.com","name":"rmg"},{"email":"vieuxtech@gmail.com","name":"octet"}],"other":{"_attachments":{},"_from":".","_id":"strong-express-metrics","_nodeVersion":"4.4.3","_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/strong-express-metrics-2.0.3.tgz_1462573776227_0.2627274710685015"},"_npmUser":{"name":"rmg","email":"r.m.graham@gmail.com"},"_npmVersion":"3.8.8","_rev":"9-3e49ebe224a8f43517dc0891c1c0a9ca","_shasum":"090a906980461fd33e88e12ac70ec7bbb5062ee5","bugs":{"url":"https://github.com/strongloop/strong-express-metrics/issues"},"directories":{},"dist-tags":{"latest":"2.0.3"},"dist":{"shasum":"090a906980461fd33e88e12ac70ec7bbb5062ee5","tarball":"http://registry.npmjs.org/strong-express-metrics/-/strong-express-metrics-2.0.3.tgz"},"maintainers":[{"email":"kjdelisle@gmail.com","name":"kjdelisle"},{"email":"tffrench@us.ibm.com","name":"tonyf-ibm"},{"email":"gpandya@live.com","name":"thegman"},{"email":"qpresley@ca.ibm.com","name":"qpresley"},{"email":"gewily@ca.ibm.com","name":"loay"},{"email":"juehou@ca.ibm.com","name":"jannyhou2016"},{"email":"captain@hacksparrow.com","name":"hacksparrow"},{"email":"davidcheung@live.ca","name":"davidcheung"},{"email":"binadmt@hotmail.com","name":"b-admike"},{"email":"amirali.jfr61@gmail.com","name":"amir-61"},{"email":"ngcandy@ca.ibm.com","name":"0candy"},{"email":"superkhau@gmail.com","name":"superkhau"},{"email":"setogit@gmail.com","name":"setogit"},{"email":"mbajtoss@gmail.com","name":"bajtos"},{"email":"rmg@ca.ibm.com","name":"ibmcloud-admin"},{"email":"enjoyjava@gmail.com","name":"rfeng"},{"email":"skawful@gmail.com","name":"ritch"},{"email":"kraman@gmail.com","name":"kraman"},{"email":"strngops@us.ibm.com","name":"strongloop"},{"email":"r.m.graham@gmail.com","name":"rmg"},{"email":"vieuxtech@gmail.com","name":"octet"}],"readmeFilename":"README.md","time":{"modified":"2017-06-02T16:39:14.635Z","created":"2015-02-04T07:19:19.165Z","1.0.0":"2015-02-04T07:19:19.165Z","1.0.1":"2015-02-04T07:43:00.817Z","1.1.0":"2015-04-15T15:45:33.388Z","2.0.0":"2015-05-25T15:03:42.597Z","2.0.1":"2015-06-24T18:41:43.965Z","2.0.3":"2016-05-06T22:29:36.844Z"},"users":{"mrnoname":true}}}