{"name":"nonstop-package-resource","version":"0.2.1","description":"Package index HTTP API as a resuable resource lib for Autohost","main":"src/resource.js","scripts":{"test":""},"repository":"https://github.com/LeanKit-Labs/nonstop-package-resource","keywords":["nonstop","package","hub","resource"],"license":"MIT License","homepage":"https://github.com/LeanKit-Labs/nonstop-package-resource","devDependencies":{"chai":"^3.4.1","chai-as-promised":"^5.1.0","gulp":"^3.8.7","gulp-mocha":"^1.0.0","proxyquire":"^1.7.3","should":"^4.0.4","sinon":"^1.17.2","sinon-as-promised":"^4.0.0","sinon-chai":"^2.8.0"},"dependencies":{"configya":"~0.2.0","debug":"^2.0.0","fount":"^0.1.0","fs-extra":"^0.26.2","lodash":"^2.4.1","nonstop-pack":"~0.2.1","rethinkdb":"^2.2.0","s3":"^4.4.0","when":"^3.4.5"},"gitHead":"5e79c962b88b841954fc16a19c670b3dd3d74168","versions":[{"number":"0.1.0","date":"2014-09-22T23:37:12.041Z"},{"number":"0.1.1","date":"2014-11-06T17:09:27.974Z"},{"number":"0.1.2","date":"2014-11-10T23:26:30.100Z"},{"number":"0.1.3","date":"2014-11-11T17:36:11.728Z"},{"number":"0.1.4","date":"2014-11-14T08:30:39.039Z"},{"number":"0.1.5","date":"2014-11-14T08:35:12.901Z"},{"number":"0.1.6","date":"2014-11-17T03:54:44.177Z"},{"number":"0.1.7","date":"2014-12-18T18:42:25.840Z"},{"number":"0.1.8","date":"2015-08-12T16:34:13.508Z"},{"number":"0.1.9","date":"2015-08-12T17:29:47.416Z"},{"number":"0.1.10","date":"2015-08-19T06:20:49.606Z"},{"number":"0.1.11","date":"2015-08-24T04:20:52.694Z"},{"number":"0.1.12","date":"2015-08-24T08:36:45.122Z"},{"number":"0.1.13","date":"2015-08-24T08:57:21.309Z"},{"number":"0.2.0-1","date":"2015-11-20T19:01:14.835Z"},{"number":"0.2.0-2","date":"2015-11-23T12:27:55.497Z"},{"number":"0.2.0-3","date":"2015-11-23T16:36:41.200Z"},{"number":"0.2.0-4","date":"2015-11-23T19:30:44.409Z"},{"number":"0.2.0-5","date":"2015-11-23T22:58:28.029Z"},{"number":"0.2.0-6","date":"2015-11-24T08:08:18.077Z"},{"number":"0.2.0-7","date":"2015-11-24T08:41:53.436Z"},{"number":"0.2.0-8","date":"2015-11-24T08:59:18.840Z"},{"number":"0.2.0","date":"2015-11-24T20:56:33.609Z"},{"number":"0.2.1","date":"2015-12-08T20:18:40.281Z"}],"readme":"## nonstop package resource\nThis module can be used to provide the nonstop package hypermedia API to any [autohost](https://github.com/LeanKit-Labs/autohost) server that's using `hyped`.\n\n### Why?\nIf you have a client application that you'd like to have installed that auto-updates itself whenever new versions are available - this makes adding the server side support very simple.\n\n### Using with Autohost\nNPM install this module to your project\n\n\tnpm install nonstop-package-resource hyped -S\n\nAdd the module to the `modules` property in your autohost init:\n\n```javascript\nvar hyped = require( 'hyped' );\nvar host = require( 'autohost' );\n\nhost.init( {\n\t\tport: 8888,\n\t\tnoOptions: true,\n\t\turlStrategy: hyped.urlStrategy,\n\t\tmodules: [ 'nonstop-package-resource' ]\n\t} )\n\t.then( hyped.addResources );\nhyped.setupMiddleware( host );\n```\n\n### Consuming\nTo consume this API from Node, please look at [nonstop-index-client](https://github.com/LeanKit-Labs/nonstop-index-client). It uses [halon](https://github.com/LeanKit-Labs/halon) to discover the API this makes available via [hyped](https://github.com/LeanKit-Labs/hyped).\n\n## API\nThe API this adds is relatively straight-forward. It allows for\n\n### Download By Filter\nIf you know the criteria for uniquely identifying a file (project, owner, branch, version or slug), you can provide the criteria via query parameters to get the matching file.\n\n```bash\nGET /package?project=test&owner=me&branch=master&version=0.1.0-1\n\nGET /package?slug=1da43f9\n```\n\n### Download By File Name\nIf you know the filename, it can be provided in the URL path for the get.\n\n```bash\nGET /package/test~my~develop~53688240~0.1.0~1~linux~any~any~x64.tar.gz\n```\n\n### List Packages\nThis allows you to find packages that match the criteria provided via query parameters. It sorts the results by the semantic version of the packages from the newest to oldest.\n\n```bash\nGET /package?project=test&owner=your&branch=feature-branch&version=0.1.0-1\n```\n\n### List Projects\nProvides a unique set of projects that match the criteria. Useful for finding all a particular owner's projects or seeing the builds for a particular slug.\n\n```bash\nGET /project?owner=teamMember\n```\n\n### List Terms\nA way to see all possible values for specific package filters. *Warning* can be time consuming since some storage mechanisms will have to scan all packages to determine the term list. You can limit the terms by providing a filter to only see values across a subset of packages.\n\n```bash\nGET /terms?owner=myOrg\n```\n\n### Upload\nAllows build agents to upload a new package.\n\n```bash\nPOST /package\n```\n\n### Promote\nPromotes a package to release. Nonstop builds will _not_ produce a release version, there will always be a build number appended so that packages look like pre-releases to the service hosts. Promoting a package removes the build number and creates a non-pre-release semantic version of that package. Use with caution.\n\n## Configuration\nBy default this module uses the file system and memory to manage packages and the related information. The major trade-off being that everything is done in-memory which means some performance degredation over time.\n\nNo additional configuration is required to get default behavior.\n\n### Alternate Storage Providers\nThis module supports optional S3 package storage and optional RethinkDB package information storage. They can be used together or separately. If only Rethink is configured, the local file system is still used to store packages.\n\n### S3 storage\nTo have packages stored in S3, you'll need to provide configuration. Configuration for this module is provided via fount:\n\n```\nvar fount = require( 'fount' );\nvar hyped = require( 'hyped' );\nvar host = require( 'autohost' );\n\nvar storage = {\n\ts3: {\n\t\tid: '',\n\t\tkey: '',\n\t\tbucket: ''\n\t}\n};\n\nfount.register( 'storageConfig', storage );\n\nhost.init( {\n\t\tport: 8888,\n\t\tnoOptions: true,\n\t\turlStrategy: hyped.urlStrategy,\n\t\tmodules: [ 'nonstop-package-resource' ]\n\t} )\n\t.then( hyped.addResources );\nhyped.setupMiddleware( host );\n```\n\n### RethinkDB Info\nTo have packages information stored in RethinkDB, you'll need to provide configuration. Configuration for this module is provided via fount:\n\n```\nvar fount = require( 'fount' );\nvar hyped = require( 'hyped' );\nvar host = require( 'autohost' );\n\nvar storage = {\n\trethink: {\n\t\thost: 'localhost',\n\t\tport: 28015,\n\t\tdatabase: 'nonstop'\n\t}\n};\n\nfount.register( 'storageConfig', storage );\n\nhost.init( {\n\t\tport: 8888,\n\t\tnoOptions: true,\n\t\turlStrategy: hyped.urlStrategy,\n\t\tmodules: [ 'nonstop-package-resource' ]\n\t} )\n\t.then( hyped.addResources );\nhyped.setupMiddleware( host );\n```\n","created":"2014-09-22T23:37:12.041Z","modified":"2015-12-08T20:18:40.281Z","lastPublisher":{"name":"arobson","email":"asrobson@gmail.com"},"owners":[{"name":"arobson","email":"asrobson@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"nonstop-package-resource","_nodeVersion":"0.12.7","_npmUser":{"name":"arobson","email":"asrobson@gmail.com"},"_npmVersion":"2.11.3","_rev":"1-3bec67004b40dbdc1e648b7a549ee689","_shasum":"8ea87eed41db9990b2dad91781777bdd143ed5cd","author":{"name":"Alex Robson"},"bugs":{"url":"https://github.com/LeanKit-Labs/nonstop-package-resource/issues"},"directories":{},"dist-tags":{"latest":"0.2.1"},"dist":{"shasum":"8ea87eed41db9990b2dad91781777bdd143ed5cd","tarball":"http://registry.npmjs.org/nonstop-package-resource/-/nonstop-package-resource-0.2.1.tgz"},"maintainers":[{"name":"arobson","email":"asrobson@gmail.com"}],"readmeFilename":"README.md","time":{"modified":"2015-12-08T20:18:40.281Z","created":"2014-09-22T23:37:12.041Z","0.1.0":"2014-09-22T23:37:12.041Z","0.1.1":"2014-11-06T17:09:27.974Z","0.1.2":"2014-11-10T23:26:30.100Z","0.1.3":"2014-11-11T17:36:11.728Z","0.1.4":"2014-11-14T08:30:39.039Z","0.1.5":"2014-11-14T08:35:12.901Z","0.1.6":"2014-11-17T03:54:44.177Z","0.1.7":"2014-12-18T18:42:25.840Z","0.1.8":"2015-08-12T16:34:13.508Z","0.1.9":"2015-08-12T17:29:47.416Z","0.1.10":"2015-08-19T06:20:49.606Z","0.1.11":"2015-08-24T04:20:52.694Z","0.1.12":"2015-08-24T08:36:45.122Z","0.1.13":"2015-08-24T08:57:21.309Z","0.2.0-1":"2015-11-20T19:01:14.835Z","0.2.0-2":"2015-11-23T12:27:55.497Z","0.2.0-3":"2015-11-23T16:36:41.200Z","0.2.0-4":"2015-11-23T19:30:44.409Z","0.2.0-5":"2015-11-23T22:58:28.029Z","0.2.0-6":"2015-11-24T08:08:18.077Z","0.2.0-7":"2015-11-24T08:41:53.436Z","0.2.0-8":"2015-11-24T08:59:18.840Z","0.2.0":"2015-11-24T20:56:33.609Z","0.2.1":"2015-12-08T20:18:40.281Z"}}}