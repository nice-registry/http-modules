{"name":"weblet","version":"0.0.54","description":"Weblet is a Web HTTP Server software","bin":{"weblet":"./weblet.sh"},"scripts":{"test":"echo \"Error: no test specified\" && exit 1"},"repository":"https://github.com/iwebapp/weblet","keywords":["websocket","weblet","CGI","http","https","server","service","PHP","swordfish"],"dependencies":{"ws":"x.x.x","swordfish":"0.1.19","open":"x.x.x"},"license":"ISC","homepage":"https://github.com/iwebapp/weblet","versions":[{"number":"0.0.0","date":"2016-04-26T03:10:35.986Z"},{"number":"0.0.1","date":"2016-04-26T03:23:12.883Z"},{"number":"0.0.2","date":"2016-04-26T03:29:42.603Z"},{"number":"0.0.3","date":"2016-04-26T06:33:44.999Z"},{"number":"0.0.4","date":"2016-04-26T06:36:42.011Z"},{"number":"0.0.5","date":"2016-04-26T06:41:25.559Z"},{"number":"0.0.6","date":"2016-04-26T07:03:49.675Z"},{"number":"0.0.7","date":"2016-04-26T09:52:19.767Z"},{"number":"0.0.8","date":"2016-04-26T09:59:24.735Z"},{"number":"0.0.9","date":"2016-04-27T02:20:20.679Z"},{"number":"0.0.10","date":"2016-04-27T09:52:02.751Z"},{"number":"0.0.11","date":"2016-04-28T08:28:39.683Z"},{"number":"0.0.12","date":"2016-05-10T02:13:29.076Z"},{"number":"0.0.13","date":"2016-05-17T02:12:34.104Z"},{"number":"0.0.14","date":"2016-06-08T02:04:10.134Z"},{"number":"0.0.15","date":"2016-06-08T02:05:51.602Z"},{"number":"0.0.16","date":"2016-06-08T02:13:23.500Z"},{"number":"0.0.17","date":"2016-07-20T09:26:35.540Z"},{"number":"0.0.18","date":"2016-11-07T09:51:02.672Z"},{"number":"0.0.19","date":"2016-11-07T09:56:31.260Z"},{"number":"0.0.20","date":"2016-11-08T01:12:26.448Z"},{"number":"0.0.21","date":"2016-11-08T02:05:24.878Z"},{"number":"0.0.22","date":"2016-11-08T03:26:21.922Z"},{"number":"0.0.23","date":"2016-11-08T04:01:44.409Z"},{"number":"0.0.24","date":"2016-11-08T05:12:29.184Z"},{"number":"0.0.25","date":"2016-11-08T07:30:07.928Z"},{"number":"0.0.26","date":"2016-11-08T07:58:56.611Z"},{"number":"0.0.27","date":"2016-11-08T08:12:57.821Z"},{"number":"0.0.28","date":"2016-11-09T02:58:33.008Z"},{"number":"0.0.29","date":"2016-11-09T03:41:00.882Z"},{"number":"0.0.30","date":"2016-11-09T03:45:53.078Z"},{"number":"0.0.31","date":"2016-11-09T03:47:10.334Z"},{"number":"0.0.32","date":"2016-11-09T08:12:48.041Z"},{"number":"0.0.33","date":"2016-11-09T08:14:01.142Z"},{"number":"0.0.34","date":"2016-11-09T08:51:34.115Z"},{"number":"0.0.35","date":"2016-11-09T08:52:25.394Z"},{"number":"0.0.36","date":"2016-11-09T08:57:00.618Z"},{"number":"0.0.37","date":"2016-11-10T02:24:02.034Z"},{"number":"0.0.38","date":"2016-11-10T03:11:40.626Z"},{"number":"0.0.39","date":"2016-11-10T03:13:59.843Z"},{"number":"0.0.40","date":"2016-11-11T05:17:16.722Z"},{"number":"0.0.41","date":"2016-11-11T05:26:09.321Z"},{"number":"0.0.42","date":"2016-11-15T09:04:49.809Z"},{"number":"0.0.43","date":"2016-11-15T09:12:45.970Z"},{"number":"0.0.44","date":"2016-11-15T09:37:00.632Z"},{"number":"0.0.45","date":"2016-12-30T09:57:30.480Z"},{"number":"0.0.46","date":"2017-02-27T04:32:18.109Z"},{"number":"0.0.47","date":"2017-03-13T03:06:27.174Z"},{"number":"0.0.48","date":"2017-04-05T08:16:23.690Z"},{"number":"0.0.49","date":"2017-05-05T06:43:05.946Z"},{"number":"0.0.50","date":"2017-05-05T06:52:54.860Z"},{"number":"0.0.51","date":"2017-05-05T07:19:27.574Z"},{"number":"0.0.52","date":"2017-05-10T09:48:31.983Z"},{"number":"0.0.53","date":"2017-05-23T06:56:25.025Z"},{"number":"0.0.54","date":"2017-06-01T03:29:25.140Z"}],"readme":"Weblet\n=========\n\n### Weblet 是一個 Web HTTP 服務器軟件．\n(Weblet is a Web HTTP Server software.)\n它是一個非常簡單的面向命令行的Web服務器軟件．\n主要爲Web程式開發者提供一極爲簡單的Web開發環境．\n這個程式是用 SWordFish 語言開發的，也算是這個新的編程語言的一個開發示例．\n同時也可以支持　CGI　腳本．也支持 WebSocket 服務。\n## 安裝方法　(　Installation　)\n\n```bash\n$ sudo npm install swordfish -g\n$ sudo npm install weblet -g\n```\n### 用法示例：( Example )\n在當前目錄下開啓一個 Web 服務．\n```\n$ weblet .\n```\n在指定的目錄 htmldoc 下開啓一個 Web 服務，並且設定以 cgi 爲後綴名的文件被視爲 CGI 程式．\n```\n$ weblet -x cgi htmldoc\n```\n在指定的目錄 htmldoc 下開啓一個 Web 服務，並且設定以 cgi 爲後綴名的文件被視爲 CGI 程式．\n同時以 php 爲後綴名的文件被視爲 PHP 程式，指定其由 /usr/bin/php-cgi 程式來運行 PHP 腳本．\n\n```\n$ weblet -x cgi -x php=/usr/bin/php-cgi htmldoc\n```\n加 -p 8080 參數，指此 HTTP 服務綁定在系統 8080 端口上，如果不指定，默認端口爲 9999 .\n\n```\nweblet -p 8080 htmldoc\n```\n\nphp-cgi 在 apache 以外時，要設置　php.ini 中的\n```\ncgi.force_redirect = 0\n```\n\n```\nweblet -x php=D:\\php\\php-cgi.exe . \n```\n一個　HTTPS 服務設置實例．(HTTPS Server Setup Example)\n```\n#產生一個key文件\n$ openssl genrsa -out key.pem\n#生成證書申請文件\n$ openssl req -new -key key.pem -out csr.pem\n#自簽發申請文件產生證書．\n$ openssl x509 -req -in csr.pem -signkey key.pem -out cert.pem\n#刪除申請文件\n$ rm csr.pem\n#最後開啓 HTTPS 服務\n$ weblet -c cert.pem -k key.pem . \n```\n\n## 概括的使用說明　(　Overview Usage　)\n顯示用法幫助：\n```\nweblet -h\n```\n\n```\nUsage:\nweblet [options] <directory>\nOptions:\n -x, <cgi>                 Identify CGI script by file suffix name. can set multiple times.\n                           For example:\n                             -x cgi\n                             -x php=/usr/bin/php-cgi\n -p, <port>                listen port number. default 9999\n -a, <address>             Local interface to bind to for network connections. default 0.0.0.0\n -c, <CertificatePath>     HTTPS certificate file path.\n -k, <PrivatekeyPath>      HTTPS private key file path.\n -e, <path>                additional exe file path for CGI sub process.\n -s,                       Use a CGI script file to handle WebSocket connections. The -x option must be on\n -o,                       Open the URL to this service by browser window.\n -h,                    display this help and exit\nDirectory:  Document Root.\n```\n\n#一個打印環境變量的 CGI 腳本示例:\n\nlinux 系統下啓動 http server\n```\nweblet.sw -x swp .\n```\nwindows　系統下啓動 http server\n```\nweblet.sw -x swp=swordfish .\n```\n\n```\n#!/usr/bin/env swordfish\n##\n##  printenv.swp -- demo CGI program which just prints its environment\n##\nrequire:(JSEval \"require\")\npath   :(require \"path\")\nD      :(.path \"sep\")\n\nnodejs: (JSCallObject [$PATH_SWORDFISH \"nodejs\"] \"join\" D)\n(load (+ nodejs D \"package.sw\"))\nprime:(JSCallObject [$PATH_SWORDFISH \"prime\"] \"join\" D)\n((. use \"PushINC\") prime true)\n((. use \"PushINC\") \".\" (GetScriptURI))\n\n(use \"app.info\"\n\"io.print\"\n(lambda (AppInfo\nprint\n)\n\t(print \"Content-type: text/plain; charset=iso-8859-1\\n\\n\")\n\tappInfo:((. AppInfo \"Dump\"))\n\t(print appInfo)\n))\n```\n\n\n#開啓 WebSocket 服務\n```\nweblet -s -x swp .\n\n```\n在 windows 系統下可以這樣：\n```\nweblet -s -x swp=swordfish .\n```\n這樣以 .swp 結尾的 CGI 程式文件,會處理　WebSocket 鏈接。\n\n這個 CGI 程式，必須是　swordfish　，或 nodejs  腳本。\n因爲 它用 Nodejs 的　IPC Message 通訊機制 [child.send()]\n每個 WebSocket 鏈接 會產生一個 CGI 進程。\nWebSocket 鏈接關掉會導致 CGI 退出。\n同樣 CGI 退出會導致 WebSocket 鏈接關掉。　\n同時 常規的 CGI　環境變量也會在　CGI　進程中有效。\n\n以下是個簡單的 message 響應腳本.\n```\n#!/usr/bin/env swordfish\nrequire:(JSEval \"require\")\npath   :(require \"path\")\nD      :(.path \"sep\")\n\nnodejs: (JSCallObject [$PATH_SWORDFISH \"nodejs\"] \"join\" D)\n(load (+ nodejs D \"package.sw\"))\nprime:(JSCallObject [$PATH_SWORDFISH \"prime\"] \"join\" D)\n((. use \"PushINC\") prime true)\n((. use \"PushINC\") \".\" (GetScriptURI))\n\n(use \"app.info\"\n(lambda (AppInfo\n)\n\tprocess:(JSEval \"process\")\n\t((. process \"on\") \"message\" (JSCallback (lambda (msg)\n\t\t\t((. process \"send\") msg)\n\t\t\t)\n\t\t))\n))\n\n```\n\n\n\n\n[child.send()]: https://nodejs.org/api/child_process.html#child_process_child_send_message_sendhandle_options_callback \"child.send()\"\n\n#know issue:\n-x php=D:\\php\\php-cgi.exe\n如果寫成 -x \"php=D:\\php \\php-cgi.exe\"\n是不能工作的，因爲中間有空格，這時CGI子進程就命令行就成這樣了：\nD:\\php \"\\php-cgi.exe\" \"current_cgi_script.php\"\n如果的確需要有空格程式如　：　\"C:\\Program Files\\php5\\php-cgi.exe\n可以這樣寫選項\n```\n-e \"C:\\Program Files\\php5\" -x php=php-cgi\n```\n因爲 -e 是加path環境變量,這樣具體exe文件就不用寫全路徑．\n這樣寫是爲了繞開nodejs spawn 中給有空格的path會出錯的問題．","created":"2016-04-26T03:10:35.986Z","modified":"2017-06-01T03:29:25.140Z","lastPublisher":{"name":"iwebapp","email":"c8ggg8c@protonmail.com"},"owners":[{"name":"iwebapp","email":"ijkter@live.com"}],"other":{"_attachments":{},"_from":".","_id":"weblet","_nodeVersion":"6.10.3","_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/weblet-0.0.54.tgz_1496287764992_0.8322337183635682"},"_npmUser":{"name":"iwebapp","email":"c8ggg8c@protonmail.com"},"_npmVersion":"3.10.10","_rev":"38-4d37011907712c2edacac8e71ef8fcef","_shasum":"759b1ede1b4bf10b24a055237788e5dc80924558","author":{"name":"iwebapp"},"bugs":{"url":"https://github.com/iwebapp/weblet/issues"},"directories":{},"dist-tags":{"latest":"0.0.54"},"dist":{"shasum":"759b1ede1b4bf10b24a055237788e5dc80924558","tarball":"https://registry.npmjs.org/weblet/-/weblet-0.0.54.tgz"},"maintainers":[{"name":"iwebapp","email":"ijkter@live.com"}],"readmeFilename":"README.md","time":{"modified":"2017-06-01T03:29:25.140Z","created":"2016-04-26T03:10:35.986Z","0.0.0":"2016-04-26T03:10:35.986Z","0.0.1":"2016-04-26T03:23:12.883Z","0.0.2":"2016-04-26T03:29:42.603Z","0.0.3":"2016-04-26T06:33:44.999Z","0.0.4":"2016-04-26T06:36:42.011Z","0.0.5":"2016-04-26T06:41:25.559Z","0.0.6":"2016-04-26T07:03:49.675Z","0.0.7":"2016-04-26T09:52:19.767Z","0.0.8":"2016-04-26T09:59:24.735Z","0.0.9":"2016-04-27T02:20:20.679Z","0.0.10":"2016-04-27T09:52:02.751Z","0.0.11":"2016-04-28T08:28:39.683Z","0.0.12":"2016-05-10T02:13:29.076Z","0.0.13":"2016-05-17T02:12:34.104Z","0.0.14":"2016-06-08T02:04:10.134Z","0.0.15":"2016-06-08T02:05:51.602Z","0.0.16":"2016-06-08T02:13:23.500Z","0.0.17":"2016-07-20T09:26:35.540Z","0.0.18":"2016-11-07T09:51:02.672Z","0.0.19":"2016-11-07T09:56:31.260Z","0.0.20":"2016-11-08T01:12:26.448Z","0.0.21":"2016-11-08T02:05:24.878Z","0.0.22":"2016-11-08T03:26:21.922Z","0.0.23":"2016-11-08T04:01:44.409Z","0.0.24":"2016-11-08T05:12:29.184Z","0.0.25":"2016-11-08T07:30:07.928Z","0.0.26":"2016-11-08T07:58:56.611Z","0.0.27":"2016-11-08T08:12:57.821Z","0.0.28":"2016-11-09T02:58:33.008Z","0.0.29":"2016-11-09T03:41:00.882Z","0.0.30":"2016-11-09T03:45:53.078Z","0.0.31":"2016-11-09T03:47:10.334Z","0.0.32":"2016-11-09T08:12:48.041Z","0.0.33":"2016-11-09T08:14:01.142Z","0.0.34":"2016-11-09T08:51:34.115Z","0.0.35":"2016-11-09T08:52:25.394Z","0.0.36":"2016-11-09T08:57:00.618Z","0.0.37":"2016-11-10T02:24:02.034Z","0.0.38":"2016-11-10T03:11:40.626Z","0.0.39":"2016-11-10T03:13:59.843Z","0.0.40":"2016-11-11T05:17:16.722Z","0.0.41":"2016-11-11T05:26:09.321Z","0.0.42":"2016-11-15T09:04:49.809Z","0.0.43":"2016-11-15T09:12:45.970Z","0.0.44":"2016-11-15T09:37:00.632Z","0.0.45":"2016-12-30T09:57:30.480Z","0.0.46":"2017-02-27T04:32:18.109Z","0.0.47":"2017-03-13T03:06:27.174Z","0.0.48":"2017-04-05T08:16:23.690Z","0.0.49":"2017-05-05T06:43:05.946Z","0.0.50":"2017-05-05T06:52:54.860Z","0.0.51":"2017-05-05T07:19:27.574Z","0.0.52":"2017-05-10T09:48:31.983Z","0.0.53":"2017-05-23T06:56:25.025Z","0.0.54":"2017-06-01T03:29:25.140Z"}}}