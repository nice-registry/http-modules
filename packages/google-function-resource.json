{"name":"google-function-resource","version":"0.1.0","description":"Resource management library for Google HTTP Functions","keywords":["google cloud","google cloud platform","google cloud functions","google datastore","resource management","resource","serverless"],"main":"index.js","scripts":{"test":"eslint lib/** && nyc mocha","report":"npm install -g codeclimate-test-reporter && codeclimate-test-reporter < coverage/lcov.info"},"repository":"https://github.com/pauloddr/google-function-resource","license":"MIT","homepage":"https://github.com/pauloddr/google-function-resource#readme","dependencies":{"@google-cloud/datastore":"1.0.1","gstore-node":"1.2.0"},"devDependencies":{"body-parser":"1.17.1","chai":"3.5.0","chai-http":"3.0.0","dotenv":"4.0.0","eslint":"3.19.0","express":"4.15.2","mocha":"3.3.0","nyc":"10.3.0"},"nyc":{"include":["index.js","lib/**/*.js"],"reporter":["lcov","text-summary","html"]},"gitHead":"26513414fadd75db3660d3093bf8d20dc0a45e5f","versions":[{"number":"0.1.0","date":"2017-05-14T21:54:53.192Z"}],"readme":"# google-function-resource\n\n[![Build Status](https://semaphoreci.com/api/v1/pauloddr/google-function-resource/branches/master/shields_badge.svg)](https://semaphoreci.com/pauloddr/google-function-resource)\n[![Test Coverage](https://lima.codeclimate.com/github/pauloddr/google-function-resource/badges/coverage.svg)](https://lima.codeclimate.com/github/pauloddr/google-function-resource/coverage)\n[![Code Climate](https://lima.codeclimate.com/github/pauloddr/google-function-resource/badges/gpa.svg)](https://lima.codeclimate.com/github/pauloddr/google-function-resource)\n[![npm version](https://badge.fury.io/js/google-function-resource.svg)](https://badge.fury.io/js/google-function-resource)\n\nA simple resource management system for [Google Cloud HTTP Functions](https://cloud.google.com/functions/docs/writing/http).\n\nIt stores data in [Google Datastore](https://cloud.google.com/datastore/) using [gstore-node](https://github.com/sebelga/gstore-node).\n\n## Usage\n\nFor a resource named \"Task\" for example, create a new Google HTTP Function to manage your resource with the following code:\n\n```javascript\nconst tasks = require('google-function-resource')({\n  name: 'Task',\n  schema: {\n    title: {\n      type: 'string',\n      required: true\n    },\n    description: {\n      type: 'string'\n    },\n    createdOn: {\n      type: 'datetime',\n      write: false,\n      excludeFromIndexes: true\n    },\n    modifiedOn: {\n      type: 'datetime',\n      write: false,\n      excludeFromIndexes: true\n    }\n  }\n});\n\nexports.handleRequest = function (req, res) {\n  tasks.manage(req, res);\n};\n```\n\nAdd the library to __package.json__:\n\n```json\n{\n  \"name\": \"your-function\",\n  \"version\": \"0.0.1\",\n  \"dependencies\": {\n    \"google-function-resource\": \"0.1.0\"\n  }\n}\n```\n\nFinally, make sure the __entry point__ is correct. In the example above, it should be `handleRequest`.\n\nThen, assuming you named your function \"tasks\", the following endpoints will be served by your function:\n\n* `POST /tasks`\n* `POST /tasks/signin`\n* `POST /tasks/signout`\n* `GET /tasks`\n* `GET /tasks/:id`\n* `PUT|PATCH /tasks/:id`\n* `DELETE /tasks/:id`\n* `DELETE /tasks/signin`\n* `OPTIONS /tasks(/*)`\n\nRead more about how each endpoint works in the next section.\n\n## Actions\n\nAll actions respond with a JSON object with a `code` attribute with the following possible string values:\n\n* `OK` - action has completed successfully\n* `BAD_REQUEST` - action has failed due to request not being in expected format\n* `NOT_FOUND` - endpoint not found, or resource not found\n* `INTERNAL_ERROR` - an unexpected error has occurred while performing the action\n\nFor the next sections, keep in mind that the resource endpoint is determined by the name of your function. So when this document says:\n\n* `POST /resources`\n\nAnd your function is named \"tasks\", then the correct endpoint will be:\n\n* `POST /tasks`\n\n### Create Resource\n\n* `POST /resources`\n\nThis endpoint creates a new resource.\n\n<table>\n<tr><th>Request Body</th><th>Response</th></tr>\n<tr><td>\n\n```javascript\n{\n  \"title\": \"My New Task\",\n  \"description\": \"description of my new task\"\n}\n```\n\n</td><td>\n\n```javascript\n{\n  \"code\": \"OK\",\n  \"resource\": {\n    \"id\": \"12345\",\n    \"title\": \"My New Task\",\n    \"description\": \"description of my new task\",\n    \"createdOn\": \"...\"\n  }\n}\n```\n\n</td></tr>\n</table>\n\n### List Resources\n\n* `GET /resources`\n\nReturns a list of resources with pagination. Default page size is 20.\n\n<table>\n<tr><th>Request Query Parameters</th><th>Response</th></tr>\n<tr><td>\n\n* `/resources`\n  * first 20 resources\n* `/resources?limit=10`\n  * first 10 resources\n* `/resources?start=NextPageKey000123`\n  * first 20 resources\n  * starting from key \"NextPageKey000123\"\n\n</td><td>\n\n```javascript\n{\n  \"code\": \"OK\",\n  \"resources\": [\n    {\"id\": \"1\", ...},\n    {\"id\": \"2\", ...},\n    ...\n  ],\n  \"limit\": 20,\n  \"next\": \"NextPageKey000123\"\n}\n```\n\n</td></tr>\n</table>\n\nThe `next` attribute will be absent from the response if there are no more entries to fetch.\n\n(Filters and sorting are not yet supported.)\n\n### Show Resource\n\n* `GET /resources/:id`\n\nReturns data of a single resource.\n\n<table>\n<tr><th>Request URI</th><th>Response</th></tr>\n<tr><td>\n\n* `/resources/12345`\n  * shows info of resource ID=12345\n\n</td><td>\n\n```javascript\n{\n  \"code\": \"OK\",\n  \"resource\": {\n    \"id\": \"12345\",\n    \"title\": \"My Task\",\n    \"description\": \"description of task\",\n    \"createdOn\": \"...\"\n  }\n}\n```\n\n</td></tr>\n</table>\n\n### Update Resource\n\n* `PUT /resources/:id`\n* `PATCH /resources/:id`\n\nUpdates data of a single resource.\n\nBoth `PUT` and `PATCH` methods behave the same way, and partial data can be provided.\n\n<table>\n<tr><th>Request Body</th><th>Response</th></tr>\n<tr><td>\n\n```javascript\n{\n  \"title\": \"My edited Task\"\n}\n```\n\n</td><td>\n\n```javascript\n{\n  \"code\": \"OK\",\n  \"resource\": {\n    \"id\": \"12345\",\n    \"title\": \"My edited Task\",\n    // ... rest of fields\n  }\n}\n```\n\n</td></tr>\n</table>\n\n### Destroy Resource\n\n* `DELETE /resources/:id`\n\nRemoves a resource.\n\n<table>\n<tr><th>Request Body</th><th>Response</th></tr>\n<tr><td>(empty)</td><td>\n\n```javascript\n{\n  \"code\": \"OK\"\n}\n```\n\n</td></tr>\n</table>\n\n## Configuration\n\nSettings can be customized upon requiring the library, and have the following defaults:\n\n```javascript\nconst tasks = require('google-function-resource')({\n\n  // Resource name.\n  name: 'Task',\n\n  // Datastore settings.\n  datastore: {\n    kind: 'Task', // this defaults to resource name\n    namespace: undefined\n  },\n\n  // You can overwrite the full schema.\n  schema:  {\n    title: {\n      type: 'string',\n      required: true\n    },\n    description: {\n      type: 'string'\n    },\n    createdOn: {\n      type: 'datetime',\n      write: false,\n      default: Gstore.defaultValues.NOW,\n      excludeFromIndexes: true\n    },\n    modifiedOn: {\n      type: 'datetime',\n      write: false,\n      excludeFromIndexes: true\n    }\n  },\n\n  // Customize CORS headers here to anything you'd like.\n  // Multiple headers are accepted.\n  cors: {\n    \"Access-Control-Allow-Origin\": \"*\"\n  }\n\n});\n\nexports.handleRequest = function (req, res) {\n  tasks.manage(req, res);\n};\n```\n\nIf you want to customize Schema validators with your own functions, take a look at the [Gstore Schema documentation](https://sebelga.gitbooks.io/gstore-node/content/schema/).\n\n## TODO/Wishlist\n\n* Google reCAPTCHA support on resource creation and update.\n* Support other data stores (like MySQL).\n\n## License\n\nMIT\n","created":"2017-05-14T21:54:53.192Z","modified":"2017-05-14T21:54:53.192Z","lastPublisher":{"name":"pauloddr","email":"npm@pauloddr.com"},"owners":[{"name":"pauloddr","email":"npm@pauloddr.com"}],"other":{"_attachments":{},"_from":".","_id":"google-function-resource","_nodeVersion":"7.10.0","_npmOperationalInternal":{"host":"packages-18-east.internal.npmjs.com","tmp":"tmp/google-function-resource-0.1.0.tgz_1494798890896_0.9108919769059867"},"_npmUser":{"name":"pauloddr","email":"npm@pauloddr.com"},"_npmVersion":"4.2.0","_rev":"1-030968fb0bbffb7529ab0c2a56383127","_shasum":"ede5a290038fbc4b8d21b01b0f00695c306a29c5","author":{"name":"@pauloddr"},"bugs":{"url":"https://github.com/pauloddr/google-function-resource/issues"},"directories":{},"dist-tags":{"latest":"0.1.0"},"dist":{"shasum":"ede5a290038fbc4b8d21b01b0f00695c306a29c5","tarball":"https://registry.npmjs.org/google-function-resource/-/google-function-resource-0.1.0.tgz"},"maintainers":[{"name":"pauloddr","email":"npm@pauloddr.com"}],"readmeFilename":"README.md","time":{"modified":"2017-05-14T21:54:53.192Z","created":"2017-05-14T21:54:53.192Z","0.1.0":"2017-05-14T21:54:53.192Z"}}}