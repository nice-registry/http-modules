{"name":"kinto-http","version":"4.3.4","description":"JavaScript HTTP client for the Kinto API.","main":"lib/index.js","scripts":{"build":"babel -d lib/ src/","build:readme":"toctoc -w -d 2 README.md","cs-check":"prettier-check $npm_package_prettierOptions '{src,test}/**/*.js'","cs-format":"prettier $npm_package_prettierOptions '{src,test}/**/*.js' --write","dist":"mkdir -p dist && rm -f dist/*.* && npm run dist-dev && npm run dist-prod && npm run dist-noshim && npm run dist-fx","dist-dev":"browserify -s KintoClient -d -e src/index.js -o dist/kinto-http.js -t [ babelify --sourceMapRelative . ]","dist-noshim":"browserify -s KintoClient -g uglifyify --ignore babel-polyfill -e src/index.js -o dist/kinto-http.noshim.js -t [ babelify --sourceMapRelative . ]","dist-prod":"browserify -s KintoClient -g uglifyify -e src/index.js -o dist/kinto-http.min.js -t [ babelify --sourceMapRelative . ]","dist-fx":"BABEL_ENV=firefox browserify -s KintoHttpClient --ignore events --bare -e fx-src/index.js -o temp.jsm -t [ babelify --sourceMapRelative . ] && mkdir -p dist && cp fx-src/jsm_prefix.js dist/moz-kinto-http-client.js && echo \"\n/*\n * Version $npm_package_version - $(git rev-parse --short HEAD)\n */\n\" >> dist/moz-kinto-http-client.js && cat temp.jsm >> dist/moz-kinto-http-client.js && rm temp.jsm","precommit":"lint-staged","prepublish":"npm run build:readme","publish-to-npm":"npm run build && npm run dist && npm publish","report-coverage":"npm run test-cover && ./node_modules/coveralls/bin/coveralls.js < ./coverage/lcov.info","tdd":"babel-node node_modules/.bin/_mocha --require ./test/setup-jsdom.js --watch 'test/**/*_test.js'","test":"npm run test-nocover","test-cover":"babel-node node_modules/.bin/babel-istanbul cover --report text $npm_package_config_ISTANBUL_OPTS node_modules/.bin/_mocha -- --require ./test/setup-jsdom.js 'test/**/*_test.js'","test-cover-html":"babel-node node_modules/.bin/babel-istanbul cover --report html $npm_package_config_ISTANBUL_OPTS node_modules/.bin/_mocha -- --require ./test/setup-jsdom.js 'test/**/*_test.js' && open coverage/index.html","test-nocover":"babel-node node_modules/.bin/_mocha --require ./test/setup-jsdom.js 'test/**/*_test.js'","lint":"eslint src test"},"prettierOptions":"--trailing-comma es5 --semi","lint-staged":{"{src,test}/**/*.js":["npm run lint","npm run cs-format","git add"]},"repository":"https://github.com/Kinto/kinto-http.js","keywords":["kinto","http","client","api"],"license":"Apache-2.0","homepage":"https://github.com/Kinto/kinto-http.js#readme","dependencies":{"uuid":"^3.0.1"},"devDependencies":{"atob":"^2.0.3","babel-cli":"^6.22.2","babel-core":"^6.22.1","babel-eslint":"^7.1.1","babel-istanbul":"^0.12.1","babel-loader":"^6.2.10","babel-plugin-transform-async-to-generator":"^6.22.0","babel-plugin-transform-decorators-legacy":"^1.3.4","babel-plugin-transform-es2015-modules-commonjs":"^6.22.0","babel-plugin-transform-object-rest-spread":"^6.22.0","babel-polyfill":"^6.22.0","babel-preset-es2015":"^6.22.0","babelify":"^7.3.0","browserify":"^14.0.0","btoa":"^1.1.2","chai":"^3.5.0","chai-as-promised":"^6.0.0","coveralls":"^2.11.16","esdoc":"^0.5.2","esdoc-importpath-plugin":"0.1.0","eslint":"3.15.0","form-data":"^2.1.2","husky":"^0.13.2","isomorphic-fetch":"^2.2.1","jsdom":"^9.10.0","kinto-node-test-server":"^1.0.0","lint-staged":"^3.3.2","mocha":"^3.2.0","prettier":"^1.2.2","prettier-check":"^1.0.0","sinon":"^1.17.7","toctoc":"^0.2.3","uglifyify":"^3.0.4"},"engines":{"node":">=6"},"gitHead":"1294207d32d035fa59068d2148a7af8a1a1b7593","versions":[{"number":"1.0.0","date":"2016-06-16T11:59:37.689Z"},{"number":"2.0.0","date":"2016-06-28T07:50:35.479Z"},{"number":"2.1.0","date":"2016-07-18T17:13:04.925Z"},{"number":"2.1.1","date":"2016-07-19T07:48:55.923Z"},{"number":"2.2.0","date":"2016-07-21T09:11:52.632Z"},{"number":"2.2.1","date":"2016-08-22T14:02:25.234Z"},{"number":"2.3.0","date":"2016-08-23T11:15:44.272Z"},{"number":"2.4.0","date":"2016-08-25T11:45:55.620Z"},{"number":"2.4.1","date":"2016-08-31T13:53:19.186Z"},{"number":"2.5.0","date":"2016-09-01T09:03:02.715Z"},{"number":"2.5.1","date":"2016-09-15T10:24:53.878Z"},{"number":"2.5.2","date":"2016-11-04T14:51:45.247Z"},{"number":"2.6.0","date":"2016-12-15T16:53:59.329Z"},{"number":"2.7.0","date":"2017-01-16T14:34:18.731Z"},{"number":"3.0.0","date":"2017-02-09T10:48:12.420Z"},{"number":"3.1.0","date":"2017-03-01T13:52:15.755Z"},{"number":"4.0.0","date":"2017-03-02T22:28:41.002Z"},{"number":"4.1.0","date":"2017-03-14T11:04:52.507Z"},{"number":"4.2.0","date":"2017-03-17T14:09:22.607Z"},{"number":"4.3.0","date":"2017-04-10T20:23:36.753Z"},{"number":"4.3.1","date":"2017-04-11T16:03:06.109Z"},{"number":"4.3.2","date":"2017-04-12T09:24:53.878Z"},{"number":"4.3.3","date":"2017-04-27T12:35:28.814Z"},{"number":"4.3.4","date":"2017-05-09T22:29:48.435Z"}],"readme":"kinto-http.js\n=============\n\n[![Build Status](https://travis-ci.org/Kinto/kinto-http.js.svg?branch=master)](https://travis-ci.org/Kinto/kinto-http.js)\n\nA JavaScript HTTP Client for the [Kinto](http://kinto-storage.org/) API.\n\nRead the [API documentation](https://doc.esdoc.org/github.com/Kinto/kinto-http.js/).\n\n## Table of Contents\n\n  - [Requirements](#requirements)\n  - [Installation](#installation)\n  - [Changelog](#changelog)\n  - [Usage](#usage)\n  - [Authentication](#authentication)\n     - [Using Basic Auth](#using-basic-auth)\n     - [Using an OAuth Bearer Token](#using-an-oauth-bearer-token)\n  - [Server information](#server-information)\n  - [Buckets](#buckets)\n     - [Listing buckets](#listing-buckets)\n     - [Creating a new bucket](#creating-a-new-bucket)\n     - [Selecting a bucket](#selecting-a-bucket)\n     - [Getting bucket data](#getting-bucket-data)\n     - [Setting bucket data](#setting-bucket-data)\n     - [Getting bucket permissions](#getting-bucket-permissions)\n     - [Setting bucket permissions](#setting-bucket-permissions)\n     - [Deleting a bucket](#deleting-a-bucket)\n     - [Creating a collection](#creating-a-collection)\n     - [Listing bucket collections](#listing-bucket-collections)\n     - [Deleting a collection](#deleting-a-collection)\n     - [Creating a user group](#creating-a-user-group)\n     - [Listing bucket groups](#listing-bucket-groups)\n     - [Getting a bucket group](#getting-a-bucket-group)\n     - [Updating an existing group](#updating-an-existing-group)\n     - [Deleting a group](#deleting-a-group)\n     - [Listing bucket history](#listing-bucket-history)\n  - [Collections](#collections)\n     - [Selecting a collection](#selecting-a-collection)\n     - [Getting collection data](#getting-collection-data)\n     - [Setting collection data](#setting-collection-data)\n     - [Getting collection permissions](#getting-collection-permissions)\n     - [Setting collection permissions](#setting-collection-permissions)\n     - [Creating a new record](#creating-a-new-record)\n     - [Retrieving an existing record](#retrieving-an-existing-record)\n     - [Updating an existing record](#updating-an-existing-record)\n     - [Deleting record](#deleting-record)\n     - [Listing records](#listing-records)\n     - [Batching operations](#batching-operations)\n  - [Listing all resource permissions](#listing-all-resource-permissions)\n  - [Attachments](#attachments)\n     - [Adding an attachment to a record](#adding-an-attachment-to-a-record)\n     - [Updating an attachment](#updating-an-attachment)\n     - [Deleting an attachment](#deleting-an-attachment)\n  - [Generic bucket and collection options](#generic-bucket-and-collection-options)\n  - [The safe option explained](#the-safe-option-explained)\n     - [Safe creations](#safe-creations)\n     - [Safe updates](#safe-updates)\n     - [Safe deletions](#safe-deletions)\n  - [Generic options for list operations](#generic-options-for-list-operations)\n     - [Sorting](#sorting)\n     - [Polling for changes](#polling-for-changes)\n     - [Paginating results](#paginating-results)\n  - [Events](#events)\n     - [The backoff event](#the-backoff-event)\n     - [The deprecated event](#the-deprecated-event)\n     - [The retry-after event](#the-retry-after-event)\n  - [Browser Compatibility](#browser-compatibility)\n  - [Upgrading](#upgrading)\n     - [From 1.x to 2.x](#from-1-x-to-2-x)\n  - [Contributing](#contributing)\n     - [Coding style](#coding-style)\n     - [Integration tests](#integration-tests)\n     - [Releasing](#releasing)\n\n---\n\n## Requirements\n\n- Kinto server v6.0.0+\n\n## Installation\n\nIn the browser, you can load prebuilt scripts hosted on unpkg:\n\n- [kinto-http.js](https://unpkg.com/kinto-http/dist/kinto-http.js)\n- [kinto-http.min.js](https://unpkg.com/kinto-http/dist/kinto-http.min.js)\n- [kinto-http.noshim.js](https://unpkg.com/kinto-http/dist/kinto-http.noshim.js)\n\n```html\n<script src=\"https://unpkg.com/kinto-http/dist/kinto-http.min.js\"></script>\n```\n\nIn nodejs:\n\n```\n$ npm install kinto-http --save\n```\n\nThen (ES6):\n\n```js\nimport KintoClient from \"kinto-http\";\n```\n\nOr (ES5):\n\n```js\nvar KintoClient = require(\"kinto-http\").default;\n```\n\nNote that this HTTP client can be transparently used server side or in a regular browser page. In the browser, creating an instance is achieved that way:\n\n```js\nconst client = new KintoClient(\"http://\");\n```\n\n## Changelog\n\nSee [upgrading docs](#upgrading) and the full [detailed changelog on Github](https://github.com/Kinto/kinto-http.js/releases).\n\n\n## Usage\n\nA client instance is created using the `KintoClient` constructor, passing it the remote Kinto server root URL, including the version:\n\n```js\nconst client = new KintoClient(\"https://kinto.dev.mozaws.net/v1\");\n```\n\n#### Options\n\n- `safe`: Adds concurrency headers to every requests. (default: `false`)\n- `events`: The events handler. If none provided an `EventEmitter` instance will be created\n- `headers`: The key-value headers to pass to each request. (default: `{}`)\n- `retry`: Number of retries to make when the server responds with a `Retry-After` response. (default: `0`)\n- `bucket`: The default bucket to use. (default: `\"default\"`)\n- `requestMode`: The HTTP [CORS](https://fetch.spec.whatwg.org/#concept-request-mode) mode. (default: `\"cors\"`)\n- `timeout`: The requests timeout in milliseconds. (default: `null`, which means \"no timeout\")\n\n\n## Authentication\n\nAuthenticating against a Kinto server can be achieved by adding an `Authorization` header to the request.\n\nBy default Kinto server supports Basic Auth authentication, but others mechanisms can be activated such as OAuth (eg. [Firefox Account](https://accounts.firefox.com/))\n\n### Using Basic Auth\n\nSimply provide an `Authorization` header option to the `Kinto` constructor:\n\n```js\nconst secretString = `${username}:${password}`;\nconst kinto = new KintoClient(\"https://my.server.tld/v1\", {\n  headers: {\n    Authorization: \"Basic \" + btoa(secretString)\n  }\n});\n```\n\n> #### Notes\n>\n> - As explained in the [server docs](http://kinto.readthedocs.io/en/stable/api/1.x/authentication.html#basic-auth), any string is accepted. You're not obliged to use the `username:password` format.\n\n### Using an OAuth Bearer Token\n\nAs for Basic Auth, once you have retrieved a valid OAuth Bearer Token, simply pass it in an `Authorization` header:\n\n```js\nconst kinto = new KintoClient(\"https://my.server.tld/v1\", {\n  headers: {\n    Authorization: `Bearer ` + oauthBearerToken)\n  }\n});\n```\n\n## Server information\n\nA Kinto server exposes some of its internal settings, information about authenticated user, the HTTP API version and the API capabilities (e.g. plugins).\n\n```js\nclient.fetchServerInfo([options])\n  .then(({data}) => ...);\n```\n\nSample result:\n\n```js\n{\n    \"project_name\": \"kinto\",\n    \"project_version\": \"3.0.2\",\n    \"url\": \"http://0.0.0.0:8889/v1/\",\n    \"project_docs\": \"https://kinto.readthedocs.io/\",\n    \"http_api_version\": \"1.6\",\n    \"settings\": {\n        \"batch_max_requests\": 25,\n        \"readonly\": false\n    },\n    \"user\": {\n        \"bucket\": \"2f9b1aaa-552d-48e8-1b78-371dd08688b3\",\n        \"id\": \"basicauth:f505765817a6b4ea46278be0620ddedd83b10f71f7695683719fe001cf0871d7\"\n    },\n    \"capabilities\": {\n        \"default_bucket\": {\n            \"description\": \"The default bucket is an alias for a personal bucket where collections are created implicitly.\",\n            \"url\": \"http://kinto.readthedocs.io/en/latest/api/1.x/buckets.html#personal-bucket-default\"\n        }\n    }\n}\n```\n\n#### Options\n\n- `headers`: Custom headers object to send along the HTTP request\n- `retry`: Number of retries when request fails (default: 0)\n\n#### Helpers\n\n- `fetchServerSettings([options])`: server settings\n- `fetchServerCapabilities([options])`: API capabilities\n- `fetchUser()`: authenticated user information\n- `fetchHTTPApiVersion([options])`: HTTP API version\n\n\n## Buckets\n\n### Listing buckets\n\n```js\nclient.listBuckets([options])\n  .then(({data}) => ...);\n```\n\nSample result:\n\n```js\n{\n  data: [\n    {\n      id: \"comments\",\n      last_modified: 1456182233221,\n    },\n    {\n      id: \"blog\",\n      last_modified: 1456181213214,\n    },\n  ]\n}\n```\n\n#### Options\n\n- `headers`: Custom headers object to send along the HTTP request\n- `retry`: Number of retries when request fails (default: 0)\n\nThis method accepts the [generic parameters for sorting, filtering and paginating results](#generic-options-for-list-operations).\n\n\n### Creating a new bucket\n\n```js\nclient.createBucket(\"blog\"[, options])\n  .then(result => ...);\n```\n\nSample result:\n\n```js\n{\n  \"data\": {\n    \"last_modified\": 1456182233221,\n    \"id\": \"blog\"\n  },\n  \"permissions\": {\n    \"write\": [\n      \"basicauth:0f7c1b72cdc89b9d42a2d48d5f0b291a1e8afd408cc38a2197cdf508269cecc8\"\n    ]\n  }\n}\n```\n\nIt's alternatively possible to create a bucket without specifying an `id`, so the\nKinto server will create one for you:\n\n```js\nclient.createBucket()\n  .then(result => ...);\n```\n\nNote: if you plan on providing options along id autogeneration, you have to specify\n`null` as the first argument:\n\n```js\nclient.createBucket(null, {data: {foo: 42}, retry: 3})\n  .then(result => ...);\n```\n\n#### Options\n\n- `data`: Arbitrary data to attach to the bucket\n- `headers`: Custom headers object to send along the HTTP request\n- `retry`: Number of retries when request fails (default: 0)\n- `safe`: Whether to override existing resource if it already exists (default: `false`)\n\n### Selecting a bucket\n\n```js\nclient.bucket(\"blog\");\n```\n\n### Getting bucket data\n\n```js\nclient.bucket(\"blog\").getData()\n  .then(result => ...);\n```\n\nSample result:\n\n```js\n{\n  \"last_modified\": 1456182336242,\n  \"id\": \"blog\",\n  \"foo\": \"bar\"\n}\n```\n\n#### Options\n\n- `headers`: Custom headers object to send along the HTTP request\n- `retry`: Number of retries when request fails (default: 0)\n\n\n### Setting bucket data\n\n```js\nclient.bucket(\"blog\").setData({foo: \"bar\"})\n  .then(result => ...);\n```\n\nSample result:\n\n```js\n{\n  \"data\": {\n    \"last_modified\": 1456182336242,\n    \"id\": \"blog\",\n    \"foo\": \"bar\"\n  },\n  \"permissions\": {\n    \"write\": [\n      \"basicauth:0f7c1b72cdc89b9d42a2d48d5f0b291a1e8afd408cc38a2197cdf508269cecc8\"\n    ]\n  }\n}\n```\n\n#### Options\n\n- `patch`: Patches existing bucket data instead of replacing them (default: `false`)\n- `headers`: Custom headers object to send along the HTTP request\n- `retry`: Number of retries when request fails (default: 0)\n- `safe`: Whether to override existing resource if it already exists (default: `false`)\n\n### Getting bucket permissions\n\n```js\nclient.bucket(\"blog\").getPermissions()\n  .then(result => ...);\n```\n\nSample result:\n\n```js\n{\n  \"write\": [\n    \"basicauth:0f7c1b72cdc89b9d42a2d48d5f0b291a1e8afd408cc38a2197cdf508269cecc8\"\n  ]\n}\n```\n\n#### Options\n\n- `headers`: Custom headers object to send along the HTTP request\n- `retry`: Number of retries when request fails (default: 0)\n\n### Setting bucket permissions\n\n```js\nconst permissions = {\n  read:  [\"github:bob\"],\n  write: [\"github:bob\", \"github:john\"]\n};\n\nclient.bucket(\"blog\").setPermissions(permissions[, options])\n  .then(result => ...);\n```\n\nSample result:\n\n```js\n{\n  \"data\": {\n    \"last_modified\": 1456182888466,\n    \"id\": \"blog\"\n  },\n  \"permissions\": {\n    \"read\": [\"github:bob\"],\n    \"write\": [\n      \"github:bob\",\n      \"basicauth:0f7c1b72cdc89b9d42a2d48d5f0b291a1e8afd408cc38a2197cdf508269cecc8\",\n      \"github:john\"\n    ]\n  }\n}\n```\n\n#### Options\n\n- `headers`: Custom headers object to send along the HTTP request\n- `retry`: Number of retries when request fails (default: 0)\n- `safe`: If `last_modified` is provided, ensures the resource hasn't been modified since that timestamp. Otherwise ensures no existing resource with the provided id will be overriden (default: `false`);\n- `last_modified`: The last timestamp we know the resource has been updated on the server.\n\n#### Notes\n\n- This operation replaces any previously set permissions;\n- Owners will always keep their `write` permission bit, as per the Kinto protocol.\n\n### Deleting a bucket\n\n```js\nclient.deleteBucket(\"testbucket\"[, options])\n  .then(result => ...);\n```\n\nSample result:\n\n```js\n{\n  \"data\": {\n    \"deleted\": true,\n    \"last_modified\": 1456182931974,\n    \"id\": \"blog\"\n  }\n}\n```\n\n#### Options\n\n- `headers`: Custom headers object to send along the HTTP request\n- `retry`: Number of retries when request fails (default: 0)\n- `safe`: Ensures the resource hasn't been modified in the meanwhile if `last_modified` is provided (default: `false`)\n- `last_modified`: The last timestamp we know the resource has been updated on the server\n\n### Creating a collection\n\n#### Named collection\n\n```js\nclient.bucket(\"blog\").createCollection(\"posts\")\n  .then(result => ...);\n```\n\nSample result:\n\n```js\n\n{\n  \"data\": {\n    \"last_modified\": 1456183004372,\n    \"id\": \"posts\"\n  },\n  \"permissions\": {\n    \"write\": [\n      \"basicauth:0f7c1b72cdc89b9d42a2d48d5f0b291a1e8afd408cc38a2197cdf508269cecc8\"\n    ]\n  }\n}\n```\n\n#### With an ID generated automatically\n\n```js\nclient.bucket(\"blog\").createCollection()\n  .then(result => ...);\n```\n\nSample result:\n\n```js\n{\n  \"data\": {\n    \"last_modified\": 1456183040592,\n    \"id\": \"OUh5VEDa\"\n  },\n  \"permissions\": {\n    \"write\": [\n      \"basicauth:0f7c1b72cdc89b9d42a2d48d5f0b291a1e8afd408cc38a2197cdf508269cecc8\"\n    ]\n  }\n}\n```\n\nNote that `OUh5VEDa` is the collection ID automatically generated by the server.\n\n#### Options\n\n- `headers`: Custom headers object to send along the HTTP request\n- `retry`: Number of retries when request fails (default: 0)\n- `safe`: Whether to override existing resource if it already exists (default: `false`)\n\n> Note: For generated names, options can be specified only if the first parameters are provided: `createCollection(undefined, {safe: true})`\n\n### Listing bucket collections\n\n```js\nclient.bucket(\"blog\").listCollections()\n  .then(({data}) => ...);\n```\n\nSample result:\n\n```js\n{\n  data: [\n    {\n      \"last_modified\": 1456183153840,\n      \"id\": \"posts\"\n    },\n    {\n      \"last_modified\": 1456183159386,\n      \"id\": \"comments\"\n    }\n  ]\n}\n```\n\n#### Options\n\n- `headers`: Custom headers object to send along the HTTP request\n- `retry`: Number of retries when request fails (default: 0)\n\nThis method accepts the [generic parameters for sorting, filtering and paginating results](#generic-options-for-list-operations).\n\n\n### Deleting a collection\n\n```js\nclient.bucket(\"blog\").deleteCollection(\"test\")\n  .then(result => ...);\n```\n\nSample result:\n\n```js\n{\n  \"data\": {\n    \"deleted\": true,\n    \"last_modified\": 1456183116571,\n    \"id\": \"posts\"\n  }\n}\n```\n\n#### Options\n\n- `headers`: Custom headers object to send along the HTTP request\n- `retry`: Number of retries when request fails (default: 0)\n- `safe`: Ensures the resource hasn't been modified in the meanwhile if `last_modified` is provided (default: `false`)\n- `last_modified`: The last timestamp we know the resource has been updated on the server\n\n### Creating a user group\n\nKinto has a concept of groups of users. A group has a list of members and belongs to a bucket.\n\nPermissions can refer to the group instead of an individuals - this makes it easy to define «roles», especially if the same set of permissions is applied to several objects.\n\nWhen used in permissions definitions, the full group URI has to be used:\n\n```js\n    {\n      data: {\n        title: \"My article\"\n      },\n      permissions: {\n        write: [\"/buckets/blog/groups/authors\", \"github:lili\"],\n        read: [\"system.Everyone\"]\n      }\n    }\n```\n\n#### Named group\n\n```js\nclient.bucket(\"blog\").createGroup(\"admins\")\n  .then(result => ...);\n```\n\nSample result:\n\n```js\n{\n  \"data\": {\n    \"last_modified\": 1456183004372,\n    \"id\": \"admins\",\n    \"members\": []\n  },\n  \"permissions\": {\n    \"write\": [\n      \"basicauth:0f7c1b72cdc89b9d42a2d48d5f0b291a1e8afd408cc38a2197cdf508269cecc8\"\n    ]\n  }\n}\n```\n\n#### With a list of members and attributes\n\n```js\nclient.bucket(\"blog\").createGroup(\"admins\", [\"system.Authenticated\"], {data: {pi: 3.14}})\n  .then(result => ...);\n```\n\nSample result:\n\n```js\n{\n  \"data\": {\n    \"last_modified\": 1456183004372,\n    \"id\": \"admins\",\n    \"members\": [\"system.Authenticated\"],\n    \"pi\": 3.14\n  },\n  \"permissions\": {\n    \"write\": [\n      \"basicauth:0f7c1b72cdc89b9d42a2d48d5f0b291a1e8afd408cc38a2197cdf508269cecc8\"\n    ]\n  }\n}\n```\n\n#### With an ID generated automatically\n\n```js\nclient.bucket(\"blog\").createGroup()\n  .then(result => ...);\n```\n\nSample result:\n\n```js\n{\n  \"data\": {\n    \"last_modified\": 1456183040592,\n    \"members\": [],\n    \"id\": \"7YHFF565\"\n  },\n  \"permissions\": {\n    \"write\": [\n      \"basicauth:0f7c1b72cdc89b9d42a2d48d5f0b291a1e8afd408cc38a2197cdf508269cecc8\"\n    ]\n  }\n}\n```\n\nNote that `7YHFF565` is the group ID automatically generated by the server.\n\n#### Options\n\n- `headers`: Custom headers object to send along the HTTP request\n- `retry`: Number of retries when request fails (default: 0)\n- `safe`: Whether to override existing resource if it already exists (default: `false`)\n- `data`: Extra group attributes\n- `permissions`: Permissions to be set on the created group\n\n> Note: For generated names, options can be specified only if the first parameters are provided: `createGroup(undefined, [], {safe: true})`\n\n\n### Listing bucket groups\n\n```js\nclient.bucket(\"blog\").listGroups()\n  .then(({data}) => ...);\n```\n\nSample result:\n\n```js\n{\n  \"data\": [\n    {\n      \"last_modified\": 1456183153840,\n      \"id\": \"admins\",\n      \"members\": [\"system.Authenticated\"],\n      \"pi\": 3.14\n    },\n    {\n      \"last_modified\": 1456183159386,\n      \"id\": \"moderators\",\n      \"members\": [\"github:lili\"]\n    }\n  ]\n}\n```\n\n#### Options\n\n- `headers`: Custom headers object to send along the HTTP request\n- `retry`: Number of retries when request fails (default: 0)\n\nThis method accepts the [generic parameters for sorting, filtering and paginating results](#generic-options-for-list-operations).\n\n\n### Getting a bucket group\n\n```js\nclient.bucket(\"blog\").getGroup(\"admins\")\n  .then(({data}) => ...);\n```\n\nSample result:\n\n```js\n{\n  \"data\": {\n      \"last_modified\": 1456183153840,\n      \"id\": \"admins\",\n      \"members\": [\"system.Authenticated\"],\n      \"pi\": 3.14\n  }\n}\n```\n\n#### Options\n\n- `headers`: Custom headers object to send along the HTTP request\n- `retry`: Number of retries when request fails (default: 0)\n\n### Updating an existing group\n\n```js\nconst updated = {\n  id: \"cb0f7b2b-e78f-41a8-afad-92a56f8c88db\",\n  members: [\"system.Everyone\", \"github:lili\"],\n  pi: 3.141592\n};\n\nclient.bucket(\"blog\").updateGroup(updated, {permissions: {write: [\"fxa:35478\"]}})\n  .then(result => ...);\n```\n\nSample result:\n\n```js\n{\n  \"data\": {\n    \"last_modified\": 1456183778891,\n    \"id\": \"cb0f7b2b-e78f-41a8-afad-92a56f8c88db\",\n    \"members\": [\"system.Everyone\", \"github:lili\"],\n    \"pi\": 3.141592\n  },\n  \"permissions\": {\n    \"write\": [\n      \"basicauth:0f7c1b72cdc89b9d42a2d48d5f0b291a1e8afd408cc38a2197cdf508269cecc8\",\n      \"fxa:35478\"\n    ]\n  }\n}\n```\n\n#### Options\n\n- `patch`: Patches the existing record instead of replacing it (default: `false`)\n- `headers`: Custom headers object to send along the HTTP request\n- `retry`: Number of retries when request fails (default: 0)\n- `safe`: If `last_modified` is provided, ensures the resource hasn't been modified since that timestamp. Otherwise ensures no existing resource with the provided id will be overriden (default: `false`)\n- `permissions`: Permissions to be set on the group\n\n### Deleting a group\n\n```js\nclient.bucket(\"blog\").deleteGroup(\"admins\")\n  .then(result => ...);\n```\n\nSample result:\n\n```js\n{\n  \"data\": {\n    \"deleted\": true,\n    \"last_modified\": 1456183116571,\n    \"id\": \"admins\"\n  }\n}\n```\n\n#### Options\n\n- `headers`: Custom headers object to send along the HTTP request\n- `retry`: Number of retries when request fails (default: 0)\n- `safe`: Ensures the resource hasn't been modified in the meanwhile if `last_modified` is provided (default: `false`)\n- `last_modified`: The last timestamp we know the resource has been updated on the server\n\n\n### Listing bucket history\n\n```js\nclient.bucket(\"blog\").listHistory()\n  .then(({data}) => ...);\n```\n\nSample result:\n\n```js\n{\n  \"data\": [\n    {\n      \"action\": \"update\",\n      \"collection_id\": \"articles\",\n      \"date\": \"2016-07-20T11:18:36.530281\",\n      \"id\": \"cb98ecd7-a66f-4f9d-82c5-73d06930f4f2\",\n      \"last_modified\": 1469006316530,\n      \"record_id\": \"b3b76c56-b6df-4195-8189-d79da4a128e1\",\n      \"resource_name\": \"record\",\n      \"target\": {\n          \"data\": {\n              \"id\": \"b3b76c56-b6df-4195-8189-d79da4a128e1\",\n              \"last_modified\": 1469006316529,\n              \"title\": \"Modified title\"\n          },\n          \"permissions\": {\n              \"write\": [\n                  \"basicauth:43181ac0ae7581a23288c25a98786ef9db86433c62a04fd6071d11653ee69089\"\n              ]\n          }\n      },\n      \"timestamp\": 1469006098757,\n      \"uri\": \"/buckets/blog/collections/articles/records/b3b76c56-b6df-4195-8189-d79da4a128e1\",\n      \"user_id\": \"basicauth:43181ac0ae7581a23288c25a98786ef9db86433c62a04fd6071d11653ee69089\",\n    }\n  ]\n}\n\n```\n\n#### Options\n\n- `headers`: Custom headers object to send along the HTTP request\n- `retry`: Number of retries when request fails (default: 0)\n\nThis method accepts the [generic parameters for sorting, filtering and paginating results](#generic-options-for-list-operations).\n\n\n## Collections\n\n### Selecting a collection\n\n```js\nconst posts = client.bucket(\"blog\").collection(\"posts\");\n```\n\n### Getting collection data\n\n```js\nclient.bucket(\"blog\").collection(\"posts\").getData()\n  .then(result => ...);\n```\n\nSample result:\n\n```js\n{\n  \"last_modified\": 1456183561206,\n  \"id\": \"posts\",\n  \"preferedAuthor\": \"@chucknorris\"\n}\n```\n\n#### Options\n\n- `headers`: Custom headers object to send along the HTTP request\n- `retry`: Number of retries when request fails (default: 0)\n\n### Setting collection data\n\n```js\nclient.bucket(\"blog\").collection(\"posts\")\n  .setData({preferedAuthor: \"@chucknorris\"})\n  .then(result => ...);\n```\n\nSample result:\n\n```js\n{\n  \"data\": {\n    \"last_modified\": 1456183561206,\n    \"id\": \"posts\",\n    \"preferedAuthor\": \"@chucknorris\"\n  },\n  \"permissions\": {\n    \"write\": [\n      \"github:bob\",\n      \"basicauth:0f7c1b72cdc89b9d42a2d48d5f0b291a1e8afd408cc38a2197cdf508269cecc8\",\n      \"github:john\"\n    ]\n  }\n}\n```\n\n#### Options\n\n- `patch`: Patches the existing data instead of replacing them (default: `false`)\n- `headers`: Custom headers object to send along the HTTP request\n- `retry`: Number of retries when request fails (default: 0)\n- `safe`: If `last_modified` is provided, ensures the resource hasn't been modified since that timestamp. Otherwise ensures no existing resource with the provided id will be overriden (default: `false`)\n- `last_modified`: The last timestamp we know the resource has been updated on the server\n\n### Getting collection permissions\n\n```js\nclient.bucket(\"blog\").collection(\"posts\").getPermissions()\n  .then(result => ...);\n```\n\nSample result:\n\n```js\n{\n  \"write\": [\n    \"basicauth:0f7c1b72cdc89b9d42a2d48d5f0b291a1e8afd408cc38a2197cdf508269cecc8\",\n  ]\n}\n```\n\n#### Options\n\n- `headers`: Custom headers object to send along the HTTP request\n- `retry`: Number of retries when request fails (default: 0)\n\n### Setting collection permissions\n\n```js\nclient.bucket(\"blog\").collection(\"posts\")\n  .setPermissions({\n    read: [\"github:bob\"],\n    write: [\"github:john\", \"github:bob\"]\n  })\n  .then(result => ...);\n```\n\nSample result:\n\n```js\n{\n  \"data\": {\n    \"last_modified\": 1456183508926,\n    \"id\": \"posts\"\n  },\n  \"permissions\": {\n    \"read\": [\"github:bob\"],\n    \"write\": [\n      \"github:bob\",\n      \"basicauth:0f7c1b72cdc89b9d42a2d48d5f0b291a1e8afd408cc38a2197cdf508269cecc8\",\n      \"github:john\"\n    ]\n  }\n}\n```\n\n#### Options\n\n- `headers`: Custom headers object to send along the HTTP request\n- `retry`: Number of retries when request fails (default: 0)\n- `safe`: If `last_modified` is provided, ensures the resource hasn't been modified since that timestamp. Otherwise ensures no existing resource with the provided id will be overriden (default: `false`)\n- `last_modified`: The last timestamp we know the resource has been updated on the server.\n\n#### Notes\n\n- This operation replaces any previously set permissions;\n- Owners will always keep their `write` permission bit, as per the Kinto protocol.\n\n\n### Creating a new record\n\n```js\nclient.bucket(\"blog\").collection(\"posts\")\n  .createRecord({title: \"My first post\", content: \"Hello World!\"})\n  .then(result => ...);\n```\n\nSample result:\n\n```js\n{\n  \"data\": {\n    \"content\": \"Hello World!\",\n    \"last_modified\": 1456183657846,\n    \"id\": \"cb0f7b2b-e78f-41a8-afad-92a56f8c88db\",\n    \"title\": \"My first post\"\n  },\n  \"permissions\": {\n    \"write\": [\n      \"basicauth:0f7c1b72cdc89b9d42a2d48d5f0b291a1e8afd408cc38a2197cdf508269cecc8\"\n    ]\n  }\n}\n```\n\n#### Options\n\n- `headers`: Custom headers object to send along the HTTP request;\n- `retry`: Number of retries when request fails (default: 0)\n- `safe`: Whether to override existing resource if it already exists and if an id is provided (default: `false`)\n\n### Retrieving an existing record\n\n```js\nclient.bucket(\"blog\").collection(\"posts\")\n  .getRecord(\"cb0f7b2b-e78f-41a8-afad-92a56f8c88db\")\n  .then(result => ...);\n```\n\nSample result:\n\n```js\n{\n  \"data\": {\n    \"content\": \"Hello World!\",\n    \"last_modified\": 1456183657846,\n    \"id\": \"cb0f7b2b-e78f-41a8-afad-92a56f8c88db\",\n    \"title\": \"My first post\"\n  },\n  \"permissions\": {\n    \"write\": [\n      \"basicauth:0f7c1b72cdc89b9d42a2d48d5f0b291a1e8afd408cc38a2197cdf508269cecc8\"\n    ]\n  }\n}\n```\n\n#### Options\n\n- `headers`: Custom headers object to send along the HTTP request\n- `retry`: Number of retries when request fails (default: 0)\n- `safe`: Ensures an existing record with this ID won't be overridden (default: `false`).\n\n### Updating an existing record\n\n```js\nconst updated = {\n  id: \"cb0f7b2b-e78f-41a8-afad-92a56f8c88db\",\n  title: \"My first post, edited\",\n  content: \"Hello World, again!\"\n};\n\nclient.bucket(\"blog\").collection(\"posts\")\n  .updateRecord(updated)\n  .then(result => ...);\n```\n\nSample result:\n\n```js\n{\n  \"data\": {\n    \"content\": \"Hello World, again!\",\n    \"last_modified\": 1456183778891,\n    \"id\": \"cb0f7b2b-e78f-41a8-afad-92a56f8c88db\",\n    \"title\": \"My first post, edited\"\n  },\n  \"permissions\": {\n    \"write\": [\n      \"basicauth:0f7c1b72cdc89b9d42a2d48d5f0b291a1e8afd408cc38a2197cdf508269cecc8\"\n    ]\n  }\n}\n```\n\n#### Options\n\n- `patch`: Patches the existing record instead of replacing it (default: `false`)\n- `headers`: Custom headers object to send along the HTTP request\n- `retry`: Number of retries when request fails (default: 0)\n- `safe`: If `last_modified` is provided, ensures the resource hasn't been modified since that timestamp. Otherwise ensures no existing resource with the provided id will be overriden (default: `false`);\n\n### Deleting record\n\n```js\nclient.bucket(\"blog\").collection(\"posts\")\n  .deleteRecord(\"cb0f7b2b-e78f-41a8-afad-92a56f8c88db\")\n  .then(result => ...);\n```\n\nSample result:\n\n```js\n{\n  \"data\": {\n    \"deleted\": true,\n    \"last_modified\": 1456183877287,\n    \"id\": \"cb0f7b2b-e78f-41a8-afad-92a56f8c88db\"\n  }\n}\n```\n\n#### Options\n\n- `headers`: Custom headers object to send along the HTTP request\n- `retry`: Number of retries when request fails (default: 0)\n- `safe`: Ensures the resource hasn't been modified in the meanwhile if `last_modified` is provided (default: `false`);\n- `last_modified`: When `safe` is true, the last timestamp we know the resource has been updated on the server.\n\n### Listing records\n\n```js\nclient.bucket(\"blog\").collection(\"posts\")\n  .listRecords()\n  .then(result => ...);\n```\n\nSample result:\n\n```js\n{\n  last_modified: \"1456183930780\",\n  next: <Function>,\n  totalRecords: 2,\n  data: [\n    {\n      \"content\": \"True.\",\n      \"last_modified\": 1456183930780,\n      \"id\": \"a89dd4b2-d597-4192-bc2b-834116244d29\",\n      \"title\": \"I love cheese\"\n    },\n    {\n      \"content\": \"Yo\",\n      \"last_modified\": 1456183914275,\n      \"id\": \"63c1805a-565a-46cc-bfb3-007dfad54065\",\n      \"title\": \"Another post\"\n    }\n  ]\n}\n```\n\nThe result object exposes the following properties:\n\n- `last_modified`: the [collection's timestamp](http://kinto.readthedocs.io/en/stable/api/1.x/timestamps.html). This value is opaque and should be reused as is, eg. passing it as a `since` option (see [Generic bucket and collection options](#generic-bucket-and-collection-options))\n- `next`: the [pagination](#paginating-results) helper to access the next page of results, if any\n- `totalRecords`: the total number of records in the **entire collection**. This number can alternatively be retrieved using the `getTotalRecords()` method of the collection API\n- `data`: the list of records\n\n#### Options\n\n- `headers`: Custom headers object to send along the HTTP request\n- `retry`: Number of retries when request fails (default: 0)\n- `at`: Retrieve the records list at at a given timestamp back in time (note: full list is always returned, this option doesn't support pagination and will reject if the [History plugin](http://kinto.readthedocs.io/en/stable/api/1.x/history.html) isn't enabled or has been enabled after the creation of the collection.)\n\nThis method accepts the [generic parameters for sorting, filtering and paginating results](#generic-options-for-list-operations).\n\n\n### Batching operations\n\nThis allows performing multiple operations in a single HTTP request.\n\n```js\nclient.bucket(\"blog\").collection(\"posts\")\n  .batch(batch => {\n    batch.deleteRecord(\"cb0f7b2b-e78f-41a8-afad-92a56f8c88db\");\n    batch.createRecord({title: \"new post\", content: \"yo\"});\n    batch.createRecord({title: \"another\", content: \"yo again\"});\n  })\n  .then(result => ...);\n```\n\nSample result:\n\n```js\n[\n  {\n    \"status\": 200,\n    \"path\": \"/v1/buckets/blog/collections/posts/records/a89dd4b2-d597-4192-bc2b-834116244d29\",\n    \"body\": {\n      \"data\": {\n        \"deleted\": true,\n        \"last_modified\": 1456184078090,\n        \"id\": \"a89dd4b2-d597-4192-bc2b-834116244d29\"\n      }\n    },\n    \"headers\": {\n      \"Content-Length\": \"99\",\n      \"Content-Type\": \"application/json; charset=UTF-8\",\n      \"Access-Control-Expose-Headers\": \"Retry-After, Content-Length, Alert, Backoff\"\n    }\n  },\n  {\n    \"status\": 201,\n    \"path\": \"/v1/buckets/blog/collections/posts/records\",\n    \"body\": {\n      \"data\": {\n        \"content\": \"yo\",\n        \"last_modified\": 1456184078096,\n        \"id\": \"afd650b3-1625-42f6-8994-860e52d39201\",\n        \"title\": \"new post\"\n      },\n      \"permissions\": {\n        \"write\": [\n          \"basicauth:0f7c1b72cdc89b9d42a2d48d5f0b291a1e8afd408cc38a2197cdf508269cecc8\"\n        ]\n      }\n    },\n    \"headers\": {\n      \"Content-Length\": \"221\",\n      \"Content-Type\": \"application/json; charset=UTF-8\",\n      \"Access-Control-Expose-Headers\": \"Retry-After, Content-Length, Alert, Backoff\"\n    }\n  },\n  {\n    \"status\": 201,\n    \"path\": \"/v1/buckets/blog/collections/posts/records\",\n    \"body\": {\n      \"data\": {\n        \"content\": \"yo again\",\n        \"last_modified\": 1456184078102,\n        \"id\": \"22c1319e-7b09-46db-bec4-c240bdf4e3e9\",\n        \"title\": \"another\"\n      },\n      \"permissions\": {\n        \"write\": [\n          \"basicauth:0f7c1b72cdc89b9d42a2d48d5f0b291a1e8afd408cc38a2197cdf508269cecc8\"\n        ]\n      }\n    },\n    \"headers\": {\n      \"Content-Length\": \"226\",\n      \"Content-Type\": \"application/json; charset=UTF-8\",\n      \"Access-Control-Expose-Headers\": \"Retry-After, Content-Length, Alert, Backoff\"\n    }\n  }\n]\n```\n\n#### Options\n\n- `headers`: Custom headers object to send along the HTTP request\n- `retry`: Number of retries when request fails (default: 0)\n- `safe`: Ensures operations won't override existing resources on the server if their associated `last_modified` value or option are provided; otherwise ensures resources won't be overriden if they already exist on the server\n- `aggregate`: Produces an aggregated result object, grouped by operation types; the result object has the following structure:\n\n```js\n{\n  \"errors\":    [], // Encountered errors (HTTP 400, >=500)\n  \"published\": [], // Successfully published resources (HTTP 200, 201)\n  \"conflicts\": [], // Conflicting resources (HTTP 412)\n  \"skipped\":   []  // Missing target resources on the server (HTTP 404)\n}\n```\n\n## Listing all resource permissions\n\nIf the [`permissions_endpoint` capability](http://kinto.readthedocs.io/en/stable/api/1.x/permissions.html#list-every-permissions) is installed on the server, you can retrieve the list of all permissions set for the authenticated user using the `listPermissions()` method:\n\n```js\nclient.listPermissions([options])\n  .then(result => ...);\n```\n\nSample result:\n\n```js\n{\n  \"data\": [\n    {\n      \"bucket_id\": \"mybucket\",\n      \"id\": \"mybucket\",\n      \"permissions\": [\n        \"write\",\n        \"read\",\n        \"group:create\",\n        \"collection:create\"\n      ],\n      \"resource_name\": \"bucket\",\n      \"uri\": \"/buckets/mybucket\"\n    },\n    ...\n  ]\n}\n```\n\n#### Options\n\n- `headers`: Custom headers object to send along the HTTP request\n- `retry`: Number of retries when request fails (default: 0)\n\n#### Result object properties\n\n- `last_modified`: the last modified value for the list of permissions\n- `hasNextPage`: a boolean informing if a next page is available; when that's the case, you can call `next()`\n- `next`: the [pagination](#paginating-results) helper to access the next page of results, if any\n- `data`: the list of permissions\n- `totalRecords`: the total number of permissions listed in the `data` property array\n\n## Attachments\n\nIf the [attachment](https://github.com/Kinto/kinto-attachment) capability is available from the Kinto server, you can attach files to records. Files must be passed as [data urls](http://dataurl.net/#about), which can be generated using the [FileReader API](https://developer.mozilla.org/en-US/docs/Web/API/FileReader/readAsDataURL) in the browser.\n\n### Adding an attachment to a record\n\n```js\nclient.bucket(\"blog\").collection(\"posts\")\n  .addAttachment(dataURL, {title: \"First post\"});\n```\n\n#### Options\n\n- `headers`: Custom headers object to send along the HTTP request\n- `retry`: Number of retries when request fails (default: 0)\n- `safe`: Ensures operations won't override existing resources on the server if their associated `last_modified` value or option are provided; otherwise ensures resources won't be overriden if they already exist on the server\n- `last_modified`: When `safe` is true, the last timestamp we know the resource has been updated on the server\n- `permissions`: Permissions to be set on the record\n- `filename`: Allows to specify the attachment filename, in case the data URI does not contain any, or if the file has to be renamed on upload\n\n\n### Updating an attachment\n\n```js\nclient.bucket(\"blog\").collection(\"posts\")\n  .addAttachment(dataURL, {id: \"22c1319e-7b09-46db-bec4-c240bdf4e3e9\"});\n```\n\n### Deleting an attachment\n\n```js\nclient.bucket(\"blog\").collection(\"posts\")\n  .removeAttachment(\"22c1319e-7b09-46db-bec4-c240bdf4e3e9\");\n```\n\n## Generic bucket and collection options\n\nBoth `bucket()` and `collection()` methods accept an `options` object as a second arguments where you can define the following options:\n\n- `{Object} headers`: Custom headers to send along the request;\n- `{Boolean} safe`: Ensure safe transactional operations; read more about that below.\n- `{Number} retry`: Default number of times to retry requests when faced with transient errors.\n\nSample usage:\n\n```js\nclient.bucket(\"blog\", {\n  headers: {\"X-Hello\": \"Hello!\"},\n  safe: true,\n  retry: 2,\n});\n```\n\nHere the `X-Hello` header and the `safe` option will be used for building every outgoing request sent to the server, for every collection attached to this bucket.\n\nThis works at the collection level as well:\n\n```js\nclient.bucket(\"blog\")\n  .collection(\"posts\", {\n    headers: {\"X-Hello\": \"Hello!\"},\n    safe: true,\n    retry: 2,\n  });\n```\n\nEvery request sent for this collection will have the options applied.\n\nLast, you can of course pass these options at the atomic operation level:\n\n```js\nclient.bucket(\"blog\")\n  .collection(\"posts\")\n  .updateRecord(updatedRecord, {\n    headers: {\"X-Hello\": \"Hello!\"},\n    safe: true,\n    retry: 2,\n  });\n```\n\nThe cool thing being you can always override the default defined options at the atomic operation level:\n\n```js\nclient.bucket(\"blog\", {safe: true})\n  .collection(\"posts\")\n  .updateRecord(updatedRecord, {safe: false});\n```\n\n## The `safe` option explained\n\nThe `safe` option can be used:\n\n- when creating or updating a resource, to ensure that any already existing record matching the provided ID won't be overridden if it exists on the server;\n- when updating or deleting a resource, to ensure it won't be overridden remotely if it has changed in the meanwhile on the server (requires a `last_modified` value to be provided).\n\n### Safe creations\n\nWhen creating a new ressource, using the `safe` option will ensure the resource will be created only if it doesn't already exist on the server.\n\n### Safe updates\n\nIf a `last_modified` property value is set in the resource object being updated, the `safe` option will ensure it won't be overriden if it's been modified on the server since that `last_modified` timestamp, raising an `HTTP 412` response describing the conflict when that happens:\n\n```js\nconst updatedRecord = {\n  id: \"fbd2a565-8c10-497a-95b8-ce4ea6f474e1\",\n  title: \"new post, modified\",\n  content: \"yoyo\",\n  last_modified: 1456184189160\n};\n\nclient.bucket(\"blog\")\n  .collection(\"posts\")\n  .updateRecord(updatedRecord, {safe: true});\n```\n\nIf this record has been modified on the server already, meaning its `last_modified` is greater than the one we provide , we'll get a `412` error response.\n\nIf no `last_modified` value is provided at all, a safe update will simply guarantee that an existing resource with the provided ID won't be overriden.\n\n### Safe deletions\n\nThe same applies for deletions, where you can pass both a `safe` and `last_modified` options:\n\n```js\nclient.bucket(\"blog\")\n  .collection(\"posts\")\n  .deleteRecord(\"fbd2a565-8c10-497a-95b8-ce4ea6f474e1\", {\n    safe: true,\n    last_modified: 1456184189160\n  });\n```\n\n## Generic options for list operations\n\nEvery list operations like [listBuckets()](#listing-buckets), [listCollections](#listing-bucket-collections), [listHistory](#listing-bucket-history), [listGroups()](#list-bucket-groups) or [listRecords()](#listing-records) accept parameters to sort, filter and paginate the results:\n\n- `sort`: The order field (default: `-last_modified`);\n- `pages`: The number of result pages to retrieve (default: `1`);\n- `limit`: The number of records to retrieve per page: unset by default, uses default server configuration;\n- `filters`: An object defining the filters to apply; read more about [what's supported](http://kinto.readthedocs.io/en/stable/api/1.x/filtering.html);\n- `since`: The ETag header value received from the last response from the server.\n\n### Sorting\n\nBy default, results are listed by `last_modified` descending order. You can set the `sort` option to order by another field:\n\n```js\nclient.bucket(\"blog\").collection(\"posts\")\n  .listRecords({sort: \"title\"})\n  .then(({data, next}) => {\n```\n\n### Polling for changes\n\nTo retrieve the results modified since a given timestamp, use the `since` option:\n\n```js\nclient.bucket(\"blog\").collection(\"posts\")\n  .listRecords({since: \"1456183930780\"})\n  .then(({data, next}) => {\n```\n\n### Paginating results\n\nBy default, all results of the first page are retrieved, and the default configuration of the server defines no limit. To specify a max number of results to retrieve, you can use the `limit` option:\n\n```js\nclient.bucket(\"blog\").collection(\"posts\")\n  .listRecords({limit: 20})\n  .then(({data, hasNextPage, next}) => {\n```\n\nTo check if a next page of results is available, you can check for the `hasNextPage` boolean property. To actually fetch the next page of results, call the `next()` function obtained:\n\n```js\nclient.bucket(\"blog\").collection(\"posts\")\n  .listRecords({limit: 20})\n  .then(({data, hasNextPage, next}) => {\n    if (hasNextPage) {\n      // resolve with data for page 2\n      return next().then(({data}) => data);\n    } else {\n      // resolve with data for page 1\n      return data;\n    }\n  });\n```\n\nLast, if you just want to retrieve and aggregate a given number of result pages, instead of dealing with calling `next()` recursively you can simply specify the `pages` option:\n\n```js\nclient.bucket(\"blog\").collection(\"posts\")\n  .listRecords({limit: 20, pages: 3})\n  .then(({data, hasNextPage, next}) => ...); // A maximum of 60 results will be retrieved here\n```\n\n> ##### Notes\n>\n> If you plan on fetching all the available pages, you can set the `pages` option to `Infinity`. Be aware that for large datasets this strategy can possibly issue an excessive number of HTTP requests.\n\n\n## Events\n\nThe `KintoClient` exposes an `events` property you can subscribe public events from. That `events` property implements nodejs' [EventEmitter interface](https://nodejs.org/api/events.html#events_class_events_eventemitter).\n\n\n### The `backoff` event\n\nTriggered when a `Backoff` HTTP header has been received from the last received response from the server, meaning clients should hold on performing further requests during a given amount of time.\n\nThe `backoff` event notifies what's the backoff release timestamp you should wait until before performing another operation:\n\n```js\nconst client = new KintoClient();\n\nclient.events.on(\"backoff\", function(releaseTime) {\n  const releaseDate = new Date(releaseTime).toLocaleString();\n  alert(`Backed off; wait until ${releaseDate} to retry`);\n});\n```\n\n### The `deprecated` event\n\nTriggered when an `Alert` HTTP header is received from the server, meaning that a feature has been deprecated; the `event` argument received by the event listener contains the following deprecation information:\n\n- `type`: The type of deprecation, which in ou case is always `soft-eol` (`hard-eol` alerts trigger an `HTTP 410 Gone` error);\n- `message`: The deprecation alert message;\n- `url`: The URL you can get information about the related deprecation policy.\n\n```js\nconst client = new KintoClient();\n\nclient.events.on(\"deprecated\", function(event) {\n  console.log(event.message);\n});\n```\n\n### The `retry-after` event\n\nSome errors on the server side are transient (service unavailable or integrity errors). A `Retry-After` HTTP header in the response indicates the duration in seconds that clients should wait before retrying the request.\n\nThe `retry-after` event notifies what is the timestamp you should wait until before performing another operation:\n\n```js\nconst client = new KintoClient();\n\nclient.events.on(\"retry-after\", function(releaseTime) {\n  const releaseDate = new Date(releaseTime).toLocaleString();\n  alert(`Wait until ${releaseDate} to retry`);\n});\n```\n\n> #### Note:\n> We also automatically retry all requests that have a Retry-After response.\n\n## Browser Compatibility\n\nThis library uses some features that are not supported on Internet Explorer or Safari.\n* Javascript [`Promise`](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Promise#Browser_compatibility)\n* [`Object.assign()`](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#Browser_compatibility)\n* [`fetch()`](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API#Browser_compatibility)\n\nPlease [add polyfills](https://polyfill.io/v2/docs/features/) for these to get full functionality.\n\n## Upgrading\n\n### From 1.x to 2.x\n\n* `collection.listRecords()` now strips the quotes (`\"`) from the `last_modified` attribute in result object (#110).\n\n## Contributing\n\n### Coding style\n\nAll the JavaScript code in this project conforms to the [prettier](https://github.com/prettier/prettier) coding style. A command is provided to ensure your code is always formatted accordingly:\n\n```\n$ npm run cs-format\n```\n\nThe `cs-check` command ensures all files conform to that style:\n\n```\n$ npm run cs-check\n```\n\n### Integration tests\n\nIt's possible to run the integration test suite against an external Kinto server instance. To do so you need to define the `TEST_KINTO_SERVER` environment variable and set it to the server base URL:\n\n```\n$ TEST_KINTO_SERVER=https://my.kinto-server.tld/v1 npm test\n```\n\n### Releasing\n\nIf you need to release a new version of kinto-http.js, you can follow\n[the Release documentation](https://github.com/Kinto/kinto-http.js/wiki/Releasing).\n","created":"2016-06-16T11:59:37.689Z","modified":"2017-05-09T22:29:48.435Z","lastPublisher":{"name":"glasserc","email":"ethan.glasser.camp@gmail.com"},"owners":[{"name":"ametaireau","email":"alexis@notmyidea.org"},{"name":"glasserc","email":"ethan.glasser.camp@gmail.com"},{"name":"leplatrem","email":"leplatrem@gmail.com"},{"name":"magopian","email":"mathieu@agopian.info"},{"name":"n1k0","email":"nicolas@perriault.net"},{"name":"natim","email":"natim@mozilla.com"}],"other":{"_attachments":{},"_from":".","_id":"kinto-http","_nodeVersion":"6.9.1","_npmOperationalInternal":{"host":"packages-18-east.internal.npmjs.com","tmp":"tmp/kinto-http-4.3.4.tgz_1494368987233_0.5825104797258973"},"_npmUser":{"name":"glasserc","email":"ethan.glasser.camp@gmail.com"},"_npmVersion":"3.10.8","_rev":"15-f01ac7c3de9763b3dcde00aedd1af6e0","_shasum":"b6fe2d3abed8780dbbbd73f9750d850d5e0b5b2c","author":{"name":"Mozilla","email":"storage-team@mozilla.com"},"bugs":{"url":"https://github.com/Kinto/kinto-http.js/issues"},"directories":{},"dist-tags":{"latest":"4.3.4"},"dist":{"shasum":"b6fe2d3abed8780dbbbd73f9750d850d5e0b5b2c","tarball":"https://registry.npmjs.org/kinto-http/-/kinto-http-4.3.4.tgz"},"maintainers":[{"name":"ametaireau","email":"alexis@notmyidea.org"},{"name":"glasserc","email":"ethan.glasser.camp@gmail.com"},{"name":"leplatrem","email":"leplatrem@gmail.com"},{"name":"magopian","email":"mathieu@agopian.info"},{"name":"n1k0","email":"nicolas@perriault.net"},{"name":"natim","email":"natim@mozilla.com"}],"readmeFilename":"README.md","time":{"modified":"2017-05-09T22:29:48.435Z","created":"2016-06-16T11:59:37.689Z","1.0.0":"2016-06-16T11:59:37.689Z","2.0.0":"2016-06-28T07:50:35.479Z","2.1.0":"2016-07-18T17:13:04.925Z","2.1.1":"2016-07-19T07:48:55.923Z","2.2.0":"2016-07-21T09:11:52.632Z","2.2.1":"2016-08-22T14:02:25.234Z","2.3.0":"2016-08-23T11:15:44.272Z","2.4.0":"2016-08-25T11:45:55.620Z","2.4.1":"2016-08-31T13:53:19.186Z","2.5.0":"2016-09-01T09:03:02.715Z","2.5.1":"2016-09-15T10:24:53.878Z","2.5.2":"2016-11-04T14:51:45.247Z","2.6.0":"2016-12-15T16:53:59.329Z","2.7.0":"2017-01-16T14:34:18.731Z","3.0.0":"2017-02-09T10:48:12.420Z","3.1.0":"2017-03-01T13:52:15.755Z","4.0.0":"2017-03-02T22:28:41.002Z","4.1.0":"2017-03-14T11:04:52.507Z","4.2.0":"2017-03-17T14:09:22.607Z","4.3.0":"2017-04-10T20:23:36.753Z","4.3.1":"2017-04-11T16:03:06.109Z","4.3.2":"2017-04-12T09:24:53.878Z","4.3.3":"2017-04-27T12:35:28.814Z","4.3.4":"2017-05-09T22:29:48.435Z"}}}