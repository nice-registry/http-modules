{"name":"http-compose","version":"1.0.2","description":"minimal http handler composition","main":"index.js","scripts":{"test":"tape test.js","start":"node-dev example"},"repository":"https://github.com/ahdinosaur/http-compose","keywords":[],"license":"Apache-2.0","homepage":"https://github.com/ahdinosaur/http-compose#readme","devDependencies":{"http-sender":"^2.0.0","node-dev":"^3.1.0","npm-run-all":"^1.6.0","tape":"^4.5.1"},"dependencies":{},"gitHead":"cde0fe002a6b9d98ee80e2076a263577c0ce5b9c","versions":[{"number":"1.0.0","date":"2017-01-18T04:35:04.623Z"},{"number":"1.0.1","date":"2017-01-18T04:37:46.555Z"},{"number":"1.0.2","date":"2017-02-25T23:17:14.057Z"}],"readme":"# http-compose\n\nminimal http handler composition\n\n```shell\nnpm install --save http-compose\n```\n\ninspired by [`creationix/stack`](https://github.com/creationix/stack) and the middleware format in [`yoshuawuyts/merry`](https://github.com/yoshuawuyts/merry)\n\n## example\n\n```js\nconst http = require('http')\nconst compose = require('http-compose')\nconst Send = require('http-sender')()\n\nconst requestHandler = compose([\n  (req, res, context, next) => {\n    if (req.url === '/first') next(null, 'first')\n    else next()\n  },\n  (req, res, context, next) => {\n    context.yes = true\n    next()\n  },\n  (req, res, context, next) => {\n    if (req.url === '/error') next(new Error('Bad request'))\n    else next()\n  },\n  (req, res, context, next) => {\n    if (req.url !== '/404') next(null, context.yes)\n    else next()\n  },\n])\n\nhttp.createServer((req, res) => {\n  requestHandler(req, res, {}, Send(req, res))\n}).listen(5000)\n```\n\n## usage\n\n### `compose = require('http-compose')`\n\n### `handler = compose(handlers)`\n\nwhere a handler function is of shape:\n\n```js\nfunction handler (req, res, context, next) {\n  next(err, value)\n}\n```\n\ncomposes an `Array` of handler functions into a single handler function.\n\nif any handler function passes either an `err` or `value` to `next()`, `compose` will skip any subsequent handlers and forward this to the final `next()` callback.\n\n## complementary modules\n\n- [`ahdinosaur/http-sender`](https://github.com/ahdinosaur/http-sender)\n- [`ahdinosaur/http-routes`](https://github.com/ahdinosaur/http-routes)\n\n## related modules\n\n- [`creationix/stack`](https://github.com/creationix/stack)\n- [`yoshuawuyts/nanostack`](https://github.com/yoshuawuyts/nanostack)\n\n\n## license\n\nThe Apache License\n\nCopyright &copy; 2017 Michael Williams\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n","created":"2017-01-18T04:35:04.623Z","modified":"2017-02-25T23:17:14.057Z","lastPublisher":{"name":"ahdinosaur","email":"michael.williams@enspiral.com"},"owners":[{"name":"ahdinosaur","email":"michael.williams@enspiral.com"}],"other":{"_attachments":{},"_from":".","_id":"http-compose","_nodeVersion":"6.2.1","_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/http-compose-1.0.2.tgz_1488064633845_0.7663435733411461"},"_npmUser":{"name":"ahdinosaur","email":"michael.williams@enspiral.com"},"_npmVersion":"3.9.3","_rev":"3-a1062d834a0b8e0185ff51b392f3b8ed","_shasum":"61d22f409d9f7aba06255bd601068c2edc51e4eb","author":{"name":"Mikey","email":"michael.williams@enspiral.com","url":"http://dinosaur.is"},"bugs":{"url":"https://github.com/ahdinosaur/http-compose/issues"},"directories":{},"dist-tags":{"latest":"1.0.2"},"dist":{"shasum":"61d22f409d9f7aba06255bd601068c2edc51e4eb","tarball":"https://registry.npmjs.org/http-compose/-/http-compose-1.0.2.tgz"},"maintainers":[{"name":"ahdinosaur","email":"michael.williams@enspiral.com"}],"readmeFilename":"README.md","time":{"modified":"2017-02-25T23:17:14.057Z","created":"2017-01-18T04:35:04.623Z","1.0.0":"2017-01-18T04:35:04.623Z","1.0.1":"2017-01-18T04:37:46.555Z","1.0.2":"2017-02-25T23:17:14.057Z"}}}