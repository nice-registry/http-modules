{"name":"awssign","version":"0.0.6","description":"Creates nessasary HTTP headers for request to the AWS API. Uses AWS4-HMAC-SHA256","main":"index.js","scripts":{"test":"echo \"Error: no test specified\" && exit 1"},"repository":"https://github.com/ladekjaer/awssign","keywords":["aws","aws4","aws4-hmac-sha256","sign","signature","auth","authorization","authentication","s3"],"license":"MIT","homepage":"https://github.com/ladekjaer/awssign","dependencies":{"ini":"^1.3.4"},"gitHead":"697e9bb27e64a0cfff24e5aab75f5e9417131d81","readme":"# awssign\nCreates nessasary HTTP headers for request to the AWS API. Uses AWS4-HMAC-SHA256.\n\nGiven the options object to be passed to https.request(options, callback) [awssign](https://github.com/ladekjaer/awssign) ands the following headers x-amz-date, x-amz-content-sha256 and authorization.\n\nCredentials and region will be looked for in environment variables and secondary in ~/.aws/credentials and ~/.aws.config. For IAM Role see below.\n\n## Install\n```\nnpm install awssign\n```\n\n## Usage\n``` js\nvar https = require('https')\nvar crypto = require('crypto')\nvar fs = require('fs')\nvar awssign = require('awssign')\n\nvar file = fs.readFileSync('path-to-file.txt')\nvar filehash = crypto.createHash('sha256').update(file).digest('hex')\n\nvar options = {\n\thostname: 'mybucket.s3.amazonaws.com',\n\tport: 443,\n\tpath: '/myfolder/file.txt',\n\tmethod: 'PUT',\n\theaders: {\n\t\t'Content-Type': 'text/plain; charset=utf8',\n\t\t'Content-Length': file.length\n\t}\n}\n\nawssign.signature(options, filehash) // This and nessary headers to the options object.\n\nvar req = https.request(options, function(res) {\n\tif (res.statusCode !== 200) {\n\t\tres.setEncoding('utf8')\n\t\tvar body = ''\n\t\tres.on('data', function(chunk) { body += chunk })\n\t\tres.on('end', function() { console.error('HTTP response: %s', body)})\n\t}\n})\nreq.on('error', function(err) {\n\tconsole.error('ERROR: %s', err)\n})\nreq.write(file)\nreq.end()\n```\n\nIf the HTTP request to AWS has no body call awssign.singature with only the options argument.\n\n## More options\nCredentials and region can be overwritten with\n``` js\nawssign.setup(aws_key, aws_secret, aws_region)\n```\nPass null for values not to be overridden.\n\n### IAM Role\nIf awssign is used from an EC2 instance with an IAM Role is can get the credentials from there. Just remember to set the IAM role and the S3 region.\n``` js\nawssign.setup(null, null, region)\n\nawssign.iamrole(iam_role, function(err, res) {\n    awssign.signature(options, bodyhash)\n    var req = https.request(options, function(res) {\n        ...\n    })\n})\n```\n\n## License\n\nMIT\n","versions":[{"number":"0.0.1","date":"2015-07-20T19:24:19.296Z"},{"number":"0.0.2","date":"2015-07-20T21:52:08.847Z"},{"number":"0.0.3","date":"2015-07-21T00:34:58.085Z"},{"number":"0.0.4","date":"2015-07-21T22:58:11.915Z"},{"number":"0.0.5","date":"2015-07-22T00:49:26.189Z"},{"number":"0.0.6","date":"2015-07-24T23:21:58.142Z"}],"created":"2015-07-20T19:24:19.296Z","modified":"2015-07-24T23:21:58.142Z","lastPublisher":{"name":"ladekjaer","email":"ladekjaer@gmail.com"},"owners":[{"name":"ladekjaer","email":"ladekjaer@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"awssign","_nodeVersion":"0.12.7","_npmUser":{"name":"ladekjaer","email":"ladekjaer@gmail.com"},"_npmVersion":"2.11.3","_rev":"1-523c93cc5b85c78c98e733465e399928","_shasum":"82dc8d3c8b8bd19182f77beb70ccfb12d011c5fa","author":{"name":"Rasmus Ladekj√¶r Pedersen","url":"@ladekjaer"},"bugs":{"url":"https://github.com/ladekjaer/awssign/issues"},"directories":{},"dist-tags":{"latest":"0.0.6"},"dist":{"shasum":"82dc8d3c8b8bd19182f77beb70ccfb12d011c5fa","tarball":"http://registry.npmjs.org/awssign/-/awssign-0.0.6.tgz"},"maintainers":[{"name":"ladekjaer","email":"ladekjaer@gmail.com"}],"readmeFilename":"README.md","time":{"modified":"2015-07-24T23:21:58.142Z","created":"2015-07-20T19:24:19.296Z","0.0.1":"2015-07-20T19:24:19.296Z","0.0.2":"2015-07-20T21:52:08.847Z","0.0.3":"2015-07-21T00:34:58.085Z","0.0.4":"2015-07-21T22:58:11.915Z","0.0.5":"2015-07-22T00:49:26.189Z","0.0.6":"2015-07-24T23:21:58.142Z"}}}