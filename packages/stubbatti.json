{"name":"stubbatti","version":"1.2.0","description":"A command line stub http server with the special DSL.","main":"index.js","bin":{"stubbatti":"./cli.js"},"scripts":{"test":"jshint . && mocha -R spec stubbatti-spec.js","cov":"istanbul cover _mocha -- -R spec stubbatti-spec.js","coveralls":"istanbul cover _mocha -- stubbatti-spec.js && cat ./coverage/lcov.info | coveralls","doc-release":"jsduck --config .jsduck.release.json"},"repository":"https://github.com/kt3k/stubbatti","keywords":["stub","http","server","mock","cli"],"license":"MIT","homepage":"https://github.com/kt3k/stubbatti","dependencies":{"express":"~4.4.1","liftoff":"~0.11.0","minimist":"~0.1.0"},"devDependencies":{"chai":"~1.9.1","concat-stream":"~1.4.5","sinon":"~1.10.1"},"engines":{"node":">= 0.9"},"versions":[{"number":"0.1.0","date":"2014-05-28T06:22:52.563Z"},{"number":"0.2.0","date":"2014-05-28T12:59:23.379Z"},{"number":"1.0.0","date":"2014-05-31T08:33:22.098Z"},{"number":"1.1.0","date":"2014-06-05T09:56:13.753Z"},{"number":"1.2.0","date":"2014-06-10T20:08:56.759Z"}],"readme":"# Stubbatti v1.2.0\n\n[![Build Status](https://img.shields.io/travis/kt3k/stubbatti.svg?style=flat)](https://travis-ci.org/kt3k/stubbatti)\n[![Coverage Status](https://img.shields.io/coveralls/kt3k/stubbatti.svg?style=flat)](https://coveralls.io/r/kt3k/stubbatti?branch=master)\n[![Npm Version](https://img.shields.io/npm/v/stubbatti.svg?style=flat)](https://www.npmjs.org/package/stubbatti)\n[![MIT License](http://img.shields.io/badge/license-mit-blue.svg?style=flat)](https://github.com/kt3k/stubbatti/blob/master/LICENSE)\n\n[![Dependency Status](https://david-dm.org/kt3k/stubbatti.svg?style=flat)](https://david-dm.org/kt3k/stubbatti)\n\n> A command line stub http server with the special DSL.\n\n# Install\n\n- Install `node.js` ( >= 0.9 ).\n\n- Using `npm`, install `stubbatti` command globally:\n\n```bash\nnpm install -g stubbatti\n```\n\n# Usage\n\nStubbatti is configurable with the file named `.stubbatti.js` or `stubbatti.js`.\n\nAnd in it you can write like following:\n\n```js\nget('/hello', 'Hello, world!');\n```\n\nAnd if you run the command `stubbatti` then stubbatti server will start listening on port 28987 (by default) and will serve the string `Hello, world!` when the path `/hello` requested.\n\n# Reference\n\n## `.stubbatti.js` reference\n\n**Basic Response**\n\nYou can set a response body for the path:\n\n```js\nget('/hello', 'Hello, world!');\n```\n\nWith the above, `/hello` responses `Hello, world!` with http status `200`.\n\n**Response delay**\n\nYou can delay response with `delay` option:\n\n```js\nget('/slow', 'slow response', {delay: 3000});\n```\n\nWith the above, `/slow` responses after the delay of 3000 miliseconds.\n\nThis is useful for testing timeout features of client libraries.\n\n**Content-Type**\n\nYou can specify the content-type of the reponse with `contentType` option:\n\n```js\nget('/json', '{\"a\":1}', {contentType: 'application/json'});\n```\n\nWith the above, `/json` responses `{\"a\":1}` with `Content-Type: application/json`.\n\n**Status Code**\n\nYou can specify the status code of the response with `status` option:\n\n```js\nget('/402', 'payment required', {status: 402});\n```\n\nWith the above, `/402` responses `payment required` with http status code `402`.\n\n**Custom Headers**\n\nYou can specify custom headers with `headers` option:\n\n```js\nget('/custom', '{\"a\":1}', {headers: {\n    'X-Custom': 'abc',\n    'X-Header': 'def'\n}});\n```\n\nWith the above settings, `/custom` responses with the HTTP headers like:\n\n```\nX-Custom: abc\nX-Header: def\n```\n\n**Other Methods**\n\nAvailable methods are `get`, `post`, `head`, `options`, `put`, `delete`.\n\nFollowings are valid notations in `.stubbatti.js`.\n\n```js\nget('/foo', 'GET response');\npost('/foo', 'POST response');\nhead('/foo', ''); // HEAD response cannot have a response body.\noptions('/foo', 'OPTIONS response');\nput('/foo', 'PUT response');\nglobal.delete('/foo', 'DELETE response');\ntrace('/foo', 'TRACE response');\n```\n\n**Setting port**\n\nYou can set the stub server's port number with `port` method:\n\n```\nport(80);\n```\n\nThe default port number of stubbatti is 28987.\n\n**Syntax and semantics**\n\nThe syntax and semantics of `.stubbatti.js` is basically same as `node.js` except some addition of global methods above.\n\n## Command Line Options\n\nWith `--config` option, you can specify a custom stubbatti file.\n\n```bash\nstubbatti --config my_stub_settings.js\n```\n\nWith `--kill` option, you can kill the server. With this option, you can set your test script like following:\n\n```bash\nstubbatti & # launches a stub server\n\n# run unit test using the stub http server\n...\n\nstubbatti --kill # kills the stub server\n```\n\n## Special Paths\n\nA `HEAD` request to the path `/__kill` has the special meaning, which is used for killing the server process. So you shouldn't write `head('__kill', ...);` in `.stubbatti.js`.\n\n# LICENSE\n\nMIT\n\n# Note\n\nThis command is a thin wrapper of `express` and focusing on stubbing an http server on test environments. This cli should be useful when you write the unit test of an http client or a web api client.\n\n# [API documentation](http://kt3k.github.io/stubbatti/doc/v1.2.0/)\n\n# Similar tools\n\n- [Betamax](https://github.com/robfletcher/betamax) for JVM languages\n- [VCR](https://github.com/vcr/vcr) for Ruby\n- [WireMock](https://github.com/tomakehurst/wiremock) for JVM languages\n- [Stubby](https://github.com/azagniotov/stubby4j) for JVM languages and has CLI\n  - Stubby is very similar to stubbatti, but the main target is JVM language with gradle build configuration.\n- [wiremock-php](https://github.com/rowanhill/wiremock-php) for PHP\n- [objc-mocktail](https://github.com/square/objc-mocktail) for Objective-C\n\nThe difference of stubbatti from the above tools is that it's just a CLI stub server and can be used with any language through hooks in a shell script.\nAnd it needs only one setting file `.stubbatti.js` with the simple language.\n\n# Release History\n- 2014-06-05   v1.1.0   Initial release.\n","created":"2014-05-28T06:22:52.563Z","modified":"2014-06-10T20:08:56.759Z","lastPublisher":{"name":"kt3k","email":"stibium121@gmail.com"},"owners":[{"name":"kt3k","email":"stibium121@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"stubbatti","_npmUser":{"name":"kt3k","email":"stibium121@gmail.com"},"_npmVersion":"1.3.21","_rev":"1-b38eed1edea4eb4c8e1353eadfebc3c7","author":{"name":"Yoshiya Hinosawa","email":"stibium121@gmail.com","url":"https://twitter.com/kt3k"},"bugs":{"url":"https://github.com/kt3k/stubbatti/issues"},"directories":{},"dist-tags":{"latest":"1.2.0"},"dist":{"shasum":"acb35f153759b85e881601088d1107111f35f46c","tarball":"http://registry.npmjs.org/stubbatti/-/stubbatti-1.2.0.tgz"},"maintainers":[{"name":"kt3k","email":"stibium121@gmail.com"}],"readmeFilename":"README.md","time":{"modified":"2014-06-10T20:08:56.759Z","created":"2014-05-28T06:22:52.563Z","0.1.0":"2014-05-28T06:22:52.563Z","0.2.0":"2014-05-28T12:59:23.379Z","1.0.0":"2014-05-31T08:33:22.098Z","1.1.0":"2014-06-05T09:56:13.753Z","1.2.0":"2014-06-10T20:08:56.759Z"}}}