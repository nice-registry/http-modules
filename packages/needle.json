{"name":"needle","version":"1.6.0","description":"The leanest and most handsome HTTP client in the Nodelands.","keywords":["http","https","simple","request","client","multipart","upload","proxy","deflate","timeout","charset","iconv","cookie","redirect"],"tags":["http","https","simple","request","client","multipart","upload","proxy","deflate","timeout","charset","iconv","cookie","redirect"],"repository":"https://github.com/tomas/needle","dependencies":{"debug":"^2.1.2","iconv-lite":"^0.4.4"},"devDependencies":{"mocha":"","sinon":"","should":"","xml2js":"","JSONStream":"","q":"","jschardet":""},"scripts":{"test":"mocha test"},"main":"./lib/needle","bin":{"needle":"./bin/needle"},"license":"MIT","engines":{"node":">= 0.10.x"},"gitHead":"f801ef68c707639d7fffbd5e147cc6abcd6fbeca","homepage":"https://github.com/tomas/needle#readme","versions":[{"number":"0.1.0","date":"2011-12-11T05:31:33.591Z"},{"number":"0.1.1","date":"2011-12-11T05:51:11.288Z"},{"number":"0.1.2","date":"2011-12-13T16:10:06.998Z"},{"number":"0.1.3","date":"2011-12-19T16:40:38.902Z"},{"number":"0.1.4","date":"2011-12-19T22:35:20.138Z"},{"number":"0.1.5","date":"2011-12-26T15:29:03.226Z"},{"number":"0.1.6","date":"2011-12-30T06:40:25.347Z"},{"number":"0.1.7","date":"2012-01-17T06:38:47.456Z"},{"number":"0.1.8","date":"2012-01-19T08:36:30.216Z"},{"number":"0.1.9","date":"2012-01-24T09:18:17.002Z"},{"number":"0.2.0","date":"2012-02-16T07:29:16.603Z"},{"number":"0.2.2","date":"2012-03-09T00:22:59.555Z"},{"number":"0.2.3","date":"2012-03-12T04:22:47.196Z"},{"number":"0.2.4","date":"2012-03-12T16:01:34.051Z"},{"number":"0.2.6","date":"2012-03-15T20:38:32.787Z"},{"number":"0.2.7","date":"2012-06-13T19:54:21.775Z"},{"number":"0.2.8","date":"2012-06-20T16:16:18.723Z"},{"number":"0.2.9","date":"2012-06-20T16:24:17.786Z"},{"number":"0.3.0","date":"2012-07-18T18:57:14.430Z"},{"number":"0.3.1","date":"2012-07-19T17:05:20.347Z"},{"number":"0.3.2","date":"2012-08-18T23:46:30.159Z"},{"number":"0.4.0","date":"2012-08-27T14:55:39.397Z"},{"number":"0.4.1","date":"2012-09-21T18:52:42.666Z"},{"number":"0.4.2","date":"2012-09-21T19:27:38.416Z"},{"number":"0.4.3","date":"2012-11-10T15:34:53.359Z"},{"number":"0.4.4","date":"2012-11-20T02:24:00.777Z"},{"number":"0.4.5","date":"2012-11-21T23:00:20.624Z"},{"number":"0.4.6","date":"2012-12-05T14:19:28.217Z"},{"number":"0.4.7","date":"2012-12-07T02:41:27.686Z"},{"number":"0.4.8","date":"2013-01-14T20:56:21.862Z"},{"number":"0.4.9","date":"2013-05-15T18:33:20.762Z"},{"number":"0.5.0","date":"2013-05-25T16:37:50.309Z"},{"number":"0.5.1","date":"2013-06-24T23:11:51.248Z"},{"number":"0.5.2","date":"2013-07-05T00:28:42.946Z"},{"number":"0.5.4","date":"2013-07-27T06:31:52.242Z"},{"number":"0.5.5","date":"2013-07-27T07:55:05.830Z"},{"number":"0.5.6","date":"2013-07-27T23:41:00.592Z"},{"number":"0.5.7","date":"2013-08-07T14:57:36.869Z"},{"number":"0.5.8","date":"2013-08-07T16:15:33.788Z"},{"number":"0.5.9","date":"2013-08-09T20:09:26.779Z"},{"number":"0.6.0","date":"2013-09-26T17:40:55.348Z"},{"number":"0.6.1","date":"2013-10-07T18:47:30.924Z"},{"number":"0.6.2","date":"2013-10-15T17:33:44.214Z"},{"number":"0.6.3","date":"2013-10-22T04:12:25.557Z"},{"number":"0.6.4","date":"2014-03-05T02:28:42.283Z"},{"number":"0.6.6","date":"2014-03-05T22:46:05.392Z"},{"number":"0.7.0","date":"2014-04-10T04:05:55.319Z"},{"number":"0.7.1","date":"2014-04-19T00:45:14.288Z"},{"number":"0.7.2","date":"2014-06-04T17:52:58.175Z"},{"number":"0.7.3","date":"2014-07-30T01:23:10.719Z"},{"number":"0.7.4","date":"2014-07-30T16:44:30.281Z"},{"number":"0.7.5","date":"2014-07-30T17:07:42.140Z"},{"number":"0.7.6","date":"2014-07-30T17:37:34.116Z"},{"number":"0.7.7","date":"2014-07-31T04:28:14.624Z"},{"number":"0.7.8","date":"2014-08-01T23:04:36.029Z"},{"number":"0.7.9","date":"2014-08-29T19:50:34.865Z"},{"number":"0.7.10","date":"2014-09-26T02:44:16.766Z"},{"number":"0.7.11","date":"2015-01-29T13:14:46.984Z"},{"number":"0.8.0","date":"2015-03-04T23:49:01.117Z"},{"number":"0.8.1","date":"2015-03-05T00:15:05.620Z"},{"number":"0.8.2","date":"2015-03-11T07:31:05.599Z"},{"number":"0.9.0","date":"2015-03-24T20:58:07.093Z"},{"number":"0.9.1","date":"2015-03-31T00:16:13.195Z"},{"number":"0.9.2","date":"2015-04-15T23:55:14.241Z"},{"number":"0.10.0","date":"2015-07-09T00:26:33.753Z"},{"number":"0.11.0","date":"2015-11-05T23:21:05.000Z"},{"number":"1.0.0","date":"2016-02-02T21:12:23.092Z"},{"number":"1.1.0","date":"2016-08-08T20:29:12.704Z"},{"number":"1.1.1","date":"2016-09-02T16:39:31.877Z"},{"number":"1.1.2","date":"2016-09-02T16:41:51.355Z"},{"number":"1.2.0","date":"2016-10-25T01:33:27.492Z"},{"number":"1.3.0","date":"2016-10-25T01:34:28.191Z"},{"number":"1.4.0","date":"2016-11-22T19:46:49.018Z"},{"number":"1.4.1","date":"2016-11-22T20:15:56.715Z"},{"number":"1.4.2","date":"2016-11-25T19:04:26.395Z"},{"number":"1.4.3","date":"2016-12-23T21:50:48.787Z"},{"number":"1.4.4","date":"2017-02-07T16:48:55.465Z"},{"number":"1.4.5","date":"2017-02-07T16:59:39.293Z"},{"number":"1.4.6","date":"2017-02-27T22:11:33.212Z"},{"number":"1.5.0","date":"2017-02-28T01:25:39.146Z"},{"number":"1.5.1","date":"2017-03-10T20:06:00.433Z"},{"number":"1.5.2","date":"2017-03-10T20:58:27.590Z"},{"number":"1.6.0","date":"2017-03-25T02:18:42.681Z"}],"readme":"Needle\n======\n\n[![NPM](https://nodei.co/npm/needle.png)](https://nodei.co/npm/needle/)\n\nThe leanest and most handsome HTTP client in the Nodelands.\n\n```js\nvar needle = require('needle');\n\nneedle.get('http://www.google.com', function(error, response) {\n  if (!error && response.statusCode == 200)\n    console.log(response.body);\n});\n```\n\nCallbacks not floating your boat? Needle got your back.\n\n```js\nvar data = {\n  file: '/home/johnlennon/walrus.png',\n  content_type: 'image/png'\n};\n\nneedle\n  .post('https://my.server.com/foo', data, { multipart: true })\n  .on('readable', function() { /* eat your chunks */ })\n  .on('done', function() {\n    console.log('Ready-o, friend-o.');\n  })\n```\n\nWith only one real dependency, Needle supports:\n\n - HTTP/HTTPS requests, with the usual verbs you would expect\n - All of Node's native TLS options, such as 'rejectUnauthorized' (see below)\n - Basic & Digest authentication\n - Multipart form-data (e.g. file uploads)\n - HTTP Proxy forwarding, optionally with authentication\n - Streaming gzip or deflate decompression\n - Automatic XML & JSON parsing\n - 301/302/303 redirect following, with fine-grained tuning, and\n - Streaming non-UTF-8 charset decoding, via `iconv-lite`\n\nAnd yes, Mr. Wayne, it does come with streams2 support.\n\nThis makes Needle an ideal alternative for performing quick HTTP requests in Node, either for API interaction, downloading or uploading streams of data, and so on. If you need OAuth, AWS support or anything fancier, you should check out mikeal's request module.\n\nInstall\n-------\n\n```\n$ npm install needle\n```\n\nUsage\n-----\n\n```js\n// using callback\nneedle.get('ifconfig.me/all.json', function(error, response, body) {\n  if (!error) {\n    // body is an alias for `response.body`\n    console.log(body.ip_addr); // that in this case holds a JSON-decoded object.\n  }\n});\n\n// using streams\nvar out = fs.createWriteStream('logo.png');\nneedle.get('https://google.com/images/logo.png').pipe(out).on('finish', function() {\n  console.log('Pipe finished!');\n});\n```\n\nAs you can see, you can call Needle with a callback or without it. When passed, the response body will be buffered and written to `response.body`, and the callback will be fired when all of the data has been collected and processed (e.g. decompressed, decoded and/or parsed).\n\nWhen no callback is passed, the buffering logic will be skipped but the response stream will still go through Needle's processing pipeline, so you get all the benefits of post-processing while keeping the streamishness we all love from Node.\n\nResponse pipeline\n-----------------\n\nDepending on the response's Content-Type, Needle will either attempt to parse JSON or XML streams, or, if a text response was received, will ensure that the final encoding you get is UTF-8. For XML decoding to work, though, you'll need to install the `xml2js` package as we don't enforce unneeded dependencies unless strictly needed.\n\nYou can also request a gzip/deflated response, which, if sent by the server, will be processed before parsing or decoding is performed.\n\n```js\nneedle.get('http://stackoverflow.com/feeds', { compressed: true }, function(err, resp) {\n  console.log(resp.body); // this little guy won't be a Gzipped binary blob\n                          // but a nice object containing all the latest entries\n});\n```\n\nOr in anti-callback mode, using a few other options:\n\n```js\nvar options = {\n  compressed         : true, // sets 'Accept-Encoding' to 'gzip,deflate'\n  follow_max         : 5,    // follow up to five redirects\n  rejectUnauthorized : true  // verify SSL certificate\n}\n\nvar stream = needle.get('https://backend.server.com/everything.html', options);\n\n// read the chunks from the 'readable' event, so the stream gets consumed.\nstream.on('readable', function() {\n  while (data = this.read()) {\n    console.log(data.toString());\n  }\n})\n\nstream.on('done', function(err) {\n  // if our request had an error, our 'done' event will tell us.\n  if (!err) console.log('Great success!');\n})\n```\n\nAPI\n---\n\nAll of Needle's request methods return a Readable stream, and both `options` and `callback` are optional. If passed, the callback will return three arguments: `error`, `response` and `body`, which is basically an alias for `response.body`.\n\n### needle.head(url[, options][, callback])\n\n```js\nvar options = {\n  open_timeout: 5000 // if we don't get our response headers in 5 seconds, boom.\n}\n\nneedle.head('https://my.backend.server.com', function(err, resp) {\n  if (err)\n    console.log('Shoot! Something is wrong: ' + err.message)\n  else\n    console.log('Yup, still alive.')\n})\n```\n\n### needle.get(url[, options][, callback])\n\n```js\nneedle.get('google.com/search?q=syd+barrett', function(err, resp) {\n  // if no http:// is found, Needle will automagically prepend it.\n});\n```\n\n### needle.post(url, data[, options][, callback])\n\n```js\nvar options = {\n  headers: { 'X-Custom-Header': 'Bumbaway atuna' }\n}\n\nneedle.post('https://my.app.com/endpoint', 'foo=bar', options, function(err, resp) {\n  // you can pass params as a string or as an object.\n});\n```\n\n### needle.put(url, data[, options][, callback])\n\n```js\nvar nested = {\n  params: {\n    are: {\n      also: 'supported'\n    }\n  }\n}\n\nneedle.put('https://api.app.com/v2', nested, function(err, resp) {\n  console.log('Got ' + resp.bytes + ' bytes.') // another nice treat from this handsome fella.\n});\n```\n\n### needle.patch(url, data[, options][, callback])\n\nSame behaviour as PUT.\n\n### needle.delete(url, data[, options][, callback])\n\n```js\nvar options = {\n  username: 'fidelio',\n  password: 'x'\n}\n\nneedle.delete('https://api.app.com/messages/123', null, options, function(err, resp) {\n  // in this case, data may be null, but you need to explicity pass it.\n});\n```\n\n### needle.request(method, url, data[, options][, callback])\n\nGeneric request. This not only allows for flexibility, but also lets you perform a GET request with data, in which case will be appended to the request as a query string, unless you pass a `json: true` option (read below).\n\n```js\nvar params = {\n  q    : 'a very smart query',\n  page : 2\n}\n\nneedle.request('get', 'forum.com/search', params, function(err, resp) {\n  if (!err && resp.statusCode == 200)\n    console.log(resp.body); // here you go, mister.\n});\n```\n\nNow, if you set pass `json: true` among the options, Needle won't set your params as a querystring but instead send a JSON representation of your data through the request's body, as well as set the `Content-Type` and `Accept` headers to `application/json`.\n\n```js\nneedle.request('get', 'forum.com/search', params, { json: true }, function(err, resp) {\n  if (resp.statusCode == 200) console.log('It worked!');\n});\n```\n\nEvents\n------\n\nAll of the above methods return a [Readable stream](https://nodejs.org/api/stream.html#stream_class_stream_readable) that emits the following events, in addition to the regular ones (e.g. `end`, `close`, `data`, `pipe`, `readable`).\n\n### Event: `'response'`\n\n - `response <http.IncomingMessage>`\n\nEmitted when the underlying [http.ClientRequest](https://nodejs.org/api/http.html#http_class_http_clientrequest) emits a response event. This is after the connection is established and the header received, but before any of it is processed (e.g. authorization required or redirect to be followed). No data has been consumed at this point.\n\n### Event: `'redirect'`\n\n - `location <String>`\n\nIndicates that the a redirect is being followed. This means that the response code was a redirect (`301`, `302`, `303`, `307`) and the given [redirect options](#redirect-options) allowed following the URL received in the `Location` header.\n\n### Event: `'header'`\n\n - `statusCode <Integer>`\n - `headers <Object>`\n\nTriggered after the header has been processed, and just before the data is to be consumed. This implies that no redirect was followed and/or authentication header was received. In other words, we got a \"valid\" response.\n\n### Event: `'done'`\n\n - `exception <Error>` (optional)\n\nEmitted when the request/response process has finished, either because all data was consumed or an error ocurred somewhere in between. Unlike a regular stream's `end` event, Needle's `done` will be fired either on success or on failure, which is why the first argument may be an Error object. In other words:\n\n```js\nvar resp = needle.get('something.worthy/of/being/streamed/by/needle')\n                 .pipe(somewhereElse);\n\nresp.on('done', function(err) {\n  if (err) console.log('An error ocurred: ' + err.message);\n  else console.log('Great success!');\n})\n```\n\n### Event: `'err'`\n\n - `exception <Error>`\n\nEmitted when an error ocurrs. This should only happen once in the lifecycle of a Needle request.\n\n### Event: `'timeout'`\n\n - `type <String>`\n\nEmitted when an timeout error occurs. Type can be either 'open' or 'read'. This will called right before aborting the request, which will also trigger an `err` event, a described above, with an `ECONNRESET` (Socket hang up) exception.\n\nRequest options\n---------------\n\nFor information about options that've changed, there's always [the changelog](https://github.com/tomas/needle/releases).\n\n - `agent`       : Uses an [http.Agent](https://nodejs.org/api/http.html#http_class_http_agent) of your choice, instead of the global, default one. Useful for tweaking the behaviour at the connection level, such as when doing tunneling (see below for an example).\n - `json`        : When `true`, sets content type to `application/json` and sends request body as JSON string, instead of a query string.\n - `open_timeout`: (or `timeout`) Returns error if connection takes longer than X milisecs to establish. Defaults to `10000` (10 secs). `0` means no timeout.\n - `read_timeout`: Returns error if data transfer takes longer than X milisecs, after connection is established. Defaults to `0` (no timeout).\n - `follow_max`  : (or `follow`) Number of redirects to follow. Defaults to `0`. See below for more redirect options.\n - `multipart`   : Enables multipart/form-data encoding. Defaults to `false`. Use it when uploading files.\n - `proxy`       : Forwards request through HTTP(s) proxy. Eg. `proxy: 'http://user:pass@proxy.server.com:3128'`. For more advanced proxying/tunneling use a custom `agent`, as described below.\n - `headers`     : Object containing custom HTTP headers for request. Overrides defaults described below.\n - `auth`        : Determines what to do with provided username/password. Options are `auto`, `digest` or `basic` (default). `auto` will detect the type of authentication depending on the response headers.\n - `stream_length`: When sending streams, this lets you manually set the Content-Length header --if the stream's bytecount is known beforehand--, preventing ECONNRESET (socket hang up) errors on some servers that misbehave when receiving payloads of unknown size. Set it to `0` and Needle will get and set the stream's length for you, or leave unset for the default behaviour, which is no Content-Length header for stream payloads.\n\nResponse options\n----------------\n\n - `decode_response` : (or `decode`) Whether to decode the text responses to UTF-8, if Content-Type header shows a different charset. Defaults to `true`.\n - `parse_response`  : (or `parse`) Whether to parse XML or JSON response bodies automagically. Defaults to `true`. You can also set this to 'xml' or 'json' in which case Needle will *only* parse the response if the content type matches.\n - `output`          : Dump response output to file. This occurs after parsing and charset decoding is done.\n - `parse_cookies`   : Whether to parse response’s `Set-Cookie` header. Defaults to `true`. If parsed, response cookies will be available at `resp.cookies`.\n\nNote: To stay light on dependencies, Needle doesn't include the `xml2js` module used for XML parsing. To enable it, simply do `npm install xml2js`.\n\nHTTP Header options\n-------------------\n\nThese are basically shortcuts to the `headers` option described above.\n\n - `cookies`   : Builds and sets a Cookie header from a `{ key: 'value' }` object.\n - `compressed`: If `true`, sets 'Accept-Encoding' header to 'gzip,deflate', and inflates content if zipped. Defaults to `false`.\n - `username`  : For HTTP basic auth.\n - `password`  : For HTTP basic auth. Requires username to be passed, but is optional.\n - `accept`    : Sets 'Accept' HTTP header. Defaults to `*/*`.\n - `connection`: Sets 'Connection' HTTP header. Not set by default, unless running Node < 0.11.4 in which case it defaults to `close`. More info about this below.\n - `user_agent`: Sets the 'User-Agent' HTTP header. Defaults to `Needle/{version} (Node.js {node_version})`.\n - `content_type`: Sets the 'Content-Type' header. Unset by default, unless you're sending data in which case it's set accordingly to whatever is being sent (`application/x-www-form-urlencoded`, `application/json` or `multipart/form-data`). That is, of course, unless the option is passed, either here or through `options.headers`. You're the boss.\n\nNode.js TLS Options\n-------------------\n\nThese options are passed directly to `https.request` if present. Taken from the [original documentation](http://nodejs.org/docs/latest/api/https.html):\n\n - `pfx`                : Certificate, Private key and CA certificates to use for SSL.\n - `key`                : Private key to use for SSL.\n - `passphrase`         : A string of passphrase for the private key or pfx.\n - `cert`               : Public x509 certificate to use.\n - `ca`                 : An authority certificate or array of authority certificates to check the remote host against.\n - `ciphers`            : A string describing the ciphers to use or exclude.\n - `rejectUnauthorized` : If true, the server certificate is verified against the list of supplied CAs. An 'error' event is emitted if verification fails. Verification happens at the connection level, before the HTTP request is sent.\n - `secureProtocol`     : The SSL method to use, e.g. SSLv3_method to force SSL version 3.\n\nRedirect options\n----------------\n\nThese options only apply if the `follow_max` (or `follow`) option is higher than 0.\n\n - `follow_set_cookies`      : Sends the cookies received in the `set-cookie` header as part of the following request. `false` by default.\n - `follow_set_referer`      : Sets the 'Referer' header to the requested URI when following a redirect. `false` by default.\n - `follow_keep_method`      : If enabled, resends the request using the original verb instead of being rewritten to `get` with no data. `false` by default.\n - `follow_if_same_host`     : When true, Needle will only follow redirects that point to the same host as the original request. `false` by default.\n - `follow_if_same_protocol` : When true, Needle will only follow redirects that point to the same protocol as the original request. `false` by default.\n\nOverriding Defaults\n-------------------\n\nYes sir, we have it. Needle includes a `defaults()` method, that lets you override some of the defaults for all future requests. Like this:\n\n```js\nneedle.defaults({\n  open_timeout: 60000,\n  user_agent: 'MyApp/1.2.3',\n  parse_response: false });\n```\n\nThis will override Needle's default user agent and 10-second timeout, and disable response parsing, so you don't need to pass those options in every other request.\n\nMore advanced Proxy support\n---------------------------\n\nSince you can pass a custom HTTPAgent to Needle you can do all sorts of neat stuff. For example, if you want to use the [`tunnel`](https://github.com/koichik/node-tunnel) module for HTTPS proxying, you can do this:\n\n```js\nvar tunnel = require('tunnel');\nvar myAgent = tunnel.httpOverHttp({\n  proxy: { host: 'localhost' }\n});\n\nneedle.get('foobar.com', { agent: myAgent });\n```\n\nRegarding the 'Connection' header\n---------------------------------\n\nUnless you're running an old version of Node (< 0.11.4), by default Needle won't set the Connection header on requests, yielding Node's default behaviour of keeping the connection alive with the target server. This speeds up inmensely the process of sending several requests to the same host.\n\nOn older versions, however, this has the unwanted behaviour of preventing the runtime from exiting, either because of a bug or 'feature' that was changed on 0.11.4. To overcome this Needle does set the 'Connection' header to 'close' on those versions, however this also means that making new requests to the same host doesn't benefit from Keep-Alive.\n\nSo if you're stuck on 0.10 or even lower and want full speed, you can simply set the Connection header to 'Keep-Alive' by using `{ connection: 'Keep-Alive' }`. Please note, though, that an event loop handler will prevent the runtime from exiting so you'll need to manually call `process.exit()` or the universe will collapse.\n\nExamples Galore\n---------------\n\n### HTTPS GET with Basic Auth\n\n```js\nneedle.get('https://api.server.com', { username: 'you', password: 'secret' },\n  function(err, resp) {\n    // used HTTP auth\n});\n```\n\nOr use [RFC-1738](http://tools.ietf.org/html/rfc1738#section-3.1) basic auth URL syntax:\n\n```js\nneedle.get('https://username:password@api.server.com', function(err, resp) {\n    // used HTTP auth from URL\n});\n```\n\n### Digest Auth\n\n```js\nneedle.get('other.server.com', { username: 'you', password: 'secret', auth: 'digest' },\n  function(err, resp, body) {\n    // needle prepends 'http://' to your URL, if missing\n});\n```\n\n### Custom Accept header, deflate\n\n```js\nvar options = {\n  compressed : true,\n  follow     : 10,\n  accept     : 'application/vnd.github.full+json'\n}\n\nneedle.get('api.github.com/users/tomas', options, function(err, resp, body) {\n  // body will contain a JSON.parse(d) object\n  // if parsing fails, you'll simply get the original body\n});\n```\n\n### GET XML object\n\n```js\nneedle.get('https://news.ycombinator.com/rss', function(err, resp, body) {\n  // if xml2js is installed, you'll get a nice object containing the nodes in the RSS\n});\n```\n\n### GET binary, output to file\n\n```js\nneedle.get('http://upload.server.com/tux.png', { output: '/tmp/tux.png' }, function(err, resp, body) {\n  // you can dump any response to a file, not only binaries.\n});\n```\n\n### GET through proxy\n\n```js\nneedle.get('http://search.npmjs.org', { proxy: 'http://localhost:1234' }, function(err, resp, body) {\n  // request passed through proxy\n});\n```\n\n### GET a very large document in a stream (from 0.7+)\n\n```js\nvar stream = needle.get('http://www.as35662.net/100.log');\n\nstream.on('readable', function() {\n  var chunk;\n  while (chunk = this.read()) {\n    console.log('got data: ', chunk);\n  }\n});\n```\n\n### GET JSON object in a stream (from 0.7+)\n\n```js\nvar stream = needle.get('http://jsonplaceholder.typicode.com/db', { parse: true });\n\nstream.on('readable', function() {\n  var node;\n\n  // our stream will only emit a single JSON root node.\n  while (node = this.read()) {\n    console.log('got data: ', node);\n  }\n});\n```\n\n### GET JSONStream flexible parser with search query (from 0.7+)\n\n```js\n\n // The 'data' element of this stream will be the string representation\n // of the titles of all posts.\n\nneedle.get('http://jsonplaceholder.typicode.com/db', { parse: true })\n      .pipe(new JSONStream.parse('posts.*.title'));\n      .on('data', function (obj) {\n        console.log('got post title: %s', obj);\n      });\n```\n\n### File upload using multipart, passing file path\n\n```js\nvar data = {\n  foo: 'bar',\n  image: { file: '/home/tomas/linux.png', content_type: 'image/png' }\n}\n\nneedle.post('http://my.other.app.com', data, { multipart: true }, function(err, resp, body) {\n  // needle will read the file and include it in the form-data as binary\n});\n```\n\n### Stream upload, PUT or POST\n\n``` js\nneedle.put('https://api.app.com/v2', fs.createReadStream('myfile.txt'), function(err, resp, body) {\n  // stream content is uploaded verbatim\n});\n```\n\n### Multipart POST, passing data buffer\n\n```js\nvar buffer = fs.readFileSync('/path/to/package.zip');\n\nvar data = {\n  zip_file: {\n    buffer       : buffer,\n    filename     : 'mypackage.zip',\n    content_type : 'application/octet-stream'\n  }\n}\n\nneedle.post('http://somewhere.com/over/the/rainbow', data, { multipart: true }, function(err, resp, body) {\n  // if you see, when using buffers we need to pass the filename for the multipart body.\n  // you can also pass a filename when using the file path method, in case you want to override\n  // the default filename to be received on the other end.\n});\n```\n\n### Multipart with custom Content-Type\n\n```js\nvar data = {\n  token: 'verysecret',\n  payload: {\n    value: JSON.stringify({ title: 'test', version: 1 }),\n    content_type: 'application/json'\n  }\n}\n\nneedle.post('http://test.com/', data, { timeout: 5000, multipart: true }, function(err, resp, body) {\n  // in this case, if the request takes more than 5 seconds\n  // the callback will return a [Socket closed] error\n});\n```\n\nFor even more examples, check out the examples directory in the repo.\n\n### Testing\n\nTo run tests, you need to generate a self-signed SSL certificate in the `test` directory. After cloning the repository, run the following commands:\n\n    $ mkdir -p test/keys\n    $ openssl genrsa -out test/keys/ssl.key 2048\n    $ openssl req -new -key test/keys/ssl.key -x509 -days 999 -out test/keys/ssl.cert\n\nThen you should be able to run `npm test` once you have the dependencies in place.\n\n> Note: Tests currently only work on linux-based environments that have `/proc/self/fd`. They *do not* work on MacOS environments.\n> You can use Docker to run tests by creating a container and mounting the needle project directory on `/app`\n> `docker create --name Needle -v /app -w /app -v /app/node_modules -i node:argon`\n\nCredits\n-------\n\nWritten by Tomás Pollak, with the help of contributors.\n\nCopyright\n---------\n\n(c) Fork Ltd. Licensed under the MIT license.\n","starsCount":45,"created":"2011-12-11T05:31:30.478Z","modified":"2017-06-09T10:33:06.974Z","lastPublisher":{"name":"tomas","email":"tomas@forkhq.com"},"owners":[{"name":"tomas","email":"tomas@forkhq.com"}],"other":{"_attachments":{},"_from":".","_id":"needle","_nodeVersion":"6.10.1","_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/needle-1.6.0.tgz_1490408322422_0.4637763381469995"},"_npmUser":{"name":"tomas","email":"tomas@forkhq.com"},"_npmVersion":"3.10.10","_rev":"26-2abbe4732c2ee22c2b2077c6fcee935a","_shasum":"f52a5858972121618e002f8e6384cadac22d624f","author":{"name":"Tomás Pollak","email":"tomas@forkhq.com"},"bugs":{"url":"https://github.com/tomas/needle/issues"},"directories":{"lib":"./lib"},"dist-tags":{"latest":"1.6.0"},"dist":{"shasum":"f52a5858972121618e002f8e6384cadac22d624f","tarball":"https://registry.npmjs.org/needle/-/needle-1.6.0.tgz"},"maintainers":[{"name":"tomas","email":"tomas@forkhq.com"}],"readmeFilename":"README.md","time":{"modified":"2017-06-09T10:33:06.974Z","created":"2011-12-11T05:31:30.478Z","0.1.0":"2011-12-11T05:31:33.591Z","0.1.1":"2011-12-11T05:51:11.288Z","0.1.2":"2011-12-13T16:10:06.998Z","0.1.3":"2011-12-19T16:40:38.902Z","0.1.4":"2011-12-19T22:35:20.138Z","0.1.5":"2011-12-26T15:29:03.226Z","0.1.6":"2011-12-30T06:40:25.347Z","0.1.7":"2012-01-17T06:38:47.456Z","0.1.8":"2012-01-19T08:36:30.216Z","0.1.9":"2012-01-24T09:18:17.002Z","0.2.0":"2012-02-16T07:29:16.603Z","0.2.2":"2012-03-09T00:22:59.555Z","0.2.3":"2012-03-12T04:22:47.196Z","0.2.4":"2012-03-12T16:01:34.051Z","0.2.6":"2012-03-15T20:38:32.787Z","0.2.7":"2012-06-13T19:54:21.775Z","0.2.8":"2012-06-20T16:16:18.723Z","0.2.9":"2012-06-20T16:24:17.786Z","0.3.0":"2012-07-18T18:57:14.430Z","0.3.1":"2012-07-19T17:05:20.347Z","0.3.2":"2012-08-18T23:46:30.159Z","0.4.0":"2012-08-27T14:55:39.397Z","0.4.1":"2012-09-21T18:52:42.666Z","0.4.2":"2012-09-21T19:27:38.416Z","0.4.3":"2012-11-10T15:34:53.359Z","0.4.4":"2012-11-20T02:24:00.777Z","0.4.5":"2012-11-21T23:00:20.624Z","0.4.6":"2012-12-05T14:19:28.217Z","0.4.7":"2012-12-07T02:41:27.686Z","0.4.8":"2013-01-14T20:56:21.862Z","0.4.9":"2013-05-15T18:33:20.762Z","0.5.0":"2013-05-25T16:37:50.309Z","0.5.1":"2013-06-24T23:11:51.248Z","0.5.2":"2013-07-05T00:28:42.946Z","0.5.4":"2013-07-27T06:31:52.242Z","0.5.5":"2013-07-27T07:55:05.830Z","0.5.6":"2013-07-27T23:41:00.592Z","0.5.7":"2013-08-07T14:57:36.869Z","0.5.8":"2013-08-07T16:15:33.788Z","0.5.9":"2013-08-09T20:09:26.779Z","0.6.0":"2013-09-26T17:40:55.348Z","0.6.1":"2013-10-07T18:47:30.924Z","0.6.2":"2013-10-15T17:33:44.214Z","0.6.3":"2013-10-22T04:12:25.557Z","0.6.4":"2014-03-05T02:28:42.283Z","0.6.6":"2014-03-05T22:46:05.392Z","0.7.0":"2014-04-10T04:05:55.319Z","0.7.1":"2014-04-19T00:45:14.288Z","0.7.2":"2014-06-04T17:52:58.175Z","0.7.3":"2014-07-30T01:23:10.719Z","0.7.4":"2014-07-30T16:44:30.281Z","0.7.5":"2014-07-30T17:07:42.140Z","0.7.6":"2014-07-30T17:37:34.116Z","0.7.7":"2014-07-31T04:28:14.624Z","0.7.8":"2014-08-01T23:04:36.029Z","0.7.9":"2014-08-29T19:50:34.865Z","0.7.10":"2014-09-26T02:44:16.766Z","0.7.11":"2015-01-29T13:14:46.984Z","0.8.0":"2015-03-04T23:49:01.117Z","0.8.1":"2015-03-05T00:15:05.620Z","0.8.2":"2015-03-11T07:31:05.599Z","0.9.0":"2015-03-24T20:58:07.093Z","0.9.1":"2015-03-31T00:16:13.195Z","0.9.2":"2015-04-15T23:55:14.241Z","0.10.0":"2015-07-09T00:26:33.753Z","0.11.0":"2015-11-05T23:21:05.000Z","1.0.0":"2016-02-02T21:12:23.092Z","1.1.0":"2016-08-08T20:29:12.704Z","1.1.1":"2016-09-02T16:39:31.877Z","1.1.2":"2016-09-02T16:41:51.355Z","1.2.0":"2016-10-25T01:33:27.492Z","1.3.0":"2016-10-25T01:34:28.191Z","1.4.0":"2016-11-22T19:46:49.018Z","1.4.1":"2016-11-22T20:15:56.715Z","1.4.2":"2016-11-25T19:04:26.395Z","1.4.3":"2016-12-23T21:50:48.787Z","1.4.4":"2017-02-07T16:48:55.465Z","1.4.5":"2017-02-07T16:59:39.293Z","1.4.6":"2017-02-27T22:11:33.212Z","1.5.0":"2017-02-28T01:25:39.146Z","1.5.1":"2017-03-10T20:06:00.433Z","1.5.2":"2017-03-10T20:58:27.590Z","1.6.0":"2017-03-25T02:18:42.681Z"},"users":{"sessionbean":true,"muzzlefork":true,"imbcmdth":true,"52u":true,"hengkiardo":true,"tinyhill":true,"thelmos":true,"j3kz":true,"leonning":true,"matatbread":true,"pid":true,"dazld":true,"gztomas":true,"maninbucket":true,"onel0p3z":true,"lexholden":true,"complexcarb":true,"javascript":true,"vaviloff":true,"sakthiifnotec":true,"jasonxu":true,"antixrist":true,"bojand":true,"kerimdzhanov":true,"keanodejs":true,"kbakba":true,"styxnp":true,"siirial":true,"bigdoods":true,"mccoyjordan":true,"azevedo":true,"lauris":true,"akinjide":true,"largepuma":true,"evegreen":true,"max_devjs":true,"cetincem":true,"buzuli":true,"shanewholloway":true,"kodekracker":true,"josep":true,"diglididudeng":true,"omegga":true,"mikewarcholik":true,"grumpycat":true}}}