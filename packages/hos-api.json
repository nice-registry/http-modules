{"name":"hos-api","version":"0.3.5","description":"Express.js midelware for transfaring HTTP calls for HOS environment.","main":"index.js","scripts":{"test":"echo \"Error: no test specified\" && exit 1"},"repository":"https://github.com/HoS0/HoSApi","keywords":["HoS"],"license":"MIT","homepage":"https://github.com/HoS0/HoSApi","dependencies":{"bluebird":"^3.3.4","body-parser":"^1.15.0","coffee-script":"^1.10.0","cors":"^2.7.1","express":"^4.13.4","hos-com":"^0.2.0","http":"0.0.0","hos-controller":"~0.2.0","node-uuid":"^1.4.7","path":"^0.12.7","swagger-tools":"^0.10.1"},"devDependencies":{"connect":"^3.4.1","cors":"^2.7.1","gulp":"^3.9.1","gulp-coffee":"^2.3.1","gulp-jasmine":"^2.3.0","jasmine-reporters":"^2.1.1","supertest":"^1.2.0"},"gitHead":"2d876751350b844bdbe46ef6a78888eec4f0e92f","versions":[{"number":"0.2.1","date":"2016-03-31T20:37:47.118Z"},{"number":"0.2.2","date":"2016-03-31T20:41:41.529Z"},{"number":"0.2.3","date":"2016-03-31T22:47:02.227Z"},{"number":"0.2.4","date":"2016-04-05T14:24:13.290Z"},{"number":"0.2.5","date":"2016-04-06T15:16:30.127Z"},{"number":"0.3.0","date":"2016-05-06T12:30:17.162Z"},{"number":"0.3.1","date":"2016-05-11T12:37:12.728Z"},{"number":"0.3.2","date":"2016-05-12T21:35:24.481Z"},{"number":"0.3.3","date":"2016-05-12T21:39:45.824Z"},{"number":"0.3.4","date":"2016-05-15T13:08:51.633Z"},{"number":"0.3.5","date":"2016-05-18T19:26:12.992Z"}],"readme":"# HoSApi\n\nHoS API is in charge of translating HTTP and HTTPS calls into the HoS environment, it listens to the calls on the web API and sends the call into the appropriate service, after which it will send the reply back into the caller.\n\n## Example\n\nYou can simply expose an api to your hos environment:\n\n``` javascript\nvar express = require('express');\nvar http = require('http');\nvar bodyParser = require('body-parser');\nvar hosApi = require('hos-api');\n\napp = express();\nhosApi.init().then(function() {\n  app = express();\n  app.set('port', 8080);\n  app.use(bodyParser.json());\n  app.use(hosApi.middleware);\n  http.createServer(app).listen(app.get('port'), function() {\n    console.log('Express server listening on port ' + app.get('port'));\n    console.log('make sure hos-auth is running on your environment');\n    return;\n  });\n});\n```\nAfter running mentioned code you can open any routes for the given service running and get the response.\n\nLets step further and plug in swagger validation and middlewares to the environment:\n\n``` javascript\nvar express = require('express');\nvar http = require('http');\nvar bodyParser = require('body-parser');\nvar hosApi = require('hos-api');\nvar HoSAuth = require('hos-auth');\nvar cors = require('cors');\n\nvar amqpurl     = \"localhost\"\nvar amqpusername    = \"guest\"\nvar amqppassword    = \"guest\"\nhosAuth = new HoSAuth(amqpurl, amqpusername, amqppassword)\nhosAuth.on('message', (function(msg){ msg.accept(); }));\n\nhosAuth.connect()\n.then(function() {\n    hosApi.init(true, 'localhost:8080').then(function() {\n      app = express();\n      app.set('port', 8080);\n      app.use(cors());\n      app.use(bodyParser.json());\n      app.use(hosApi.swaggerMetadata);\n      app.use(hosApi.swaggerValidator);\n      app.use(hosApi.swaggerUi);\n      app.use(hosApi.middleware);\n      http.createServer(app).listen(app.get('port'), function() {\n        console.log('Express server listening on port ' + app.get('port'));\n        console.log('try opening http://localhost:8080/docs/');\n        return;\n      });\n    });\n});\n```\n\nYou need to have a running hos-auth, in this example authentication service simply accept all the incoming calls, in hosApi init method you can specify is you require to initialize swagger middlewere and the host address to serve the swaggerui with, hos-api initializes an instance of hos-controller, collecting swagger docs for each service merging them and serve them as once in `/docs` or `/api-docs` of your host server address, every 10 minutes by default swagger file for the api gets updated.\n\n### url\n\n`http://{YOURSERVER}/{SERVICE}/{TASK}/{ID}?{QUERYSTRING}`\n\n- `YOURSERVER`: server address\n- `SERVICE`: destination HoS service\n- `TASK`: required task from that service\n- `ID` (optional): can be used to specify id of resource in specific task\n- `QUERYSTRING` (optional): can be used for an query statement recommend to be written as `con1=val1&con2=val2...` destination service specify the requirement.\n\n### headers\n\n- sid (optional): instance of destination service unique id.\n- token (optional): user token of the caller, should be provided to authorize the call if needed.\n\n### body\n\nJSON request for destination service, depends on service documentation.\n\n## Time out\n\nFor each calls the timeout of 30 sec has been define which will end up in returning 404 if the call does not have a reply in requested time.\n\n## Static pages\n\nPut the static pages in `views` directory and resources in `public` directory, making a `GET` request if the file exist web server will send the `HTML` file to requester.\n\nThis software is licensed under the MIT License.\n","created":"2016-03-31T20:37:47.118Z","modified":"2016-05-18T19:26:12.992Z","lastPublisher":{"name":"al_kh31","email":"al_kh31@yahoo.com"},"owners":[{"name":"al_kh31","email":"al_kh31@yahoo.com"}],"other":{"_attachments":{},"_from":".","_id":"hos-api","_nodeVersion":"4.3.0","_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/hos-api-0.3.5.tgz_1463599570677_0.2571821582969278"},"_npmUser":{"name":"al_kh31","email":"al_kh31@yahoo.com"},"_npmVersion":"2.14.12","_rev":"1-a78fa90e36e8f23f0f9ae97cd4fed998","_shasum":"cc635b5cbde4f07f3b89cfece0a7608b17b225d5","author":{"name":"Ali Khoramshahi","email":"al_kh31@yahoo.com","url":"al-kh.me"},"bugs":{"url":"https://github.com/HoS0/HoSApi"},"directories":{},"dist-tags":{"latest":"0.3.5"},"dist":{"shasum":"cc635b5cbde4f07f3b89cfece0a7608b17b225d5","tarball":"http://registry.npmjs.org/hos-api/-/hos-api-0.3.5.tgz"},"maintainers":[{"name":"al_kh31","email":"al_kh31@yahoo.com"}],"readmeFilename":"README.md","time":{"modified":"2016-05-18T19:26:12.992Z","created":"2016-03-31T20:37:47.118Z","0.2.1":"2016-03-31T20:37:47.118Z","0.2.2":"2016-03-31T20:41:41.529Z","0.2.3":"2016-03-31T22:47:02.227Z","0.2.4":"2016-04-05T14:24:13.290Z","0.2.5":"2016-04-06T15:16:30.127Z","0.3.0":"2016-05-06T12:30:17.162Z","0.3.1":"2016-05-11T12:37:12.728Z","0.3.2":"2016-05-12T21:35:24.481Z","0.3.3":"2016-05-12T21:39:45.824Z","0.3.4":"2016-05-15T13:08:51.633Z","0.3.5":"2016-05-18T19:26:12.992Z"}}}