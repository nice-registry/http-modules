{"name":"http-node-phpfpm","version":"1.0.3","description":"Use Node.js as proxy to PHP or as phpfpm client","main":"index.js","dependencies":{"fastcgi-client":"0.0.1","urlencode-for-php":"^1.0.2"},"devDependencies":{},"scripts":{"test":"mocha"},"repository":"https://github.com/lfoma/http-node-phpfpm","keywords":["nodejs","php","phpfpm","php-fpm","proxy","http","fastcgi"],"license":"MIT","gitHead":"2b304faed02314eac4d98ad5b85bde8e1eba58c3","homepage":"https://github.com/lfoma/http-node-phpfpm#readme","_resolved":"https://registry.npmjs.org/http-node-phpfpm/-/http-node-phpfpm-1.0.1.tgz","versions":[{"number":"1.0.1","date":"2016-08-02T15:42:29.022Z"},{"number":"1.0.2","date":"2016-08-03T14:48:07.926Z"},{"number":"1.0.3","date":"2016-08-12T11:14:24.203Z"}],"readme":"# http-node-phpfpm\nnode.js run php scripts via phpfpm\n\n[![NPM](https://nodei.co/npm/http-node-phpfpm.png?downloads=true&stars=true)](https://www.npmjs.com/package/http-node-phpfpm)\n\n```\nnpm install http-node-phpfpm\n```\n\n## Usage\n\n```js\nvar PHPFPM = require('node-phpfpm');\n\nvar phpfpm = new PHPFPM(\n{\n\thost: '127.0.0.1',\n\tport: 9000,\n\tdocumentRoot: __dirname\n});\n\nphpfpm.run('test.php', function(err, output, phpErrors)\n{\n\tif (err == 99) console.error('PHPFPM server error');\n\tconsole.log(output);\n\tif (phpErrors) console.error(phpErrors);\n});\n```\n\n## Configuration\n\n```js\nvar phpfpm = new PHPFPM(configObject);\n```\n\nconfigObject may have the following keys:\n\n\n* `documentRoot` optional [string] the document root folder of PHP scripts. must ends with /\n* `host` optional [string] the ip or host name of php-fpm server (default: 127.0.0.1)\n* `port` optional [int] the port of php-fpm server ( default: 9000 )\n* `sockFile` optional [string] use the unix sock file instead of 127.0.0.1:9000 to connect php-fpm server \n\n\n## APIs\n\n### run(options, callback)\n\navailable keys in options object\n\n\n* `uri` [string] path to your phpfile\n* `url` <optinal> [string] alias of uri\n* `method` optional [string] GET or POST (default: GET)\n* `form` optional [object] form_data that will be send with content-type: application/x-www-form-urlencoded \n* `json` optional [object] json data that will be send with content-type: application/json \n* `body` optional [string] raw post body data\n* `contentType` optional [string] the content-type header\n* `contentLength` optional [string] the content-length header\n\n\nif you send a string as `options`, it will be converted to:\n\n```js\n{ uri: \"the string value\", method: 'GET' }\n```\n\ncallback\n\n```js\nfunction(err, output, phpErrors)\n{\n\t// if err === 99, means php-fpm error \n\t// it may be lost php-fpm connection or too many connections\n\t// otherwise it will always equal to false\n\t\n\t// output is the stdout of php scripts\n\t\n\t// phpErrors is the php errors detail string\n\t// php will output some errors, but that does not mean the request fails\n\t// if you turn on display_errors in your php.ini, the phpErrors content will also be found in the output string\n\t\n\tconsole.log(err, output, phpErrors); \n}\n```\n\n## Demo\n\nSimple php request with no parameters\n```js\nphpfpm.run('test1.php', function(err, output, phpErrors)\n{\n\tconsole.log(err, output, phpErrors);\n});\n```\n\nSend data via GET method\n```js\nphpfpm.run('test.php?a=b&c=d&e[0]=1&e[1]=2', function(err, output, phpErrors)\n{\n\tconsole.log(err, output, phpErrors);\n});\n```\n```php\n<?php\nprint_r($_GET);\n// Array\n// (\n//     [a] => b\n//     [c] => d\n//     [e] => Array\n//         (\n//             [0] => 1\n//             [1] => 2\n//         )\n// )\n?>\n```\n\nSend form data via POST method\n```js\nphpfpm.run(\n{\n\turi: 'test.php',\n\tform: \n\t{\n\t\ta:'a',\n\t\tb:'b'\n\t}\n}, function(err, output, phpErrors)\n{\n\tconsole.log(err, output, phpErrors);\n});\n```\n```php\n<?php\nprint_r($_POST);\n// Array\n// (\n//     [a] => a\n//     [b] => b\n// )\n?>\n```\n\nSend json data with POST method\n```js\nphpfpm.run(\n{\n\turi: 'test.php',\n\tjson: \n\t{\n\t\ta:'a',\n\t\tb:'b'\n\t}\n}, function(err, output, phpErrors)\n{\n\tconsole.log(err, output, phpErrors);\n});\n```\n```php\n<?php\necho file_get_contents('php://input');\n// {\"a\":\"a\",\"b\":\"b\"}\n?>\n```\n\nSend form data with GET method\n```js\nphpfpm.run(\n{\n\turi: 'test2.php',\n\tmethod: 'GET',\n\tform: \n\t{\n\t\ta:'a',\n\t\tb:'b'\n\t}\n}, function(err, output, phpErrors)\n{\n\tconsole.log(err, output, phpErrors);\n});\n```\n```php\n<?php\nprint_r($_GET);\n// Array\n// (\n//     [a] => a\n//     [b] => b\n// )\n?>\n```\n\nSend form data and query string with GET method\n```js\nphpfpm.run(\n{\n\turi: 'test2.php?c=cc',\n\tmethod: 'GET',\n\tform: \n\t{\n\t\ta:'a',\n\t\tb:'b'\n\t}\n}, function(err, output, phpErrors)\n{\n\tconsole.log(err, output, phpErrors);\n});\n```\n```php\n<?php\nprint_r($_GET);\n// Array\n// (\n//     [c] => cc\n//     [a] => a\n//     [b] => b\n// )\n?>\n```\n\nSend raw body data with POST method\n```js\nphpfpm.run(\n{\n\turi: 'test5.php',\n\tbody: 'abc123'\n}, function(err, output, phpErrors)\n{\n\tconsole.log(err, output, phpErrors);\n});\n```\n```php\n<?php\necho file_get_contents('php://input');\n// abc123\n?>\n```\n\n## License\nMIT\n\n## Thanks\nThis project is based on the great work of `node-phpfpm` written by longbill. [longbill/node-phpfpm](https://github.com/longbill/node-phpfpm) and `node-fastcgi-client` written by LastLeaf. [LastLeaf/node-fastcgi-client](https://github.com/LastLeaf/node-fastcgi-client)\n\n## Links\n\n[How to execute PHP scripts with Node.JS](http://jszen.com/how-to-execute-php-scripts-with-nodejs.8.html)\n","created":"2016-08-02T15:42:29.022Z","modified":"2016-08-12T11:14:24.203Z","lastPublisher":{"name":"lfoma","email":"mail@foma.me"},"owners":[{"name":"lfoma","email":"mail@foma.me"}],"other":{"_attachments":{},"_from":".","_id":"http-node-phpfpm","_nodeVersion":"4.4.7","_npmOperationalInternal":{"host":"packages-16-east.internal.npmjs.com","tmp":"tmp/http-node-phpfpm-1.0.3.tgz_1471000462773_0.9189435408916324"},"_npmUser":{"name":"lfoma","email":"mail@foma.me"},"_npmVersion":"2.15.8","_rev":"1-650ae10b85958147fd42eb012979425f","_shasum":"f4a628dc4466b837db33e4e4196016149541bb9e","author":{"name":"lfoma"},"bugs":{"url":"https://github.com/lfoma/http-node-phpfpm/issues"},"directories":{},"dist-tags":{"latest":"1.0.3"},"dist":{"shasum":"f4a628dc4466b837db33e4e4196016149541bb9e","tarball":"http://registry.npmjs.org/http-node-phpfpm/-/http-node-phpfpm-1.0.3.tgz"},"maintainers":[{"name":"lfoma","email":"mail@foma.me"}],"readmeFilename":"README.md","time":{"modified":"2016-08-12T11:14:24.203Z","created":"2016-08-02T15:42:29.022Z","1.0.1":"2016-08-02T15:42:29.022Z","1.0.2":"2016-08-03T14:48:07.926Z","1.0.3":"2016-08-12T11:14:24.203Z"}}}