{"name":"koa-api-combo","version":"2.0.0","description":"proxy multiple http or https requests, and response the result array by combine all the result.","main":"index.js","scripts":{"test":"mocha --reporter spec"},"repository":"https://github.com/yss/node-api-combo","keywords":["koa","api","combo","middleware","koa2","node","proxy"],"engineStrict":true,"engines":{"node":">=4.0.0"},"license":"ISC","homepage":"https://github.com/yss/node-api-combo#readme","devDependencies":{"mocha":"~3.4.2","should":"~11.2.1"},"gitHead":"05b791f888fd4681921469634c987155360685b3","versions":[{"number":"1.0.0","date":"2017-06-20T04:46:58.454Z"},{"number":"2.0.0","date":"2017-06-23T04:01:13.312Z"}],"readme":"# node-api-combo\nproxy multiple http or https requests, and response the result array by combine all the result.\n\n## Usage\n\n```js\nconst Combo = require('koa-api-combo');\n\n// GET /combo?urls=encodeURIComponent('/x,/xx?xxx,/xxx')&...\napp.use(Combo('/combo', { apiHost: 'a.com' });\n// equals to\n// GET /x?...\n// GET /xx?xxx&...\n// GET /xxx?...\n```\n\n## Install\n\n```sh\nnpm install koa-api-combo --save\n```\n\n## Middleware\n\n### `Combo(path, config)`\n\n* `path` is the route string. And should be exactly equal to `ctx.path`.\n* `config` is an object configuration for api request below.\n\n### `ApiRequest(config)`\n\n* @param {string} config.apiHost\n* @param {string} [config.protocol=http] the protocol that request api server\n* @param {number} [config.dnsCacheTime=10] the time for dns cache, default 10 seconds, do not use dns cache if set 0\n* @param {number} [config.timeout=10] timeout for each api request, default 10 seconds\n* @param {boolean} [config.compress=false] whether accept encoding from api server, and only gzip and deflate support.\n* @param {string} [config.headers='Cookie,User-Agent,Referrer'] the header you want to send to api server\n\n### Query\n\nThe key of query is `urls`.\n\nThe value is the url array separate from `,`, and should encode it by use `encodeURIComponent`.\n\nEach url can have `?` and `&`, and will append with the querystring from `ctx.querystring` except `urls`.\n\nSo this means parameters are shared by each url if you set other parameter but `urls` to current request.\n\nSome Example:\n\n```html\nGET /combo?urls=/a,/b&p=1 # urls=encodeURIComponent('/a,/b')\n// equivalent to\n// /a?p=1 and /b?p=1\n\nGET /combo?h=2&urls=/a?c=1,/b?p=1&p=1 # urls=encodeURIComponent('/a?c=1,/b?p=1')\n// equivalent to\n// /a?c=1&h=2&p=1 and /b?p=1&h=2&p=1\n```\n\nNote::: it just append to the url for the same query! And query from url is first.\n\n## Test\n\n`npm test`","created":"2017-06-20T04:46:58.454Z","modified":"2017-06-23T04:01:13.312Z","lastPublisher":{"name":"yss","email":"yss.nelson@gmail.com"},"owners":[{"name":"yss","email":"yss.nelson@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"koa-api-combo","_nodeVersion":"7.7.2","_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/koa-api-combo-2.0.0.tgz_1498190473184_0.45983948558568954"},"_npmUser":{"name":"yss","email":"yss.nelson@gmail.com"},"_npmVersion":"4.1.2","_rev":"2-b930a72c2d1464358dcbc3ffca93e559","_shasum":"49223ae836d3e824f2a90c16181f370a27daadaa","author":{"name":"yss"},"bugs":{"url":"https://github.com/yss/node-api-combo/issues"},"directories":{},"dist-tags":{"latest":"2.0.0"},"dist":{"shasum":"49223ae836d3e824f2a90c16181f370a27daadaa","tarball":"https://registry.npmjs.org/koa-api-combo/-/koa-api-combo-2.0.0.tgz"},"maintainers":[{"name":"yss","email":"yss.nelson@gmail.com"}],"readmeFilename":"README.md","time":{"modified":"2017-06-23T04:01:13.312Z","created":"2017-06-20T04:46:58.454Z","1.0.0":"2017-06-20T04:46:58.454Z","2.0.0":"2017-06-23T04:01:13.312Z"}}}