{"name":"listen-one","version":"1.0.5","description":"http and https server listen on one port;在同一个端口监听http和https","main":"index.js","scripts":{"test":"echo \"Error: no test specified\" && exit 1","push":"npm version patch && npm publish"},"license":"MIT","repository":"https://github.com/laomu1988/listen-one","dependencies":{"debug":"^2.6.3","pem":"^1.9.4","tls":"0.0.1"},"devDependencies":{"express":"^4.14.0","koa":"^2.0.0-alpha.7"},"gitHead":"76a1eedfbe932995293e696afbf3ef60b4865c2f","homepage":"https://github.com/laomu1988/listen-one#readme","versions":[{"number":"1.0.1","date":"2017-01-03T11:52:15.422Z"},{"number":"1.0.2","date":"2017-01-05T03:41:17.137Z"},{"number":"1.0.3","date":"2017-01-13T06:51:33.056Z"},{"number":"1.0.4","date":"2017-01-16T07:45:07.262Z"},{"number":"1.0.5","date":"2017-04-20T05:52:06.277Z"}],"readme":"# 在一个端口监听http和https\n\n## 安装\n```\nnpm install listen-one --save\n```\n\n## 使用\n```js\n\"use strict\";\nvar express = require('express');\nvar app = new express();\nvar one = require('../index');\n\n// 下载https证书的链接\napp.get('/cert', function (req, res, next) {\n    var cert = one.getCert();\n    if (cert) {\n        if (cert.header) {\n            res.set(cert.header);\n        }\n        res.send(cert.body);\n    }\n});\n\napp.get('/', function (req, res) {\n    res.send('Hello World');\n});\n\none.createServer(app);\n\n// 使用https链接\none.https();\n\none.listen(3000, function (err) {\n    if (err) {\n        console.log(err);\n    } else {\n        console.log('Start Server At   http://localhost:3000/')\n    }\n});\n\n```\nkoa2使用示例见文件test/koa.test.js\n\n\n## api\n* createServer(listener) : 创建服务器,同http.createServer\n* listen(port,[callback])  : 监听端口\n    - port: 监听端口\n    - callback: 启动监听后回调\n* https([conf])   : 启动https服务,必须在createServer之后才可以调用\n    - conf: 包括key和cert,https访问的密匙和公匙\n    - callback: 启动监听后的回调\n* getCert()              : 获取https证书(浏览器访问地址需要证书才可正常访问)\n* close()                : 停止监听端口\n\n## todo\n* [x] 启动http\n* [x] 启动https\n* [x] 下载https证书\n* [x] 停止监听端口\n* [x] express使用示例\n* [x] koa使用示例\n* [x] 停止监听时停止所有服务监听\n* [ ] 增加debug调试内容\n\n## history\n* `1.0.5`修复close后http和https服务器未关闭问题\n","created":"2017-01-03T11:52:15.422Z","modified":"2017-04-20T05:52:06.277Z","lastPublisher":{"name":"laomu","email":"laomu1988@qq.com"},"owners":[{"name":"laomu","email":"laomu1988@qq.com"}],"other":{"_attachments":{},"_from":".","_id":"listen-one","_nodeVersion":"6.0.0","_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/listen-one-1.0.5.tgz_1492667526015_0.6571895366068929"},"_npmUser":{"name":"laomu","email":"laomu1988@qq.com"},"_npmVersion":"3.8.6","_rev":"5-e2951149418ca404d2f020080d57d552","_shasum":"8038866fab6fabd73a2b6f69a55a455e89dd53d6","author":{"name":"laomu1988"},"bugs":{"url":"https://github.com/laomu1988/listen-one/issues"},"directories":{},"dist-tags":{"latest":"1.0.5"},"dist":{"shasum":"8038866fab6fabd73a2b6f69a55a455e89dd53d6","tarball":"https://registry.npmjs.org/listen-one/-/listen-one-1.0.5.tgz"},"maintainers":[{"name":"laomu","email":"laomu1988@qq.com"}],"readmeFilename":"readme.md","time":{"modified":"2017-04-20T05:52:06.277Z","created":"2017-01-03T11:52:15.422Z","1.0.1":"2017-01-03T11:52:15.422Z","1.0.2":"2017-01-05T03:41:17.137Z","1.0.3":"2017-01-13T06:51:33.056Z","1.0.4":"2017-01-16T07:45:07.262Z","1.0.5":"2017-04-20T05:52:06.277Z"}}}