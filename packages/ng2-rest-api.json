{"name":"ng2-rest-api","version":"0.3.6","license":"MIT","main":"./src/index.ts","typings":"./dist/index.d.ts","scripts":{"start":"ng serve","lint":"tslint \"src/**/*.ts\"","test":"ng test","pree2e":"webdriver-manager update","e2e":"protractor"},"private":false,"dependencies":{"@angular/common":"~2.0.0","@angular/compiler":"~2.0.0","@angular/core":"~2.0.0","@angular/forms":"~2.0.0","@angular/http":"~2.0.0","@angular/platform-browser":"~2.0.0","@angular/platform-browser-dynamic":"~2.0.0","@angular/router":"~3.0.0","core-js":"^2.4.1","rxjs":"5.0.0-beta.12","ts-helpers":"^1.1.1","zone.js":"^0.6.23"},"devDependencies":{"@types/jasmine":"^2.2.30","@types/node":"^6.0.42","babel-core":"^6.17.0","babel-loader":"^6.2.5","babel-preset-es2015":"^6.16.0","codelyzer":"~0.0.26","jasmine-core":"2.4.1","jasmine-spec-reporter":"2.5.0","karma":"1.2.0","karma-chrome-launcher":"^2.0.0","karma-cli":"^1.0.1","karma-jasmine":"^1.0.2","karma-remap-istanbul":"^0.2.1","protractor":"4.0.9","ts-loader":"^0.9.5","ts-node":"1.2.1","tslint":"3.13.0","typescript":"2.0.2","webpack":"2.1.0-beta.24","webpack-node-externals":"^1.5.4"},"gitHead":"5654b33f4784b542c4d4c5f49df07ec51acad0ca","description":"Ng2-rest-api - is a rest api provider for angular 2 for http actions request to server and instantiate models. - Describe api to define endpoints and actions - Improves code-reusability by separating configuration from code that does actual work. - That s","versions":[{"number":"0.2.0","date":"2016-10-23T13:41:44.084Z"},{"number":"0.2.1","date":"2016-10-23T14:12:00.549Z"},{"number":"0.2.2","date":"2016-10-23T14:21:13.267Z"},{"number":"0.2.3","date":"2016-10-23T14:28:53.849Z"},{"number":"0.2.4","date":"2016-10-23T14:49:17.419Z"},{"number":"0.2.5","date":"2016-10-23T14:57:28.642Z"},{"number":"0.2.6","date":"2016-10-23T15:07:14.182Z"},{"number":"0.2.7","date":"2016-10-23T15:10:32.151Z"},{"number":"0.2.8","date":"2016-10-23T15:16:29.483Z"},{"number":"0.2.9","date":"2016-10-23T15:23:09.063Z"},{"number":"0.3.0","date":"2016-10-23T15:38:51.813Z"},{"number":"0.3.1","date":"2016-10-27T15:11:50.780Z"},{"number":"0.3.2","date":"2016-11-03T12:57:59.875Z"},{"number":"0.3.3","date":"2016-11-03T16:32:48.162Z"},{"number":"0.3.5","date":"2016-11-06T14:43:58.724Z"},{"number":"0.3.6","date":"2016-11-07T09:25:26.186Z"}],"readme":"# ng2-rest-api\n\nNg2-rest-api - is a rest api provider for angular 2 for http actions request to server and instantiate models.\n- Describe api to define endpoints and actions\n- Improves code-reusability by separating configuration from code that does actual work.\n- That simplifies common GET, POST, DELETE, and UPDATE requests.\n- Use a parameterized URLs.\n- Easy headers read.\n- Cache requests (todo)\n\nIf you need - you can get plain text response (It is sometimes convenient, but do not overdo it)\n\nFor Angular 1: https://github.com/zaqqaz/ng-rest-api\n\n![directive](https://cloud.githubusercontent.com/assets/2823336/19967580/9fa019e8-a1d9-11e6-827e-370232277c0d.png)\n\n## Installation\n\nTo install this library, run:\n\n```bash\n$ npm install ng2-rest-api --save\n```\n\n## NEXT STEPS\n1. Describe models\n2. Create config\n3. Add to @NgModule and execute static method *configure*.\n5. Advice: use ApiProvider only in managers/services not from controllers.\n6. *Enjoy!*\n\n## Config\n\nYou should describe endpoints and http Actions.\nNg2-rest-api already had config for popular actions (get(GET),query(GET, array), update(PUT), patch(PATCH), remove(DELETE)).\nBut if you need you can override them and add any others.\n\n![directive](https://cloud.githubusercontent.com/assets/2823336/19968023/63ec14f4-a1db-11e6-818c-9f22cae7107d.png)\n\n\n### Let's look at the interfaces for config:\n\n**ApiConfig**\n```typescript\ninterface ApiConfig {\n  baseUrl: string,  // e.g. http://example.com:8080/api\n  endpoints: Endpoint[]\n}\n```\n\n**Endpoint**\n```typescript\ninterface Endpoint {\n  name: OpaqueToken; // The name of emdpoint.\n  route: string; // A parameterized part of URL\n  model?: any; // {Object} - model on which will be mapped response, if no - return JSON object.\n  actions?: Action[]; // Hash with declaration of custom actions that will be available in addition to the default set of default actions.\n}\n```\n\n**route** -\nA parameterized part of URL template with parameters prefixed by : as in `/user/:username`.\nIf you are using a url with a suffix, just add the suffix, like this:\n`'/resource.json'` or `'/:id.json'` or even `'/resource/:resource_id.:format'`\nIf the parameter before the suffix is empty, `:resource_id` in this case, then the `/.` will be collapsed down to a single ..\nIf you need this sequence to appear and not collapse then you can escape it with `/\\.`.\n\n**Action**\n```typescript\ninterface Action {\n   name: string, // The name of action.\n   method: string, // Case insensitive HTTP method (e.g. GET, POST, PUT, DELETE, JSONP, etc).\n   instantiateModel?: boolean, // need do instatiate model ? default - true; if no - return plain text response.\n   isArray?: boolean, // If true then the returned object for this action is an array,\n   headersForReading?: Array<string>, // Headers which need read\n   params?: any, // Optional set of pre-bound parameters for this action\n   cache?: any // todo\n }\n```\n---\n\n**params** -\nDefault values for url parameters. These can be overridden in actions methods.\nIf a parameter value is a function, it will be called every time a param value needs to be obtained for a request (unless the param was overridden).\nThe function will be passed the current data value as an argument.\nEach key value in the parameter object is first bound to url template if present and then any excess keys are appended to the url search query after the ?.\nGiven a template `/path/:verb` and parameter `{verb:'greet', salutation:'Hello'}` results in URL `/path/greet?salutation=Hello`.\nIf the parameter value is prefixed with `@`, then the value for that parameter will be extracted from the corresponding property on the data object (provided when calling a \"non-GET\" action method).\nFor example, if the defaultParam object is `{someParam: '@someProp'}` then the value of someParam will be data.someProp.\nNote that the parameter will be ignored, when calling a \"GET\" action method (i.e. an action method that does not accept a request body)\n\n## How to use\n```\n// api: ApiProvider\n// endpointName: {OpaqueToken} - endpoint name from config.\n// actionName: {string} - default action name or any from config.\n// body: {object} - body data for POST request. If is GET request body use as params\n// params: {object} - additional params which will be mixed with pre-bound parameters for this action and override them if will has the same key.\nthis.api.endpoint(endpointName).action(actionName', body, params);\n```\n\n\n## Examples:\n**Model**\n```typescript\nimport {Image} from 'api/models/Image';\n\nexport class Post {\n  id?: number;\n  title: string;\n  description: string;\n  content: string;\n  image: Image | any;\n\n  constructor({id, title, description, content, image}:\n              {id?: number, title: string, description: string, content: string, image: Image|any}) {\n    this.id = id;\n    this.title = title;\n    this.description = description;\n    this.content = content;\n    this.image = new Image(image);\n  }\n\n  beforeSave() {\n    if (this.image) {\n      this.image = this.image.id;\n    }\n  }\n}\n\n```\n**Config:**\n```typescript\nimport {OpaqueToken} from \"@angular/core\";\nimport {Post} from \"api/models/Post\";\n\n// endpoints\nexport const POSTS = new OpaqueToken('POSTS');\n\n// config\nexport const apiConfig = {\n  baseUrl: 'http://localhost:3000',\n  endpoints: [\n    {\n      name: POSTS,\n      model: Post,\n      route: '/posts/:id',\n      actions: [\n        {\n          name: 'query',\n          method: 'GET',\n          isArray: true,\n          headersForReading: ['X-Total-Count'],\n          params: {limit: 10}\n        }\n      ]\n    }\n  ]\n};\n```\n**@NgModule**\n```typescript\nimport {BrowserModule} from '@angular/platform-browser';\nimport {NgModule} from '@angular/core';\nimport {FormsModule} from '@angular/forms';\nimport {HttpModule} from '@angular/http';\n\nimport {AppComponent} from './app.component';\nimport {MainComponent} from './endpoints/main/main.component';\nimport {RouterModule} from '@angular/router';\nimport {routes} from './app.routes'\nimport {TypingCarouselDirective} from \"./endpoints/main/typing-carousel.directive\";\nimport {LoaderComponent} from './shared/loader/loader.component';\nimport {Ng2RestApiModule, ApiProvider} from \"ng2-rest-api\";\nimport {apiConfig} from \"api/config\";\n\nimport {PostsManager} from './api/services/PostsManager';\nimport { PostsComponent } from './endpoints/posts/posts.component';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    MainComponent,\n    TypingCarouselDirective,\n    LoaderComponent,\n    PostsComponent\n  ],\n  imports: [\n    BrowserModule,\n    FormsModule,\n    HttpModule,\n    RouterModule.forRoot(routes),\n    Ng2RestApiModule.configure(apiConfig)\n  ],\n  providers: [ApiProvider, PostsManager],\n  bootstrap: [AppComponent]\n})\nexport class AppModule {\n}\n```\n**Service**\n```typescript\nimport {ApiProvider} from \"ng2-rest-api\";\nimport {POSTS} from \"api/config\";\nimport {Injectable} from \"@angular/core\";\nimport {Post} from \"api/models/Post\";\n\n@Injectable()\nexport class PostsManager {\n  constructor(private api: ApiProvider) {\n  }\n\n  getPost(id: number) {\n    return this.api.endpoint(POSTS).action('get', {id});\n  }\n\n  queryPosts(query: string, offset: number) {\n    return this.api.endpoint(POSTS).action('query', {query, offset});\n  }\n\n  savePost(post: Post) {\n    return post.id ? this.api.endpoint(POSTS).action('update', post) : this.api.endpoint(POSTS).action('save', post);\n  }\n}\n```\n**Controller**\n```typescript\nimport {Component, OnInit} from '@angular/core';\nimport {PostsManager} from 'api/services/PostsManager';\nimport {Post} from 'api/models/Post';\nimport {Image} from 'api/models/Image';\n\n@Component({\n  selector: 'app-post',\n  templateUrl: './post.component.html',\n  styleUrls: ['./post.component.scss']\n})\nexport class PostComponent implements OnInit {\n\n  constructor(private postsManager: PostsManager) {}\n\n  example() {\n    // search 'evolution' posts with offset = 0\n    this.postsManager.queryPosts('evolution', 0).subscribe(([posts, headers]) => {\n      this.total = headers['X-Total-Count'];\n      this.posts = posts;\n      console.log('Response', this.posts, 'X-Total-Count', this.total);\n    });\n\n    // get post with id 1\n    this.postsManager.getPost(1).subscribe(post => {\n      console.log('SINGLE', post);\n\n      // update post\n      post.content = 'updated content';\n      this.postsManager.savePost(post).subscribe(p => console.log('updated'));\n    });\n\n    // create new post\n    this.postsManager.savePost(new Post({\n      title: 'test',\n      description: \"test\",\n      content: 'test',\n      image: new Image({id: 1, src: ''})\n    })).subscribe(p => console.log('saved'));\n  }\n}\n```\n## To Do\n- Improve documentation.\n- Cache\n- Add tests\n- Method to set headers for all actions, and for specific. (Authorization token etc.)\n\n## Cache\nWill be implemented soon.\n","created":"2016-10-23T13:41:44.084Z","modified":"2016-11-07T09:25:26.186Z","lastPublisher":{"name":"denisby","email":"i@denis.by"},"owners":[{"name":"denisby","email":"i@denis.by"}],"other":{"_attachments":{},"_from":".","_id":"ng2-rest-api","_nodeVersion":"6.9.1","_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/ng2-rest-api-0.3.6.tgz_1478510724005_0.17503662197850645"},"_npmUser":{"name":"denisby","email":"i@denis.by"},"_npmVersion":"3.10.8","_rev":"16-085a2003459edaec8006df4cb642e807","_shasum":"506c018835d8cd779dd98ccecc3fd56650dbac07","directories":{},"dist-tags":{"latest":"0.3.6"},"dist":{"shasum":"506c018835d8cd779dd98ccecc3fd56650dbac07","tarball":"http://registry.npmjs.org/ng2-rest-api/-/ng2-rest-api-0.3.6.tgz"},"maintainers":[{"name":"denisby","email":"i@denis.by"}],"readmeFilename":"README.MD","time":{"modified":"2016-11-07T09:25:26.186Z","created":"2016-10-23T13:41:44.084Z","0.2.0":"2016-10-23T13:41:44.084Z","0.2.1":"2016-10-23T14:12:00.549Z","0.2.2":"2016-10-23T14:21:13.267Z","0.2.3":"2016-10-23T14:28:53.849Z","0.2.4":"2016-10-23T14:49:17.419Z","0.2.5":"2016-10-23T14:57:28.642Z","0.2.6":"2016-10-23T15:07:14.182Z","0.2.7":"2016-10-23T15:10:32.151Z","0.2.8":"2016-10-23T15:16:29.483Z","0.2.9":"2016-10-23T15:23:09.063Z","0.3.0":"2016-10-23T15:38:51.813Z","0.3.1":"2016-10-27T15:11:50.780Z","0.3.2":"2016-11-03T12:57:59.875Z","0.3.3":"2016-11-03T16:32:48.162Z","0.3.5":"2016-11-06T14:43:58.724Z","0.3.6":"2016-11-07T09:25:26.186Z"}}}