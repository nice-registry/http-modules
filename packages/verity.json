{"name":"verity","version":"0.7.4","description":"a lib for testing for http request/response","main":"index.js","scripts":{"test":"make test"},"repository":"https://github.com/cainus/verity","keywords":["http","assert","assertion","web","test","requests"],"license":"BSD-2-Clause","homepage":"https://github.com/cainus/verity","devDependencies":{"express":"3.4.8","istanbul":"0.2.4","mocha":"1.17.1","jshint":"2.4.3","coveralls":"2.7.0"},"dependencies":{"JSONPath":"~0.9.1","deep-equal":"1.0.1","deepmerge":"0.2.10","difflet":"1.0.1","expect.js":"0.2.0","jsondiffpatch":"0.0.11","reaper":"0.3.1","request":"2.31.0","requestify":"~0.1.16","superagent":"~0.16.0","tough-cookie":"2.3.1","underscore":"~1.5.2","urlgrey":"0.4.4"},"gitHead":"d3d726768ecc635bd14fd1ee9ad3d10a5662d1e2","versions":[{"number":"0.0.0","date":"2013-11-30T13:20:59.776Z"},{"number":"0.0.1","date":"2013-11-30T13:28:23.391Z"},{"number":"0.0.2","date":"2013-11-30T14:02:53.054Z"},{"number":"0.0.3","date":"2013-11-30T14:35:06.221Z"},{"number":"0.0.4","date":"2013-12-01T20:55:45.994Z"},{"number":"0.0.5","date":"2013-12-02T05:47:34.407Z"},{"number":"0.0.6","date":"2013-12-08T07:24:02.298Z"},{"number":"0.0.7","date":"2014-01-23T21:08:14.042Z"},{"number":"0.0.8","date":"2014-02-01T01:03:22.624Z"},{"number":"0.2.0","date":"2014-02-16T03:52:39.228Z"},{"number":"0.3.0","date":"2014-02-19T04:28:02.522Z"},{"number":"0.4.0","date":"2014-07-02T21:41:28.642Z"},{"number":"0.4.1","date":"2014-09-08T21:59:01.148Z"},{"number":"0.4.2","date":"2014-10-30T22:46:56.117Z"},{"number":"0.4.3","date":"2014-10-30T23:25:48.873Z"},{"number":"0.5.0","date":"2014-11-10T19:41:26.842Z"},{"number":"0.5.1","date":"2014-11-10T20:18:56.403Z"},{"number":"0.5.2","date":"2014-11-10T21:58:05.734Z"},{"number":"0.5.3","date":"2015-01-29T17:57:59.981Z"},{"number":"0.6.0","date":"2015-07-23T19:15:39.010Z"},{"number":"0.6.1","date":"2015-07-23T19:22:57.908Z"},{"number":"0.7.0","date":"2015-07-29T18:42:39.667Z"},{"number":"0.7.1","date":"2016-04-07T19:12:03.277Z"},{"number":"0.7.2","date":"2016-06-30T20:40:46.543Z"},{"number":"0.7.3","date":"2016-10-07T00:13:58.811Z"},{"number":"0.7.4","date":"2016-10-12T02:13:20.716Z"}],"readme":"#verity\n\n###integration testing for http requests\n\n###features:\n* content-type matching\n* application/json response testing with colorized diffs\n* responses are verified holistically, for better reporting\n* supports cookies\n* supports login strategies\n* easy url manipulation\n\n###basic usage:\n\n```javascript\n  var v = verity(\"http://localhost:8080/path/\");\n  v.jsonMode();\n  v.method(\"POST\");\n  v.body({\"some\" : \"json\"});\n  v.expectStatus(200);\n  v.expectBody({\"success\" : true});\n  v.test(function(err, result) {\n    // err is present if any assertions failed.\n    // result contains assertion errors, body, headers, status, and cookies\n  });\n```\n\nor using the chained interface:\n\n```javascript\n  var v = verity(\"http://localhost:8080/path/\")\n          .jsonMode()\n          .method(\"POST\")\n          .body({\"some\" : \"json\"})\n          .expectStatus(200)\n          .expectBody({\"success\" : true})\n          .test(function(err, result) {\n            // ...\n          });\n```\n\n\n###api (instance methods):\n\n####jsonMode()\nCall `jsonMode()` to allow json request and response bodies to be automatically serialized and deserialized into javascript objects.\n\n####body(String/Object)\nCall `body()` to set the contents of the request body.  This should be a string unless `jsonMode()` has been called.\n\n####method(String)\nCall `method()` with an HTTP method to set the HTTP request method.\n\n####header(name, value)\nCall `header()` with a header name and value to set a single http\nrequest header.\n\n####setCookieFromString(String)\nCall `setCookieFromString()' to pass a cookie string to set the cookie values of the request.\n\n####expectStatus(Number)\nCall `expectStatus()` to declare the HTTP status code that you expect the reponse to have.\n\n####expectHeaders(Object)\nCall `expectHeaders()` expect certain headers.  Unspecified headers will be ignored.  Further calls will merge the two expectations.\n\n####expectCookie(Object)\nCall `expectCookie()` expect certain cookies.  Unspecified cookies will be ignored.  Further calls will merge the two expectations.\n\n####expectBody(String/Object)\nCall `expectBody()` to declare what bopdy to expect in the response.  This should be a string unless `jsonMode()` has been called.\n\n####expectPartialBody(Object)\nCall `expectPartialBody()` to expect certain response fields.  Unspecified fields will be ignored.  This method will error if JSON mode is not enabled.\n\n####expect(Function)\nCall `expect()` to make your own assertions on the response.  You must provide a function that takes the node response object, and throws an error if any expectations are violated.  You may decorate the error with additional properties that will be logged.\n\n####test(cb)\nCall `test()` to actually execute the specified request, and test your expectations.  `test()` takes a callback that expects `error` and `result` arguments.  The `error` parameter is truthy if the expectations were not met.  The `result` parameter will contain an object detailing the errors, along with the response.\n\n####authStrategy(fn)\nCall authStrategy with a function that takes a credentials object and a callback.  This function should log a user into your app and return a cookie with proper session credentials.\n\n####login(credentials)\nAfter authStrategy has been set, call `login` with a set of credentials to log a user in before running a test.\n\n###api (static methods):\n\n####assertObjectEquals(obj1, obj2)\nAsserts that two objects are deeply-equal, and to throw an assertion error if they're not, along with logging the diffs.\n\n####register(fn)\nRegister your own expect helper, which you will be able to  use in a manner similar to expectBody, expectHeaders, etc.  Should return a function that takes the response object and throws an error if any assertions are not met.  Attach your own properties to the thrown error object to add details.\n\nTODO document use in mocha.  document use in other test frameworks.\n\nTODO document changing the url\n","created":"2013-11-30T13:20:57.635Z","modified":"2017-06-14T23:09:42.127Z","lastPublisher":{"name":"jetzhou","email":"jet@classdojo.com"},"owners":[{"email":"gregg@classdojo.com","name":"mojodojo"},{"email":"jiri.prochazka@strv.com","name":"jiri_classdojo"},{"email":"paul.kim89@gmail.com","name":"psk239"},{"email":"blake@classdojo.com","name":"banders"},{"email":"roman.palkoci@strv.com","name":"roman_classdojo"},{"email":"juraj.kuliska@strv.com","name":"juraj_classdojo"},{"email":"martin.petrus@strv.com","name":"martin_classdojo"},{"email":"jakub.kaspar@strv.com","name":"jakub_classdojo"},{"email":"daniel.ondruj@strv.com","name":"daniel_classdojo"},{"email":"jaroslav.mach@strv.com","name":"jaroslav_classdojo"},{"email":"sanjay_y2k@yahoo.com","name":"sanjay-shah"},{"email":"lexiberylross@gmail.com","name":"lexiross"},{"email":"sgianazza@gmail.com","name":"gianu"},{"email":"nathane280@gmail.com","name":"nathaneidelson"},{"email":"liamdon@gmail.com","name":"liamdon"},{"email":"byronmwong@gmail.com","name":"byronmwong"},{"email":"rafaelchiti@gmail.com","name":"rafaelchiti"},{"email":"will.keleher@gmail.com","name":"kelwill"},{"email":"jet@classdojo.com","name":"jetzhou"},{"email":"urjit@classdojo.com","name":"urjit"},{"email":"chris@classdojo.com","name":"cdolivares"},{"email":"nhbottomley@gmail.com","name":"nickbottomley"},{"email":"peter.k.hayes@gmail.com","name":"peterkhayes"},{"email":"gregg@caines.ca","name":"cainus"}],"other":{"_attachments":{},"_from":".","_id":"verity","_nodeVersion":"6.2.1","_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/verity-0.7.4.tgz_1476238398837_0.48222311213612556"},"_npmUser":{"name":"jetzhou","email":"jet@classdojo.com"},"_npmVersion":"3.9.3","_rev":"2-828540323cdeaa28fddcfffdf3154a9f","_shasum":"7dd12d77c1b69635008173c4cc8fcc11617121da","author":{"name":"Gregg Caines"},"bugs":{"url":"https://github.com/cainus/verity/issues"},"contributors":[{"name":"Peter Hayes"}],"directories":{},"dist-tags":{"latest":"0.7.4"},"dist":{"shasum":"7dd12d77c1b69635008173c4cc8fcc11617121da","tarball":"http://registry.npmjs.org/verity/-/verity-0.7.4.tgz"},"maintainers":[{"email":"gregg@classdojo.com","name":"mojodojo"},{"email":"jiri.prochazka@strv.com","name":"jiri_classdojo"},{"email":"paul.kim89@gmail.com","name":"psk239"},{"email":"blake@classdojo.com","name":"banders"},{"email":"roman.palkoci@strv.com","name":"roman_classdojo"},{"email":"juraj.kuliska@strv.com","name":"juraj_classdojo"},{"email":"martin.petrus@strv.com","name":"martin_classdojo"},{"email":"jakub.kaspar@strv.com","name":"jakub_classdojo"},{"email":"daniel.ondruj@strv.com","name":"daniel_classdojo"},{"email":"jaroslav.mach@strv.com","name":"jaroslav_classdojo"},{"email":"sanjay_y2k@yahoo.com","name":"sanjay-shah"},{"email":"lexiberylross@gmail.com","name":"lexiross"},{"email":"sgianazza@gmail.com","name":"gianu"},{"email":"nathane280@gmail.com","name":"nathaneidelson"},{"email":"liamdon@gmail.com","name":"liamdon"},{"email":"byronmwong@gmail.com","name":"byronmwong"},{"email":"rafaelchiti@gmail.com","name":"rafaelchiti"},{"email":"will.keleher@gmail.com","name":"kelwill"},{"email":"jet@classdojo.com","name":"jetzhou"},{"email":"urjit@classdojo.com","name":"urjit"},{"email":"chris@classdojo.com","name":"cdolivares"},{"email":"nhbottomley@gmail.com","name":"nickbottomley"},{"email":"peter.k.hayes@gmail.com","name":"peterkhayes"},{"email":"gregg@caines.ca","name":"cainus"}],"readmeFilename":"README.md","time":{"modified":"2017-06-14T23:09:42.127Z","created":"2013-11-30T13:20:57.635Z","0.0.0":"2013-11-30T13:20:59.776Z","0.0.1":"2013-11-30T13:28:23.391Z","0.0.2":"2013-11-30T14:02:53.054Z","0.0.3":"2013-11-30T14:35:06.221Z","0.0.4":"2013-12-01T20:55:45.994Z","0.0.5":"2013-12-02T05:47:34.407Z","0.0.6":"2013-12-08T07:24:02.298Z","0.0.7":"2014-01-23T21:08:14.042Z","0.0.8":"2014-02-01T01:03:22.624Z","0.2.0":"2014-02-16T03:52:39.228Z","0.3.0":"2014-02-19T04:28:02.522Z","0.4.0":"2014-07-02T21:41:28.642Z","0.4.1":"2014-09-08T21:59:01.148Z","0.4.2":"2014-10-30T22:46:56.117Z","0.4.3":"2014-10-30T23:25:48.873Z","0.5.0":"2014-11-10T19:41:26.842Z","0.5.1":"2014-11-10T20:18:56.403Z","0.5.2":"2014-11-10T21:58:05.734Z","0.5.3":"2015-01-29T17:57:59.981Z","0.6.0":"2015-07-23T19:15:39.010Z","0.6.1":"2015-07-23T19:22:57.908Z","0.7.0":"2015-07-29T18:42:39.667Z","0.7.1":"2016-04-07T19:12:03.277Z","0.7.2":"2016-06-30T20:40:46.543Z","0.7.3":"2016-10-07T00:13:58.811Z","0.7.4":"2016-10-12T02:13:20.716Z"}}}