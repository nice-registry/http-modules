{"name":"mocha-http-utils","version":"0.4.0","description":"http helper for mocha","main":"mocha-http","scripts":{"test":"./node_modules/istanbul/lib/cli.js cover ./node_modules/.bin/_mocha","coveralls":"cat ./coverage/lcov.info | ./node_modules/.bin/coveralls"},"repository":"https://github.com/johnmarkg/mocha-http-utils","license":"ISC","dependencies":{"debug":"^2.2.0","portfinder":"^0.4.0","request":"^2.58.0"},"devDependencies":{"istanbul":"^0.3.17","mocha":"^2.2.5","sinon":"^1.15.4"},"gitHead":"f4ac88ad260a6bd120288cac3aae95f655d0fd07","homepage":"https://github.com/johnmarkg/mocha-http-utils","versions":[{"number":"1.0.0","date":"2015-07-09T17:05:50.697Z"},{"number":"1.1.0","date":"2015-07-09T18:47:41.747Z"},{"number":"0.1.0","date":"2015-07-09T20:18:36.367Z"},{"number":"0.2.0","date":"2015-07-09T20:42:27.067Z"},{"number":"0.3.0","date":"2015-07-10T21:54:47.652Z"},{"number":"0.4.0","date":"2015-07-10T23:19:35.695Z"}],"readme":"Utils to assist in testing http requests.  Find an open port, start the server, and start sending requests.  Built in status code checks and json response checks.\n\nTest running servers by setting `MOCHA_HOST=\"http://yoururl\"` on the command line or when creating the object:\n\nAny [request option](https://github.com/request/request#requestoptions-callback) from request module may be passed in first param of `mochaHttp.http(options, cb)`.\n\nLocal tests:\n```\n// server-module.js\n\nvar http = require('http')\n\nvar server = http.createServer(function (req, res) {\n\t...\n});\n\nexports.listen = server.listen;\n```\n\n```\n// test.js\n\nvar mochaHttp = require('mocha-http-utils')\nvar serverModule = require('../server-module');\n\n//************************************************\n//\n// start up test server on open local port\n//\n// if MOCHA_HOST is defined, the cb to openPort\n//   is never called, so local server is not started\n//\n//************************************************\nbefore(function(done){\n\tmochaHttp.openPort(function(err, port){\n\t\tserverModule.listen(port, done);\n\t})\t\n})\n\ndescribe(function(){\n\tit('send a request', function(done){\n\t\tmochaHttp.http({\n\t\t\tpath: 'api/check',\n\t\t\tparams:{\n\t\t\t\t'filter': 'abs*'\n\t\t\t},\n\t\t\tbody:{\n\t\t\t\tbodyData: \"some text in here\"\n\t\t\t},\n\t\t\tjson:{\n\t\t\t\t'[0].object1.key1': true,\n\t\t\t\t'[0].object1.key2': false,\n\t\t\t\t'[0].object2.key1': 123,\n\t\t\t\t'[1]': 'scalar'\n\t\t\t},\n\n\t\t\tmethod: 'GET', // default\n\t\t\tstatus: 200, // default\n\t\t}, done)\n\t})\n})\n\n```\n\nlocal server: `~ mocha`\n\nremote server: `~ MOCHA_HOST=\"http://test-target-url\" mocha`\n\n\n","created":"2015-07-09T17:05:50.697Z","modified":"2015-07-10T23:19:35.695Z","lastPublisher":{"name":"johnmarkg","email":"johnmarkg@gmail.com"},"owners":[{"name":"johnmarkg","email":"johnmarkg@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"mocha-http-utils","_nodeVersion":"2.2.1","_npmUser":{"name":"johnmarkg","email":"johnmarkg@gmail.com"},"_npmVersion":"2.11.0","_rev":"1-fec67bfefe4a85d68346be47e5c2ccb7","_shasum":"ef94fc724b719075edcce06ddb6e908631dd6d25","author":{"name":"Mark Garner"},"bugs":{"url":"https://github.com/johnmarkg/mocha-http-utils/issues"},"directories":{},"dist-tags":{"latest":"0.4.0"},"dist":{"shasum":"ef94fc724b719075edcce06ddb6e908631dd6d25","tarball":"http://registry.npmjs.org/mocha-http-utils/-/mocha-http-utils-0.4.0.tgz"},"maintainers":[{"name":"johnmarkg","email":"johnmarkg@gmail.com"}],"readmeFilename":"README.md","time":{"modified":"2015-07-10T23:19:35.695Z","created":"2015-07-09T17:05:50.697Z","1.0.0":"2015-07-09T17:05:50.697Z","1.1.0":"2015-07-09T18:47:41.747Z","0.1.0":"2015-07-09T20:18:36.367Z","0.2.0":"2015-07-09T20:42:27.067Z","0.3.0":"2015-07-10T21:54:47.652Z","0.4.0":"2015-07-10T23:19:35.695Z"}}}