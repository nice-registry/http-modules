{"name":"passport-trusted-header","version":"1.1.0","description":"Passport.js strategy for trusted HTTP headers","main":"src","scripts":{"test":"mocha"},"repository":"https://github.com/ripjar/passport-trusted-header","keywords":["passport","tls","ssl","client","cert","certificate","auth","authentication","http","header","headers","trusted","nginx","apache"],"license":"MIT","homepage":"https://github.com/ripjar/passport-trusted-header","dependencies":{"passport-strategy":"^1.0.0"},"devDependencies":{"chai":"^3.3.0","colors":"^1.1.2","express":"^4.13.3","mocha":"^2.3.3","passport":"^0.3.0"},"gitHead":"3eaf730e5f646c98c1ebe89c1b8d5c69fb67c143","versions":[{"number":"1.0.0","date":"2015-06-07T20:04:52.683Z"},{"number":"1.1.0","date":"2015-09-29T19:20:23.882Z"}],"readme":"# passport-trusted-header\n\n\n[![Build](https://travis-ci.org/ripjar/passport-trusted-header.svg?branch=master)](https://travis-ci.org/ripjar/passport-trusted-header)\n\n[passport.js](http://passportjs.org/) strategy for authentication by a trusted HTTP header.\n\nNode.js apps often have TLS handled by a front-end web server like [nginx](http://wiki.nginx.org/Main). For client cert authentication, the web server passes through certificate fields like [DN](http://httpd.apache.org/docs/2.2/ssl/ssl_intro.html#certificates) as HTTP headers. The Node app can use these headers for authentication.\n\nThis library helps to do this with [passport.js](http://passportjs.org/). If you have a Node.js app that accepts direct TLS connections, try [passport-client-cert](https://github.com/ripjar/passport-client-cert) instead.\n\n## Security\nThe connection between web server and web app must be __secure__. The front-end web server must whitelist HTTP headers to send to the web app, and it must be impossible for external processes to reach the web app or interfere with connections between the web server and Node.js. It is __completely insecure__ if these conditions are not met!\n\n## Usage\nCreate the strategy with an options object and a \"verify request\" callback.\n\n### Options\n\n* `headers` - required. Array of HTTP header names to extract. A request has to contain all of these headers to be authenticated.\n* `passReqToCallback` - optional. Causes the request object to be supplied to the verify callback as the first parameter.\n\nThe verify callback decides whether to authenticate each request. It called with the extracted header names/values and a [passport.js `done` callback](http://passportjs.org/guide/configure/).\n\n\n````javascript\nvar passport = require('passport');\nvar Strategy = require('passport-trusted-headers').Strategy;\n\nvar options =  {\n  headers: ['TLS_CLIENT_DN']\n}\n\npassport.use(new Strategy(options, function(requestHeaders, done) {\n  var user = null;\n  var userDn = requestHeaders.TLS_CLIENT_DN;\n\n  // Authentication logic here!\n  if(userDn === 'CN=test-cn') {\n    user = { name: 'Test User' }\n  }\n\n  done(null, user);\n}));\n````\n\nThe verify callback can be supplied with the `request` object by setting the `passReqToCallback` option to `true`, and changing callback arguments accordingly.\n\n````javascript\nvar options =  {\n  headers: ['TLS_CLIENT_DN'],\n  passReqToCallback: true\n}\n\npassport.use(new Strategy(options, function(req, requestHeaders, done) {\n  var user = null;\n  var userDn = requestHeaders.TLS_CLIENT_DN;\n\n  // Authentication logic here!\n  if(userDn === 'CN=test-cn') {\n    user = { name: 'Test User' }\n  }\n\n  done(null, user);\n}));\n````\n\n## Test\n\n    $ npm install\n    $ npm test\n\n## Contibuting\nContributions are welcome! Please write unit tests, follow the existing coding style and lint with [eslint](http://eslint.org/).\n\n## Authors\n\n[Joe Whitfield-Seed](http://github.com/jwhitfieldseed)\n\n## Licence\n\n[The MIT Licence](http://opensource.org/licenses/MIT)\n","created":"2015-06-07T20:04:52.683Z","modified":"2015-09-29T19:20:23.882Z","lastPublisher":{"name":"jwhitfieldseed","email":"joeseed86@gmail.com"},"owners":[{"name":"jwhitfieldseed","email":"joeseed86@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"passport-trusted-header","_nodeVersion":"0.10.31","_npmUser":{"name":"jwhitfieldseed","email":"joeseed86@gmail.com"},"_npmVersion":"2.12.0","_rev":"1-0bdcf6feafbd32720e9ee0f5fd4dbde1","_shasum":"a230fa0f876afb63759948d9ae7acb0d8cffcbea","author":{"name":"Joe Whitfield-Seed"},"bugs":{"url":"https://github.com/ripjar/passport-trusted-header/issues"},"directories":{},"dist-tags":{"latest":"1.1.0"},"dist":{"shasum":"a230fa0f876afb63759948d9ae7acb0d8cffcbea","tarball":"http://registry.npmjs.org/passport-trusted-header/-/passport-trusted-header-1.1.0.tgz"},"maintainers":[{"name":"jwhitfieldseed","email":"joeseed86@gmail.com"}],"readmeFilename":"README.md","time":{"modified":"2015-09-29T19:20:23.882Z","created":"2015-06-07T20:04:52.683Z","1.0.0":"2015-06-07T20:04:52.683Z","1.1.0":"2015-09-29T19:20:23.882Z"}}}