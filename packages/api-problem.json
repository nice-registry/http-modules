{"version":"5.0.1","name":"api-problem","description":"HTTP Problem Utility","homepage":"https://github.com/ahmadnassri/api-problem","repository":"https://github.com/ahmadnassri/api-problem","license":"ISC","main":"lib/index.js","keywords":["api","http","problem"],"engines":{"node":">=4"},"files":["lib"],"scripts":{"pretest":"standard && echint","test":"tap test","report":"tap test --reporter silent --coverage-report html","coverage":"tap test --reporter silent --coverage"},"devDependencies":{"echint":"^3.0.0","standard":"^8.6.0","tap":"^10.0.0"},"gitHead":"54d7072047cd53ef0071b8f9d0545e479d996af7","versions":[{"number":"1.0.0","date":"2016-01-15T07:22:24.459Z"},{"number":"1.1.0","date":"2016-03-28T20:45:58.982Z"},{"number":"2.0.0","date":"2016-07-20T05:32:50.322Z"},{"number":"2.0.1","date":"2016-07-20T14:59:52.714Z"},{"number":"2.0.2","date":"2016-07-27T15:24:36.458Z"},{"number":"2.0.3","date":"2016-08-24T17:15:07.031Z"},{"number":"3.0.0","date":"2016-11-01T14:26:20.878Z"},{"number":"4.0.0","date":"2016-12-13T04:46:15.851Z"},{"number":"5.0.0","date":"2017-01-30T04:44:06.702Z"},{"number":"5.0.1","date":"2017-01-30T04:52:50.569Z"}],"readme":"# API Problem [![version][npm-version]][npm-url] [![License][license-image]][license-url]\n\n> [HTTP Problem](https://tools.ietf.org/html/draft-ietf-appsawg-http-problem) Utility\n\n[![Build Status][travis-image]][travis-url]\n[![Downloads][npm-downloads]][npm-url]\n[![Code Climate][codeclimate-quality]][codeclimate-url]\n[![Coverage Status][codeclimate-coverage]][codeclimate-url]\n[![Dependency Status][dependencyci-image]][dependencyci-url]\n[![Dependencies][david-image]][david-url]\n\n## Install\n\n```bash\nnpm install --only=production --save api-problem\n```\n\n## API\n\n### Constructor: `Problem(status[, title][, type][, members])`\n\n| name          | type     | required | default             | description                                                                            | referece                |\n| ------------- | -------- | -------- | ------------------- | -------------------------------------------------------------------------------------- | ----------------------- |\n| **`status`**  | `String` | `✔`     | `N/A`               | The HTTP status code generated by the origin server for this occurrence of the problem | [Section 3.1][spec-3.1] |\n| **`title`**   | `String` | `✖`     | HTTP status phrase  | A short, human-readable summary of the problem type                                    | [Section 3.1][spec-3.1] |\n| **`type`**    | `String` | `✖`     | `about:blank`       | A URI reference that identifies the problem type                                       | [Section 3.1][spec-3.1] |\n| **`details`** | `Object` | `✖`     | `N/A`               | additional details to attach to object                                                 | [Section 3.1][spec-3.2] |\n\n```js\nimport Problem from 'api-problem'\n\n// HTTP defaults\nnew Problem(404)\n//=> { status: '404', title: 'Not Found', type: 'http://www.iana.org/assignments/http-status-codes#404' }\n\n\n// override defaults\nnew Problem(404, 'Oops! Page Not Found')\n//=> { status: '404', title: 'Oops! Page Not Found', type: 'http://www.iana.org/assignments/http-status-codes#404' }\n\n\n// custom values\nnew Problem(403, 'You do not have enough credit', 'https://example.com/probs/out-of-credit')\n//=> { status: '403', title: 'You do not have enough credit', type: 'https://example.com/probs/out-of-credit' }\n\n\n// additional details\nnew Problem(403, 'You do not have enough credit', 'https://example.com/probs/out-of-credit', {\n  detail: 'Your current balance is 30, but that costs 50.',\n  instance: '/account/12345/msgs/abc',\n  balance: 30,\n  accounts: ['/account/12345', '/account/67890']\n})\n\n//=> { status: '403', title: 'You do not have enough credit', type: 'https://example.com/probs/out-of-credit', detail: 'Your current balance is 30, but that costs 50.', instance: '/account/12345/msgs/abc', balance: 30, accounts: ['/account/12345', '/account/67890'] }\n\n\n// HTTP defaults + Details\nnew Problem(403, {\n  detail: 'Account suspended',\n  instance: '/account/12345',\n  date: '2016-01-15T06:47:01.175Z',\n  account_id: '12345'\n})\n//=> { status: '403', title: 'Forbidden', type: 'http://www.iana.org/assignments/http-status-codes#404', detail: 'Account suspended', instance: '/account/12345', account_id: 12345, 'date: 2016-01-15T06:47:01.175Z' }\n\n```\n\n### Method : <string> `toString()`\n\nreturns a simplified, human-readable string representation\n\n```js\nlet prob = new Problem(403, 'You do not have enough credit', 'https://example.com/probs/out-of-credit')\n\nprob.toString() //=> [403] You do not have enough credit ('https://example.com/probs/out-of-credit')\n```\n\n### Method : <void> `send(response)`\n\nuses [`response.writeHead`](https://nodejs.org/docs/latest/api/http.html#http_response_writehead_statuscode_statusmessage_headers) and [`response.end`](https://nodejs.org/docs/latest/api/http.html#http_response_end_data_encoding_callback) to send an appropriate error respnse message with the `Content-Type` response header to [`application/problem+json`][spec-3]\n\n```js\nimport http from 'http'\nimport Problem from 'api-problem'\n\nlet response = new http.ServerResponse()\nProblem.send(response)\n```\n\n### Express Middleware\n\nA standard connect middleware is provided. The middleware intercepts Problem objects thrown as exceptions and serializes them appropriately in the HTTP response while setting the `Content-Type` response header to [`application/problem+json`][spec-3]\n\n```js\nimport express from 'express'\nimport Problem from 'api-problem'\nimport Middleware from 'api-problem/lib/middleware'\n\nlet app = express()\n\napp.get('/', (req, res) => {\n  throw new Problem(403)\n})\n\napp.use(Middleware)\n```\n\n---\n> :copyright: [ahmadnassri.com](https://www.ahmadnassri.com/)  · \n> License: [ISC][license-url]  · \n> Github: [@ahmadnassri](https://github.com/ahmadnassri)  · \n> Twitter: [@ahmadnassri](https://twitter.com/ahmadnassri)\n\n[license-url]: http://choosealicense.com/licenses/isc/\n[license-image]: https://img.shields.io/github/license/ahmadnassri/api-problem.svg?style=flat-square\n\n[travis-url]: https://travis-ci.org/ahmadnassri/api-problem\n[travis-image]: https://img.shields.io/travis/ahmadnassri/api-problem.svg?style=flat-square\n\n[npm-url]: https://www.npmjs.com/package/api-problem\n[npm-version]: https://img.shields.io/npm/v/api-problem.svg?style=flat-square\n[npm-downloads]: https://img.shields.io/npm/dm/api-problem.svg?style=flat-square\n\n[codeclimate-url]: https://codeclimate.com/github/ahmadnassri/api-problem\n[codeclimate-quality]: https://img.shields.io/codeclimate/github/ahmadnassri/api-problem.svg?style=flat-square\n[codeclimate-coverage]: https://img.shields.io/codeclimate/coverage/github/ahmadnassri/api-problem.svg?style=flat-square\n\n[david-url]: https://david-dm.org/ahmadnassri/api-problem\n[david-image]: https://img.shields.io/david/ahmadnassri/api-problem.svg?style=flat-square\n\n[dependencyci-url]: https://dependencyci.com/github/ahmadnassri/api-problem\n[dependencyci-image]: https://dependencyci.com/github/ahmadnassri/api-problem/badge?style=flat-square\n\n[spec-3]: https://tools.ietf.org/html/draft-ietf-appsawg-http-problem-02#section-3\n[spec-3.1]: https://tools.ietf.org/html/draft-ietf-appsawg-http-problem-02#section-3.1\n[spec-3.2]: https://tools.ietf.org/html/draft-ietf-appsawg-http-problem-02#section-3.2\n","created":"2016-01-15T07:22:24.459Z","modified":"2017-01-30T04:52:50.569Z","lastPublisher":{"name":"ahmadnassri","email":"ahmad@ahmadnassri.com"},"owners":[{"name":"ahmadnassri","email":"ahmad@ahmadnassri.com"}],"other":{"_attachments":{},"_from":".","_id":"api-problem","_nodeVersion":"7.4.0","_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/api-problem-5.0.1.tgz_1485751968549_0.040499721420928836"},"_npmUser":{"name":"ahmadnassri","email":"ahmad@ahmadnassri.com"},"_npmVersion":"4.0.5","_rev":"5-f177f476719c301514743a6cd6526458","_shasum":"f51de5000afe16faa516cd83d1f5e94d83852e4f","author":{"name":"Ahmad Nassri","email":"ahmad@ahmadnassri.com","url":"https://www.ahmadnassri.com/"},"bugs":{"url":"https://github.com/ahmadnassri/api-problem/issues"},"directories":{},"dist-tags":{"latest":"5.0.1"},"dist":{"shasum":"f51de5000afe16faa516cd83d1f5e94d83852e4f","tarball":"https://registry.npmjs.org/api-problem/-/api-problem-5.0.1.tgz"},"maintainers":[{"name":"ahmadnassri","email":"ahmad@ahmadnassri.com"}],"readmeFilename":"README.md","time":{"modified":"2017-01-30T04:52:50.569Z","created":"2016-01-15T07:22:24.459Z","1.0.0":"2016-01-15T07:22:24.459Z","1.1.0":"2016-03-28T20:45:58.982Z","2.0.0":"2016-07-20T05:32:50.322Z","2.0.1":"2016-07-20T14:59:52.714Z","2.0.2":"2016-07-27T15:24:36.458Z","2.0.3":"2016-08-24T17:15:07.031Z","3.0.0":"2016-11-01T14:26:20.878Z","4.0.0":"2016-12-13T04:46:15.851Z","5.0.0":"2017-01-30T04:44:06.702Z","5.0.1":"2017-01-30T04:52:50.569Z"}}}