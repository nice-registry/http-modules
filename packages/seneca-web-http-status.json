{"name":"seneca-web-http-status","version":"1.0.4","description":"Provides seneca-web status code objects for convenience","main":"index.js","scripts":{"test":"mocha --reporter spec","test-watch":"mocha -w --reporter spec"},"repository":"https://github.com/faceleg/seneca-web-http-status","keywords":["seneca-web","http"],"license":"ISC","homepage":"https://github.com/faceleg/seneca-web-http-status","dependencies":{"know-your-http-well":"^0.2.0","ramda":"^0.17.1"},"devDependencies":{"chai":"^3.2.0","chai3-json-schema":"^1.2.1","mocha":"^2.2.5"},"gitHead":"f9a3e15b3e26d94558ade46a8f242ff9ffdf2a97","versions":[{"number":"1.0.0","date":"2015-08-04T00:08:35.831Z"},{"number":"1.0.1","date":"2015-08-04T00:12:29.765Z"},{"number":"1.0.2","date":"2015-08-04T21:52:15.974Z"},{"number":"1.0.3","date":"2016-02-04T03:06:17.157Z"},{"number":"1.0.4","date":"2016-02-04T03:21:42.934Z"}],"readme":"# seneca-web-http-status\n[![Build Status](https://travis-ci.org/faceleg/seneca-web-http-status.svg)](https://travis-ci.org/faceleg/seneca-web-http-status)\n\nProvides seneca-web status code objects for convenience\n\n## Usage\n\n```JS\n'use strict'\n\nmodule.exports = function api(options) {\n  var seneca = this\n\n  seneca.add('role:api,info:hello', hello)\n\n  seneca.add('role:api,product:star', get_star)\n  seneca.add('role:api,product:handle_star', handle_star)\n\n  seneca.add('init:api',function(args,done){\n\n    // Order is significant here!\n\n    seneca.act('role:web',{use:{\n      prefix:'/',\n      pin:'role:api,info:*',\n      map:{\n        hello:true\n      }\n    }})\n\n    seneca.use(\n      {name:'jsonrest-api',tag:'product'},\n      {\n        prefix: '/',\n        list:   {embed:'list'},\n        pin:    { name:'product' },\n        startware: verify_token,\n        allow_id: true\n      })\n\n    seneca.act('role:web',{use:{\n      prefix:'/product',\n      pin:'role:api,product:*',\n      startware: verify_token,\n      map:{\n        star: { \n          alias:'/:id/star' \n        },\n        handle_star:{\n          PUT:true,\n          DELETE:true,\n          alias:'/:id/star'\n        }\n      }\n    }})\n\n    done()\n  })\n  \n  var statusCodes = require('seneca-web-http-status');\n\n  function verify_token(req,res,next) {\n    var token = req.headers['api-access-token']\n\n    // Hard coded token for this example!!!\n    if( '1234' == token ) return next();\n\n    res.writeHead(401,\"Access denied.\")\n    res.end()\n  }\n\n\n  function hello( args, done ) {\n    done(null,{msg:'hello!'})\n  }\n\n  function get_star( args, done ) {\n    this.make$('product').load$(args.id,function(err,res){\n      if(err) return done(null, statusCodes[500]);\n      if(!res) return done(null, statusCodes[400]);\n\n      return done(null,{\n        product: res.id,\n        star:    res.star\n      })\n    })\n  }\n\n  function handle_star( args, done ) {\n    this.act(\n      'role:product,cmd:star',\n      {\n        // product id\n        id:args.id,\n\n        // PUT means star, DELETE means unstar\n        star:('PUT'===args.req$.method)\n      },\n\n      function(err,res){\n        if(err) return done(null, statusCodes[500]);\n      if(!res) return done(null, statusCodes[400]);\n\n        return done(null,{\n          product: res.id,\n          star:    res.star\n        })\n      }\n    )\n  }\n\n}\n```\n\n## Custom status generator\n\n```JS\nstatusCodes.custom(500, 'this is a custom message');\n```\n","created":"2015-08-04T00:08:35.831Z","modified":"2016-02-04T03:21:42.934Z","lastPublisher":{"name":"faceleg","email":"mike@pagesofinterest.net"},"owners":[{"name":"faceleg","email":"mike@pagesofinterest.net"}],"other":{"_attachments":{},"_from":".","_id":"seneca-web-http-status","_nodeVersion":"5.3.0","_npmOperationalInternal":{"host":"packages-9-west.internal.npmjs.com","tmp":"tmp/seneca-web-http-status-1.0.4.tgz_1454556101947_0.9054183890111744"},"_npmUser":{"name":"faceleg","email":"mike@pagesofinterest.net"},"_npmVersion":"3.3.12","_rev":"1-58a68f77b0e5d50812900125eeb98599","_shasum":"e089df9a02322ae124ec3fa72e9919fe1165b0b1","author":{"name":"Michael Robinson"},"bugs":{"url":"https://github.com/faceleg/seneca-web-http-status/issues"},"directories":{},"dist-tags":{"latest":"1.0.4"},"dist":{"shasum":"e089df9a02322ae124ec3fa72e9919fe1165b0b1","tarball":"http://registry.npmjs.org/seneca-web-http-status/-/seneca-web-http-status-1.0.4.tgz"},"maintainers":[{"name":"faceleg","email":"mike@pagesofinterest.net"}],"readmeFilename":"README.md","time":{"modified":"2016-02-04T03:21:42.934Z","created":"2015-08-04T00:08:35.831Z","1.0.0":"2015-08-04T00:08:35.831Z","1.0.1":"2015-08-04T00:12:29.765Z","1.0.2":"2015-08-04T21:52:15.974Z","1.0.3":"2016-02-04T03:06:17.157Z","1.0.4":"2016-02-04T03:21:42.934Z"}}}