{"name":"supertest-server","description":"Starts up an HTTP server so you can run supertest API tests","readme":"# Supertest Server\n\nStarts up an HTTP server so you can run supertest API tests\n\n## Example\n\nThis is designed to be used in any test framework - the examples use Mocha, but should be agnostic enough to work with any framework.\n\n    var expect = require(\"chai\").expect;\n    var supertest = require(\"supertest\");\n    var Server = require(\"supertest-server\");\n    var api = supertest(\"http://localhost:3000\");\n\n    describe(\"Some test\", function() {\n\n        var server;\n        before(function(done) {\n\n            server = new Server(\"node\", [\n                \"path/to/file.js\",\n                \"port=3000\"\n            ]).on(\"error\", function(err) {\n                done(err);\n            }).on(\"data\", function(data) {\n                if(data.match(\"--- SERVER UP ---\")) {\n                    /* Once we receive this, the test server is up */\n                    done();\n                }\n            });\n\n        });\n\n        after(function() {\n            server.kill();\n        });\n\n        it(\"should connect\", function(done) {\n\n            api\n                .get(\"/test\")\n                .expect(200)\n                .expect(\"hello world\")\n                .end(done);\n\n        });\n\n    });\n\n# A word on starting a server\n\nYou will need to set up your server so that, when it starts up, it outputs something to the command line that indicates it has started successfully.  In this example, it's listening for `--- SERVER UP ---`.  Doing this is important as your server may output config or other information before the server is actually callable.\n\nIf you do not want to change how your server boots up in production, you can always add additional arguments at the point of boot.","versions":[{"number":"0.1.0","date":"2014-04-07T09:47:04.846Z"}],"created":"2014-04-07T09:47:04.846Z","modified":"2014-04-07T09:48:25.550Z","owners":[{"name":"riggerthegeek","email":"simon@simonemms.com"}],"other":{"_id":"supertest-server","_rev":"1-c880462478ffcc0f59c61323d6aa7b77","dist-tags":{},"maintainers":[{"name":"riggerthegeek","email":"simon@simonemms.com"}],"readmeFilename":"","time":{"modified":"2014-04-07T09:48:25.550Z","created":"2014-04-07T09:47:04.846Z","0.1.0":"2014-04-07T09:47:04.846Z"}}}