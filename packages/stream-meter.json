{"name":"stream-meter","version":"1.0.4","description":"A stream meter that both counts the bytes piped through it, and can optionally abort on a max size.  (e.g. limit a http request size)","main":"index.js","dependencies":{"readable-stream":"^2.1.4"},"devDependencies":{"concat-stream":"^1.5.1","stream-spigot":"^3.0.3","tape":"^4.6.0"},"scripts":{"test":"node test/"},"repository":"https://github.com/brycebaril/node-stream-meter","keywords":["streams2","streams","meter","abort"],"license":"MIT","gitHead":"c4ac12861e3097c3d59d2043d94077f2728a837a","homepage":"https://github.com/brycebaril/node-stream-meter#readme","versions":[{"number":"1.0.0","date":"2013-07-04T01:55:19.727Z"},{"number":"1.0.1","date":"2013-07-21T19:57:10.392Z"},{"number":"1.0.2","date":"2013-09-23T03:17:16.611Z"},{"number":"1.0.3","date":"2013-09-25T23:32:42.752Z"},{"number":"1.0.4","date":"2016-07-13T22:57:12.967Z"}],"readme":"Stream Meter\n============\n\n[![NPM](https://nodei.co/npm/stream-meter.png)](https://nodei.co/npm/stream-meter/)\n\n[![david-dm](https://david-dm.org/brycebaril/node-stream-meter.png)](https://david-dm.org/brycebaril/node-stream-meter/)\n[![david-dm](https://david-dm.org/brycebaril/node-stream-meter/dev-status.png)](https://david-dm.org/brycebaril/node-stream-meter#info=devDependencies/)\n\nStream Meter is a... uh, meter for streams.\n\nIt is a streams2 Transform stream that passes through content, but counts the number of bytes it forwards.\n\nHowever, give it a size in bytes and it will abort as soon as that threshold is passed. This is useful for capping your [hyperquest](http://npm.im/hyperquest) or http/https clients or servers content size.\n\n```\nnpm install stream-meter\n```\n\nExamples:\n\n```javascript\nvar meter = require(\"stream-meter\")\n\n// make an un-capped meter\nvar m = meter()\nprocess.stdin.pipe(m).pipe(process.stdout)\nsetTimeout(function () {\n  // Log how much we saw in a couple seconds.\n  console.log(m.bytes)\n}, 2000)\n\n// this will abort (with an Error) in the frame where 1024 bytes is reached\nprocess.stdin.pipe(meter(1024)).pipe(process.stdout)\n\n// create a 1024 byte-capped meter\nvar m = meter(1024)\nm.on(\"error\", function (e) {\n  // log the error but don't kill the process\n  console.log(e.message)\n})\nprocess.stdin.pipe(m).pipe(process.stdout)\n\n```\n\n```javascript\nvar hyperquest = require(\"hyperquest\")\n\nvar req = hyperquest(\"https://raw.github.com/mranney/node_redis/master/index.js\")\n\nvar meter = require(\"stream-meter\")(1024)\nmeter.on(\"error\", function (e) {\n  console.log(e.message)\n  console.log(\"Read %s bytes\", meter.bytes)\n})\n\n\nreq.pipe(meter).pipe(process.stderr)\n```\n\n```bash\n$ node hypermeter.js 2> /dev/null\nStream exceeded specified max of 1024 bytes.\nRead 7377 bytes\n```\n\nUsage\n=====\n\n```javascript\nvar meter = require(\"stream-meter\")\n\nvar stream = meter(size)\nstream.on(\"error\", function (e) {\n  // handle the meter aborting the stream\n})\n\n// read the bytes processed by the meter and passed through to any subsequent streams.\nvar size = stream.bytes\n```\n\nSee test/index.js for additional examples.\n\nOptions\n=======\n\nsize\n----\n\nSize (in bytes) to trigger the stream to abort. It will complete whatever frame it aborted in, so the size streamed will still be >= size but no more than size + highWaterMark\n\nProperties\n==========\n\nbytes\n-----\n\nNumber of bytes handled and passed through the meter.\n\nLICENSE\n=======\n\nMIT\n","starsCount":2,"created":"2013-07-04T01:55:17.432Z","modified":"2017-05-16T10:01:21.670Z","lastPublisher":{"name":"bryce","email":"bryce@ravenwall.com"},"owners":[{"name":"bryce","email":"bryce@ravenwall.com"}],"other":{"_attachments":{},"_from":".","_id":"stream-meter","_nodeVersion":"6.2.2-pre","_npmOperationalInternal":{"host":"packages-16-east.internal.npmjs.com","tmp":"tmp/stream-meter-1.0.4.tgz_1468450629582_0.028855931479483843"},"_npmUser":{"name":"bryce","email":"bryce@ravenwall.com"},"_npmVersion":"3.9.3","_rev":"2-1f28ce5b3ddfbfe3f120f772631f34c0","_shasum":"52af95aa5ea760a2491716704dbff90f73afdd1d","author":{"name":"Bryce B. Baril"},"bugs":{"url":"https://github.com/brycebaril/node-stream-meter/issues"},"directories":{"test":"test"},"dist-tags":{"latest":"1.0.4"},"dist":{"shasum":"52af95aa5ea760a2491716704dbff90f73afdd1d","tarball":"http://registry.npmjs.org/stream-meter/-/stream-meter-1.0.4.tgz"},"maintainers":[{"name":"bryce","email":"bryce@ravenwall.com"}],"readmeFilename":"README.md","time":{"modified":"2017-05-16T10:01:21.670Z","created":"2013-07-04T01:55:17.432Z","1.0.0":"2013-07-04T01:55:19.727Z","1.0.1":"2013-07-21T19:57:10.392Z","1.0.2":"2013-09-23T03:17:16.611Z","1.0.3":"2013-09-25T23:32:42.752Z","1.0.4":"2016-07-13T22:57:12.967Z"},"users":{"bret":true,"kennyjoseph":true}}}