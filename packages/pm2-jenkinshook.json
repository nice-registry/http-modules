{"name":"pm2-jenkinshook","version":"1.0.1","description":"receive http hook from jenkins and ask pm2 to reload the application for you","main":"index.js","scripts":{"test":"echo \"Error: no test specified\" && exit 1"},"repository":"https://github.com/vmarchaud/pm2-jenkinshook","keywords":["pm2","jenkins","webhook","hook","reload","restart","git","pull"],"license":"MIT","homepage":"https://github.com/vmarchaud/pm2-jenkinshook#readme","dependencies":{"async":"^2.1.1","pm2":"^2.0.18","pmx":"^0.6.8"},"config":{"apps":{"app_name":{"secret":"ip_of_jenkins","prehook":"npm install --production && git submodule update --init","posthook":"echo done"}},"port":8888},"gitHead":"b91ee4d83ed5a317faac57337ca97abb7c334658","versions":[{"number":"1.0.0","date":"2016-11-21T15:02:57.426Z"},{"number":"1.0.1","date":"2016-11-21T15:53:38.775Z"}],"readme":"## Description\n\nPM2 module to receive http webhook from jenkins, execute pre/post hook and gracefull reload the application using pm2.\nI use this module with the [Notification Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Notification+Plugin) of jenkins\n\n## Install\n\n`pm2 install pm2-jenkinshook`\n\n## Configure\n\n- `port` (Defaults to `8888`) : The port that will be used by the http server to receive hooks.\n- `apps` : Contains definition of applications in JSON : \n\n    ```json\n      {\n        \"APP_NAME\" : {\n          \"secret\" : \"ip_of_jenkins\",\n          \"prehook\" : \"npm install --production && git submodule update --init\",\n          \"posthook\" : \"echo done\"\n        }\n      }\n    ```\n    \n  - `APP_NAME` is the name of the api **in pm2** and in the **url** defined on jenkins configuration (eg: : `http://127.0.0.1:8888/APP_NAME`).\n  - `secret` is the ip of the jenkins, since the Notification plugin don't use any kind of authentification, we will stick with the ip.\n  - `prehook` and `posthook` are shell command executed in the `cwd` **(care of this)** of the app before and after making the `pullAndGracefullReload`.\n\n#### How to set these values ?\n\n After having installed the module you have to type :\n`pm2 set pm2-jenkinshook:key value`\n\nTo set the `apps` option and since its a json string, i advice you to escape it to be sure that the string is correctly set ([use this kind of tool](http://bernhardhaeussner.de/odd/json-escape/)).\n\ne.g: \n- `pm2 set pm2-jenkinshook:port 8080` (bind the http server port to 8080)\n- `pm2 set pm2-jenkinshook:apps \"{\\\"APP_NAME\\\":{\\\"secret\\\":\\\"supersecret\\\",\\\"prehook\\\":\\\"npm install --production && git submodule update --init\\\",\\\"posthook\\\":\\\"echo done\\\"}}\"` \n\n## Uninstall\n\n`pm2 uninstall pm2-jenkinshook\n","created":"2016-11-21T15:02:57.426Z","modified":"2016-11-21T15:53:38.775Z","lastPublisher":{"name":"vmarchaud","email":"contact@vmarchaud.fr"},"owners":[{"name":"vmarchaud","email":"contact@vmarchaud.fr"}],"other":{"_attachments":{},"_from":".","_id":"pm2-jenkinshook","_nodeVersion":"6.5.0","_npmOperationalInternal":{"host":"packages-18-east.internal.npmjs.com","tmp":"tmp/pm2-jenkinshook-1.0.1.tgz_1479743618193_0.4386271976400167"},"_npmUser":{"name":"vmarchaud","email":"contact@vmarchaud.fr"},"_npmVersion":"3.10.3","_rev":"2-6e623b5574bd2a208c64b5554057432f","_shasum":"3cd240205d64c6446bedda4fe7367815cdd7b6db","author":{"name":"vmarchaud"},"bugs":{"url":"https://github.com/vmarchaud/pm2-jenkinshook/issues"},"directories":{},"dist-tags":{"latest":"1.0.1"},"dist":{"shasum":"3cd240205d64c6446bedda4fe7367815cdd7b6db","tarball":"http://registry.npmjs.org/pm2-jenkinshook/-/pm2-jenkinshook-1.0.1.tgz"},"maintainers":[{"name":"vmarchaud","email":"contact@vmarchaud.fr"}],"readmeFilename":"README.md","time":{"modified":"2016-11-21T15:53:38.775Z","created":"2016-11-21T15:02:57.426Z","1.0.0":"2016-11-21T15:02:57.426Z","1.0.1":"2016-11-21T15:53:38.775Z"}}}