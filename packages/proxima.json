{"name":"proxima","realName":"Proxima","version":"0.4.11","description":"An HTTP and TLS (HTTPS) reverse proxy server intended to replace full web servers for proxying Node.js applications.","homepage":"https://github.com/BlueJeansAndRain/proxima","preferGlobal":true,"main":"index.js","bin":{"proxima":"cli.js"},"dependencies":{"stack-trace":"0.0.x","optimist":"0.6.x"},"devDependencies":{"ws":"0.4.x"},"scripts":{"test":"echo \"Error: no test specified\" && exit 1"},"repository":"https://github.com/BlueJeansAndRain/proxima","keywords":["server","reverse","proxy","vhost","virtual","host","ssl","http","tls","sni"],"license":"MIT","gitHead":"9be91e3fc1e2318cf276a2338b7d7cd32c2f5a50","versions":[{"number":"0.1.0","date":"2013-08-19T23:10:24.524Z"},{"number":"0.1.1","date":"2013-08-19T23:44:40.905Z"},{"number":"0.1.4","date":"2013-08-20T01:04:25.162Z"},{"number":"0.1.5","date":"2013-08-20T01:07:14.401Z"},{"number":"0.1.6","date":"2013-08-20T01:32:23.103Z"},{"number":"0.1.7","date":"2013-08-20T06:48:35.234Z"},{"number":"0.2.0","date":"2013-08-20T19:05:45.092Z"},{"number":"0.2.1","date":"2013-08-20T19:51:17.974Z"},{"number":"0.2.2","date":"2013-08-20T19:54:56.123Z"},{"number":"0.2.3","date":"2013-08-20T20:11:31.191Z"},{"number":"0.4.0","date":"2013-08-21T20:25:02.862Z"},{"number":"0.4.1","date":"2013-08-21T22:31:42.157Z"},{"number":"0.4.2","date":"2013-08-21T22:33:29.173Z"},{"number":"0.4.3","date":"2013-08-22T20:52:30.063Z"},{"number":"0.4.4","date":"2013-08-23T19:02:36.238Z"},{"number":"0.4.5","date":"2013-08-23T19:41:07.314Z"},{"number":"0.4.6","date":"2013-08-23T19:54:00.657Z"},{"number":"0.4.7","date":"2013-09-06T22:44:33.849Z"},{"number":"0.4.8","date":"2013-09-06T23:14:19.376Z"},{"number":"0.4.9","date":"2014-07-03T15:37:56.361Z"},{"number":"0.4.10","date":"2014-07-29T22:11:56.038Z"},{"number":"0.4.11","date":"2014-10-16T02:52:41.243Z"}],"readme":"Proxima\n=======\n\nAn [HTTP](http://en.wikipedia.org/wiki/Http) and [TLS](http://en.wikipedia.org/wiki/Transport_Layer_Security) ([HTTPS](http://en.wikipedia.org/wiki/Https)) [reverse proxy](http://en.wikipedia.org/wiki/Reverse_proxy) server intended to replace full web servers for proxying Node.js applications.\n\nIn a classic [Apache](http://httpd.apache.org/) or [Nginx](http://wiki.nginx.org/Main) web server configuration, you would use [virtual hosting](http://en.wikipedia.org/wiki/Virtual_Hosting) to host multiple sites on a single IP address. When making the switch to Node, you're faced with a few choices for continuing to host multiple sites per IP address.\n\n* The standard solution is to continue using a regular web server as a proxy for your Node processes.\n\t* Requires maintaining an extra layer in your stack.\n* An easier but less robust solution is to put all of your sites into a single node application.\n\t* Sites are not self contained.\n\t* You must restart all sites to restart one.\n\t* If a single site dies, the entire Node process may be compromised.\n\nProxying requests through a single gateway server to multiple Node processes is the normally recommended solution because it allows you to...\n\n* Host sites on multiple machines.\n* Restart or reset a single site.\n* Write Node site applications that are simple to test and develop as stand alone scripts. All they need to know for proxy operation is the appropriate endpoint for listening.\n\nProxima is a purpose built web server for proxying requests to other Node processes. It takes the place of a regular web server when you don't need it for anything except proxying requests. The configuration is much simpler and you get Javascript _truly_ all the way down.\n\nFYI, there's no reason you can't use Proxima as a gateway to non-Node servers.\n\nInstallation\n------------\n\nYou can install Proxima using `npm` which is the prefered method.\n\n\tsudo npm install -g proxima\n\nYou can also checkout proxima from [GitHub](https://github.com/BlueJeansAndRain/proxima)\n\n\tgit https://github.com/BlueJeansAndRain/proxima.git\n\tnpm install\n\n\t# If you want to install the package globally after checking it out.\n\tsudo npm install -g\n\nCommand Line Usage\n------------------\n\n\tUsage: proxima --help\n           proxima [--verbose|--quiet] [--uid=user] [--gid=group]\n                   [--workers=number] [--config=filename]\n\n\tOptions:\n\t  --help         Display this help text.\n\t  --verbose, -v  Print log messages to stderr.\n\t  --quiet, -q    Do not print log messages to stderr.\n\t  --uid, -u      User ID to use after listeners have been bound.\n\t  --gid, -g      Group ID to use after listeners have been bound.\n\t  --workers, -w  How many worker processes to spawn.\n\t  --config, -c   Set the configuration file path.                  [default: \"./proxima.json\"]\n\nConfiguration File\n------------------\n\nConfiguration files should contain a JSON object.\n\nExample:\n\n\t{\n\t\t\"verbose\": false,\n\t\t\"workers\": 2,\n\t\t\"uid\": 1010,\n\t\t\"gid\": \"www\",\n\t\t\"listeners\": [\n\t\t\t8080,\n\t\t\t{ \"port\": 8081 },\n\t\t\t{ \"port\": 8082, \"secure\": true },\n\t\t\t{ \"port\": 8083, \"host\": \"127.0.0.1\" },\n\t\t\t{ \"port\": 8084, \"host\": \"127.0.0.1\", \"secure\": true },\n\t\t\t\"/tmp/listener1.sock\",\n\t\t\t{ \"path\": \"/tmp/listener2.sock\" },\n\t\t\t{ \"path\": \"/tmp/listener2.sock\", \"secure\": true }\n\t\t],\n\t\t\"routes\": [\n\t\t\t{\n\t\t\t\t\"hostname\": \"a.com\",\n\t\t\t\t\"to\": 8090\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"hostname\": \"b.com\",\n\t\t\t\t\"to\": { \"port\": 8091 }\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"hostname\": \"a.?.com\",\n\t\t\t\t\"to\": { \"port\": 8092, \"host\": \"127.0.0.1\", \"secure\": true }\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"hostname\": \"*.b.com\",\n\t\t\t\t\"to\": \"/tmp/upstream1.sock\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"hostname\": \"c*d.com\",\n\t\t\t\t\"to\": { \"path\": \"/tmp/upstream2.sock\" }\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"hostname\": [\n\t\t\t\t\t\"e?f.com\",\n\t\t\t\t\t\"g.?\",\n\t\t\t\t\t\"h.*\"\n\t\t\t\t],\n\t\t\t\t\"to\": 8093\n\t\t\t}\n\t\t],\n\t\t\"404\": { \"port\": 8085, \"host\": \"127.0.0.1\" },\n\t\t\"500\": { \"path\": \"/tmp/404.sock\" },\n\t\t\"504\": false,\n\t\t\"specTimeout\": 1000\n\t}\n\n### Configuration Options\n\n#### verbose\n\nTrue to print log messages to the STDERR stream.\n\nThis option can be overridden by the command line `--verbose` or `--quiet` options.\n\nDefaults to false.\n\n#### workers\n\nThe number of cluster works you want Proxima to use. If zero, the master process will handle requests.\n\nThis option can be overridden by the command line `--workers` option.\n\nDefaults to 0.\n\n#### uid\n\nEither an integer ID or string name of a user that the Proxima process should run as. This will only work if the process is launched with root permissions. This allows proxima to bind to ports below 1024, and then reduce it's permissions to avoid being used for evil.\n\nThis option can be overridden by the command line `--uid` option.\n\nDefaults to the current user's ID.\n\n#### gid\n\nEither an integer ID or a string name of a group that the Proxima should run as.\n\nThis option can be overridden by the command line `--gid` option.\n\nDefaults to the current user's group ID.\n\n#### listeners\n\nAn array of [endpoints](#configuration-endpoints) that Proxima should listen on.\n\n_Note: An incoming connection on a secure listener can only match secure routes, and vise versa._\n\n#### routes\n\nAn array of objects describing how Proxima should proxy incoming connections on listeners.\n\nThe routes array is ordered from lowest priority at the top, to highest priority at the bottom. This means that the last route in the routes list will be tested first for each incoming connection. If you have a _catch-all_ route \"*\", it should probably be the very first thing in the routes list.\n\nA catch-all route is a route with the hostname \"*\", which will match any hostname. This is similar to the `404` option, but will be matched as part of the routes processesing which means before `404` is used. Unlike `404`, a catchall can be secure.\n\nEach route object _must_ have the following two properties.\n\n##### hostname\n\nA string representing a named host pattern, a regular expression, or an array of hostname patterns and regular expressions.\n\nThe hostname will be interpreted as a regular expression if it begins and ends with forward slashes \"/\".\n\nIf the hostname is not a regular expression then it is interpreted as a [glob](http://en.wikipedia.org/wiki/Glob_%28programming%29) which can contain wildcards.\n\nThe following glob wildcards are supported:\n\n* An astrisk \"*\" matches any number of characters without restriction.\n* A question mark \"?\" matches any number of non-separator characters.\n\t* Separators are colons \":\" which are used for IPv6 octet separation, or periods \".\" which are used for IPv4 octet and domain name separation.\n\n##### to\n\nAn [endpoint](#configuration-endpoints) that Proxima should bi-directionally forward data to when the hostname of an incoming connection matches the route hostname pattern.\n\n#### 404\n\nAn optional boolean or [endpoint](#configuration-endpoints) value which tells Proxima what to do if an incoming non-secure request does not match a route.\n\n_Note: If you use a non-secure catch-all \"*\" route, this option will never be used._\n\nThis has no affect on secure connections which are always closed if there is no route match. If you really need to catch unmatched secure requests, use a secure catch-all \"*\" route.\n\nDefaults to true.\n\n##### Boolean\n\nTrue will allow Proxima to display its own error page. False will close the connection without responding.\n\n##### Endpoint\n\nProxy the incoming unmatched connection.\n\n#### 500\n\nAn optional boolean or [endpoint](#configuration-endpoints) value which tells Proxima what to do if an incoming non-secure request matches a route, but an error occurs when attempting to connect to the route's `to` endpoint.\n\nThis has no affect on secure connections which are always closed on error.\n\nDefaults to true.\n\n#### 505\n\nAn optional boolean or [endpoint](#configuration-endpoints) value which tells Proxima what to do if an incoming non-secure request matches a route and a connection is successfully made to the route's `to` endpoint, but an error or timeout occurs on the proxy socket before the upstream server sends a response.\n\nThis has no affect on secure connections which are always closed on error.\n\nDefaults to true.\n\n#### specTimeout\n\nAn optional integer value which tells Proxima how long to wait for data on new connections before closing them.\n\nBrowsers sometimes open extra connections to the server just in case they might need it in the near future. These are called speculative connections and the browser doesn't send any data on the connection until it decides it needs the extra parallelism. This means that the connection cannot be routed, since no host header is sent. Because it isn't routed, no upstream apps have an opportunity to set a reasonable timeout, leaving it up to the browser to close this dangling connection whenever it feels like it.\n\nThis option allows Proxima to time the connection out if no data is recieved. The timeout is removed as soon as any data is recieved.\n\nDefaults to 1000 (milliseconds). Set it to 0 to never timeout.\n\n### Configuration Endpoints\n\nEndpoints can be numbers, strings, or objects.\n\n#### Number\n\nA number represents an IP port and is equivalent to the object value `{ port: number }`.\n\n#### String\n\nA string represents a socket path and is equivalent to the object value `{ path: string }`.\n\n#### Object\n\nAn object endpoint _must_ contain a `port` or `path` property, but _not_ both. The following object properties are recognized.\n\n##### port\n\nA number from 1 to 65535 indicating the [port](http://en.wikipedia.org/wiki/Port_%28computer_networking%29) of an IP address endpoint.\n\n##### host\n\nA string IPv4 or IPv6 address. This property is only meaningful if the `port` property is set.\n\nIf no `host` property is present, listeners will listen on all available IPv4 addresses, and routes will connect to localhost.\n\n##### path\n\nA string value which represents a [UNIX domain socket](http://en.wikipedia.org/wiki/Unix_domain_socket) path.\n\n##### secure\n\nTrue indicates that the socket will be used to transmit secure (TLS) data.\n\nDefaults to false.\n\nHTTP\n----\n\nProxima is not all that picky about the format of an HTTP request. It's _so_ not-picky that you could use it with any text protocol that has HTTP-like headers. As long as the first packet of a request contains newline separated utf8 text, and before the first double line break there is at least one line that looks like `Host: some.hostname.com`, it will attempt to route the request based on that \"header\".\n\nTLS (HTTPS)\n-----------\n\n[SNI](http://en.wikipedia.org/wiki/Server_Name_Indication) is supported for detecting the hostname of a secure request.\n\nProxima does not need to know about your certificates. It peeks at the TLS/SNI extension headers (which are not encrypted) and forwards the encrypted data as-is. There is no need for Proxima to read or modify the encrypted payload.\n\n### SNI Browser Support\n\nMost modern browsers should support it.\n\nThe following browsers **do not** support SNI:\n\n* All Internet Explorer versions in Windows XP\n* Internet Explorer versions earlier than 7 in _any_ version of windows\n* Android's standard browser before Honeycomb (v3.x)\n\nWebSockets\n----------\n\nThey just work.\n\nThe initial negotation of for a [WebSocket](http://en.wikipedia.org/wiki/WebSocket) is done via HTTP, which means Proxima can route them normally. Once a socket has been routed, data is passively/transparently piped between the upstream and downstream sockets, including all WebSocket negotiation and data.\n\nBenchmarks\n----------\n\nThere are none yet.\n\nIf you create one and want to share, I would be happy to include some.\n\nCaveats\n-------\n\n###SPDY\n\nGoogle's SPDY protocol allows for a single persistant connection to be used for different domain names. This is different than the old standard for persistent connections which only allowed a connection to be reused for exactly the same domain name, even if they resolve to the same network address.\n\nProxima routes a new connection based on the domain in the first request's header. Any subsequent requests on the same connection will end up at the same place because no rerouting will occur.\n\nServers must advertise that they support the SPDY protocol by responding with the \"Alternate-Protocol\" header.\n\nYou should not advertise SPDY support when using Proxima if you serve resources on the same page from different sub-domains, and the following conditions are or might be true.\n* Multiple sub-domains point to the same IP address.\n* Multiple sub-domains use no SSL certificate or the same certificate.\n* Proxima is routing sub-domains that resolve to the same IP address, to different endpoints.\n\nStandard persistant connections (even pipelined) should not be a problem.\n\nIf I get feedback indicating a need for SPDY support, I'll work on it.\n","starsCount":1,"created":"2013-08-19T23:10:22.951Z","modified":"2014-10-16T02:52:41.243Z","lastPublisher":{"name":"bluejeansandrain","email":"bluejeansandrain@gmail.com"},"owners":[{"name":"bluejeansandrain","email":"bluejeansandrain@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"proxima","_nodeVersion":"0.10.32","_npmUser":{"name":"bluejeansandrain","email":"bluejeansandrain@gmail.com"},"_npmVersion":"2.1.4","_rev":"1-56774db997f626a47856dc4db316940e","_shasum":"8f11b52c8bd892e5f1ef7e0b99a3ea40f2b23326","author":{"name":"Chris Ackerman","email":"bluejeansandrain@gmail.com","url":"http://parallelnoodles.com/"},"bugs":{"url":"https://github.com/BlueJeansAndRain/proxima/issues"},"directories":{},"dist-tags":{"latest":"0.4.11"},"dist":{"shasum":"8f11b52c8bd892e5f1ef7e0b99a3ea40f2b23326","tarball":"http://registry.npmjs.org/proxima/-/proxima-0.4.11.tgz"},"maintainers":[{"name":"bluejeansandrain","email":"bluejeansandrain@gmail.com"}],"readmeFilename":"README.md","time":{"modified":"2014-10-16T02:52:41.243Z","created":"2013-08-19T23:10:22.951Z","0.1.0":"2013-08-19T23:10:24.524Z","0.1.1":"2013-08-19T23:44:40.905Z","0.1.4":"2013-08-20T01:04:25.162Z","0.1.5":"2013-08-20T01:07:14.401Z","0.1.6":"2013-08-20T01:32:23.103Z","0.1.7":"2013-08-20T06:48:35.234Z","0.2.0":"2013-08-20T19:05:45.092Z","0.2.1":"2013-08-20T19:51:17.974Z","0.2.2":"2013-08-20T19:54:56.123Z","0.2.3":"2013-08-20T20:11:31.191Z","0.4.0":"2013-08-21T20:25:02.862Z","0.4.1":"2013-08-21T22:31:42.157Z","0.4.2":"2013-08-21T22:33:29.173Z","0.4.3":"2013-08-22T20:52:30.063Z","0.4.4":"2013-08-23T19:02:36.238Z","0.4.5":"2013-08-23T19:41:07.314Z","0.4.6":"2013-08-23T19:54:00.657Z","0.4.7":"2013-09-06T22:44:33.849Z","0.4.8":"2013-09-06T23:14:19.376Z","0.4.9":"2014-07-03T15:37:56.361Z","0.4.10":"2014-07-29T22:11:56.038Z","0.4.11":"2014-10-16T02:52:41.243Z"},"users":{"julien-f":true}}}