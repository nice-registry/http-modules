{"name":"grunt-http-post-deploy","version":"0.1.3","description":"grunt-http-post-deploy","main":"Gruntfile.js","dependencies":{"async":"~0.1.22","argparse":"~0.1.16","abbrev":"~1.0.7","colors":"~0.6.2","eventemitter2":"~0.4.14","dateformat":"~1.0.2-1.2.3","esprima":"~1.0.4","exit":"~0.1.2","findup-sync":"~0.1.3","glob":"~3.1.21","getobject":"~0.1.0","graceful-fs":"~1.2.3","grunt":"~0.4.5","grunt-legacy-log":"~0.1.3","grunt-legacy-log-utils":"~0.1.1","grunt-contrib-nodeunit":"~0.3.3","hooker":"~0.2.3","grunt-legacy-util":"~0.2.0","inherits":"~2.0.1","iconv-lite":"~0.2.11","lodash":"~0.9.2","lru-cache":"~2.7.3","js-yaml":"~2.0.5","minimatch":"~0.2.14","nopt":"~1.0.10","qs":"~1.2.0","rimraf":"~2.2.8","restler":"~3.4.0","sax":"~0.5.8","sigmund":"~1.0.1","underscore":"~1.7.0","underscore.string":"~2.2.1","which":"~1.0.9","xml2js":"~0.4.0","yaml":"~0.2.3","xmlbuilder":"~8.2.2"},"devDependencies":{"coffee-script":"~1.3.3"},"scripts":{"test":"\"test\", [\"http_post_deploy:default_options\"]"},"repository":"https://github.com/biaohou/grunt-http-post-deploy","keywords":["grunt-http-post-deploy"],"license":"MIT","gitHead":"86764ca3926f779b26f287046e76b4221985aa59","homepage":"https://github.com/biaohou/grunt-http-post-deploy#readme","versions":[{"number":"0.1.0","date":"2016-05-18T00:33:22.843Z"},{"number":"0.1.1","date":"2016-05-18T03:51:18.772Z"},{"number":"0.1.2","date":"2016-05-18T06:24:16.268Z"},{"number":"0.1.3","date":"2016-06-22T07:44:10.151Z"}],"readme":"# grunt-http-post-deploy\n\n> grunt-http-post-deploy\n\n## Getting Started\nThis plugin requires Grunt `0.4.5`\n\nIf you haven't used [Grunt](http://gruntjs.com/) before, be sure to check out the [Getting Started](http://gruntjs.com/getting-started) guide, as it explains how to create a [Gruntfile](http://gruntjs.com/sample-gruntfile) as well as install and use Grunt plugins. Once you're familiar with that process, you may install this plugin with this command:\n\n```shell\nnpm install grunt-http-post-deploy --save-dev\n```\n\nOnce the plugin has been installed, it may be enabled inside your Gruntfile with this line of JavaScript:\n\n```js\ngrunt.loadNpmTasks('grunt-http-post-deploy');\n```\n\n## 一句话说明 \"http_post_deploy\" 能做什么！\n\n### 一句话\n它帮助开发者将grunt后的文件快速部署到任意测试或线上机器，且支持动(态)、静(态)文件分离部署，即使动(态)、静(态)文件不在同一台服务器上也没问题！\n\n## The \"http_post_deploy\" task\n\n### Overview\nIn your project's Gruntfile, add a section named `http_post_deploy` to the data object passed into `grunt.initConfig()`.\n\n```js\ngrunt.initConfig({\n\thttp_post_deploy : {\n\t\tdefault_options : {\n\t\t\toptions : {\n\t\t\t\theaders : {Authorization : \"Token 1234\"},\n\t\t\t\tfrom : \"src/\",\n\t\t\t\tto : \"\",\n\t\t\t\treceiver : \"\",\n\t\t\t\tstatic_to : \"\",\n\t\t\t\tstatic_receiver : \"\",\n\t\t\t\trejectUnauthorized : false,\n\t\t\t\tsuccess : function(data) {}\n\t\t\t}\n\t\t}\n    }\n});\n```\n\n### Options\n\n#### options.headers\nType: `String`\n写在header里的信息，可选项\n\n#### options.from\nType: `String`\n将该目录下（该目录通常为dist之后的目录）的文件发布线上（测试）环境\n\n#### options.to\nType: `String`\n服务器上的部署路径，会保持原有文件的目录结构；如果static_to没有指定，则全部都移到该目录下\n\n#### options.receiver\nType: `String`\n服务器上receiver脚本地址，本例中使用php版本，直接读取文件流$_FILES和to路径$_POST[\"to\"]即可，如果static_receiver没有指定 则都用这个 请保证要上传的目录和该文件在同一台服务器上或同一个域名内\n\n#### options.static_to\nType: `String`\n可选项，同上to，专门给静态资源分配的路径，静态文件包括*.{js,css,png,jpg,gif} 如果没有则用上边的to\n\n#### options.static_receiver\nType: `String`\n可选项，同上receiver，专门接收静态资源文件的服务器脚本 如果没有则用上边的receiver，本次新增\n\n#### options.rejectUnauthorized\nType: `Boolean`\n验证服务器证书，如果需要绕过SSL验证，设置为false\n\n#### options.success\nType: `Function`\n成功回调，可选项，每次（每个文件）上传成功 就会触发一次\n\n### PHP=>receiver.php\n\n```js\n@error_reporting(E_ALL & ~E_NOTICE & ~E_WARNING);\nfunction mkdirs($path, $mod = 0777) {\n    if(is_dir($path)){\n        return chmod($path, $mod);\n    }\n    else{\n        $old = umask(0);\n        if(mkdir($path, $mod, true) && is_dir($path)){\n            umask($old);\n            return true;\n        }\n        else{\n            umask($old);\n        }\n    }\n    return false;\n}\n \nif($_POST['to']){\n    $to = $_POST['to'];\n    if(file_exists($to)){\n        echo \"有同名文件，删除！\";\n        unlink($to);\n    }\n    else{\n        echo \"没有同名文件\";\n        $dir = dirname($to);\n        if(!file_exists($dir)){\n            echo $dir.\"路径不存在，创建！\";\n            mkdirs($dir);\n        }           \n    }               \n    echo move_uploaded_file($_FILES[\"file\"][\"tmp_name\"], $to) ? $_FILES[\"file\"][\"name\"].\"上传成功\" : $_FILES[\"file\"][\"name\"].\"上传失败\";\n}                   \nelse{               \n    echo \"are you ready?\";\n}\n```\n\n## Contributing\nIn lieu of a formal styleguide, take care to maintain the existing coding style. Add unit tests for any new or changed functionality. Lint and test your code using [Grunt](http://gruntjs.com/).\n\n## Release History\n_(Nothing yet)_\n","starsCount":1,"created":"2016-05-18T00:33:22.843Z","modified":"2016-06-22T07:44:10.151Z","lastPublisher":{"name":"biaohou","email":"13910099304@139.com"},"owners":[{"name":"biaohou","email":"13910099304@139.com"}],"other":{"_attachments":{},"_from":".","_id":"grunt-http-post-deploy","_nodeVersion":"6.2.0","_npmOperationalInternal":{"host":"packages-16-east.internal.npmjs.com","tmp":"tmp/grunt-http-post-deploy-0.1.3.tgz_1466581447005_0.0510487575083971"},"_npmUser":{"name":"biaohou","email":"13910099304@139.com"},"_npmVersion":"3.8.9","_rev":"1-7b4b72a205438c183e89716ebb7e5e07","_shasum":"bdb6102b4e0681ff4104461ca7753fccc30b763e","author":{"name":"biaohou"},"bugs":{"url":"https://github.com/biaohou/grunt-http-post-deploy/issues"},"directories":{},"dist-tags":{"latest":"0.1.3"},"dist":{"shasum":"bdb6102b4e0681ff4104461ca7753fccc30b763e","tarball":"http://registry.npmjs.org/grunt-http-post-deploy/-/grunt-http-post-deploy-0.1.3.tgz"},"maintainers":[{"name":"biaohou","email":"13910099304@139.com"}],"readmeFilename":"README.md","time":{"modified":"2016-06-22T07:44:10.151Z","created":"2016-05-18T00:33:22.843Z","0.1.0":"2016-05-18T00:33:22.843Z","0.1.1":"2016-05-18T03:51:18.772Z","0.1.2":"2016-05-18T06:24:16.268Z","0.1.3":"2016-06-22T07:44:10.151Z"},"users":{"biaohou":true}}}