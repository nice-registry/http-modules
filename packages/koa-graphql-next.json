{"name":"koa-graphql-next","version":"1.0.9","description":"GraphQL HTTP middleware for koa v2,ported from express-graphql,change test framework to ava.","main":"lib/index.js","files":["lib","README.md","LICENSE"],"scripts":{"start":"\"./node_modules/.bin/nodemon \" --watch ./ index.babel.js","test":"./node_modules/.bin/jest","clean":"./node_modules/.bin/rimraf lib","build":"./node_modules/.bin/babel src --out-dir lib --source-maps false --ignore __test__ --extensions .js,.jsx --copy-files"},"repository":"https://github.com/bidanjun/koa-graphql-next","keywords":["koa","koa2","graphql","react","relay","ava","supertest-as-promised"],"license":"BSD-3-Clause","homepage":"https://github.com/bidanjun/koa-graphql-next#readme","dependencies":{"content-type":"^1.0.2","http-errors":"^1.6.1","raw-body":"^2.2.0"},"devDependencies":{"babel-cli":"^6.24.1","babel-jest":"^20.0.3","babel-plugin-transform-async-to-generator":"^6.24.1","babel-plugin-transform-es2015-destructuring":"^6.23.0","babel-plugin-transform-es2015-modules-commonjs":"^6.24.1","babel-plugin-transform-es2015-spread":"^6.22.0","babel-plugin-transform-object-rest-spread":"^6.23.0","babel-plugin-transform-runtime":"^6.23.0","babel-register":"^6.24.1","babel-runtime":"^6.23.0","co-body":"^5.1.1","graphql":"^0.10.1","jest":"^20.0.4","koa":"^2.2.0","koa-bodyparser":"^4.2.0","koa-convert":"^1.2.0","koa-generic-session":"^1.11.5","koa-multer":"^1.0.1","koa-session":"^5.1.0","rimraf":"^2.6.1","supertest":"^3.0.0"},"peerDependencies":{"graphql":"^0.5.0-b || ^0.10.1"},"jest":{"testEnvironment":"node","bail":false,"verbose":true,"collectCoverage":true,"moduleFileExtensions":["js"],"transform":{".*":"./node_modules/babel-jest"},"testPathIgnorePatterns":["/node_modules/","/build/","/docs/","/logs/","/coverage/"]},"licenseText":"BSD License\n\nFor GraphQL software\n\nCopyright (c) 2015, Facebook, Inc. All rights reserved.\n\nRedistribution and use in source and binary forms, with or without modification,\nare permitted provided that the following conditions are met:\n\n * Redistributions of source code must retain the above copyright notice, this\n   list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above copyright notice,\n   this list of conditions and the following disclaimer in the documentation\n   and/or other materials provided with the distribution.\n\n * Neither the name Facebook nor the names of its contributors may be used to\n   endorse or promote products derived from this software without specific\n   prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\nANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\nWARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR\nANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\nLOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\nANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\nSOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.","versions":[{"number":"1.0.0","date":"2016-07-03T18:04:54.836Z"},{"number":"1.0.1","date":"2016-07-12T04:57:33.407Z"},{"number":"1.0.2","date":"2016-08-06T01:49:40.381Z"},{"number":"1.0.3","date":"2016-08-07T17:24:01.142Z"},{"number":"1.0.4","date":"2016-08-26T17:01:20.229Z"},{"number":"1.0.5","date":"2016-11-15T07:47:03.807Z"},{"number":"1.0.6","date":"2017-01-28T20:36:11.640Z"},{"number":"1.0.7","date":"2017-01-30T17:28:28.454Z"},{"number":"1.0.8","date":"2017-02-27T04:00:33.667Z"},{"number":"1.0.9","date":"2017-06-12T18:13:07.981Z"}],"readme":"GraphQL HTTP Server Middleware\n==============================\n\nCreate a GraphQL HTTP server with koa v2. it's ported from [express-graphql](https://github.com/graphql/express-graphql).\nkoa-graphql-next have the same api with express-graphql, and well tested like express-graphql,that's mean,and could be try\nto using in product currently.\n\n## Faq\n\n1. only supported koa v2\n2. add url to options,and default url is '/graphql'\n3. using jest and supertest,instead of mocha in express-graphql.all test from express-graphql (now 64 tests),have been rewrited and passed.\n4. ported from express-graphql,for the code,\"line by line\",and rewrites all the test of express-graphql,so fix many bug founded in tests.\n   but,thanks for the author of these project:\n   [koa-graphql by chentsulin](https://github.com/chentsulin/koa-graphql) \n   [graffiti](https://github.com/RisingStack/graffiti) it proveder a middleware for koa v1.\n   [koa-graphql by Arch-Mage](https://github.com/Arch-Mage/koa-graphql/tree/next)\n5. for the detail of usage,could read the test,for example how to upload files with graphql.\n\n## Installation\n\n```sh\nnpm install --save koa-graphql-next\n```\n\nThen use `koa-graphql-next` at any point as a middleware with koa@next:\n\n```js\nimport graphqlHTTP from 'koa-graphql-next';\n\nconst app = new koa();\n\napp.use( graphqlHTTP({\n  schema: MyGraphQLSchema,\n  graphiql: true\n}));\n\napp.listen(3000);\n```\n\n## Options\n\nThe `graphqlHTTP` function accepts the following options:\n\n  * **`schema`**: A `GraphQLSchema` instance from [`graphql-js`][].\n    A `schema` *must* be provided.\n\n  * **`context`**: A value to pass as the `context` to the `graphql()`\n    function from [`graphql-js`][].\n\n  * **`rootValue`**: A value to pass as the `rootValue` to the `graphql()`\n    function from [`graphql-js`][].\n\n  * **`pretty`**: If `true`, any JSON response will be pretty-printed.\n\n  * **`formatError`**: An optional function which will be used to format any\n    errors produced by fulfilling a GraphQL operation. If no function is\n    provided, GraphQL's default spec-compliant [`formatError`][] function will\n    be used.\n\n  * **`validationRules`**: Optional additional validation rules queries must\n    satisfy in addition to those defined by the GraphQL spec.\n\n  * **`graphiql`**: If `true`, may present [GraphiQL][] when loaded directly\n    from a browser (a useful tool for debugging and exploration).\n\n  * **`url`**: added in koa-graphql-next,An optional string for the query url.\n    default value is '/graphql'.\n\n## Debugging\n\nDuring development, it's useful to get more information from errors, such as\nstack traces. Providing a function to `formatError` enables this:\n\n```js\nformatError: error => ({\n  message: error.message,\n  locations: error.locations,\n  stack: error.stack\n})\n```\n\n\n## HTTP Usage\n\nOnce installed at a path, `koa-graphql-next` will accept requests with\nthe parameters:\n\n  * **`query`**: A string GraphQL document to be executed.\n\n  * **`variables`**: The runtime values to use for any GraphQL query variables\n    as a JSON object.\n\n  * **`operationName`**: If the provided `query` contains multiple named\n    operations, this specifies which operation should be executed. If not\n    provided, a 400 error will be returned if the `query` contains multiple\n    named operations.\n\n  * **`raw`**: If the `graphiql` option is enabled and the `raw` parameter is\n    provided raw JSON will always be returned instead of GraphiQL even when\n    loaded from a browser.\n\nGraphQL will first look for each parameter in the URL's query-string:\n\n```\n/graphql?query=query+getUser($id:ID){user(id:$id){name}}&variables={\"id\":\"4\"}\n```\n\nIf not found in the query-string, it will look in the POST request body.\n\nIf a previous middleware has already parsed the POST body, the `ctx.request.body`\nvalue will be used. Use [`koa-multer`][] or a similar middleware to add support\nfor `multipart/form-data` content, which may be useful for GraphQL mutations\ninvolving uploading files. \n\nIf the POST body has not yet been parsed, koa-graphql-next will interpret it\ndepending on the provided *Content-Type* header.\n\n  * **`application/json`**: the POST body will be parsed as a JSON\n    object of parameters.\n\n  * **`application/x-www-form-urlencoded`**: this POST body will be\n    parsed as a url-encoded string of key-value pairs.\n\n  * **`application/graphql`**: The POST body will be parsed as GraphQL\n    query string, which provides the `query` parameter.\n\n\n[`graphql-js`]: https://github.com/graphql/graphql-js\n[`formatError`]: https://github.com/graphql/graphql-js/blob/master/src/error/formatError.js\n[GraphiQL]: https://github.com/graphql/graphiql\n\n","created":"2016-07-03T18:04:54.836Z","modified":"2017-06-12T18:13:07.981Z","lastPublisher":{"name":"bidanjun","email":"11084184@qq.com"},"owners":[{"name":"bidanjun","email":"11084184@qq.com"}],"other":{"_attachments":{},"_id":"koa-graphql-next","_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/koa-graphql-next-1.0.9.tgz_1497291187872_0.968499256297946"},"_npmUser":{"name":"bidanjun","email":"11084184@qq.com"},"_rev":"6-a46f950cf9de78b9c3b4a1e1fe2a8b8b","author":{"name":"danjun.bi"},"bugs":{"url":"https://github.com/bidanjun/koa-graphql-next/issues"},"directories":{},"dist-tags":{"latest":"1.0.9"},"dist":{"shasum":"fae952c83ec16dfe1692dc12a29f9a9ac7d75495","tarball":"https://registry.npmjs.org/koa-graphql-next/-/koa-graphql-next-1.0.9.tgz"},"maintainers":[{"name":"bidanjun","email":"11084184@qq.com"}],"readmeFilename":"readme.md","time":{"modified":"2017-06-12T18:13:07.981Z","created":"2016-07-03T18:04:54.836Z","1.0.0":"2016-07-03T18:04:54.836Z","1.0.1":"2016-07-12T04:57:33.407Z","1.0.2":"2016-08-06T01:49:40.381Z","1.0.3":"2016-08-07T17:24:01.142Z","1.0.4":"2016-08-26T17:01:20.229Z","1.0.5":"2016-11-15T07:47:03.807Z","1.0.6":"2017-01-28T20:36:11.640Z","1.0.7":"2017-01-30T17:28:28.454Z","1.0.8":"2017-02-27T04:00:33.667Z","1.0.9":"2017-06-12T18:13:07.981Z"}}}