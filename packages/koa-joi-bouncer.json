{"name":"koa-joi-bouncer","version":"1.0.7","description":"An http parameter validation library for Koa web apps","main":"index.js","dependencies":{"debug":"^2.6.0","joi":"^10.2.0"},"devDependencies":{"eslint":"^3.14.1","eslint-config-airbnb":"^14.0.0","eslint-plugin-import":"^2.2.0","eslint-plugin-jsx-a11y":"^3.0.2","eslint-plugin-react":"^6.9.0","koa":"^1.2.4","koa-better-body":"^3.0.2","should":"^11.2.0","supertest":"^3.0.0"},"scripts":{"test":"mocha"},"repository":"https://github.com/psypersky/koa-joi-bouncer","keywords":["koa","validator","joi","bouncer"],"license":"ISC","homepage":"https://github.com/psypersky/koa-joi-bouncer#readme","gitHead":"a87272c5159aa4e975ba43f3e5af216e8faf6212","versions":[{"number":"0.0.5","date":"2017-02-01T06:20:38.916Z"},{"number":"0.0.6","date":"2017-02-01T06:25:45.999Z"},{"number":"0.0.7","date":"2017-02-23T01:34:44.843Z"},{"number":"2.0.8","date":"2017-02-23T02:56:31.734Z"},{"number":"1.0.7","date":"2017-02-23T03:00:23.319Z"}],"readme":"\n# Koa-joi-bouncer\n\n__An http parameter validation library for Koa.js web apps__\n\n`npm install --save koa-joi-bouncer`\n\n# The idea\n\nSeparate the validation logic from the route itself, just define an schema and use it before the route.\n\n# Koa 2\n\nIf you want to use it with koa v2 use the tag 'next'\n\n`npm install --save koa-joi-bouncer@next`\n\n# Usage\n\n```js\nconst koa = require('koa');\nconst app = new koa();\nconst Router = require('koa-router');\nconst koaJoiBouncer = require('koa-joi-bouncer');\nconst Joi = koaJoiBouncer.Joi;\n\nconst router = new Router();\n\nconst myRouteValidation = koaJoiBouncer.middleware({\n  body: Joi.object().keys({\n     username: koaJoiBouncer.string().alphanum().min(3).max(30).required(),\n  }),\n  headers: Joi.object().keys({\n    foo: koaJoiBouncer.string().required().\n  }),\n});\n\nconst myRoute = function* myRouter(next) {\n  this.response.body = `Hello there ${this.request.body.username}`;\n}\n\nrouter.post('/myroute', myRouteValidation, myRoute);\n\napp.use(function* onValidationError(next) {\n  try {\n    yield next;\n  } catch (e) {\n    if (!e.isJoi) {\n      throw e;\n    }\n    this.response.body = {\n      status: 'fail',\n      details: e.details,\n    };\n    this.response.status = 400;\n  }\n});\n\napp.use(router.routes()).use(router.allowedMethods());\n\napp.listen(3000);\n```\n\nCheck the tests for more examples\n\nTODO:\n- Allow sending options to JOI\n- Allow more specification for the validation key e.g. 'request.body2'\n- Add https://david-dm.org/\n- Add https://travis-ci.org/\n- Add npm badge\n","created":"2017-02-01T06:20:38.916Z","modified":"2017-02-23T03:00:23.319Z","lastPublisher":{"name":"psypersky","email":"alkazar.r@gmail.com"},"owners":[{"name":"psypersky","email":"alkazar.r@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"koa-joi-bouncer","_nodeVersion":"7.2.0","_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/koa-joi-bouncer-1.0.7.tgz_1487818821425_0.5367327479179949"},"_npmUser":{"name":"psypersky","email":"alkazar.r@gmail.com"},"_npmVersion":"3.10.9","_rev":"5-9ca90c3bb00005cd8353f8a078c8735f","_shasum":"06b54a5f4a7f0d1d6bf3a0699b9d1fb8ca6eb0a0","author":{"name":"Ruben Alcazar Alvarez"},"bugs":{"url":"https://github.com/psypersky/koa-joi-bouncer/issues"},"directories":{"test":"test"},"dist-tags":{"latest":"1.0.7","next":"2.0.8"},"dist":{"shasum":"06b54a5f4a7f0d1d6bf3a0699b9d1fb8ca6eb0a0","tarball":"https://registry.npmjs.org/koa-joi-bouncer/-/koa-joi-bouncer-1.0.7.tgz"},"maintainers":[{"name":"psypersky","email":"alkazar.r@gmail.com"}],"readmeFilename":"README.md","time":{"modified":"2017-02-23T03:00:23.319Z","created":"2017-02-01T06:20:38.916Z","0.0.5":"2017-02-01T06:20:38.916Z","0.0.6":"2017-02-01T06:25:45.999Z","0.0.7":"2017-02-23T01:34:44.843Z","2.0.8":"2017-02-23T02:56:31.734Z","1.0.7":"2017-02-23T03:00:23.319Z"}}}