{"name":"error-obj","main":"./lib/main.js","version":"2.0.0","license":"MIT","repository":"https://github.com/amedia/javascript-modules","keywords":["error","rest"],"description":"Library generating http error objects","scripts":{"pretest":"eslint ./lib/*.js ./test/*.js","test":"tap --cov test/*.js"},"dependencies":{"lodash.iserror":"3.1.1","lodash.isobject":"3.0.2","quick-format":"2.0.4","error-def":"1.0.0"},"devDependencies":{"eslint":"3.0.1","joi":"9.0.0","tap":"6.1.1"},"gitHead":"5bb02940d5712e325d592e1a4680a1fa6c592ca6","homepage":"https://github.com/amedia/javascript-modules","versions":[{"number":"1.0.0","date":"2016-04-18T11:58:25.740Z"},{"number":"1.1.0","date":"2016-04-27T12:48:20.582Z"},{"number":"1.2.0","date":"2016-06-17T13:50:28.642Z"},{"number":"2.0.0","date":"2016-07-11T15:14:30.158Z"}],"readme":"# node-error-obj\n\n[![Dependencies](https://img.shields.io/david/amedia/node-error-obj.svg?style=flat-square)](https://david-dm.org/amedia/node-error-obj)[![Build Status](http://img.shields.io/travis/amedia/node-error-obj/master.svg?style=flat-square)](https://travis-ci.org/amedia/node-error-obj)\n\n\nHTTP friendly error objects for throwing proper errors with a mapping to [http\nerror statuses](https://en.wikipedia.org/wiki/List_of_HTTP_status_codes). \nIntention is to signal what http error status to respond with in a context of an \nerror happening in a http request.\n\nThe error objects support:\n\n* nesting of errors in a \"cause chain\"\n* `printf`-like formating of the error message\n* attachment of a \"problem\" object for more detailed http error responses\n\nThe [node-error-mid](https://github.com/amedia/node-error-mid) module is a\nExpress.js middleware for capturing and rendering http error status pages based\non these error objects.\n\n\n## Installation\n\n```bash\n$ npm install error-obj\n```\n\n\n## Simple usage\n\nCreate a file not found error:\n\n```js\nconst ErrObj = require('error-obj');\n\nlet file = '/bar.txt';\nlet err = new ErrObj.notFoundError('File \"%s\" could not be found', file);\nconsole.error(err.message); // File \"/bar.txt\" could not be found\n```\n\n\n## Constructors\n\nThis module return a object with a set of constructors where each constructor\nresembe a http status error type. All constructors take the same set of \nattributes and have identical behaviour.\n\nExamples:\n\nCreate an error object intended to yeld a http 404 Not found error:\n\n```js\nnew ErrObj.notFoundError('File \"%s\" could not be found', file);\n```\n\nCreate an error object intended to yeld a http 401 Unauthorized error:\n\n```js\nnew ErrObj.unauthorizedError('User \"%s\" not granted access', username);\n```\n\nPlease see the API section for a complete map of constructors and their mapping\nto http error statuses.\n\n\n## Constructor arguments\n\nCreate a new error object (using `notFoundError` as example):\n\n```js\nlet err = new ErrObj.notFoundError([Error|message], [message, var1, var2...], problem);\n```\n\n### [Error|message]\n\nThe first argument can be provided with either a message string or an existing\nError object.\n\n```js\nnew ErrObj.notFoundError('Something wrong');\n```\n\n```js\nnew ErrObj.notFoundError(new Error());\n```\n\nIn the case of an existing Error object being applied as the first argument to \nthe constructor the existing Error object will be nested inside the new Error.\nPlease see the section about nesting for more information.\n\nThis argument is optional.\n\n\n### [message, var1, var2...]\n\nThe second argument depend on whats applied as the first argument. If the first\nargument to the constructor is a message string the second (and third, fourth,\netc) arguments acts as `printf`-like formating varaibles.\n\n```js\nnew ErrObj.notFoundError('Something %s wrong', 'is very');\n```\n\nIf the first argument to the constructor is an existing Error object, the second\nargument to the constructor acts as a message string. Then the third, fourth,\netc arguments acts as `printf`-like formating varaibles.\n\n```js\nnew ErrObj.notFoundError(new Error(), 'Something %s wrong', 'is very');\n```\n\nAll arguments are optional.\n\n\n### problem\n\nIf the last argument to the constructor are of the type `Object` it will act\nas an problem object. A problem object can be any object (except an `Error` \nobject) which are intended to be passed on all the way through to the http error\nstatus response.\n\n```js\nnew ErrObj.notFoundError('Something wrong', {file : 'foo.txt'});\n```\n\nPlease see the section about problem objects for more information.\n\nThis argument is optional.\n\n\n## Nested errors\n\nAll error objects support nesting of other error objects and will produce a\nnested stack trace.\n\n```js\nvar err1 = new Error('No such file or directory');\nvar err2 = new ErrObj.notFoundError(err1, 'failed to stat \"%s\"', '/junk');\nvar err3 = new ErrObj.notFoundError(err2, 'request failed');\nconsole.log(err3)\n```\n\nwill produce:\n\n```sh\n{ NotFoundError: request failed: failed to stat \"/junk\": No such file or directory\n    at Object.<anonymous> (manual.test.js:39:12)\n    at Module._compile (module.js:541:32)\n    at Object.Module._extensions..js (module.js:550:10)\n    at Module.load (module.js:458:32)\n    at tryModuleLoad (module.js:417:12)\n    at Function.Module._load (module.js:409:3)\n    at Function.Module.runMain (module.js:575:10)\n    at startup (node.js:160:18)\n    at node.js:456:3\n  message: 'request failed: failed to stat \"/junk\": No such file or directory',\n  details: [],\n  parent: \n   { NotFoundError: failed to stat \"/junk\": No such file or directory\n       at Object.<anonymous> (manual.test.js:38:12)\n       at Module._compile (module.js:541:32)\n       at Object.Module._extensions..js (module.js:550:10)\n       at Module.load (module.js:458:32)\n       at tryModuleLoad (module.js:417:12)\n       at Function.Module._load (module.js:409:3)\n       at Function.Module.runMain (module.js:575:10)\n       at startup (node.js:160:18)\n       at node.js:456:3\n     message: 'failed to stat \"/junk\": No such file or directory',\n     details: [],\n     parent: \n      Error: No such file or directory\n          at Object.<anonymous> (manual.test.js:37:12)\n          at Module._compile (module.js:541:32)\n          at Object.Module._extensions..js (module.js:550:10)\n          at Module.load (module.js:458:32)\n          at tryModuleLoad (module.js:417:12)\n          at Function.Module._load (module.js:409:3)\n          at Function.Module.runMain (module.js:575:10)\n          at startup (node.js:160:18)\n          at node.js:456:3 } }\n```\n\n\n### Cause compatibility\n\nAll error objects contain a `cause()` method to support printing deeper stack\ntraces when logging with log frameworks such as `bole` or `bunyan`.\n\n\n## API\n\nThe API is defined by the [node-error-def](https://github.com/amedia/node-error-def)\nmodule. \n\nThe API is:\n\n * `.badRequestError()` - 400 Bad Request\n * `.unauthorizedError()` - 401 Unauthorized\n * `.paymentRequiredError()` - 402 Payment Required\n * `.forbiddenError()` - 403 Forbidden\n * `.notFoundError()` - 404 Not Found\n * `.methodNotAllowedError()` - 405 Method Not Allowed\n * `.notAcceptableError()` - 406 Not Acceptable\n * `.proxyAuthenticationRequiredError()` - 407 Proxy Authentication Required\n * `.requestTimeoutError()` - 408 Request Time-out\n * `.conflictError()` - 409 Conflict\n * `.goneError()` - 410 Gone\n * `.lengthRequiredError()` - 411 Length Required\n * `.preconditionFailedError()` - 412 Precondition Failed\n * `.requestEntityTooLargeError()` - 413 Request Entity Too Large\n * `.requesturiTooLargeError()` - 414 Request-URI Too Large\n * `.unsupportedMediaTypeError()` - 415 Unsupported Media Type\n * `.requestedRangeNotSatisfiableError()` - 416 Requested Range Not Satisfiable\n * `.expectationFailedError()` - 417 Expectation Failed\n * `.imATeapotError()` - 418 I'm a teapot\n * `.unprocessableEntityError()` - 422 Unprocessable Entity\n * `.lockedError()` - 423 Locked\n * `.failedDependencyError()` - 425 Unordered Collection\n * `.unorderedCollectionError()` - 425 Unordered Collection\n * `.upgradeRequiredError()` - 426 Upgrade Required\n * `.preconditionRequiredError()` - 428 Precondition Required\n * `.tooManyRequestsError()` - 429 Too Many Requests\n * `.requestHeaderFieldsTooLargeError()` - 431 Too Many Requests\n * `.internalServerError()` - 500 Internal Server Error\n * `.notImplementedError()` - 501 Not Implemented\n * `.badGatewayError()` - 502 Bad Gateway\n * `.serviceUnavailableError()` - 503 Service Unavailable\n * `.gatewayTimeoutError()` - 504 Gateway Time-out\n * `.httpVersionNotSupportedError()` - 505 HTTP Version Not Supported\n * `.variantAlsoNegotiatesError()` - 506 Variant Also Negotiates\n * `.insufficientStorageError()` - 507 Insufficient Storage\n * `.bandwidthLimitExceededError()` - 509 Bandwidth Limit Exceeded\n * `.networkAuthenticationRequiredError()` - 511 Network Authentication Required\n * `.badDigestError()` - 400 Bad Request\n * `.badMethodError()` - 400 Bad Request\n * `.internalError()` - 500 Internal Server Error\n * `.invalidArgumentError()` - 409 Conflict\n * `.invalidContentError()` - 400 Bad Request\n * `.invalidCredentialsError()` - 401 Unauthorized\n * `.invalidHeaderError()` - 400 Bad Request\n * `.invalidVersionError()` - 400 Bad Request\n * `.missingParameterError()` - 409 Conflict\n * `.notAuthorizedError()` - 403 Forbidden\n * `.requestExpiredError()` - 400 Bad Request\n * `.requestThrottledError()` - 429 Too Many Requests\n * `.resourceNotFoundError()` - 404 Not Found\n * `.wrongAcceptError()` - 406 Not Acceptable\n * `.validationError()` - 400 Bad Request\n\n\n## License \n\nThe MIT License (MIT)\n\nCopyright (c) 2016 - Amedia Utvikling\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n","starsCount":1,"created":"2016-04-18T11:58:25.740Z","modified":"2017-05-22T09:12:01.301Z","lastPublisher":{"name":"trygve","email":"post@trygve-lie.com"},"owners":[{"email":"post@trygve-lie.com","name":"trygve"},{"email":"accounts@lister.api.no","name":"amediautvikling"}],"other":{"_attachments":{},"_from":".","_id":"error-obj","_nodeVersion":"6.2.2","_npmOperationalInternal":{"host":"packages-16-east.internal.npmjs.com","tmp":"tmp/error-obj-2.0.0.tgz_1468250068685_0.6983870116528124"},"_npmUser":{"name":"trygve","email":"post@trygve-lie.com"},"_npmVersion":"3.9.5","_rev":"3-9d502e6f63a4e97b2b6b0c92b5aab2ae","_shasum":"1c839c16d93b23334eea812cc3edfa27e19c9bcd","author":{"name":"Amedia Utvikling"},"bugs":{"url":"https://github.com/amedia/javascript-modules/issues"},"directories":{},"dist-tags":{"latest":"2.0.0"},"dist":{"shasum":"1c839c16d93b23334eea812cc3edfa27e19c9bcd","tarball":"http://registry.npmjs.org/error-obj/-/error-obj-2.0.0.tgz"},"maintainers":[{"email":"post@trygve-lie.com","name":"trygve"},{"email":"accounts@lister.api.no","name":"amediautvikling"}],"readmeFilename":"README.md","time":{"modified":"2017-05-22T09:12:01.301Z","created":"2016-04-18T11:58:25.740Z","1.0.0":"2016-04-18T11:58:25.740Z","1.1.0":"2016-04-27T12:48:20.582Z","1.2.0":"2016-06-17T13:50:28.642Z","2.0.0":"2016-07-11T15:14:30.158Z"},"users":{"cmtegner":true}}}