{"name":"http-responses","version":"0.0.5","description":"Middleware for standardizing the way you send HTTP response statuses.","main":"index.js","scripts":{"test":"echo \"Error: no test specified\" && exit 1"},"repository":"https://github.com/Nijikokun/http-responses","keywords":["express","middleware","connect","responses","response","http","methods","handler","helpers","responder","codes","status","redirect"],"license":"MIT","homepage":"https://github.com/Nijikokun/http-responses","dependencies":{"js2xmlparser":"^0.1.5"},"devDependencies":{"mocha":"^2.0.1","should":"^4.3.0"},"gitHead":"f33f01c69ba720773adaba6d1b596f2b973f5189","versions":[{"number":"0.0.1","date":"2014-11-13T03:05:33.397Z"},{"number":"0.0.1-1","date":"2014-11-13T03:11:25.385Z"},{"number":"0.0.2","date":"2014-11-13T03:37:20.257Z"},{"number":"0.0.4","date":"2014-11-17T23:18:04.327Z"},{"number":"0.0.5","date":"2015-05-29T00:18:17.685Z"}],"readme":"# http-responses\n\n[![NPM Version][npm-image]][npm-url]\n[![NPM Download][downloads-image]][downloads-url]\n\nMiddleware for standardizing the way you send HTTP response statuses.\n\nPrevents inconsistencies in your code by standardizing the way you handle sending HTTP response statuses and bodies.\n\n###### Without http-responses\n\n```js\nres.status(401)\nres.send(401, body)\nres.json(401, body)\nnext({ status: 401, message: body })\nnext({ code: 401, message: body })\nnext(401)\n```\n\n###### With http-responses\n\n```js\n// WWW Response\nreturn next(new res.Unauthorized(body))\n\n// API response\nreturn next(new res.Unauthorized({\n  body: body\n});\n```\n\n## Install\n\n```sh\n$ npm install http-responses\n```\n\nExpress.js, before routing\n\n```js\napp.use(require('http-responses'))\n```\n\n## Usage Example\n\nSemi-real world example, fetching specific user w/ identifier key for an API.\n\n```js\napp.use('/:id', function (req, res, next) {\n  if (!req.param('id', false)) {\n    return next(new res.Conflict({\n      body: 'Id is required.'\n    }));\n  }\n\n  User.find({ _id: req.param('id') }).then(function (user) {\n    if (user) {\n      return res.ok('User', user.toJSON(), true);\n    }\n\n    return next(new res.NotFound({\n      body: 'User does not exist'\n    }));\n  }).then(function (err) {\n    if (err) {\n      next(new res.InternalServerError({\n        body: err.message\n      }));\n    }\n  });\n});\n```\n\n## Express Error Handler\n\nHandling errors in express should be done the correct way by defining a middleware that contains an arity of four by including the error argument after your routing has been done. By doing this, anything passed through the next argument will be sent here and we can determine what to do from there, here is a generic example of supporting both API / WWW errors.\n\n```js\nvar xml = require('js2xmlparser');\n\napp.use(function (err, req, res, next) {\n  res.status(err.status);\n\n  if (typeof err.message === 'object') {\n    return res.format({\n      json: function () {\n        res.json({\n          code: err.code,\n          message: err.message.body\n        })\n      },\n\n      html: function () {\n        res.set('Content-Type', 'application/xml').send(\n          xml(err.message.type || 'ApiError', {\n            code: err.code,\n            message: err.message.text\n          })\n        );\n      }\n    });\n  }\n\n  res.format({\n    json: function () {\n      res.json({\n        code: err.code,\n        message: err.message\n      });\n    },\n\n    html: function () {\n      res.render('error/index', {\n        status: err.status,\n        code: err.code,\n        message: err.message\n      });\n    }\n  });\n});\n```\n\n## Api\n\n### Informational Methods\n\n- 100: `res.Continue()`\n- 101: `res.SwitchingProtocols(String protocols)`\n- 102: `res.Processing()`\n\n### Success Methods\n\n- 200: `res.ok(String view, Mixed body, Boolean api)`\n\n  `view` (**WWW**: `partials/user/profile` / **API**: `\"User\"`)\n  >  WWW view path / API XML object type.\n  >  \n  > Can be omitted when `api ` is `false`,\n  > HTML requests will return `text/plain` body as no view is\n  > declared.\n\n  `body` (`user.toJSON()`)\n  >  Response body, here we retrieve the user json output\n\n  `api` (`true`)\n  >  Determines whether view is an HTML template path or\n  >  an XML object property `<User></User>`\n\n  You can also pass a method that will be invoked if you\n  want to resolve formats yourself:\n\n  ```js\n    res.ok(function () {\n      res.json(user.toJSON());\n    })\n  ```\n\n- 204: `res.NoContent()`\n\n### Redirect Methods\n\n- 300: `res.redirect` - native express method.\n- 301: `res.MovedPermanently(location)`\n- 302: `res.Found(location)`\n- 307: `res.TemporaryRedirect(location)`\n- 308: `res.PermanentRedirect(location)`\n\n### Error Methods\n\n**Properties**\n\n`code` - optional, sub status-code (iis style); defaults to status code.\n\n`message` - required, mixed type can be string, object, number, date, etc...\n\n**Methods**\n\n- 400: `new res.BadRequest([code, ]message)`\n- 401: `new res.Unauthorized([code, ]message)`\n- 402: `new res.PaymentRequired([code, ]message)`\n- 403: `new res.Forbidden([code, ]message)`\n- 404: `new res.NotFound([code, ]message)`\n- 405: `new res.MethodNotAllowed([code, ]message)`\n- 406: `new res.NotAcceptable([code, ]message)`\n- 407: `new res.ProxyAuthenticationRequired([code, ]message)`\n- 408: `new res.RequestTimeout([code, ]message)`\n- 409: `new res.Conflict([code, ]message)`\n- 411: `new res.LengthRequired([code, ]message)`\n- 412: `new res.PreconditionFailed([code, ]message)`\n- 413: `new res.PayloadTooLarge([code, ]message)`\n- 414: `new res.URITooLong([code, ]message)`\n- 415: `new res.UnsupportedMediaType([code, ]message)`\n- 416: `new res.RangeNotSatisfied([code, ]message)`\n- 417: `new res.ExpectationFailed([code, ]message)`\n- 418: `new res.ImATeapot([code, ]message)`\n- 423: `new res.Locked([code, ]message)`\n- 428: `new res.PreconditionRequired([code, ]message)`\n- 429: `new res.TooManyRequests([code, ]message)`\n- 500: `new res.InternalServerError([code, ]message)`\n- 501: `new res.NotImplemented([code, ]message)`\n- 502: `new res.BadGateway([code, ]message)`\n- 503: `new res.ServiceUnavailable([code, ]message)`\n- 504: `new res.GatewayTimeout([code, ]message)`\n- 505: `new res.HTTPVersionNotSupported([code, ]message)`\n- 507: `new res.InsufficientStorage([code, ]message)`\n- 508: `new res.LoopDetected([code, ]message)`\n- 510: `new res.NotExtended([code, ]message)`\n- 511: `new res.NetworkAuthenticationRequired([code, ]message)`\n\n**Special Methods**\n\n- 426: `res.UpgradeRequired(String protocols,[code, ]message)`\n\n\n## Supported Frameworks\n\n- [Express][express-url]\n- [Connect][connect-url]\n\n## License\n\n[MIT](LICENSE)\n\n[npm-image]: https://img.shields.io/npm/v/http-responses.svg?style=flat\n[npm-url]: https://npmjs.org/package/http-responses\n[travis-image]: https://img.shields.io/travis/Nijikokun/http-responses.svg?style=flat\n[travis-url]: https://travis-ci.org/Nijikokun/http-responses\n[coveralls-image]: https://img.shields.io/coveralls/Nijikokun/http-responses.svg?style=flat\n[coveralls-url]: https://coveralls.io/r/Nijikokun/http-responses?branch=master\n[downloads-image]: https://img.shields.io/npm/dm/http-statuses.svg?style=flat\n[downloads-url]: https://npmjs.org/package/http-responses\n[gratipay-image]: https://img.shields.io/gratipay/Nijikokun.svg?style=flat\n[gratipay-url]: https://www.gratipay.com/Nijikokun/\n[express-url]: https://expressjs.com\n[connect-url]: https://github.com/senchalabs/connect\n","created":"2014-11-13T03:05:33.397Z","modified":"2015-05-29T00:18:17.685Z","lastPublisher":{"name":"nijikokun","email":"nijikokun@gmail.com"},"owners":[{"name":"nijikokun","email":"nijikokun@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"http-responses","_nodeVersion":"0.12.3","_npmUser":{"name":"nijikokun","email":"nijikokun@gmail.com"},"_npmVersion":"2.9.1","_rev":"1-d691b44f88ca575ab260b309d2334ec6","_shasum":"715b1cea5914ba7f34c936b2403f73c673ca73bd","author":{"name":"Nijiko Yonskai","email":"nijikokun@gmail.com"},"bugs":{"url":"https://github.com/Nijikokun/http-responses/issues"},"directories":{},"dist-tags":{"latest":"0.0.5"},"dist":{"shasum":"715b1cea5914ba7f34c936b2403f73c673ca73bd","tarball":"http://registry.npmjs.org/http-responses/-/http-responses-0.0.5.tgz"},"maintainers":[{"name":"nijikokun","email":"nijikokun@gmail.com"}],"readmeFilename":"README.md","time":{"modified":"2015-05-29T00:18:17.685Z","created":"2014-11-13T03:05:33.397Z","0.0.1":"2014-11-13T03:05:33.397Z","0.0.1-1":"2014-11-13T03:11:25.385Z","0.0.2":"2014-11-13T03:37:20.257Z","0.0.4":"2014-11-17T23:18:04.327Z","0.0.5":"2015-05-29T00:18:17.685Z"}}}