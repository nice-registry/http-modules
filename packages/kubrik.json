{"name":"kubrik","version":"0.1.1","description":"HTTP Router for Mojo.js","main":"./lib/index.js","scripts":{"preinstall":"npm config set ca=''","test":"mocha --ui tdd"},"repository":"https://github.com/classdojo/mojo-router","keywords":["mojo-plugin","router"],"license":"BSD","testling":{"files":["./node_modules/es5-shim/es5-shim.js","./node_modules/es5-shim/es5-sham.js","test/*-test.js"],"harness":"mocha-tdd","browsers":["ie/7..latest","firefox/3.5","firefox/latest","chrome/latest","safari/latest","opera/latest"]},"dependencies":{"protoclass":"0.0.x","bindable":"0.5.x","mocha":"1.15.1","underscore":"1.6.0","async":"0.7.x","comerr":"0.0.x","toarray":"0.0.1","mediocre":"0.0.x","hasher":"1.2.0"},"devDependencies":{"expect.js":"0.3.1","sinon":"1.9.1","istanbul":"0.2.7","testling":"1.6.1","es5-shim":"3.0.2"},"homepage":"https://github.com/classdojo/mojo-router","versions":[{"number":"0.0.1","date":"2014-04-18T20:02:03.873Z"},{"number":"0.0.2","date":"2014-04-18T21:14:05.699Z"},{"number":"0.0.4","date":"2014-04-18T22:50:37.005Z"},{"number":"0.0.5","date":"2014-04-18T22:56:54.170Z"},{"number":"0.0.6","date":"2014-04-21T23:02:56.741Z"},{"number":"0.0.7","date":"2014-04-28T17:29:45.035Z"},{"number":"0.0.8","date":"2014-04-28T21:25:54.419Z"},{"number":"0.0.9","date":"2014-04-29T19:01:54.045Z"},{"number":"0.0.10","date":"2014-04-29T19:02:08.797Z"},{"number":"0.0.11","date":"2014-05-07T23:01:37.749Z"},{"number":"0.0.12","date":"2014-05-15T22:03:26.804Z"},{"number":"0.0.13","date":"2014-05-29T19:58:38.074Z"},{"number":"0.0.14","date":"2014-05-29T20:26:40.316Z"},{"number":"0.0.15","date":"2014-06-02T19:22:10.034Z"},{"number":"0.1.0","date":"2014-06-09T22:43:48.694Z"},{"number":"0.1.1","date":"2014-07-16T06:00:15.391Z"}],"readme":"Kubrik HTTP Router [![Alt ci](https://travis-ci.org/classdojo/kubrik.png)](https://travis-ci.org/classdojo/mojo-router)\n\n[![Testling](https://ci.testling.com/classdojo/kubrik.js.png)](https://ci.testling.com/classdojo/kubrik.js)\n\nKubrik is a flexible routing system inspired by [express](http://expressjs.com/), and [director](https://github.com/flatiron/director). It's built specifically\nfor the browser, but it can also be used for other platforms such as node, or any mobile platform.\n\n### Features\n\n- enter & exit handlers\n- parameter handlers\n- nested routes\n- naming routes\n\n### Example\n\n```javascript\nvar router = require(\"kubrick\")();\n\nfunction auth (location, next) {\n  // authenticate here\n}\n\nrouter.param(\"classroom\", function (location, next) {\n  // load classroom\n  next(null, classroom);\n});  \n\nrouter.add({\n  enter: auth,\n  \"/classes/:classroom\": {\n    \"/reports\": {\n      enter: function (location, next) {\n        // do stuff with route\n      }\n    }\n  }\n});\n\nrouter.redirect(\"/classes/classid/reports\", function (err, location) {\n  console.log(location.get(\"params.classroom\")); // classroom model\n  console.log(location.get(\"pathname\")); // /classes/classid/reports\n  console.log(location.get(\"url\")); // same as pathname, but also includes query params\n});\n```\n\n#### Entering Routes\n\nCalled when a route is entered.\n\n```javascript\nrouter.add({\n  \"/home\": {\n    enter: function (location, next) {\n      // do stuff\n      next(); // continue\n    }\n  }\n});\n\nrouter.redirect(\"/home\", function (err, location) {\n\n});\n```\n\nYou can also specify multiple enter handlers:\n\n```javascript\nrouter.add({\n  \"/home\": {\n    enter: [auth, function (location, next) {\n      // do stuff\n      next(); // continue\n    }]\n  }\n});\n```\n\n## API\n\n\n#### Exiting Routes\n\nUseful if you want to teardown a route before entering another.\n\n```javascript\nrouter.add({\n  \"/contact\": {\n    exit: function (location, next) {\n      next();\n    },\n    enter: function (location, next) {\n      next();\n    }\n  },\n  \"/home\": {\n    enter: function (location, next) {\n      next(); // continue\n    }\n  }\n});\n\nrouter.redirect(\"/contact\");\nrouter.redirect(\"/home\"); // exit handler called\n```\n\nJust like enter handlers, you can specify multiple exit handlers\n\n#### Route States\n\nStates are properties set by the router which may modify your application state. This is used specifically in mojo.js.\n\n```javascript\nrouter.add({\n  \"/classes/:classroom\": {\n    states: { app: \"classes\" },\n    \"/reports\": {\n      states: { classes: \"reports\" }\n    }\n  }\n});\n\nrouter.bind(\"location.states\", function (states) {\n  // { app: \"classes\", classes: \"reports\" }\n});\n\nrouter.redirect(\"/classes/classid/reports\");\n```\n\n#### Parameters\n\nJust like express.js, you have the ability to create parameter loaders.\n\n```javascript\nrouter.param(\"classroom\", function (location, next) {\n  console.log(\"location.params.classroom\"); // classid\n  next(null, classroomModel);\n});\n\nrouter.add({\n  \"/classes/:classroom\": {}\n});\n\nrouter.redirect(\"/classes/classid\", function (err, location) {\n  console.log(location.get(\"params.classroom\")); // classroomModel\n})\n```\n\n#### Naming Routes\n\n```javascript\nrouter.add({\n  \"/classes/:classroom\": {\n    name: \"classroom\"\n  }\n});\n\nrouter.redirect(\"classroom\", {\n  params: {\n    classroom: \"classid\"\n  }\n}, function (err, location) {\n\n});\n```\n\n### listeners\n\nKubrick comes with an HTTP listener by default, which is loaded automatically in the browser.\n\n#### router.redirect(pathnameOrRouteName[, options], complete)\n\n- `pathnameOrRouteName` - pathname or route name to redirect to\n- `options` - route name options\n  - `query` - route query\n  - `params` - route params\n- `complete` - called when redirected\n\n#### router.add(routes)\n\nadds new routes to the router\n\n#### router.use(plugins...)\n\nadds plugins to the router\n\n#### router.location\n\nThe current location of the router\n\n```javascript\nrouter.bind(\"location\", function () {\n  // called whenever the location changes\n});\n```\n\n#### Routes router.routes\n\nRoutes property\n\n#### routes.find(query)\n\nFinds a route based on the query.\n\n```javascript\nrouter.add({\n  \"/home\": {\n    name: \"homeRoute\"\n  }\n});\n\nconsole.log(router.routes.find({ pathname: \"/home\" })); // /home route\nconsole.log(router.routes.find({ pathname: \"homeRoutek \" })); // /home route\n```\n\n#### location.query\n\nquery parameters on the location. Note that if the query changes, those changes will also be reflected in the HTTP url.\n\n```javascript\nrouter.bind(\"location\", function (err, location) {\n  console.log(location.get(\"query.hello\")); // blah\n  location.set(\"query.hello\", \"world\"); // gets reflected in the HTTP url\n});\n\nrouter.redirect(\"/home?hello=blah\");\n```\n\n#### location.params\n\nsimilar to `location.query`. `location.params` are taken from the route parameters.\n\n#### location.url\n\npathname + query params.\n\n```javascript\nrouter.bind(\"location\", function (err, location) {\n  console.log(location.get(\"url\")); // /home?hello=blah\n});\n\nrouter.redirect(\"/home?hello=blah\");\n```\n\n#### location.pathname\n\njust the pathname of the location\n\n#### location.equals(location)\n\nreturns TRUE of the both locations are the same\n\n#### location.redirect(pathname, options)\n\nredirects the location\n\n## Mojo.js Usage\n\nbasic usage:\n\n```javascript\nvar mojo = require(\"mojojs\"),\napp = new mojo.Application();\napp.use(require(\"kubrik\"));\n\napp.router.add({\n  \"/home\": { }\n});\n```\n","created":"2014-04-18T20:02:03.873Z","modified":"2016-02-01T20:47:00.398Z","lastPublisher":{"name":"architectd","email":"craig.j.condon@gmail.com"},"owners":[{"name":"architectd","email":"craig.j.condon@gmail.com"},{"name":"crcn","email":"craig.j.condon@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"kubrik","_npmUser":{"name":"architectd","email":"craig.j.condon@gmail.com"},"_npmVersion":"1.4.3","_rev":"1-0a66ce597b213bf38394337c082e3086","author":"","bugs":{"url":"https://github.com/classdojo/mojo-router/issues"},"directories":{},"dist-tags":{"latest":"0.1.1"},"dist":{"shasum":"57f02681b7b240ab7c9b9e04c72eb7ba7c2ca13e","tarball":"http://registry.npmjs.org/kubrik/-/kubrik-0.1.1.tgz"},"maintainers":[{"name":"architectd","email":"craig.j.condon@gmail.com"},{"name":"crcn","email":"craig.j.condon@gmail.com"}],"readmeFilename":"README.md","time":{"modified":"2016-02-01T20:47:00.398Z","created":"2014-04-18T20:02:03.873Z","0.0.1":"2014-04-18T20:02:03.873Z","0.0.2":"2014-04-18T21:14:05.699Z","0.0.4":"2014-04-18T22:50:37.005Z","0.0.5":"2014-04-18T22:56:54.170Z","0.0.6":"2014-04-21T23:02:56.741Z","0.0.7":"2014-04-28T17:29:45.035Z","0.0.8":"2014-04-28T21:25:54.419Z","0.0.9":"2014-04-29T19:01:54.045Z","0.0.10":"2014-04-29T19:02:08.797Z","0.0.11":"2014-05-07T23:01:37.749Z","0.0.12":"2014-05-15T22:03:26.804Z","0.0.13":"2014-05-29T19:58:38.074Z","0.0.14":"2014-05-29T20:26:40.316Z","0.0.15":"2014-06-02T19:22:10.034Z","0.1.0":"2014-06-09T22:43:48.694Z","0.1.1":"2014-07-16T06:00:15.391Z"}}}