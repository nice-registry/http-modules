{"name":"level-connect","version":"0.8.0","description":"Connect to a multi handle sublevel enabled db over http","main":"index.js","bin":{"connect":"bin/connect"},"scripts":{"test":"echo \"Error: no test specified\" && exit 1","prepublish":"npm run build","clean":"rm -rf lib && mkdir lib","prebuild":"npm run clean","build":"babel src --out-dir lib","watch":"babel src --out-dir lib --watch","reload":"DEBUG=true supervisor -w lib -n exit -t true -- bin/connect | bunyan -o short","predev":"npm run build","dev":"( npm run watch & npm run reload)","prestart":"npm run build","start":"bin/connect | bunyan -o short"},"babel":{"presets":["node5"]},"repository":"https://github.com/mattstyles/level-connect","homepage":"https://github.com/mattstyles/level-connect","keywords":["leveldb","level","http","level-party","level-sublevel","sublevel","party"],"engines":{"node":">=5.0.0"},"license":"MIT","dependencies":{"JSONStream":"^1.1.1","co-body":"^4.0.0","koa":"^2.0.0-alpha.3","koa-bunyan-log":"^2.0.1","koa-router":"^7.0.1","level-errors":"^1.0.4","level-party":"^3.0.4","level-sublevel":"^6.5.4","node-uuid":"^1.4.7","then-levelup":"github:mattstyles/then-levelup"},"devDependencies":{"babel-cli":"^6.6.5","babel-preset-node5":"^10.9.0","bunyan":"^1.7.1","supervisor":"^0.9.1"},"gitHead":"080b882010635a10b8f121810b0638dae809d91a","versions":[{"number":"0.0.1","date":"2015-07-18T09:15:32.525Z"},{"number":"0.1.0","date":"2015-07-20T13:40:58.252Z"},{"number":"0.2.0","date":"2015-07-20T21:52:51.397Z"},{"number":"0.3.0","date":"2015-07-21T08:33:08.458Z"},{"number":"0.4.0","date":"2015-07-21T10:19:55.329Z"},{"number":"0.5.0","date":"2015-07-22T09:36:16.421Z"},{"number":"0.6.0","date":"2015-08-19T14:44:02.465Z"},{"number":"0.6.1","date":"2015-08-19T15:36:26.319Z"},{"number":"0.7.0","date":"2015-09-13T21:30:05.414Z"},{"number":"0.8.0","date":"2016-03-16T22:11:11.640Z"}],"readme":"\n# level-connect\n\n> Connect to a multi handle sublevel enabled leveldb over http\n\n## Getting Started\n\nLevel-connect doesnâ€™t really care whether it is global or not, but the easiest way (although probably least useful) to get started is to install it globally\n\n```sh\nnpm i -g level-connect\n```\n\nControl the server instance with environment variables and fire it up\n\n```sh\n$ CONNECT_PORT=5000 connect\n```\n\nLogs use [bunyan](https://github.com/trentm/node-bunyan) so any of the tooling should let you inspect the logs.\n\n## Party party\n\nThe underlying db is a [level-party](https://www.npmjs.com/package/level-party) instance, although it is also [sublevelled](https://www.npmjs.com/package/level-sublevel). This means you can access the db from multiple processes, all on different ports.\n\n```sh\n$ CONNECT_PORT=5000 ./bin/connect\n```\n\n```sh\n$ CONNECT_PORT=5001 ./bin/connect\n```\n\n```sh\n$ curl -X POST \\\n  -H 'X-LEVEL-CONNECT: <client_id>' \\\n  -H 'Content-Type: application/json' \\\n  -d '{\"foo\":\"bar\"}' \\\n  localhost:5000/users/foo\n\n> 201 {\"body\":\"ok\"}\n\n$ curl -X GET \\\n  -H 'X-LEVEL-CONNECT: <client_id>' \\\n  localhost:5001/users/foo\n\n> 200 {\"foo\":\"bar\"}\n\n$ curl -X DELETE \\\n  -H 'X-LEVEL-CONNECT: <client_id>' \\\n  localhost:5001/users/foo\n\n> 200 {\"body\":\"ok\"}\n\n$ curl -X GET \\\n  -H 'X-LEVEL-CONNECT: <client_id>' \\\n  localhost:5001/users/foo\n\n> 404 {\"foo\":\"bar\"}\n\n```\n\n\n## API\n\nControl the server instance with environment variables\n\n### CONNECT_PORT <Integer>\n\n_default_ `5000`\n\nThe port to attach to\n\n### CONNECT_PATH <String>\n\n_default_ `HOME/.level-connect.lev`\n\nThe path to the db to connect to\n\n### DEBUG <Boolean>\n\n_default_ `false`\n\nIf true will whack out some extra logs\n\n\n## HTTP API\n\n### Negotiating the handshake\n\nLevel-connect implements a fairly crude token based authentication model using custom headers. To grab a new token use `/new`\n\n### POST /new\n\n```sh\n$ curl -i -X POST -H 'X-LEVEL-CONNECT: new' host:port/new\n\n201\n{\"id\":\"ID-STRING\"}\n```\n\nThe id token should be used in the `X-LEVEL-CONNECT` header for all subsequent requests.\n\nTokens stay fresh for 3 days and are refreshed with each use.\n\n### POST /:sublevel/:key\n\nPuts a single value into a specific sublevel at key\n\n```sh\n$ curl -i -X POST \\\n  -H 'X-LEVEL-CONNECT: <id>' \\\n  -H 'Content-Type: application/json' \\\n  -d '{\"name\":\"Josh\",\"scopes\":\"user\"}'\n  host:port/users/josh\n\n201\n{\"body\":\"OK\"}\n```\n\n### GET /:sublevel/:key\n\nGrabs a single value from sublevel at key\n\n```sh\n$ curl -i -X GET \\\n  -H 'X-LEVEL-CONNECT: <id>' \\\n  host:port/users/josh\n\n200\n{\"name\":\"Josh\",\"scopes\":\"user\"}\n```\n\n### DELETE /:sublevel/:key\n\nDeletes a single value from sublevel at key\n\n```sh\n$ curl -i -X DELETE \\\n  -H 'X-LEVEL-CONNECT: <id>' \\\n  host:port/users/josh\n\n204\n```\n\n### POST /:sublevel\n\nBatches many values to the sublevel\n\n```sh\n$ curl -i -X POST \\\n  -H 'X-LEVEL-CONNECT: <id>' \\\n  -H 'Content-Type: application/json' \\\n  -d '[{\"name\":\"Josh\",\"scopes\":\"user\"},{\"name\":\"Jane\",\"scopes\":\"admin\"}]'\n  host:port/users\n\n201\n{\"body\":\"OK\"}\n```\n\n### GET /:sublevel\n\nStreams many values from the sublevel\n\n```sh\n$ curl -i -X GET \\\n  -H 'X-LEVEL-CONNECT: <id>' \\\n  host:port/users\n\n200\n{\"name\":\"Josh\",\"scopes\":\"user\"}\n{\"name\":\"Jane\",\"scopes\":\"admin\"}\n```\n","created":"2015-07-18T09:15:32.525Z","modified":"2016-03-16T22:11:11.640Z","lastPublisher":{"name":"mattstyles","email":"matt@veryfizzyjelly.com"},"owners":[{"name":"mattstyles","email":"matt@veryfizzyjelly.com"}],"other":{"_attachments":{},"_from":".","_id":"level-connect","_nodeVersion":"5.8.0","_npmOperationalInternal":{"host":"packages-13-west.internal.npmjs.com","tmp":"tmp/level-connect-0.8.0.tgz_1458166269328_0.3963079946115613"},"_npmUser":{"name":"mattstyles","email":"matt@veryfizzyjelly.com"},"_npmVersion":"3.7.3","_rev":"1-f74909e913209a9c2187694c770f76f1","_shasum":"f8f245cecd3769f648a0a5953f58fd5d0fc36320","author":{"name":"Matt Styles","email":"matt@veryfizzyjelly.com","url":"http://veryfizzyjelly.com"},"bugs":{"url":"https://github.com/mattstyles/level-connect/issues"},"directories":{},"dist-tags":{"latest":"0.8.0"},"dist":{"shasum":"f8f245cecd3769f648a0a5953f58fd5d0fc36320","tarball":"http://registry.npmjs.org/level-connect/-/level-connect-0.8.0.tgz"},"maintainers":[{"name":"mattstyles","email":"matt@veryfizzyjelly.com"}],"readmeFilename":"README.md","time":{"modified":"2016-03-16T22:11:11.640Z","created":"2015-07-18T09:15:32.525Z","0.0.1":"2015-07-18T09:15:32.525Z","0.1.0":"2015-07-20T13:40:58.252Z","0.2.0":"2015-07-20T21:52:51.397Z","0.3.0":"2015-07-21T08:33:08.458Z","0.4.0":"2015-07-21T10:19:55.329Z","0.5.0":"2015-07-22T09:36:16.421Z","0.6.0":"2015-08-19T14:44:02.465Z","0.6.1":"2015-08-19T15:36:26.319Z","0.7.0":"2015-09-13T21:30:05.414Z","0.8.0":"2016-03-16T22:11:11.640Z"}}}